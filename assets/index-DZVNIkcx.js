(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();var xn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Rr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var uh={exports:{}},Ya={},dh={exports:{}},Re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xs=Symbol.for("react.element"),k0=Symbol.for("react.portal"),E0=Symbol.for("react.fragment"),N0=Symbol.for("react.strict_mode"),S0=Symbol.for("react.profiler"),I0=Symbol.for("react.provider"),A0=Symbol.for("react.context"),C0=Symbol.for("react.forward_ref"),j0=Symbol.for("react.suspense"),T0=Symbol.for("react.memo"),R0=Symbol.for("react.lazy"),Cf=Symbol.iterator;function D0(e){return e===null||typeof e!="object"?null:(e=Cf&&e[Cf]||e["@@iterator"],typeof e=="function"?e:null)}var fh={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ph=Object.assign,mh={};function Dr(e,t,n){this.props=e,this.context=t,this.refs=mh,this.updater=n||fh}Dr.prototype.isReactComponent={};Dr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Dr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function hh(){}hh.prototype=Dr.prototype;function Xu(e,t,n){this.props=e,this.context=t,this.refs=mh,this.updater=n||fh}var Zu=Xu.prototype=new hh;Zu.constructor=Xu;ph(Zu,Dr.prototype);Zu.isPureReactComponent=!0;var jf=Array.isArray,gh=Object.prototype.hasOwnProperty,Qu={current:null},yh={key:!0,ref:!0,__self:!0,__source:!0};function wh(e,t,n){var i,r={},s=null,o=null;if(t!=null)for(i in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)gh.call(t,i)&&!yh.hasOwnProperty(i)&&(r[i]=t[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var c=Array(a),u=0;u<a;u++)c[u]=arguments[u+2];r.children=c}if(e&&e.defaultProps)for(i in a=e.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:Xs,type:e,key:s,ref:o,props:r,_owner:Qu.current}}function M0(e,t){return{$$typeof:Xs,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Ju(e){return typeof e=="object"&&e!==null&&e.$$typeof===Xs}function z0(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Tf=/\/+/g;function Cl(e,t){return typeof e=="object"&&e!==null&&e.key!=null?z0(""+e.key):t.toString(36)}function Uo(e,t,n,i,r){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Xs:case k0:o=!0}}if(o)return o=e,r=r(o),e=i===""?"."+Cl(o,0):i,jf(r)?(n="",e!=null&&(n=e.replace(Tf,"$&/")+"/"),Uo(r,t,n,"",function(u){return u})):r!=null&&(Ju(r)&&(r=M0(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(Tf,"$&/")+"/")+e)),t.push(r)),1;if(o=0,i=i===""?".":i+":",jf(e))for(var a=0;a<e.length;a++){s=e[a];var c=i+Cl(s,a);o+=Uo(s,t,n,c,r)}else if(c=D0(e),typeof c=="function")for(e=c.call(e),a=0;!(s=e.next()).done;)s=s.value,c=i+Cl(s,a++),o+=Uo(s,t,n,c,r);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function uo(e,t,n){if(e==null)return e;var i=[],r=0;return Uo(e,i,"","",function(s){return t.call(n,s,r++)}),i}function F0(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var bt={current:null},Ho={transition:null},P0={ReactCurrentDispatcher:bt,ReactCurrentBatchConfig:Ho,ReactCurrentOwner:Qu};function vh(){throw Error("act(...) is not supported in production builds of React.")}Re.Children={map:uo,forEach:function(e,t,n){uo(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return uo(e,function(){t++}),t},toArray:function(e){return uo(e,function(t){return t})||[]},only:function(e){if(!Ju(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Re.Component=Dr;Re.Fragment=E0;Re.Profiler=S0;Re.PureComponent=Xu;Re.StrictMode=N0;Re.Suspense=j0;Re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P0;Re.act=vh;Re.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=ph({},e.props),r=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=Qu.current),t.key!==void 0&&(r=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(c in t)gh.call(t,c)&&!yh.hasOwnProperty(c)&&(i[c]=t[c]===void 0&&a!==void 0?a[c]:t[c])}var c=arguments.length-2;if(c===1)i.children=n;else if(1<c){a=Array(c);for(var u=0;u<c;u++)a[u]=arguments[u+2];i.children=a}return{$$typeof:Xs,type:e.type,key:r,ref:s,props:i,_owner:o}};Re.createContext=function(e){return e={$$typeof:A0,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:I0,_context:e},e.Consumer=e};Re.createElement=wh;Re.createFactory=function(e){var t=wh.bind(null,e);return t.type=e,t};Re.createRef=function(){return{current:null}};Re.forwardRef=function(e){return{$$typeof:C0,render:e}};Re.isValidElement=Ju;Re.lazy=function(e){return{$$typeof:R0,_payload:{_status:-1,_result:e},_init:F0}};Re.memo=function(e,t){return{$$typeof:T0,type:e,compare:t===void 0?null:t}};Re.startTransition=function(e){var t=Ho.transition;Ho.transition={};try{e()}finally{Ho.transition=t}};Re.unstable_act=vh;Re.useCallback=function(e,t){return bt.current.useCallback(e,t)};Re.useContext=function(e){return bt.current.useContext(e)};Re.useDebugValue=function(){};Re.useDeferredValue=function(e){return bt.current.useDeferredValue(e)};Re.useEffect=function(e,t){return bt.current.useEffect(e,t)};Re.useId=function(){return bt.current.useId()};Re.useImperativeHandle=function(e,t,n){return bt.current.useImperativeHandle(e,t,n)};Re.useInsertionEffect=function(e,t){return bt.current.useInsertionEffect(e,t)};Re.useLayoutEffect=function(e,t){return bt.current.useLayoutEffect(e,t)};Re.useMemo=function(e,t){return bt.current.useMemo(e,t)};Re.useReducer=function(e,t,n){return bt.current.useReducer(e,t,n)};Re.useRef=function(e){return bt.current.useRef(e)};Re.useState=function(e){return bt.current.useState(e)};Re.useSyncExternalStore=function(e,t,n){return bt.current.useSyncExternalStore(e,t,n)};Re.useTransition=function(){return bt.current.useTransition()};Re.version="18.3.1";dh.exports=Re;var k=dh.exports;const ie=Rr(k);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O0=k,B0=Symbol.for("react.element"),L0=Symbol.for("react.fragment"),U0=Object.prototype.hasOwnProperty,H0=O0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,$0={key:!0,ref:!0,__self:!0,__source:!0};function xh(e,t,n){var i,r={},s=null,o=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(i in t)U0.call(t,i)&&!$0.hasOwnProperty(i)&&(r[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps,t)r[i]===void 0&&(r[i]=t[i]);return{$$typeof:B0,type:e,key:s,ref:o,props:r,_owner:H0.current}}Ya.Fragment=L0;Ya.jsx=xh;Ya.jsxs=xh;uh.exports=Ya;var l=uh.exports,Sc={},_h={exports:{}},Pt={},bh={exports:{}},kh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(R,D){var U=R.length;R.push(D);e:for(;0<U;){var O=U-1>>>1,A=R[O];if(0<r(A,D))R[O]=D,R[U]=A,U=O;else break e}}function n(R){return R.length===0?null:R[0]}function i(R){if(R.length===0)return null;var D=R[0],U=R.pop();if(U!==D){R[0]=U;e:for(var O=0,A=R.length,Y=A>>>1;O<Y;){var G=2*(O+1)-1,Z=R[G],se=G+1,le=R[se];if(0>r(Z,U))se<A&&0>r(le,Z)?(R[O]=le,R[se]=U,O=se):(R[O]=Z,R[G]=U,O=G);else if(se<A&&0>r(le,U))R[O]=le,R[se]=U,O=se;else break e}}return D}function r(R,D){var U=R.sortIndex-D.sortIndex;return U!==0?U:R.id-D.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var c=[],u=[],d=1,f=null,p=3,m=!1,v=!1,g=!1,x=typeof setTimeout=="function"?setTimeout:null,h=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(R){for(var D=n(u);D!==null;){if(D.callback===null)i(u);else if(D.startTime<=R)i(u),D.sortIndex=D.expirationTime,t(c,D);else break;D=n(u)}}function b(R){if(g=!1,_(R),!v)if(n(c)!==null)v=!0,H(N);else{var D=n(u);D!==null&&W(b,D.startTime-R)}}function N(R,D){v=!1,g&&(g=!1,h(P),P=-1),m=!0;var U=p;try{for(_(D),f=n(c);f!==null&&(!(f.expirationTime>D)||R&&!$());){var O=f.callback;if(typeof O=="function"){f.callback=null,p=f.priorityLevel;var A=O(f.expirationTime<=D);D=e.unstable_now(),typeof A=="function"?f.callback=A:f===n(c)&&i(c),_(D)}else i(c);f=n(c)}if(f!==null)var Y=!0;else{var G=n(u);G!==null&&W(b,G.startTime-D),Y=!1}return Y}finally{f=null,p=U,m=!1}}var T=!1,C=null,P=-1,j=5,I=-1;function $(){return!(e.unstable_now()-I<j)}function S(){if(C!==null){var R=e.unstable_now();I=R;var D=!0;try{D=C(!0,R)}finally{D?F():(T=!1,C=null)}}else T=!1}var F;if(typeof y=="function")F=function(){y(S)};else if(typeof MessageChannel<"u"){var w=new MessageChannel,B=w.port2;w.port1.onmessage=S,F=function(){B.postMessage(null)}}else F=function(){x(S,0)};function H(R){C=R,T||(T=!0,F())}function W(R,D){P=x(function(){R(e.unstable_now())},D)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(R){R.callback=null},e.unstable_continueExecution=function(){v||m||(v=!0,H(N))},e.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<R?Math.floor(1e3/R):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(R){switch(p){case 1:case 2:case 3:var D=3;break;default:D=p}var U=p;p=D;try{return R()}finally{p=U}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(R,D){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var U=p;p=R;try{return D()}finally{p=U}},e.unstable_scheduleCallback=function(R,D,U){var O=e.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?O+U:O):U=O,R){case 1:var A=-1;break;case 2:A=250;break;case 5:A=1073741823;break;case 4:A=1e4;break;default:A=5e3}return A=U+A,R={id:d++,callback:D,priorityLevel:R,startTime:U,expirationTime:A,sortIndex:-1},U>O?(R.sortIndex=U,t(u,R),n(c)===null&&R===n(u)&&(g?(h(P),P=-1):g=!0,W(b,U-O))):(R.sortIndex=A,t(c,R),v||m||(v=!0,H(N))),R},e.unstable_shouldYield=$,e.unstable_wrapCallback=function(R){var D=p;return function(){var U=p;p=D;try{return R.apply(this,arguments)}finally{p=U}}}})(kh);bh.exports=kh;var W0=bh.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K0=k,zt=W0;function de(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Eh=new Set,vs={};function Fi(e,t){xr(e,t),xr(e+"Capture",t)}function xr(e,t){for(vs[e]=t,e=0;e<t.length;e++)Eh.add(t[e])}var Cn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ic=Object.prototype.hasOwnProperty,V0=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Rf={},Df={};function G0(e){return Ic.call(Df,e)?!0:Ic.call(Rf,e)?!1:V0.test(e)?Df[e]=!0:(Rf[e]=!0,!1)}function q0(e,t,n,i){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Y0(e,t,n,i){if(t===null||typeof t>"u"||q0(e,t,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function kt(e,t,n,i,r,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var ft={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ft[e]=new kt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ft[t]=new kt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ft[e]=new kt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ft[e]=new kt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ft[e]=new kt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ft[e]=new kt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ft[e]=new kt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ft[e]=new kt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ft[e]=new kt(e,5,!1,e.toLowerCase(),null,!1,!1)});var ed=/[\-:]([a-z])/g;function td(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(ed,td);ft[t]=new kt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(ed,td);ft[t]=new kt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(ed,td);ft[t]=new kt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ft[e]=new kt(e,1,!1,e.toLowerCase(),null,!1,!1)});ft.xlinkHref=new kt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ft[e]=new kt(e,1,!1,e.toLowerCase(),null,!0,!0)});function nd(e,t,n,i){var r=ft.hasOwnProperty(t)?ft[t]:null;(r!==null?r.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Y0(t,n,r,i)&&(n=null),i||r===null?G0(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=n===null?r.type===3?!1:"":n:(t=r.attributeName,i=r.attributeNamespace,n===null?e.removeAttribute(t):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}var Pn=K0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,fo=Symbol.for("react.element"),qi=Symbol.for("react.portal"),Yi=Symbol.for("react.fragment"),id=Symbol.for("react.strict_mode"),Ac=Symbol.for("react.profiler"),Nh=Symbol.for("react.provider"),Sh=Symbol.for("react.context"),rd=Symbol.for("react.forward_ref"),Cc=Symbol.for("react.suspense"),jc=Symbol.for("react.suspense_list"),sd=Symbol.for("react.memo"),Un=Symbol.for("react.lazy"),Ih=Symbol.for("react.offscreen"),Mf=Symbol.iterator;function Or(e){return e===null||typeof e!="object"?null:(e=Mf&&e[Mf]||e["@@iterator"],typeof e=="function"?e:null)}var Xe=Object.assign,jl;function Jr(e){if(jl===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);jl=t&&t[1]||""}return`
`+jl+e}var Tl=!1;function Rl(e,t){if(!e||Tl)return"";Tl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var i=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){i=u}e.call(t.prototype)}else{try{throw Error()}catch(u){i=u}e()}}catch(u){if(u&&i&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var c=`
`+r[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=a);break}}}finally{Tl=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Jr(e):""}function X0(e){switch(e.tag){case 5:return Jr(e.type);case 16:return Jr("Lazy");case 13:return Jr("Suspense");case 19:return Jr("SuspenseList");case 0:case 2:case 15:return e=Rl(e.type,!1),e;case 11:return e=Rl(e.type.render,!1),e;case 1:return e=Rl(e.type,!0),e;default:return""}}function Tc(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Yi:return"Fragment";case qi:return"Portal";case Ac:return"Profiler";case id:return"StrictMode";case Cc:return"Suspense";case jc:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Sh:return(e.displayName||"Context")+".Consumer";case Nh:return(e._context.displayName||"Context")+".Provider";case rd:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case sd:return t=e.displayName||null,t!==null?t:Tc(e.type)||"Memo";case Un:t=e._payload,e=e._init;try{return Tc(e(t))}catch{}}return null}function Z0(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Tc(t);case 8:return t===id?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function li(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ah(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Q0(e){var t=Ah(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function po(e){e._valueTracker||(e._valueTracker=Q0(e))}function Ch(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=Ah(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function sa(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Rc(e,t){var n=t.checked;return Xe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function zf(e,t){var n=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;n=li(t.value!=null?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function jh(e,t){t=t.checked,t!=null&&nd(e,"checked",t,!1)}function Dc(e,t){jh(e,t);var n=li(t.value),i=t.type;if(n!=null)i==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(i==="submit"||i==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Mc(e,t.type,n):t.hasOwnProperty("defaultValue")&&Mc(e,t.type,li(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Ff(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Mc(e,t,n){(t!=="number"||sa(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var es=Array.isArray;function ur(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+li(n),t=null,r=0;r<e.length;r++){if(e[r].value===n){e[r].selected=!0,i&&(e[r].defaultSelected=!0);return}t!==null||e[r].disabled||(t=e[r])}t!==null&&(t.selected=!0)}}function zc(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(de(91));return Xe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Pf(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(de(92));if(es(n)){if(1<n.length)throw Error(de(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:li(n)}}function Th(e,t){var n=li(t.value),i=li(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),i!=null&&(e.defaultValue=""+i)}function Of(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Rh(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Fc(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Rh(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var mo,Dh=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,i,r){MSApp.execUnsafeLocalFunction(function(){return e(t,n,i,r)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(mo=mo||document.createElement("div"),mo.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=mo.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function xs(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var cs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},J0=["Webkit","ms","Moz","O"];Object.keys(cs).forEach(function(e){J0.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),cs[t]=cs[e]})});function Mh(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||cs.hasOwnProperty(e)&&cs[e]?(""+t).trim():t+"px"}function zh(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=Mh(n,t[n],i);n==="float"&&(n="cssFloat"),i?e.setProperty(n,r):e[n]=r}}var e_=Xe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Pc(e,t){if(t){if(e_[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(de(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(de(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(de(61))}if(t.style!=null&&typeof t.style!="object")throw Error(de(62))}}function Oc(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bc=null;function od(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Lc=null,dr=null,fr=null;function Bf(e){if(e=Js(e)){if(typeof Lc!="function")throw Error(de(280));var t=e.stateNode;t&&(t=el(t),Lc(e.stateNode,e.type,t))}}function Fh(e){dr?fr?fr.push(e):fr=[e]:dr=e}function Ph(){if(dr){var e=dr,t=fr;if(fr=dr=null,Bf(e),t)for(e=0;e<t.length;e++)Bf(t[e])}}function Oh(e,t){return e(t)}function Bh(){}var Dl=!1;function Lh(e,t,n){if(Dl)return e(t,n);Dl=!0;try{return Oh(e,t,n)}finally{Dl=!1,(dr!==null||fr!==null)&&(Bh(),Ph())}}function _s(e,t){var n=e.stateNode;if(n===null)return null;var i=el(n);if(i===null)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(de(231,t,typeof n));return n}var Uc=!1;if(Cn)try{var Br={};Object.defineProperty(Br,"passive",{get:function(){Uc=!0}}),window.addEventListener("test",Br,Br),window.removeEventListener("test",Br,Br)}catch{Uc=!1}function t_(e,t,n,i,r,s,o,a,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(d){this.onError(d)}}var us=!1,oa=null,aa=!1,Hc=null,n_={onError:function(e){us=!0,oa=e}};function i_(e,t,n,i,r,s,o,a,c){us=!1,oa=null,t_.apply(n_,arguments)}function r_(e,t,n,i,r,s,o,a,c){if(i_.apply(this,arguments),us){if(us){var u=oa;us=!1,oa=null}else throw Error(de(198));aa||(aa=!0,Hc=u)}}function Pi(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Uh(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Lf(e){if(Pi(e)!==e)throw Error(de(188))}function s_(e){var t=e.alternate;if(!t){if(t=Pi(e),t===null)throw Error(de(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return Lf(r),e;if(s===i)return Lf(r),t;s=s.sibling}throw Error(de(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o)throw Error(de(189))}}if(n.alternate!==i)throw Error(de(190))}if(n.tag!==3)throw Error(de(188));return n.stateNode.current===n?e:t}function Hh(e){return e=s_(e),e!==null?$h(e):null}function $h(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=$h(e);if(t!==null)return t;e=e.sibling}return null}var Wh=zt.unstable_scheduleCallback,Uf=zt.unstable_cancelCallback,o_=zt.unstable_shouldYield,a_=zt.unstable_requestPaint,Je=zt.unstable_now,l_=zt.unstable_getCurrentPriorityLevel,ad=zt.unstable_ImmediatePriority,Kh=zt.unstable_UserBlockingPriority,la=zt.unstable_NormalPriority,c_=zt.unstable_LowPriority,Vh=zt.unstable_IdlePriority,Xa=null,fn=null;function u_(e){if(fn&&typeof fn.onCommitFiberRoot=="function")try{fn.onCommitFiberRoot(Xa,e,void 0,(e.current.flags&128)===128)}catch{}}var nn=Math.clz32?Math.clz32:p_,d_=Math.log,f_=Math.LN2;function p_(e){return e>>>=0,e===0?32:31-(d_(e)/f_|0)|0}var ho=64,go=4194304;function ts(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ca(e,t){var n=e.pendingLanes;if(n===0)return 0;var i=0,r=e.suspendedLanes,s=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~r;a!==0?i=ts(a):(s&=o,s!==0&&(i=ts(s)))}else o=n&~r,o!==0?i=ts(o):s!==0&&(i=ts(s));if(i===0)return 0;if(t!==0&&t!==i&&!(t&r)&&(r=i&-i,s=t&-t,r>=s||r===16&&(s&4194240)!==0))return t;if(i&4&&(i|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=i;0<t;)n=31-nn(t),r=1<<n,i|=e[n],t&=~r;return i}function m_(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function h_(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-nn(s),a=1<<o,c=r[o];c===-1?(!(a&n)||a&i)&&(r[o]=m_(a,t)):c<=t&&(e.expiredLanes|=a),s&=~a}}function $c(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Gh(){var e=ho;return ho<<=1,!(ho&4194240)&&(ho=64),e}function Ml(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Zs(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-nn(t),e[t]=n}function g_(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-nn(n),s=1<<r;t[r]=0,i[r]=-1,e[r]=-1,n&=~s}}function ld(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-nn(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}var Fe=0;function qh(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Yh,cd,Xh,Zh,Qh,Wc=!1,yo=[],Qn=null,Jn=null,ei=null,bs=new Map,ks=new Map,Vn=[],y_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Hf(e,t){switch(e){case"focusin":case"focusout":Qn=null;break;case"dragenter":case"dragleave":Jn=null;break;case"mouseover":case"mouseout":ei=null;break;case"pointerover":case"pointerout":bs.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ks.delete(t.pointerId)}}function Lr(e,t,n,i,r,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},t!==null&&(t=Js(t),t!==null&&cd(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,r!==null&&t.indexOf(r)===-1&&t.push(r),e)}function w_(e,t,n,i,r){switch(t){case"focusin":return Qn=Lr(Qn,e,t,n,i,r),!0;case"dragenter":return Jn=Lr(Jn,e,t,n,i,r),!0;case"mouseover":return ei=Lr(ei,e,t,n,i,r),!0;case"pointerover":var s=r.pointerId;return bs.set(s,Lr(bs.get(s)||null,e,t,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,ks.set(s,Lr(ks.get(s)||null,e,t,n,i,r)),!0}return!1}function Jh(e){var t=wi(e.target);if(t!==null){var n=Pi(t);if(n!==null){if(t=n.tag,t===13){if(t=Uh(n),t!==null){e.blockedOn=t,Qh(e.priority,function(){Xh(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function $o(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Kc(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);Bc=i,n.target.dispatchEvent(i),Bc=null}else return t=Js(n),t!==null&&cd(t),e.blockedOn=n,!1;t.shift()}return!0}function $f(e,t,n){$o(e)&&n.delete(t)}function v_(){Wc=!1,Qn!==null&&$o(Qn)&&(Qn=null),Jn!==null&&$o(Jn)&&(Jn=null),ei!==null&&$o(ei)&&(ei=null),bs.forEach($f),ks.forEach($f)}function Ur(e,t){e.blockedOn===t&&(e.blockedOn=null,Wc||(Wc=!0,zt.unstable_scheduleCallback(zt.unstable_NormalPriority,v_)))}function Es(e){function t(r){return Ur(r,e)}if(0<yo.length){Ur(yo[0],e);for(var n=1;n<yo.length;n++){var i=yo[n];i.blockedOn===e&&(i.blockedOn=null)}}for(Qn!==null&&Ur(Qn,e),Jn!==null&&Ur(Jn,e),ei!==null&&Ur(ei,e),bs.forEach(t),ks.forEach(t),n=0;n<Vn.length;n++)i=Vn[n],i.blockedOn===e&&(i.blockedOn=null);for(;0<Vn.length&&(n=Vn[0],n.blockedOn===null);)Jh(n),n.blockedOn===null&&Vn.shift()}var pr=Pn.ReactCurrentBatchConfig,ua=!0;function x_(e,t,n,i){var r=Fe,s=pr.transition;pr.transition=null;try{Fe=1,ud(e,t,n,i)}finally{Fe=r,pr.transition=s}}function __(e,t,n,i){var r=Fe,s=pr.transition;pr.transition=null;try{Fe=4,ud(e,t,n,i)}finally{Fe=r,pr.transition=s}}function ud(e,t,n,i){if(ua){var r=Kc(e,t,n,i);if(r===null)Wl(e,t,i,da,n),Hf(e,i);else if(w_(r,e,t,n,i))i.stopPropagation();else if(Hf(e,i),t&4&&-1<y_.indexOf(e)){for(;r!==null;){var s=Js(r);if(s!==null&&Yh(s),s=Kc(e,t,n,i),s===null&&Wl(e,t,i,da,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else Wl(e,t,i,null,n)}}var da=null;function Kc(e,t,n,i){if(da=null,e=od(i),e=wi(e),e!==null)if(t=Pi(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Uh(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return da=e,null}function eg(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(l_()){case ad:return 1;case Kh:return 4;case la:case c_:return 16;case Vh:return 536870912;default:return 16}default:return 16}}var Xn=null,dd=null,Wo=null;function tg(){if(Wo)return Wo;var e,t=dd,n=t.length,i,r="value"in Xn?Xn.value:Xn.textContent,s=r.length;for(e=0;e<n&&t[e]===r[e];e++);var o=n-e;for(i=1;i<=o&&t[n-i]===r[s-i];i++);return Wo=r.slice(e,1<i?1-i:void 0)}function Ko(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function wo(){return!0}function Wf(){return!1}function Ot(e){function t(n,i,r,s,o){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?wo:Wf,this.isPropagationStopped=Wf,this}return Xe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=wo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=wo)},persist:function(){},isPersistent:wo}),t}var Mr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fd=Ot(Mr),Qs=Xe({},Mr,{view:0,detail:0}),b_=Ot(Qs),zl,Fl,Hr,Za=Xe({},Qs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pd,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Hr&&(Hr&&e.type==="mousemove"?(zl=e.screenX-Hr.screenX,Fl=e.screenY-Hr.screenY):Fl=zl=0,Hr=e),zl)},movementY:function(e){return"movementY"in e?e.movementY:Fl}}),Kf=Ot(Za),k_=Xe({},Za,{dataTransfer:0}),E_=Ot(k_),N_=Xe({},Qs,{relatedTarget:0}),Pl=Ot(N_),S_=Xe({},Mr,{animationName:0,elapsedTime:0,pseudoElement:0}),I_=Ot(S_),A_=Xe({},Mr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),C_=Ot(A_),j_=Xe({},Mr,{data:0}),Vf=Ot(j_),T_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},R_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},D_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function M_(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=D_[e])?!!t[e]:!1}function pd(){return M_}var z_=Xe({},Qs,{key:function(e){if(e.key){var t=T_[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ko(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?R_[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pd,charCode:function(e){return e.type==="keypress"?Ko(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ko(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),F_=Ot(z_),P_=Xe({},Za,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gf=Ot(P_),O_=Xe({},Qs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pd}),B_=Ot(O_),L_=Xe({},Mr,{propertyName:0,elapsedTime:0,pseudoElement:0}),U_=Ot(L_),H_=Xe({},Za,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),$_=Ot(H_),W_=[9,13,27,32],md=Cn&&"CompositionEvent"in window,ds=null;Cn&&"documentMode"in document&&(ds=document.documentMode);var K_=Cn&&"TextEvent"in window&&!ds,ng=Cn&&(!md||ds&&8<ds&&11>=ds),qf=" ",Yf=!1;function ig(e,t){switch(e){case"keyup":return W_.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rg(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Xi=!1;function V_(e,t){switch(e){case"compositionend":return rg(t);case"keypress":return t.which!==32?null:(Yf=!0,qf);case"textInput":return e=t.data,e===qf&&Yf?null:e;default:return null}}function G_(e,t){if(Xi)return e==="compositionend"||!md&&ig(e,t)?(e=tg(),Wo=dd=Xn=null,Xi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return ng&&t.locale!=="ko"?null:t.data;default:return null}}var q_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xf(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!q_[e.type]:t==="textarea"}function sg(e,t,n,i){Fh(i),t=fa(t,"onChange"),0<t.length&&(n=new fd("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var fs=null,Ns=null;function Y_(e){gg(e,0)}function Qa(e){var t=Ji(e);if(Ch(t))return e}function X_(e,t){if(e==="change")return t}var og=!1;if(Cn){var Ol;if(Cn){var Bl="oninput"in document;if(!Bl){var Zf=document.createElement("div");Zf.setAttribute("oninput","return;"),Bl=typeof Zf.oninput=="function"}Ol=Bl}else Ol=!1;og=Ol&&(!document.documentMode||9<document.documentMode)}function Qf(){fs&&(fs.detachEvent("onpropertychange",ag),Ns=fs=null)}function ag(e){if(e.propertyName==="value"&&Qa(Ns)){var t=[];sg(t,Ns,e,od(e)),Lh(Y_,t)}}function Z_(e,t,n){e==="focusin"?(Qf(),fs=t,Ns=n,fs.attachEvent("onpropertychange",ag)):e==="focusout"&&Qf()}function Q_(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Qa(Ns)}function J_(e,t){if(e==="click")return Qa(t)}function eb(e,t){if(e==="input"||e==="change")return Qa(t)}function tb(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var on=typeof Object.is=="function"?Object.is:tb;function Ss(e,t){if(on(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!Ic.call(t,r)||!on(e[r],t[r]))return!1}return!0}function Jf(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ep(e,t){var n=Jf(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Jf(n)}}function lg(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?lg(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function cg(){for(var e=window,t=sa();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=sa(e.document)}return t}function hd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function nb(e){var t=cg(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&lg(n.ownerDocument.documentElement,n)){if(i!==null&&hd(n)){if(t=i.start,e=i.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!e.extend&&s>i&&(r=i,i=s,s=r),r=ep(n,s);var o=ep(n,i);r&&o&&(e.rangeCount!==1||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(r.node,r.offset),e.removeAllRanges(),s>i?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var ib=Cn&&"documentMode"in document&&11>=document.documentMode,Zi=null,Vc=null,ps=null,Gc=!1;function tp(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Gc||Zi==null||Zi!==sa(i)||(i=Zi,"selectionStart"in i&&hd(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),ps&&Ss(ps,i)||(ps=i,i=fa(Vc,"onSelect"),0<i.length&&(t=new fd("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=Zi)))}function vo(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Qi={animationend:vo("Animation","AnimationEnd"),animationiteration:vo("Animation","AnimationIteration"),animationstart:vo("Animation","AnimationStart"),transitionend:vo("Transition","TransitionEnd")},Ll={},ug={};Cn&&(ug=document.createElement("div").style,"AnimationEvent"in window||(delete Qi.animationend.animation,delete Qi.animationiteration.animation,delete Qi.animationstart.animation),"TransitionEvent"in window||delete Qi.transitionend.transition);function Ja(e){if(Ll[e])return Ll[e];if(!Qi[e])return e;var t=Qi[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in ug)return Ll[e]=t[n];return e}var dg=Ja("animationend"),fg=Ja("animationiteration"),pg=Ja("animationstart"),mg=Ja("transitionend"),hg=new Map,np="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function di(e,t){hg.set(e,t),Fi(t,[e])}for(var Ul=0;Ul<np.length;Ul++){var Hl=np[Ul],rb=Hl.toLowerCase(),sb=Hl[0].toUpperCase()+Hl.slice(1);di(rb,"on"+sb)}di(dg,"onAnimationEnd");di(fg,"onAnimationIteration");di(pg,"onAnimationStart");di("dblclick","onDoubleClick");di("focusin","onFocus");di("focusout","onBlur");di(mg,"onTransitionEnd");xr("onMouseEnter",["mouseout","mouseover"]);xr("onMouseLeave",["mouseout","mouseover"]);xr("onPointerEnter",["pointerout","pointerover"]);xr("onPointerLeave",["pointerout","pointerover"]);Fi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Fi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Fi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Fi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Fi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Fi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ns="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ob=new Set("cancel close invalid load scroll toggle".split(" ").concat(ns));function ip(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,r_(i,t,void 0,e),e.currentTarget=null}function gg(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;e:{var s=void 0;if(t)for(var o=i.length-1;0<=o;o--){var a=i[o],c=a.instance,u=a.currentTarget;if(a=a.listener,c!==s&&r.isPropagationStopped())break e;ip(r,a,u),s=c}else for(o=0;o<i.length;o++){if(a=i[o],c=a.instance,u=a.currentTarget,a=a.listener,c!==s&&r.isPropagationStopped())break e;ip(r,a,u),s=c}}}if(aa)throw e=Hc,aa=!1,Hc=null,e}function Ue(e,t){var n=t[Qc];n===void 0&&(n=t[Qc]=new Set);var i=e+"__bubble";n.has(i)||(yg(t,e,2,!1),n.add(i))}function $l(e,t,n){var i=0;t&&(i|=4),yg(n,e,i,t)}var xo="_reactListening"+Math.random().toString(36).slice(2);function Is(e){if(!e[xo]){e[xo]=!0,Eh.forEach(function(n){n!=="selectionchange"&&(ob.has(n)||$l(n,!1,e),$l(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[xo]||(t[xo]=!0,$l("selectionchange",!1,t))}}function yg(e,t,n,i){switch(eg(t)){case 1:var r=x_;break;case 4:r=__;break;default:r=ud}n=r.bind(null,t,n,e),r=void 0,!Uc||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(r=!0),i?r!==void 0?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):r!==void 0?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function Wl(e,t,n,i,r){var s=i;if(!(t&1)&&!(t&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===r||c.nodeType===8&&c.parentNode===r))return;o=o.return}for(;a!==null;){if(o=wi(a),o===null)return;if(c=o.tag,c===5||c===6){i=s=o;continue e}a=a.parentNode}}i=i.return}Lh(function(){var u=s,d=od(n),f=[];e:{var p=hg.get(e);if(p!==void 0){var m=fd,v=e;switch(e){case"keypress":if(Ko(n)===0)break e;case"keydown":case"keyup":m=F_;break;case"focusin":v="focus",m=Pl;break;case"focusout":v="blur",m=Pl;break;case"beforeblur":case"afterblur":m=Pl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Kf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=E_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=B_;break;case dg:case fg:case pg:m=I_;break;case mg:m=U_;break;case"scroll":m=b_;break;case"wheel":m=$_;break;case"copy":case"cut":case"paste":m=C_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Gf}var g=(t&4)!==0,x=!g&&e==="scroll",h=g?p!==null?p+"Capture":null:p;g=[];for(var y=u,_;y!==null;){_=y;var b=_.stateNode;if(_.tag===5&&b!==null&&(_=b,h!==null&&(b=_s(y,h),b!=null&&g.push(As(y,b,_)))),x)break;y=y.return}0<g.length&&(p=new m(p,v,null,n,d),f.push({event:p,listeners:g}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",p&&n!==Bc&&(v=n.relatedTarget||n.fromElement)&&(wi(v)||v[jn]))break e;if((m||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,m?(v=n.relatedTarget||n.toElement,m=u,v=v?wi(v):null,v!==null&&(x=Pi(v),v!==x||v.tag!==5&&v.tag!==6)&&(v=null)):(m=null,v=u),m!==v)){if(g=Kf,b="onMouseLeave",h="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(g=Gf,b="onPointerLeave",h="onPointerEnter",y="pointer"),x=m==null?p:Ji(m),_=v==null?p:Ji(v),p=new g(b,y+"leave",m,n,d),p.target=x,p.relatedTarget=_,b=null,wi(d)===u&&(g=new g(h,y+"enter",v,n,d),g.target=_,g.relatedTarget=x,b=g),x=b,m&&v)t:{for(g=m,h=v,y=0,_=g;_;_=Oi(_))y++;for(_=0,b=h;b;b=Oi(b))_++;for(;0<y-_;)g=Oi(g),y--;for(;0<_-y;)h=Oi(h),_--;for(;y--;){if(g===h||h!==null&&g===h.alternate)break t;g=Oi(g),h=Oi(h)}g=null}else g=null;m!==null&&rp(f,p,m,g,!1),v!==null&&x!==null&&rp(f,x,v,g,!0)}}e:{if(p=u?Ji(u):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var N=X_;else if(Xf(p))if(og)N=eb;else{N=Q_;var T=Z_}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(N=J_);if(N&&(N=N(e,u))){sg(f,N,n,d);break e}T&&T(e,p,u),e==="focusout"&&(T=p._wrapperState)&&T.controlled&&p.type==="number"&&Mc(p,"number",p.value)}switch(T=u?Ji(u):window,e){case"focusin":(Xf(T)||T.contentEditable==="true")&&(Zi=T,Vc=u,ps=null);break;case"focusout":ps=Vc=Zi=null;break;case"mousedown":Gc=!0;break;case"contextmenu":case"mouseup":case"dragend":Gc=!1,tp(f,n,d);break;case"selectionchange":if(ib)break;case"keydown":case"keyup":tp(f,n,d)}var C;if(md)e:{switch(e){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else Xi?ig(e,n)&&(P="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(P="onCompositionStart");P&&(ng&&n.locale!=="ko"&&(Xi||P!=="onCompositionStart"?P==="onCompositionEnd"&&Xi&&(C=tg()):(Xn=d,dd="value"in Xn?Xn.value:Xn.textContent,Xi=!0)),T=fa(u,P),0<T.length&&(P=new Vf(P,e,null,n,d),f.push({event:P,listeners:T}),C?P.data=C:(C=rg(n),C!==null&&(P.data=C)))),(C=K_?V_(e,n):G_(e,n))&&(u=fa(u,"onBeforeInput"),0<u.length&&(d=new Vf("onBeforeInput","beforeinput",null,n,d),f.push({event:d,listeners:u}),d.data=C))}gg(f,t)})}function As(e,t,n){return{instance:e,listener:t,currentTarget:n}}function fa(e,t){for(var n=t+"Capture",i=[];e!==null;){var r=e,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=_s(e,n),s!=null&&i.unshift(As(e,s,r)),s=_s(e,t),s!=null&&i.push(As(e,s,r))),e=e.return}return i}function Oi(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function rp(e,t,n,i,r){for(var s=t._reactName,o=[];n!==null&&n!==i;){var a=n,c=a.alternate,u=a.stateNode;if(c!==null&&c===i)break;a.tag===5&&u!==null&&(a=u,r?(c=_s(n,s),c!=null&&o.unshift(As(n,c,a))):r||(c=_s(n,s),c!=null&&o.push(As(n,c,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var ab=/\r\n?/g,lb=/\u0000|\uFFFD/g;function sp(e){return(typeof e=="string"?e:""+e).replace(ab,`
`).replace(lb,"")}function _o(e,t,n){if(t=sp(t),sp(e)!==t&&n)throw Error(de(425))}function pa(){}var qc=null,Yc=null;function Xc(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Zc=typeof setTimeout=="function"?setTimeout:void 0,cb=typeof clearTimeout=="function"?clearTimeout:void 0,op=typeof Promise=="function"?Promise:void 0,ub=typeof queueMicrotask=="function"?queueMicrotask:typeof op<"u"?function(e){return op.resolve(null).then(e).catch(db)}:Zc;function db(e){setTimeout(function(){throw e})}function Kl(e,t){var n=t,i=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){e.removeChild(r),Es(t);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);Es(t)}function ti(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function ap(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var zr=Math.random().toString(36).slice(2),dn="__reactFiber$"+zr,Cs="__reactProps$"+zr,jn="__reactContainer$"+zr,Qc="__reactEvents$"+zr,fb="__reactListeners$"+zr,pb="__reactHandles$"+zr;function wi(e){var t=e[dn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[jn]||n[dn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=ap(e);e!==null;){if(n=e[dn])return n;e=ap(e)}return t}e=n,n=e.parentNode}return null}function Js(e){return e=e[dn]||e[jn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ji(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(de(33))}function el(e){return e[Cs]||null}var Jc=[],er=-1;function fi(e){return{current:e}}function He(e){0>er||(e.current=Jc[er],Jc[er]=null,er--)}function Oe(e,t){er++,Jc[er]=e.current,e.current=t}var ci={},yt=fi(ci),Ct=fi(!1),Ai=ci;function _r(e,t){var n=e.type.contextTypes;if(!n)return ci;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in n)r[s]=t[s];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=r),r}function jt(e){return e=e.childContextTypes,e!=null}function ma(){He(Ct),He(yt)}function lp(e,t,n){if(yt.current!==ci)throw Error(de(168));Oe(yt,t),Oe(Ct,n)}function wg(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in t))throw Error(de(108,Z0(e)||"Unknown",r));return Xe({},n,i)}function ha(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ci,Ai=yt.current,Oe(yt,e),Oe(Ct,Ct.current),!0}function cp(e,t,n){var i=e.stateNode;if(!i)throw Error(de(169));n?(e=wg(e,t,Ai),i.__reactInternalMemoizedMergedChildContext=e,He(Ct),He(yt),Oe(yt,e)):He(Ct),Oe(Ct,n)}var vn=null,tl=!1,Vl=!1;function vg(e){vn===null?vn=[e]:vn.push(e)}function mb(e){tl=!0,vg(e)}function pi(){if(!Vl&&vn!==null){Vl=!0;var e=0,t=Fe;try{var n=vn;for(Fe=1;e<n.length;e++){var i=n[e];do i=i(!0);while(i!==null)}vn=null,tl=!1}catch(r){throw vn!==null&&(vn=vn.slice(e+1)),Wh(ad,pi),r}finally{Fe=t,Vl=!1}}return null}var tr=[],nr=0,ga=null,ya=0,Lt=[],Ut=0,Ci=null,_n=1,bn="";function mi(e,t){tr[nr++]=ya,tr[nr++]=ga,ga=e,ya=t}function xg(e,t,n){Lt[Ut++]=_n,Lt[Ut++]=bn,Lt[Ut++]=Ci,Ci=e;var i=_n;e=bn;var r=32-nn(i)-1;i&=~(1<<r),n+=1;var s=32-nn(t)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,_n=1<<32-nn(t)+r|n<<r|i,bn=s+e}else _n=1<<s|n<<r|i,bn=e}function gd(e){e.return!==null&&(mi(e,1),xg(e,1,0))}function yd(e){for(;e===ga;)ga=tr[--nr],tr[nr]=null,ya=tr[--nr],tr[nr]=null;for(;e===Ci;)Ci=Lt[--Ut],Lt[Ut]=null,bn=Lt[--Ut],Lt[Ut]=null,_n=Lt[--Ut],Lt[Ut]=null}var Mt=null,Dt=null,We=!1,Jt=null;function _g(e,t){var n=$t(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function up(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Mt=e,Dt=ti(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Mt=e,Dt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Ci!==null?{id:_n,overflow:bn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=$t(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Mt=e,Dt=null,!0):!1;default:return!1}}function eu(e){return(e.mode&1)!==0&&(e.flags&128)===0}function tu(e){if(We){var t=Dt;if(t){var n=t;if(!up(e,t)){if(eu(e))throw Error(de(418));t=ti(n.nextSibling);var i=Mt;t&&up(e,t)?_g(i,n):(e.flags=e.flags&-4097|2,We=!1,Mt=e)}}else{if(eu(e))throw Error(de(418));e.flags=e.flags&-4097|2,We=!1,Mt=e}}}function dp(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Mt=e}function bo(e){if(e!==Mt)return!1;if(!We)return dp(e),We=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Xc(e.type,e.memoizedProps)),t&&(t=Dt)){if(eu(e))throw bg(),Error(de(418));for(;t;)_g(e,t),t=ti(t.nextSibling)}if(dp(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(de(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Dt=ti(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Dt=null}}else Dt=Mt?ti(e.stateNode.nextSibling):null;return!0}function bg(){for(var e=Dt;e;)e=ti(e.nextSibling)}function br(){Dt=Mt=null,We=!1}function wd(e){Jt===null?Jt=[e]:Jt.push(e)}var hb=Pn.ReactCurrentBatchConfig;function $r(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(de(309));var i=n.stateNode}if(!i)throw Error(de(147,e));var r=i,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var a=r.refs;o===null?delete a[s]:a[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(de(284));if(!n._owner)throw Error(de(290,e))}return e}function ko(e,t){throw e=Object.prototype.toString.call(t),Error(de(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function fp(e){var t=e._init;return t(e._payload)}function kg(e){function t(h,y){if(e){var _=h.deletions;_===null?(h.deletions=[y],h.flags|=16):_.push(y)}}function n(h,y){if(!e)return null;for(;y!==null;)t(h,y),y=y.sibling;return null}function i(h,y){for(h=new Map;y!==null;)y.key!==null?h.set(y.key,y):h.set(y.index,y),y=y.sibling;return h}function r(h,y){return h=si(h,y),h.index=0,h.sibling=null,h}function s(h,y,_){return h.index=_,e?(_=h.alternate,_!==null?(_=_.index,_<y?(h.flags|=2,y):_):(h.flags|=2,y)):(h.flags|=1048576,y)}function o(h){return e&&h.alternate===null&&(h.flags|=2),h}function a(h,y,_,b){return y===null||y.tag!==6?(y=Jl(_,h.mode,b),y.return=h,y):(y=r(y,_),y.return=h,y)}function c(h,y,_,b){var N=_.type;return N===Yi?d(h,y,_.props.children,b,_.key):y!==null&&(y.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Un&&fp(N)===y.type)?(b=r(y,_.props),b.ref=$r(h,y,_),b.return=h,b):(b=Qo(_.type,_.key,_.props,null,h.mode,b),b.ref=$r(h,y,_),b.return=h,b)}function u(h,y,_,b){return y===null||y.tag!==4||y.stateNode.containerInfo!==_.containerInfo||y.stateNode.implementation!==_.implementation?(y=ec(_,h.mode,b),y.return=h,y):(y=r(y,_.children||[]),y.return=h,y)}function d(h,y,_,b,N){return y===null||y.tag!==7?(y=Ei(_,h.mode,b,N),y.return=h,y):(y=r(y,_),y.return=h,y)}function f(h,y,_){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Jl(""+y,h.mode,_),y.return=h,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case fo:return _=Qo(y.type,y.key,y.props,null,h.mode,_),_.ref=$r(h,null,y),_.return=h,_;case qi:return y=ec(y,h.mode,_),y.return=h,y;case Un:var b=y._init;return f(h,b(y._payload),_)}if(es(y)||Or(y))return y=Ei(y,h.mode,_,null),y.return=h,y;ko(h,y)}return null}function p(h,y,_,b){var N=y!==null?y.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return N!==null?null:a(h,y,""+_,b);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case fo:return _.key===N?c(h,y,_,b):null;case qi:return _.key===N?u(h,y,_,b):null;case Un:return N=_._init,p(h,y,N(_._payload),b)}if(es(_)||Or(_))return N!==null?null:d(h,y,_,b,null);ko(h,_)}return null}function m(h,y,_,b,N){if(typeof b=="string"&&b!==""||typeof b=="number")return h=h.get(_)||null,a(y,h,""+b,N);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case fo:return h=h.get(b.key===null?_:b.key)||null,c(y,h,b,N);case qi:return h=h.get(b.key===null?_:b.key)||null,u(y,h,b,N);case Un:var T=b._init;return m(h,y,_,T(b._payload),N)}if(es(b)||Or(b))return h=h.get(_)||null,d(y,h,b,N,null);ko(y,b)}return null}function v(h,y,_,b){for(var N=null,T=null,C=y,P=y=0,j=null;C!==null&&P<_.length;P++){C.index>P?(j=C,C=null):j=C.sibling;var I=p(h,C,_[P],b);if(I===null){C===null&&(C=j);break}e&&C&&I.alternate===null&&t(h,C),y=s(I,y,P),T===null?N=I:T.sibling=I,T=I,C=j}if(P===_.length)return n(h,C),We&&mi(h,P),N;if(C===null){for(;P<_.length;P++)C=f(h,_[P],b),C!==null&&(y=s(C,y,P),T===null?N=C:T.sibling=C,T=C);return We&&mi(h,P),N}for(C=i(h,C);P<_.length;P++)j=m(C,h,P,_[P],b),j!==null&&(e&&j.alternate!==null&&C.delete(j.key===null?P:j.key),y=s(j,y,P),T===null?N=j:T.sibling=j,T=j);return e&&C.forEach(function($){return t(h,$)}),We&&mi(h,P),N}function g(h,y,_,b){var N=Or(_);if(typeof N!="function")throw Error(de(150));if(_=N.call(_),_==null)throw Error(de(151));for(var T=N=null,C=y,P=y=0,j=null,I=_.next();C!==null&&!I.done;P++,I=_.next()){C.index>P?(j=C,C=null):j=C.sibling;var $=p(h,C,I.value,b);if($===null){C===null&&(C=j);break}e&&C&&$.alternate===null&&t(h,C),y=s($,y,P),T===null?N=$:T.sibling=$,T=$,C=j}if(I.done)return n(h,C),We&&mi(h,P),N;if(C===null){for(;!I.done;P++,I=_.next())I=f(h,I.value,b),I!==null&&(y=s(I,y,P),T===null?N=I:T.sibling=I,T=I);return We&&mi(h,P),N}for(C=i(h,C);!I.done;P++,I=_.next())I=m(C,h,P,I.value,b),I!==null&&(e&&I.alternate!==null&&C.delete(I.key===null?P:I.key),y=s(I,y,P),T===null?N=I:T.sibling=I,T=I);return e&&C.forEach(function(S){return t(h,S)}),We&&mi(h,P),N}function x(h,y,_,b){if(typeof _=="object"&&_!==null&&_.type===Yi&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case fo:e:{for(var N=_.key,T=y;T!==null;){if(T.key===N){if(N=_.type,N===Yi){if(T.tag===7){n(h,T.sibling),y=r(T,_.props.children),y.return=h,h=y;break e}}else if(T.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Un&&fp(N)===T.type){n(h,T.sibling),y=r(T,_.props),y.ref=$r(h,T,_),y.return=h,h=y;break e}n(h,T);break}else t(h,T);T=T.sibling}_.type===Yi?(y=Ei(_.props.children,h.mode,b,_.key),y.return=h,h=y):(b=Qo(_.type,_.key,_.props,null,h.mode,b),b.ref=$r(h,y,_),b.return=h,h=b)}return o(h);case qi:e:{for(T=_.key;y!==null;){if(y.key===T)if(y.tag===4&&y.stateNode.containerInfo===_.containerInfo&&y.stateNode.implementation===_.implementation){n(h,y.sibling),y=r(y,_.children||[]),y.return=h,h=y;break e}else{n(h,y);break}else t(h,y);y=y.sibling}y=ec(_,h.mode,b),y.return=h,h=y}return o(h);case Un:return T=_._init,x(h,y,T(_._payload),b)}if(es(_))return v(h,y,_,b);if(Or(_))return g(h,y,_,b);ko(h,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,y!==null&&y.tag===6?(n(h,y.sibling),y=r(y,_),y.return=h,h=y):(n(h,y),y=Jl(_,h.mode,b),y.return=h,h=y),o(h)):n(h,y)}return x}var kr=kg(!0),Eg=kg(!1),wa=fi(null),va=null,ir=null,vd=null;function xd(){vd=ir=va=null}function _d(e){var t=wa.current;He(wa),e._currentValue=t}function nu(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function mr(e,t){va=e,vd=ir=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(St=!0),e.firstContext=null)}function Vt(e){var t=e._currentValue;if(vd!==e)if(e={context:e,memoizedValue:t,next:null},ir===null){if(va===null)throw Error(de(308));ir=e,va.dependencies={lanes:0,firstContext:e}}else ir=ir.next=e;return t}var vi=null;function bd(e){vi===null?vi=[e]:vi.push(e)}function Ng(e,t,n,i){var r=t.interleaved;return r===null?(n.next=n,bd(t)):(n.next=r.next,r.next=n),t.interleaved=n,Tn(e,i)}function Tn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Hn=!1;function kd(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Sg(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function En(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ni(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,Me&2){var r=i.pending;return r===null?t.next=t:(t.next=r.next,r.next=t),i.pending=t,Tn(e,n)}return r=i.interleaved,r===null?(t.next=t,bd(i)):(t.next=r.next,r.next=t),i.interleaved=t,Tn(e,n)}function Vo(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,ld(e,n)}}function pp(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?r=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?r=s=t:s=s.next=t}else r=s=t;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function xa(e,t,n,i){var r=e.updateQueue;Hn=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var c=a,u=c.next;c.next=null,o===null?s=u:o.next=u,o=c;var d=e.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=c))}if(s!==null){var f=r.baseState;o=0,d=u=c=null,a=s;do{var p=a.lane,m=a.eventTime;if((i&p)===p){d!==null&&(d=d.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=e,g=a;switch(p=t,m=n,g.tag){case 1:if(v=g.payload,typeof v=="function"){f=v.call(m,f,p);break e}f=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=g.payload,p=typeof v=="function"?v.call(m,f,p):v,p==null)break e;f=Xe({},f,p);break e;case 2:Hn=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,p=r.effects,p===null?r.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(u=d=m,c=f):d=d.next=m,o|=p;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;p=a,a=p.next,p.next=null,r.lastBaseUpdate=p,r.shared.pending=null}}while(!0);if(d===null&&(c=f),r.baseState=c,r.firstBaseUpdate=u,r.lastBaseUpdate=d,t=r.shared.interleaved,t!==null){r=t;do o|=r.lane,r=r.next;while(r!==t)}else s===null&&(r.shared.lanes=0);Ti|=o,e.lanes=o,e.memoizedState=f}}function mp(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var i=e[t],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(de(191,r));r.call(i)}}}var eo={},pn=fi(eo),js=fi(eo),Ts=fi(eo);function xi(e){if(e===eo)throw Error(de(174));return e}function Ed(e,t){switch(Oe(Ts,t),Oe(js,e),Oe(pn,eo),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Fc(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Fc(t,e)}He(pn),Oe(pn,t)}function Er(){He(pn),He(js),He(Ts)}function Ig(e){xi(Ts.current);var t=xi(pn.current),n=Fc(t,e.type);t!==n&&(Oe(js,e),Oe(pn,n))}function Nd(e){js.current===e&&(He(pn),He(js))}var qe=fi(0);function _a(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Gl=[];function Sd(){for(var e=0;e<Gl.length;e++)Gl[e]._workInProgressVersionPrimary=null;Gl.length=0}var Go=Pn.ReactCurrentDispatcher,ql=Pn.ReactCurrentBatchConfig,ji=0,Ye=null,nt=null,ot=null,ba=!1,ms=!1,Rs=0,gb=0;function mt(){throw Error(de(321))}function Id(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!on(e[n],t[n]))return!1;return!0}function Ad(e,t,n,i,r,s){if(ji=s,Ye=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Go.current=e===null||e.memoizedState===null?xb:_b,e=n(i,r),ms){s=0;do{if(ms=!1,Rs=0,25<=s)throw Error(de(301));s+=1,ot=nt=null,t.updateQueue=null,Go.current=bb,e=n(i,r)}while(ms)}if(Go.current=ka,t=nt!==null&&nt.next!==null,ji=0,ot=nt=Ye=null,ba=!1,t)throw Error(de(300));return e}function Cd(){var e=Rs!==0;return Rs=0,e}function cn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ot===null?Ye.memoizedState=ot=e:ot=ot.next=e,ot}function Gt(){if(nt===null){var e=Ye.alternate;e=e!==null?e.memoizedState:null}else e=nt.next;var t=ot===null?Ye.memoizedState:ot.next;if(t!==null)ot=t,nt=e;else{if(e===null)throw Error(de(310));nt=e,e={memoizedState:nt.memoizedState,baseState:nt.baseState,baseQueue:nt.baseQueue,queue:nt.queue,next:null},ot===null?Ye.memoizedState=ot=e:ot=ot.next=e}return ot}function Ds(e,t){return typeof t=="function"?t(e):t}function Yl(e){var t=Gt(),n=t.queue;if(n===null)throw Error(de(311));n.lastRenderedReducer=e;var i=nt,r=i.baseQueue,s=n.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,n.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,c=null,u=s;do{var d=u.lane;if((ji&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:e(i,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(a=c=f,o=i):c=c.next=f,Ye.lanes|=d,Ti|=d}u=u.next}while(u!==null&&u!==s);c===null?o=i:c.next=a,on(i,t.memoizedState)||(St=!0),t.memoizedState=i,t.baseState=o,t.baseQueue=c,n.lastRenderedState=i}if(e=n.interleaved,e!==null){r=e;do s=r.lane,Ye.lanes|=s,Ti|=s,r=r.next;while(r!==e)}else r===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Xl(e){var t=Gt(),n=t.queue;if(n===null)throw Error(de(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,s=t.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do s=e(s,o.action),o=o.next;while(o!==r);on(s,t.memoizedState)||(St=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,i]}function Ag(){}function Cg(e,t){var n=Ye,i=Gt(),r=t(),s=!on(i.memoizedState,r);if(s&&(i.memoizedState=r,St=!0),i=i.queue,jd(Rg.bind(null,n,i,e),[e]),i.getSnapshot!==t||s||ot!==null&&ot.memoizedState.tag&1){if(n.flags|=2048,Ms(9,Tg.bind(null,n,i,r,t),void 0,null),at===null)throw Error(de(349));ji&30||jg(n,t,r)}return r}function jg(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ye.updateQueue,t===null?(t={lastEffect:null,stores:null},Ye.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Tg(e,t,n,i){t.value=n,t.getSnapshot=i,Dg(t)&&Mg(e)}function Rg(e,t,n){return n(function(){Dg(t)&&Mg(e)})}function Dg(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!on(e,n)}catch{return!0}}function Mg(e){var t=Tn(e,1);t!==null&&rn(t,e,1,-1)}function hp(e){var t=cn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ds,lastRenderedState:e},t.queue=e,e=e.dispatch=vb.bind(null,Ye,e),[t.memoizedState,e]}function Ms(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},t=Ye.updateQueue,t===null?(t={lastEffect:null,stores:null},Ye.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e)),e}function zg(){return Gt().memoizedState}function qo(e,t,n,i){var r=cn();Ye.flags|=e,r.memoizedState=Ms(1|t,n,void 0,i===void 0?null:i)}function nl(e,t,n,i){var r=Gt();i=i===void 0?null:i;var s=void 0;if(nt!==null){var o=nt.memoizedState;if(s=o.destroy,i!==null&&Id(i,o.deps)){r.memoizedState=Ms(t,n,s,i);return}}Ye.flags|=e,r.memoizedState=Ms(1|t,n,s,i)}function gp(e,t){return qo(8390656,8,e,t)}function jd(e,t){return nl(2048,8,e,t)}function Fg(e,t){return nl(4,2,e,t)}function Pg(e,t){return nl(4,4,e,t)}function Og(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Bg(e,t,n){return n=n!=null?n.concat([e]):null,nl(4,4,Og.bind(null,t,e),n)}function Td(){}function Lg(e,t){var n=Gt();t=t===void 0?null:t;var i=n.memoizedState;return i!==null&&t!==null&&Id(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function Ug(e,t){var n=Gt();t=t===void 0?null:t;var i=n.memoizedState;return i!==null&&t!==null&&Id(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function Hg(e,t,n){return ji&21?(on(n,t)||(n=Gh(),Ye.lanes|=n,Ti|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,St=!0),e.memoizedState=n)}function yb(e,t){var n=Fe;Fe=n!==0&&4>n?n:4,e(!0);var i=ql.transition;ql.transition={};try{e(!1),t()}finally{Fe=n,ql.transition=i}}function $g(){return Gt().memoizedState}function wb(e,t,n){var i=ri(e);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},Wg(e))Kg(t,n);else if(n=Ng(e,t,n,i),n!==null){var r=_t();rn(n,e,i,r),Vg(n,t,i)}}function vb(e,t,n){var i=ri(e),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(Wg(e))Kg(t,r);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,on(a,o)){var c=t.interleaved;c===null?(r.next=r,bd(t)):(r.next=c.next,c.next=r),t.interleaved=r;return}}catch{}finally{}n=Ng(e,t,r,i),n!==null&&(r=_t(),rn(n,e,i,r),Vg(n,t,i))}}function Wg(e){var t=e.alternate;return e===Ye||t!==null&&t===Ye}function Kg(e,t){ms=ba=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Vg(e,t,n){if(n&4194240){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,ld(e,n)}}var ka={readContext:Vt,useCallback:mt,useContext:mt,useEffect:mt,useImperativeHandle:mt,useInsertionEffect:mt,useLayoutEffect:mt,useMemo:mt,useReducer:mt,useRef:mt,useState:mt,useDebugValue:mt,useDeferredValue:mt,useTransition:mt,useMutableSource:mt,useSyncExternalStore:mt,useId:mt,unstable_isNewReconciler:!1},xb={readContext:Vt,useCallback:function(e,t){return cn().memoizedState=[e,t===void 0?null:t],e},useContext:Vt,useEffect:gp,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,qo(4194308,4,Og.bind(null,t,e),n)},useLayoutEffect:function(e,t){return qo(4194308,4,e,t)},useInsertionEffect:function(e,t){return qo(4,2,e,t)},useMemo:function(e,t){var n=cn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=cn();return t=n!==void 0?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=wb.bind(null,Ye,e),[i.memoizedState,e]},useRef:function(e){var t=cn();return e={current:e},t.memoizedState=e},useState:hp,useDebugValue:Td,useDeferredValue:function(e){return cn().memoizedState=e},useTransition:function(){var e=hp(!1),t=e[0];return e=yb.bind(null,e[1]),cn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=Ye,r=cn();if(We){if(n===void 0)throw Error(de(407));n=n()}else{if(n=t(),at===null)throw Error(de(349));ji&30||jg(i,t,n)}r.memoizedState=n;var s={value:n,getSnapshot:t};return r.queue=s,gp(Rg.bind(null,i,s,e),[e]),i.flags|=2048,Ms(9,Tg.bind(null,i,s,n,t),void 0,null),n},useId:function(){var e=cn(),t=at.identifierPrefix;if(We){var n=bn,i=_n;n=(i&~(1<<32-nn(i)-1)).toString(32)+n,t=":"+t+"R"+n,n=Rs++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=gb++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},_b={readContext:Vt,useCallback:Lg,useContext:Vt,useEffect:jd,useImperativeHandle:Bg,useInsertionEffect:Fg,useLayoutEffect:Pg,useMemo:Ug,useReducer:Yl,useRef:zg,useState:function(){return Yl(Ds)},useDebugValue:Td,useDeferredValue:function(e){var t=Gt();return Hg(t,nt.memoizedState,e)},useTransition:function(){var e=Yl(Ds)[0],t=Gt().memoizedState;return[e,t]},useMutableSource:Ag,useSyncExternalStore:Cg,useId:$g,unstable_isNewReconciler:!1},bb={readContext:Vt,useCallback:Lg,useContext:Vt,useEffect:jd,useImperativeHandle:Bg,useInsertionEffect:Fg,useLayoutEffect:Pg,useMemo:Ug,useReducer:Xl,useRef:zg,useState:function(){return Xl(Ds)},useDebugValue:Td,useDeferredValue:function(e){var t=Gt();return nt===null?t.memoizedState=e:Hg(t,nt.memoizedState,e)},useTransition:function(){var e=Xl(Ds)[0],t=Gt().memoizedState;return[e,t]},useMutableSource:Ag,useSyncExternalStore:Cg,useId:$g,unstable_isNewReconciler:!1};function Xt(e,t){if(e&&e.defaultProps){t=Xe({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function iu(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:Xe({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var il={isMounted:function(e){return(e=e._reactInternals)?Pi(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=_t(),r=ri(e),s=En(i,r);s.payload=t,n!=null&&(s.callback=n),t=ni(e,s,r),t!==null&&(rn(t,e,r,i),Vo(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=_t(),r=ri(e),s=En(i,r);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=ni(e,s,r),t!==null&&(rn(t,e,r,i),Vo(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=_t(),i=ri(e),r=En(n,i);r.tag=2,t!=null&&(r.callback=t),t=ni(e,r,i),t!==null&&(rn(t,e,i,n),Vo(t,e,i))}};function yp(e,t,n,i,r,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,s,o):t.prototype&&t.prototype.isPureReactComponent?!Ss(n,i)||!Ss(r,s):!0}function Gg(e,t,n){var i=!1,r=ci,s=t.contextType;return typeof s=="object"&&s!==null?s=Vt(s):(r=jt(t)?Ai:yt.current,i=t.contextTypes,s=(i=i!=null)?_r(e,r):ci),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=il,e.stateNode=t,t._reactInternals=e,i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=s),t}function wp(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&il.enqueueReplaceState(t,t.state,null)}function ru(e,t,n,i){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs={},kd(e);var s=t.contextType;typeof s=="object"&&s!==null?r.context=Vt(s):(s=jt(t)?Ai:yt.current,r.context=_r(e,s)),r.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(iu(e,t,s,n),r.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(t=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),t!==r.state&&il.enqueueReplaceState(r,r.state,null),xa(e,n,r,i),r.state=e.memoizedState),typeof r.componentDidMount=="function"&&(e.flags|=4194308)}function Nr(e,t){try{var n="",i=t;do n+=X0(i),i=i.return;while(i);var r=n}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:r,digest:null}}function Zl(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function su(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var kb=typeof WeakMap=="function"?WeakMap:Map;function qg(e,t,n){n=En(-1,n),n.tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){Na||(Na=!0,hu=i),su(e,t)},n}function Yg(e,t,n){n=En(-1,n),n.tag=3;var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var r=t.value;n.payload=function(){return i(r)},n.callback=function(){su(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){su(e,t),typeof i!="function"&&(ii===null?ii=new Set([this]):ii.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function vp(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new kb;var r=new Set;i.set(t,r)}else r=i.get(t),r===void 0&&(r=new Set,i.set(t,r));r.has(n)||(r.add(n),e=Pb.bind(null,e,t,n),t.then(e,e))}function xp(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function _p(e,t,n,i,r){return e.mode&1?(e.flags|=65536,e.lanes=r,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=En(-1,1),t.tag=2,ni(n,t,1))),n.lanes|=1),e)}var Eb=Pn.ReactCurrentOwner,St=!1;function vt(e,t,n,i){t.child=e===null?Eg(t,null,n,i):kr(t,e.child,n,i)}function bp(e,t,n,i,r){n=n.render;var s=t.ref;return mr(t,r),i=Ad(e,t,n,i,s,r),n=Cd(),e!==null&&!St?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Rn(e,t,r)):(We&&n&&gd(t),t.flags|=1,vt(e,t,i,r),t.child)}function kp(e,t,n,i,r){if(e===null){var s=n.type;return typeof s=="function"&&!Bd(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,Xg(e,t,s,i,r)):(e=Qo(n.type,null,i,t,t.mode,r),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&r)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ss,n(o,i)&&e.ref===t.ref)return Rn(e,t,r)}return t.flags|=1,e=si(s,i),e.ref=t.ref,e.return=t,t.child=e}function Xg(e,t,n,i,r){if(e!==null){var s=e.memoizedProps;if(Ss(s,i)&&e.ref===t.ref)if(St=!1,t.pendingProps=i=s,(e.lanes&r)!==0)e.flags&131072&&(St=!0);else return t.lanes=e.lanes,Rn(e,t,r)}return ou(e,t,n,i,r)}function Zg(e,t,n){var i=t.pendingProps,r=i.children,s=e!==null?e.memoizedState:null;if(i.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Oe(sr,Rt),Rt|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Oe(sr,Rt),Rt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:n,Oe(sr,Rt),Rt|=i}else s!==null?(i=s.baseLanes|n,t.memoizedState=null):i=n,Oe(sr,Rt),Rt|=i;return vt(e,t,r,n),t.child}function Qg(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function ou(e,t,n,i,r){var s=jt(n)?Ai:yt.current;return s=_r(t,s),mr(t,r),n=Ad(e,t,n,i,s,r),i=Cd(),e!==null&&!St?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Rn(e,t,r)):(We&&i&&gd(t),t.flags|=1,vt(e,t,n,r),t.child)}function Ep(e,t,n,i,r){if(jt(n)){var s=!0;ha(t)}else s=!1;if(mr(t,r),t.stateNode===null)Yo(e,t),Gg(t,n,i),ru(t,n,i,r),i=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Vt(u):(u=jt(n)?Ai:yt.current,u=_r(t,u));var d=n.getDerivedStateFromProps,f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||c!==u)&&wp(t,o,i,u),Hn=!1;var p=t.memoizedState;o.state=p,xa(t,i,o,r),c=t.memoizedState,a!==i||p!==c||Ct.current||Hn?(typeof d=="function"&&(iu(t,n,d,i),c=t.memoizedState),(a=Hn||yp(t,n,a,i,p,c,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=c),o.props=i,o.state=c,o.context=u,i=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{o=t.stateNode,Sg(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:Xt(t.type,a),o.props=u,f=t.pendingProps,p=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Vt(c):(c=jt(n)?Ai:yt.current,c=_r(t,c));var m=n.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||p!==c)&&wp(t,o,i,c),Hn=!1,p=t.memoizedState,o.state=p,xa(t,i,o,r);var v=t.memoizedState;a!==f||p!==v||Ct.current||Hn?(typeof m=="function"&&(iu(t,n,m,i),v=t.memoizedState),(u=Hn||yp(t,n,u,i,p,v,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,v,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,v,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=v),o.props=i,o.state=v,o.context=c,i=u):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),i=!1)}return au(e,t,n,i,s,r)}function au(e,t,n,i,r,s){Qg(e,t);var o=(t.flags&128)!==0;if(!i&&!o)return r&&cp(t,n,!1),Rn(e,t,s);i=t.stateNode,Eb.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,e!==null&&o?(t.child=kr(t,e.child,null,s),t.child=kr(t,null,a,s)):vt(e,t,a,s),t.memoizedState=i.state,r&&cp(t,n,!0),t.child}function Jg(e){var t=e.stateNode;t.pendingContext?lp(e,t.pendingContext,t.pendingContext!==t.context):t.context&&lp(e,t.context,!1),Ed(e,t.containerInfo)}function Np(e,t,n,i,r){return br(),wd(r),t.flags|=256,vt(e,t,n,i),t.child}var lu={dehydrated:null,treeContext:null,retryLane:0};function cu(e){return{baseLanes:e,cachePool:null,transitions:null}}function ey(e,t,n){var i=t.pendingProps,r=qe.current,s=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(r&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(r|=1),Oe(qe,r&1),e===null)return tu(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=i.children,e=i.fallback,s?(i=t.mode,s=t.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=ol(o,i,0,null),e=Ei(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=cu(n),t.memoizedState=lu,e):Rd(t,o));if(r=e.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return Nb(e,t,o,i,a,r,n);if(s){s=i.fallback,o=t.mode,r=e.child,a=r.sibling;var c={mode:"hidden",children:i.children};return!(o&1)&&t.child!==r?(i=t.child,i.childLanes=0,i.pendingProps=c,t.deletions=null):(i=si(r,c),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=si(a,s):(s=Ei(s,o,n,null),s.flags|=2),s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,o=e.child.memoizedState,o=o===null?cu(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=lu,i}return s=e.child,e=s.sibling,i=si(s,{mode:"visible",children:i.children}),!(t.mode&1)&&(i.lanes=n),i.return=t,i.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Rd(e,t){return t=ol({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Eo(e,t,n,i){return i!==null&&wd(i),kr(t,e.child,null,n),e=Rd(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Nb(e,t,n,i,r,s,o){if(n)return t.flags&256?(t.flags&=-257,i=Zl(Error(de(422))),Eo(e,t,o,i)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=i.fallback,r=t.mode,i=ol({mode:"visible",children:i.children},r,0,null),s=Ei(s,r,o,null),s.flags|=2,i.return=t,s.return=t,i.sibling=s,t.child=i,t.mode&1&&kr(t,e.child,null,o),t.child.memoizedState=cu(o),t.memoizedState=lu,s);if(!(t.mode&1))return Eo(e,t,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(de(419)),i=Zl(s,i,void 0),Eo(e,t,o,i)}if(a=(o&e.childLanes)!==0,St||a){if(i=at,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,Tn(e,r),rn(i,e,r,-1))}return Od(),i=Zl(Error(de(421))),Eo(e,t,o,i)}return r.data==="$?"?(t.flags|=128,t.child=e.child,t=Ob.bind(null,e),r._reactRetry=t,null):(e=s.treeContext,Dt=ti(r.nextSibling),Mt=t,We=!0,Jt=null,e!==null&&(Lt[Ut++]=_n,Lt[Ut++]=bn,Lt[Ut++]=Ci,_n=e.id,bn=e.overflow,Ci=t),t=Rd(t,i.children),t.flags|=4096,t)}function Sp(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),nu(e.return,t,n)}function Ql(e,t,n,i,r){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function ty(e,t,n){var i=t.pendingProps,r=i.revealOrder,s=i.tail;if(vt(e,t,i.children,n),i=qe.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Sp(e,n,t);else if(e.tag===19)Sp(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(Oe(qe,i),!(t.mode&1))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;n!==null;)e=n.alternate,e!==null&&_a(e)===null&&(r=n),n=n.sibling;n=r,n===null?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),Ql(t,!1,r,n,s);break;case"backwards":for(n=null,r=t.child,t.child=null;r!==null;){if(e=r.alternate,e!==null&&_a(e)===null){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}Ql(t,!0,n,null,s);break;case"together":Ql(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Yo(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Rn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Ti|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(de(153));if(t.child!==null){for(e=t.child,n=si(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=si(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Sb(e,t,n){switch(t.tag){case 3:Jg(t),br();break;case 5:Ig(t);break;case 1:jt(t.type)&&ha(t);break;case 4:Ed(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,r=t.memoizedProps.value;Oe(wa,i._currentValue),i._currentValue=r;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?(Oe(qe,qe.current&1),t.flags|=128,null):n&t.child.childLanes?ey(e,t,n):(Oe(qe,qe.current&1),e=Rn(e,t,n),e!==null?e.sibling:null);Oe(qe,qe.current&1);break;case 19:if(i=(n&t.childLanes)!==0,e.flags&128){if(i)return ty(e,t,n);t.flags|=128}if(r=t.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Oe(qe,qe.current),i)break;return null;case 22:case 23:return t.lanes=0,Zg(e,t,n)}return Rn(e,t,n)}var ny,uu,iy,ry;ny=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};uu=function(){};iy=function(e,t,n,i){var r=e.memoizedProps;if(r!==i){e=t.stateNode,xi(pn.current);var s=null;switch(n){case"input":r=Rc(e,r),i=Rc(e,i),s=[];break;case"select":r=Xe({},r,{value:void 0}),i=Xe({},i,{value:void 0}),s=[];break;case"textarea":r=zc(e,r),i=zc(e,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(e.onclick=pa)}Pc(n,i);var o;n=null;for(u in r)if(!i.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var a=r[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(vs.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in i){var c=i[u];if(a=r!=null?r[u]:void 0,i.hasOwnProperty(u)&&c!==a&&(c!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(s=s||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(vs.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Ue("scroll",e),s||a===c||(s=[])):(s=s||[]).push(u,c))}n&&(s=s||[]).push("style",n);var u=s;(t.updateQueue=u)&&(t.flags|=4)}};ry=function(e,t,n,i){n!==i&&(t.flags|=4)};function Wr(e,t){if(!We)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function ht(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=e,r=r.sibling;else for(r=e.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function Ib(e,t,n){var i=t.pendingProps;switch(yd(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ht(t),null;case 1:return jt(t.type)&&ma(),ht(t),null;case 3:return i=t.stateNode,Er(),He(Ct),He(yt),Sd(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(bo(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Jt!==null&&(wu(Jt),Jt=null))),uu(e,t),ht(t),null;case 5:Nd(t);var r=xi(Ts.current);if(n=t.type,e!==null&&t.stateNode!=null)iy(e,t,n,i,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(de(166));return ht(t),null}if(e=xi(pn.current),bo(t)){i=t.stateNode,n=t.type;var s=t.memoizedProps;switch(i[dn]=t,i[Cs]=s,e=(t.mode&1)!==0,n){case"dialog":Ue("cancel",i),Ue("close",i);break;case"iframe":case"object":case"embed":Ue("load",i);break;case"video":case"audio":for(r=0;r<ns.length;r++)Ue(ns[r],i);break;case"source":Ue("error",i);break;case"img":case"image":case"link":Ue("error",i),Ue("load",i);break;case"details":Ue("toggle",i);break;case"input":zf(i,s),Ue("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Ue("invalid",i);break;case"textarea":Pf(i,s),Ue("invalid",i)}Pc(n,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&_o(i.textContent,a,e),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&_o(i.textContent,a,e),r=["children",""+a]):vs.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ue("scroll",i)}switch(n){case"input":po(i),Ff(i,s,!0);break;case"textarea":po(i),Of(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=pa)}i=r,t.updateQueue=i,i!==null&&(t.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Rh(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof i.is=="string"?e=o.createElement(n,{is:i.is}):(e=o.createElement(n),n==="select"&&(o=e,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):e=o.createElementNS(e,n),e[dn]=t,e[Cs]=i,ny(e,t,!1,!1),t.stateNode=e;e:{switch(o=Oc(n,i),n){case"dialog":Ue("cancel",e),Ue("close",e),r=i;break;case"iframe":case"object":case"embed":Ue("load",e),r=i;break;case"video":case"audio":for(r=0;r<ns.length;r++)Ue(ns[r],e);r=i;break;case"source":Ue("error",e),r=i;break;case"img":case"image":case"link":Ue("error",e),Ue("load",e),r=i;break;case"details":Ue("toggle",e),r=i;break;case"input":zf(e,i),r=Rc(e,i),Ue("invalid",e);break;case"option":r=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},r=Xe({},i,{value:void 0}),Ue("invalid",e);break;case"textarea":Pf(e,i),r=zc(e,i),Ue("invalid",e);break;default:r=i}Pc(n,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var c=a[s];s==="style"?zh(e,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Dh(e,c)):s==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&xs(e,c):typeof c=="number"&&xs(e,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(vs.hasOwnProperty(s)?c!=null&&s==="onScroll"&&Ue("scroll",e):c!=null&&nd(e,s,c,o))}switch(n){case"input":po(e),Ff(e,i,!1);break;case"textarea":po(e),Of(e);break;case"option":i.value!=null&&e.setAttribute("value",""+li(i.value));break;case"select":e.multiple=!!i.multiple,s=i.value,s!=null?ur(e,!!i.multiple,s,!1):i.defaultValue!=null&&ur(e,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(e.onclick=pa)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ht(t),null;case 6:if(e&&t.stateNode!=null)ry(e,t,e.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(de(166));if(n=xi(Ts.current),xi(pn.current),bo(t)){if(i=t.stateNode,n=t.memoizedProps,i[dn]=t,(s=i.nodeValue!==n)&&(e=Mt,e!==null))switch(e.tag){case 3:_o(i.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&_o(i.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[dn]=t,t.stateNode=i}return ht(t),null;case 13:if(He(qe),i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(We&&Dt!==null&&t.mode&1&&!(t.flags&128))bg(),br(),t.flags|=98560,s=!1;else if(s=bo(t),i!==null&&i.dehydrated!==null){if(e===null){if(!s)throw Error(de(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(de(317));s[dn]=t}else br(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ht(t),s=!1}else Jt!==null&&(wu(Jt),Jt=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(i=i!==null,i!==(e!==null&&e.memoizedState!==null)&&i&&(t.child.flags|=8192,t.mode&1&&(e===null||qe.current&1?rt===0&&(rt=3):Od())),t.updateQueue!==null&&(t.flags|=4),ht(t),null);case 4:return Er(),uu(e,t),e===null&&Is(t.stateNode.containerInfo),ht(t),null;case 10:return _d(t.type._context),ht(t),null;case 17:return jt(t.type)&&ma(),ht(t),null;case 19:if(He(qe),s=t.memoizedState,s===null)return ht(t),null;if(i=(t.flags&128)!==0,o=s.rendering,o===null)if(i)Wr(s,!1);else{if(rt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=_a(e),o!==null){for(t.flags|=128,Wr(s,!1),i=o.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=n,n=t.child;n!==null;)s=n,e=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Oe(qe,qe.current&1|2),t.child}e=e.sibling}s.tail!==null&&Je()>Sr&&(t.flags|=128,i=!0,Wr(s,!1),t.lanes=4194304)}else{if(!i)if(e=_a(o),e!==null){if(t.flags|=128,i=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Wr(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!We)return ht(t),null}else 2*Je()-s.renderingStartTime>Sr&&n!==1073741824&&(t.flags|=128,i=!0,Wr(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(n=s.last,n!==null?n.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Je(),t.sibling=null,n=qe.current,Oe(qe,i?n&1|2:n&1),t):(ht(t),null);case 22:case 23:return Pd(),i=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==i&&(t.flags|=8192),i&&t.mode&1?Rt&1073741824&&(ht(t),t.subtreeFlags&6&&(t.flags|=8192)):ht(t),null;case 24:return null;case 25:return null}throw Error(de(156,t.tag))}function Ab(e,t){switch(yd(t),t.tag){case 1:return jt(t.type)&&ma(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Er(),He(Ct),He(yt),Sd(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Nd(t),null;case 13:if(He(qe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(de(340));br()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return He(qe),null;case 4:return Er(),null;case 10:return _d(t.type._context),null;case 22:case 23:return Pd(),null;case 24:return null;default:return null}}var No=!1,gt=!1,Cb=typeof WeakSet=="function"?WeakSet:Set,he=null;function rr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Ze(e,t,i)}else n.current=null}function du(e,t,n){try{n()}catch(i){Ze(e,t,i)}}var Ip=!1;function jb(e,t){if(qc=ua,e=cg(),hd(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,u=0,d=0,f=e,p=null;t:for(;;){for(var m;f!==n||r!==0&&f.nodeType!==3||(a=o+r),f!==s||i!==0&&f.nodeType!==3||(c=o+i),f.nodeType===3&&(o+=f.nodeValue.length),(m=f.firstChild)!==null;)p=f,f=m;for(;;){if(f===e)break t;if(p===n&&++u===r&&(a=o),p===s&&++d===i&&(c=o),(m=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=m}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Yc={focusedElem:e,selectionRange:n},ua=!1,he=t;he!==null;)if(t=he,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,he=e;else for(;he!==null;){t=he;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var g=v.memoizedProps,x=v.memoizedState,h=t.stateNode,y=h.getSnapshotBeforeUpdate(t.elementType===t.type?g:Xt(t.type,g),x);h.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var _=t.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(de(163))}}catch(b){Ze(t,t.return,b)}if(e=t.sibling,e!==null){e.return=t.return,he=e;break}he=t.return}return v=Ip,Ip=!1,v}function hs(e,t,n){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&e)===e){var s=r.destroy;r.destroy=void 0,s!==void 0&&du(t,n,s)}r=r.next}while(r!==i)}}function rl(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function fu(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function sy(e){var t=e.alternate;t!==null&&(e.alternate=null,sy(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[dn],delete t[Cs],delete t[Qc],delete t[fb],delete t[pb])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function oy(e){return e.tag===5||e.tag===3||e.tag===4}function Ap(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||oy(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function pu(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=pa));else if(i!==4&&(e=e.child,e!==null))for(pu(e,t,n),e=e.sibling;e!==null;)pu(e,t,n),e=e.sibling}function mu(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&(e=e.child,e!==null))for(mu(e,t,n),e=e.sibling;e!==null;)mu(e,t,n),e=e.sibling}var ct=null,Zt=!1;function Bn(e,t,n){for(n=n.child;n!==null;)ay(e,t,n),n=n.sibling}function ay(e,t,n){if(fn&&typeof fn.onCommitFiberUnmount=="function")try{fn.onCommitFiberUnmount(Xa,n)}catch{}switch(n.tag){case 5:gt||rr(n,t);case 6:var i=ct,r=Zt;ct=null,Bn(e,t,n),ct=i,Zt=r,ct!==null&&(Zt?(e=ct,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):ct.removeChild(n.stateNode));break;case 18:ct!==null&&(Zt?(e=ct,n=n.stateNode,e.nodeType===8?Kl(e.parentNode,n):e.nodeType===1&&Kl(e,n),Es(e)):Kl(ct,n.stateNode));break;case 4:i=ct,r=Zt,ct=n.stateNode.containerInfo,Zt=!0,Bn(e,t,n),ct=i,Zt=r;break;case 0:case 11:case 14:case 15:if(!gt&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&du(n,t,o),r=r.next}while(r!==i)}Bn(e,t,n);break;case 1:if(!gt&&(rr(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){Ze(n,t,a)}Bn(e,t,n);break;case 21:Bn(e,t,n);break;case 22:n.mode&1?(gt=(i=gt)||n.memoizedState!==null,Bn(e,t,n),gt=i):Bn(e,t,n);break;default:Bn(e,t,n)}}function Cp(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Cb),t.forEach(function(i){var r=Bb.bind(null,e,i);n.has(i)||(n.add(i),i.then(r,r))})}}function Yt(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var s=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:ct=a.stateNode,Zt=!1;break e;case 3:ct=a.stateNode.containerInfo,Zt=!0;break e;case 4:ct=a.stateNode.containerInfo,Zt=!0;break e}a=a.return}if(ct===null)throw Error(de(160));ay(s,o,r),ct=null,Zt=!1;var c=r.alternate;c!==null&&(c.return=null),r.return=null}catch(u){Ze(r,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)ly(t,e),t=t.sibling}function ly(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Yt(t,e),ln(e),i&4){try{hs(3,e,e.return),rl(3,e)}catch(g){Ze(e,e.return,g)}try{hs(5,e,e.return)}catch(g){Ze(e,e.return,g)}}break;case 1:Yt(t,e),ln(e),i&512&&n!==null&&rr(n,n.return);break;case 5:if(Yt(t,e),ln(e),i&512&&n!==null&&rr(n,n.return),e.flags&32){var r=e.stateNode;try{xs(r,"")}catch(g){Ze(e,e.return,g)}}if(i&4&&(r=e.stateNode,r!=null)){var s=e.memoizedProps,o=n!==null?n.memoizedProps:s,a=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&jh(r,s),Oc(a,o);var u=Oc(a,s);for(o=0;o<c.length;o+=2){var d=c[o],f=c[o+1];d==="style"?zh(r,f):d==="dangerouslySetInnerHTML"?Dh(r,f):d==="children"?xs(r,f):nd(r,d,f,u)}switch(a){case"input":Dc(r,s);break;case"textarea":Th(r,s);break;case"select":var p=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?ur(r,!!s.multiple,m,!1):p!==!!s.multiple&&(s.defaultValue!=null?ur(r,!!s.multiple,s.defaultValue,!0):ur(r,!!s.multiple,s.multiple?[]:"",!1))}r[Cs]=s}catch(g){Ze(e,e.return,g)}}break;case 6:if(Yt(t,e),ln(e),i&4){if(e.stateNode===null)throw Error(de(162));r=e.stateNode,s=e.memoizedProps;try{r.nodeValue=s}catch(g){Ze(e,e.return,g)}}break;case 3:if(Yt(t,e),ln(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Es(t.containerInfo)}catch(g){Ze(e,e.return,g)}break;case 4:Yt(t,e),ln(e);break;case 13:Yt(t,e),ln(e),r=e.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(zd=Je())),i&4&&Cp(e);break;case 22:if(d=n!==null&&n.memoizedState!==null,e.mode&1?(gt=(u=gt)||d,Yt(t,e),gt=u):Yt(t,e),ln(e),i&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(he=e,d=e.child;d!==null;){for(f=he=d;he!==null;){switch(p=he,m=p.child,p.tag){case 0:case 11:case 14:case 15:hs(4,p,p.return);break;case 1:rr(p,p.return);var v=p.stateNode;if(typeof v.componentWillUnmount=="function"){i=p,n=p.return;try{t=i,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(g){Ze(i,n,g)}}break;case 5:rr(p,p.return);break;case 22:if(p.memoizedState!==null){Tp(f);continue}}m!==null?(m.return=p,he=m):Tp(f)}d=d.sibling}e:for(d=null,f=e;;){if(f.tag===5){if(d===null){d=f;try{r=f.stateNode,u?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=Mh("display",o))}catch(g){Ze(e,e.return,g)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(g){Ze(e,e.return,g)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Yt(t,e),ln(e),i&4&&Cp(e);break;case 21:break;default:Yt(t,e),ln(e)}}function ln(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(oy(n)){var i=n;break e}n=n.return}throw Error(de(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(xs(r,""),i.flags&=-33);var s=Ap(e);mu(e,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=Ap(e);pu(e,a,o);break;default:throw Error(de(161))}}catch(c){Ze(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Tb(e,t,n){he=e,cy(e)}function cy(e,t,n){for(var i=(e.mode&1)!==0;he!==null;){var r=he,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||No;if(!o){var a=r.alternate,c=a!==null&&a.memoizedState!==null||gt;a=No;var u=gt;if(No=o,(gt=c)&&!u)for(he=r;he!==null;)o=he,c=o.child,o.tag===22&&o.memoizedState!==null?Rp(r):c!==null?(c.return=o,he=c):Rp(r);for(;s!==null;)he=s,cy(s),s=s.sibling;he=r,No=a,gt=u}jp(e)}else r.subtreeFlags&8772&&s!==null?(s.return=r,he=s):jp(e)}}function jp(e){for(;he!==null;){var t=he;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:gt||rl(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!gt)if(n===null)i.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:Xt(t.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&mp(t,s,i);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}mp(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Es(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(de(163))}gt||t.flags&512&&fu(t)}catch(p){Ze(t,t.return,p)}}if(t===e){he=null;break}if(n=t.sibling,n!==null){n.return=t.return,he=n;break}he=t.return}}function Tp(e){for(;he!==null;){var t=he;if(t===e){he=null;break}var n=t.sibling;if(n!==null){n.return=t.return,he=n;break}he=t.return}}function Rp(e){for(;he!==null;){var t=he;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(c){Ze(t,n,c)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var r=t.return;try{i.componentDidMount()}catch(c){Ze(t,r,c)}}var s=t.return;try{fu(t)}catch(c){Ze(t,s,c)}break;case 5:var o=t.return;try{fu(t)}catch(c){Ze(t,o,c)}}}catch(c){Ze(t,t.return,c)}if(t===e){he=null;break}var a=t.sibling;if(a!==null){a.return=t.return,he=a;break}he=t.return}}var Rb=Math.ceil,Ea=Pn.ReactCurrentDispatcher,Dd=Pn.ReactCurrentOwner,Kt=Pn.ReactCurrentBatchConfig,Me=0,at=null,et=null,ut=0,Rt=0,sr=fi(0),rt=0,zs=null,Ti=0,sl=0,Md=0,gs=null,Nt=null,zd=0,Sr=1/0,wn=null,Na=!1,hu=null,ii=null,So=!1,Zn=null,Sa=0,ys=0,gu=null,Xo=-1,Zo=0;function _t(){return Me&6?Je():Xo!==-1?Xo:Xo=Je()}function ri(e){return e.mode&1?Me&2&&ut!==0?ut&-ut:hb.transition!==null?(Zo===0&&(Zo=Gh()),Zo):(e=Fe,e!==0||(e=window.event,e=e===void 0?16:eg(e.type)),e):1}function rn(e,t,n,i){if(50<ys)throw ys=0,gu=null,Error(de(185));Zs(e,n,i),(!(Me&2)||e!==at)&&(e===at&&(!(Me&2)&&(sl|=n),rt===4&&Gn(e,ut)),Tt(e,i),n===1&&Me===0&&!(t.mode&1)&&(Sr=Je()+500,tl&&pi()))}function Tt(e,t){var n=e.callbackNode;h_(e,t);var i=ca(e,e===at?ut:0);if(i===0)n!==null&&Uf(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(n!=null&&Uf(n),t===1)e.tag===0?mb(Dp.bind(null,e)):vg(Dp.bind(null,e)),ub(function(){!(Me&6)&&pi()}),n=null;else{switch(qh(i)){case 1:n=ad;break;case 4:n=Kh;break;case 16:n=la;break;case 536870912:n=Vh;break;default:n=la}n=yy(n,uy.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function uy(e,t){if(Xo=-1,Zo=0,Me&6)throw Error(de(327));var n=e.callbackNode;if(hr()&&e.callbackNode!==n)return null;var i=ca(e,e===at?ut:0);if(i===0)return null;if(i&30||i&e.expiredLanes||t)t=Ia(e,i);else{t=i;var r=Me;Me|=2;var s=fy();(at!==e||ut!==t)&&(wn=null,Sr=Je()+500,ki(e,t));do try{zb();break}catch(a){dy(e,a)}while(!0);xd(),Ea.current=s,Me=r,et!==null?t=0:(at=null,ut=0,t=rt)}if(t!==0){if(t===2&&(r=$c(e),r!==0&&(i=r,t=yu(e,r))),t===1)throw n=zs,ki(e,0),Gn(e,i),Tt(e,Je()),n;if(t===6)Gn(e,i);else{if(r=e.current.alternate,!(i&30)&&!Db(r)&&(t=Ia(e,i),t===2&&(s=$c(e),s!==0&&(i=s,t=yu(e,s))),t===1))throw n=zs,ki(e,0),Gn(e,i),Tt(e,Je()),n;switch(e.finishedWork=r,e.finishedLanes=i,t){case 0:case 1:throw Error(de(345));case 2:hi(e,Nt,wn);break;case 3:if(Gn(e,i),(i&130023424)===i&&(t=zd+500-Je(),10<t)){if(ca(e,0)!==0)break;if(r=e.suspendedLanes,(r&i)!==i){_t(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=Zc(hi.bind(null,e,Nt,wn),t);break}hi(e,Nt,wn);break;case 4:if(Gn(e,i),(i&4194240)===i)break;for(t=e.eventTimes,r=-1;0<i;){var o=31-nn(i);s=1<<o,o=t[o],o>r&&(r=o),i&=~s}if(i=r,i=Je()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Rb(i/1960))-i,10<i){e.timeoutHandle=Zc(hi.bind(null,e,Nt,wn),i);break}hi(e,Nt,wn);break;case 5:hi(e,Nt,wn);break;default:throw Error(de(329))}}}return Tt(e,Je()),e.callbackNode===n?uy.bind(null,e):null}function yu(e,t){var n=gs;return e.current.memoizedState.isDehydrated&&(ki(e,t).flags|=256),e=Ia(e,t),e!==2&&(t=Nt,Nt=n,t!==null&&wu(t)),e}function wu(e){Nt===null?Nt=e:Nt.push.apply(Nt,e)}function Db(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!on(s(),r))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Gn(e,t){for(t&=~Md,t&=~sl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-nn(t),i=1<<n;e[n]=-1,t&=~i}}function Dp(e){if(Me&6)throw Error(de(327));hr();var t=ca(e,0);if(!(t&1))return Tt(e,Je()),null;var n=Ia(e,t);if(e.tag!==0&&n===2){var i=$c(e);i!==0&&(t=i,n=yu(e,i))}if(n===1)throw n=zs,ki(e,0),Gn(e,t),Tt(e,Je()),n;if(n===6)throw Error(de(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,hi(e,Nt,wn),Tt(e,Je()),null}function Fd(e,t){var n=Me;Me|=1;try{return e(t)}finally{Me=n,Me===0&&(Sr=Je()+500,tl&&pi())}}function Ri(e){Zn!==null&&Zn.tag===0&&!(Me&6)&&hr();var t=Me;Me|=1;var n=Kt.transition,i=Fe;try{if(Kt.transition=null,Fe=1,e)return e()}finally{Fe=i,Kt.transition=n,Me=t,!(Me&6)&&pi()}}function Pd(){Rt=sr.current,He(sr)}function ki(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,cb(n)),et!==null)for(n=et.return;n!==null;){var i=n;switch(yd(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&ma();break;case 3:Er(),He(Ct),He(yt),Sd();break;case 5:Nd(i);break;case 4:Er();break;case 13:He(qe);break;case 19:He(qe);break;case 10:_d(i.type._context);break;case 22:case 23:Pd()}n=n.return}if(at=e,et=e=si(e.current,null),ut=Rt=t,rt=0,zs=null,Md=sl=Ti=0,Nt=gs=null,vi!==null){for(t=0;t<vi.length;t++)if(n=vi[t],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,s=n.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}n.pending=i}vi=null}return e}function dy(e,t){do{var n=et;try{if(xd(),Go.current=ka,ba){for(var i=Ye.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}ba=!1}if(ji=0,ot=nt=Ye=null,ms=!1,Rs=0,Dd.current=null,n===null||n.return===null){rt=1,zs=t,et=null;break}e:{var s=e,o=n.return,a=n,c=t;if(t=ut,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=a,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=xp(o);if(m!==null){m.flags&=-257,_p(m,o,a,s,t),m.mode&1&&vp(s,u,t),t=m,c=u;var v=t.updateQueue;if(v===null){var g=new Set;g.add(c),t.updateQueue=g}else v.add(c);break e}else{if(!(t&1)){vp(s,u,t),Od();break e}c=Error(de(426))}}else if(We&&a.mode&1){var x=xp(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),_p(x,o,a,s,t),wd(Nr(c,a));break e}}s=c=Nr(c,a),rt!==4&&(rt=2),gs===null?gs=[s]:gs.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var h=qg(s,c,t);pp(s,h);break e;case 1:a=c;var y=s.type,_=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(ii===null||!ii.has(_)))){s.flags|=65536,t&=-t,s.lanes|=t;var b=Yg(s,a,t);pp(s,b);break e}}s=s.return}while(s!==null)}my(n)}catch(N){t=N,et===n&&n!==null&&(et=n=n.return);continue}break}while(!0)}function fy(){var e=Ea.current;return Ea.current=ka,e===null?ka:e}function Od(){(rt===0||rt===3||rt===2)&&(rt=4),at===null||!(Ti&268435455)&&!(sl&268435455)||Gn(at,ut)}function Ia(e,t){var n=Me;Me|=2;var i=fy();(at!==e||ut!==t)&&(wn=null,ki(e,t));do try{Mb();break}catch(r){dy(e,r)}while(!0);if(xd(),Me=n,Ea.current=i,et!==null)throw Error(de(261));return at=null,ut=0,rt}function Mb(){for(;et!==null;)py(et)}function zb(){for(;et!==null&&!o_();)py(et)}function py(e){var t=gy(e.alternate,e,Rt);e.memoizedProps=e.pendingProps,t===null?my(e):et=t,Dd.current=null}function my(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Ab(n,t),n!==null){n.flags&=32767,et=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{rt=6,et=null;return}}else if(n=Ib(n,t,Rt),n!==null){et=n;return}if(t=t.sibling,t!==null){et=t;return}et=t=e}while(t!==null);rt===0&&(rt=5)}function hi(e,t,n){var i=Fe,r=Kt.transition;try{Kt.transition=null,Fe=1,Fb(e,t,n,i)}finally{Kt.transition=r,Fe=i}return null}function Fb(e,t,n,i){do hr();while(Zn!==null);if(Me&6)throw Error(de(327));n=e.finishedWork;var r=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(de(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(g_(e,s),e===at&&(et=at=null,ut=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||So||(So=!0,yy(la,function(){return hr(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Kt.transition,Kt.transition=null;var o=Fe;Fe=1;var a=Me;Me|=4,Dd.current=null,jb(e,n),ly(n,e),nb(Yc),ua=!!qc,Yc=qc=null,e.current=n,Tb(n),a_(),Me=a,Fe=o,Kt.transition=s}else e.current=n;if(So&&(So=!1,Zn=e,Sa=r),s=e.pendingLanes,s===0&&(ii=null),u_(n.stateNode),Tt(e,Je()),t!==null)for(i=e.onRecoverableError,n=0;n<t.length;n++)r=t[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Na)throw Na=!1,e=hu,hu=null,e;return Sa&1&&e.tag!==0&&hr(),s=e.pendingLanes,s&1?e===gu?ys++:(ys=0,gu=e):ys=0,pi(),null}function hr(){if(Zn!==null){var e=qh(Sa),t=Kt.transition,n=Fe;try{if(Kt.transition=null,Fe=16>e?16:e,Zn===null)var i=!1;else{if(e=Zn,Zn=null,Sa=0,Me&6)throw Error(de(331));var r=Me;for(Me|=4,he=e.current;he!==null;){var s=he,o=s.child;if(he.flags&16){var a=s.deletions;if(a!==null){for(var c=0;c<a.length;c++){var u=a[c];for(he=u;he!==null;){var d=he;switch(d.tag){case 0:case 11:case 15:hs(8,d,s)}var f=d.child;if(f!==null)f.return=d,he=f;else for(;he!==null;){d=he;var p=d.sibling,m=d.return;if(sy(d),d===u){he=null;break}if(p!==null){p.return=m,he=p;break}he=m}}}var v=s.alternate;if(v!==null){var g=v.child;if(g!==null){v.child=null;do{var x=g.sibling;g.sibling=null,g=x}while(g!==null)}}he=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,he=o;else e:for(;he!==null;){if(s=he,s.flags&2048)switch(s.tag){case 0:case 11:case 15:hs(9,s,s.return)}var h=s.sibling;if(h!==null){h.return=s.return,he=h;break e}he=s.return}}var y=e.current;for(he=y;he!==null;){o=he;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,he=_;else e:for(o=y;he!==null;){if(a=he,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:rl(9,a)}}catch(N){Ze(a,a.return,N)}if(a===o){he=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,he=b;break e}he=a.return}}if(Me=r,pi(),fn&&typeof fn.onPostCommitFiberRoot=="function")try{fn.onPostCommitFiberRoot(Xa,e)}catch{}i=!0}return i}finally{Fe=n,Kt.transition=t}}return!1}function Mp(e,t,n){t=Nr(n,t),t=qg(e,t,1),e=ni(e,t,1),t=_t(),e!==null&&(Zs(e,1,t),Tt(e,t))}function Ze(e,t,n){if(e.tag===3)Mp(e,e,n);else for(;t!==null;){if(t.tag===3){Mp(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(ii===null||!ii.has(i))){e=Nr(n,e),e=Yg(t,e,1),t=ni(t,e,1),e=_t(),t!==null&&(Zs(t,1,e),Tt(t,e));break}}t=t.return}}function Pb(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),t=_t(),e.pingedLanes|=e.suspendedLanes&n,at===e&&(ut&n)===n&&(rt===4||rt===3&&(ut&130023424)===ut&&500>Je()-zd?ki(e,0):Md|=n),Tt(e,t)}function hy(e,t){t===0&&(e.mode&1?(t=go,go<<=1,!(go&130023424)&&(go=4194304)):t=1);var n=_t();e=Tn(e,t),e!==null&&(Zs(e,t,n),Tt(e,n))}function Ob(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),hy(e,n)}function Bb(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,r=e.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(de(314))}i!==null&&i.delete(t),hy(e,n)}var gy;gy=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ct.current)St=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return St=!1,Sb(e,t,n);St=!!(e.flags&131072)}else St=!1,We&&t.flags&1048576&&xg(t,ya,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;Yo(e,t),e=t.pendingProps;var r=_r(t,yt.current);mr(t,n),r=Ad(null,t,i,e,r,n);var s=Cd();return t.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,jt(i)?(s=!0,ha(t)):s=!1,t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,kd(t),r.updater=il,t.stateNode=r,r._reactInternals=t,ru(t,i,e,n),t=au(null,t,i,!0,s,n)):(t.tag=0,We&&s&&gd(t),vt(null,t,r,n),t=t.child),t;case 16:i=t.elementType;e:{switch(Yo(e,t),e=t.pendingProps,r=i._init,i=r(i._payload),t.type=i,r=t.tag=Ub(i),e=Xt(i,e),r){case 0:t=ou(null,t,i,e,n);break e;case 1:t=Ep(null,t,i,e,n);break e;case 11:t=bp(null,t,i,e,n);break e;case 14:t=kp(null,t,i,Xt(i.type,e),n);break e}throw Error(de(306,i,""))}return t;case 0:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:Xt(i,r),ou(e,t,i,r,n);case 1:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:Xt(i,r),Ep(e,t,i,r,n);case 3:e:{if(Jg(t),e===null)throw Error(de(387));i=t.pendingProps,s=t.memoizedState,r=s.element,Sg(e,t),xa(t,i,null,n);var o=t.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){r=Nr(Error(de(423)),t),t=Np(e,t,i,n,r);break e}else if(i!==r){r=Nr(Error(de(424)),t),t=Np(e,t,i,n,r);break e}else for(Dt=ti(t.stateNode.containerInfo.firstChild),Mt=t,We=!0,Jt=null,n=Eg(t,null,i,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(br(),i===r){t=Rn(e,t,n);break e}vt(e,t,i,n)}t=t.child}return t;case 5:return Ig(t),e===null&&tu(t),i=t.type,r=t.pendingProps,s=e!==null?e.memoizedProps:null,o=r.children,Xc(i,r)?o=null:s!==null&&Xc(i,s)&&(t.flags|=32),Qg(e,t),vt(e,t,o,n),t.child;case 6:return e===null&&tu(t),null;case 13:return ey(e,t,n);case 4:return Ed(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=kr(t,null,i,n):vt(e,t,i,n),t.child;case 11:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:Xt(i,r),bp(e,t,i,r,n);case 7:return vt(e,t,t.pendingProps,n),t.child;case 8:return vt(e,t,t.pendingProps.children,n),t.child;case 12:return vt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,r=t.pendingProps,s=t.memoizedProps,o=r.value,Oe(wa,i._currentValue),i._currentValue=o,s!==null)if(on(s.value,o)){if(s.children===r.children&&!Ct.current){t=Rn(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var c=a.firstContext;c!==null;){if(c.context===i){if(s.tag===1){c=En(-1,n&-n),c.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}s.lanes|=n,c=s.alternate,c!==null&&(c.lanes|=n),nu(s.return,n,t),a.lanes|=n;break}c=c.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(de(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),nu(o,n,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}vt(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,i=t.pendingProps.children,mr(t,n),r=Vt(r),i=i(r),t.flags|=1,vt(e,t,i,n),t.child;case 14:return i=t.type,r=Xt(i,t.pendingProps),r=Xt(i.type,r),kp(e,t,i,r,n);case 15:return Xg(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:Xt(i,r),Yo(e,t),t.tag=1,jt(i)?(e=!0,ha(t)):e=!1,mr(t,n),Gg(t,i,r),ru(t,i,r,n),au(null,t,i,!0,e,n);case 19:return ty(e,t,n);case 22:return Zg(e,t,n)}throw Error(de(156,t.tag))};function yy(e,t){return Wh(e,t)}function Lb(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $t(e,t,n,i){return new Lb(e,t,n,i)}function Bd(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ub(e){if(typeof e=="function")return Bd(e)?1:0;if(e!=null){if(e=e.$$typeof,e===rd)return 11;if(e===sd)return 14}return 2}function si(e,t){var n=e.alternate;return n===null?(n=$t(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Qo(e,t,n,i,r,s){var o=2;if(i=e,typeof e=="function")Bd(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Yi:return Ei(n.children,r,s,t);case id:o=8,r|=8;break;case Ac:return e=$t(12,n,t,r|2),e.elementType=Ac,e.lanes=s,e;case Cc:return e=$t(13,n,t,r),e.elementType=Cc,e.lanes=s,e;case jc:return e=$t(19,n,t,r),e.elementType=jc,e.lanes=s,e;case Ih:return ol(n,r,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Nh:o=10;break e;case Sh:o=9;break e;case rd:o=11;break e;case sd:o=14;break e;case Un:o=16,i=null;break e}throw Error(de(130,e==null?e:typeof e,""))}return t=$t(o,n,t,r),t.elementType=e,t.type=i,t.lanes=s,t}function Ei(e,t,n,i){return e=$t(7,e,i,t),e.lanes=n,e}function ol(e,t,n,i){return e=$t(22,e,i,t),e.elementType=Ih,e.lanes=n,e.stateNode={isHidden:!1},e}function Jl(e,t,n){return e=$t(6,e,null,t),e.lanes=n,e}function ec(e,t,n){return t=$t(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Hb(e,t,n,i,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ml(0),this.expirationTimes=Ml(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ml(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Ld(e,t,n,i,r,s,o,a,c){return e=new Hb(e,t,n,a,c),t===1?(t=1,s===!0&&(t|=8)):t=0,s=$t(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},kd(s),e}function $b(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:qi,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}}function wy(e){if(!e)return ci;e=e._reactInternals;e:{if(Pi(e)!==e||e.tag!==1)throw Error(de(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(jt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(de(171))}if(e.tag===1){var n=e.type;if(jt(n))return wg(e,n,t)}return t}function vy(e,t,n,i,r,s,o,a,c){return e=Ld(n,i,!0,e,r,s,o,a,c),e.context=wy(null),n=e.current,i=_t(),r=ri(n),s=En(i,r),s.callback=t??null,ni(n,s,r),e.current.lanes=r,Zs(e,r,i),Tt(e,i),e}function al(e,t,n,i){var r=t.current,s=_t(),o=ri(r);return n=wy(n),t.context===null?t.context=n:t.pendingContext=n,t=En(s,o),t.payload={element:e},i=i===void 0?null:i,i!==null&&(t.callback=i),e=ni(r,t,o),e!==null&&(rn(e,r,o,s),Vo(e,r,o)),o}function Aa(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function zp(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Ud(e,t){zp(e,t),(e=e.alternate)&&zp(e,t)}function Wb(){return null}var xy=typeof reportError=="function"?reportError:function(e){console.error(e)};function Hd(e){this._internalRoot=e}ll.prototype.render=Hd.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(de(409));al(e,t,null,null)};ll.prototype.unmount=Hd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ri(function(){al(null,e,null,null)}),t[jn]=null}};function ll(e){this._internalRoot=e}ll.prototype.unstable_scheduleHydration=function(e){if(e){var t=Zh();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Vn.length&&t!==0&&t<Vn[n].priority;n++);Vn.splice(n,0,e),n===0&&Jh(e)}};function $d(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function cl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Fp(){}function Kb(e,t,n,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var u=Aa(o);s.call(u)}}var o=vy(t,i,e,0,null,!1,!1,"",Fp);return e._reactRootContainer=o,e[jn]=o.current,Is(e.nodeType===8?e.parentNode:e),Ri(),o}for(;r=e.lastChild;)e.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var u=Aa(c);a.call(u)}}var c=Ld(e,0,!1,null,null,!1,!1,"",Fp);return e._reactRootContainer=c,e[jn]=c.current,Is(e.nodeType===8?e.parentNode:e),Ri(function(){al(t,c,n,i)}),c}function ul(e,t,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var c=Aa(o);a.call(c)}}al(t,o,e,r)}else o=Kb(n,t,e,r,i);return Aa(o)}Yh=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ts(t.pendingLanes);n!==0&&(ld(t,n|1),Tt(t,Je()),!(Me&6)&&(Sr=Je()+500,pi()))}break;case 13:Ri(function(){var i=Tn(e,1);if(i!==null){var r=_t();rn(i,e,1,r)}}),Ud(e,1)}};cd=function(e){if(e.tag===13){var t=Tn(e,134217728);if(t!==null){var n=_t();rn(t,e,134217728,n)}Ud(e,134217728)}};Xh=function(e){if(e.tag===13){var t=ri(e),n=Tn(e,t);if(n!==null){var i=_t();rn(n,e,t,i)}Ud(e,t)}};Zh=function(){return Fe};Qh=function(e,t){var n=Fe;try{return Fe=e,t()}finally{Fe=n}};Lc=function(e,t,n){switch(t){case"input":if(Dc(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=el(i);if(!r)throw Error(de(90));Ch(i),Dc(i,r)}}}break;case"textarea":Th(e,n);break;case"select":t=n.value,t!=null&&ur(e,!!n.multiple,t,!1)}};Oh=Fd;Bh=Ri;var Vb={usingClientEntryPoint:!1,Events:[Js,Ji,el,Fh,Ph,Fd]},Kr={findFiberByHostInstance:wi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Gb={bundleType:Kr.bundleType,version:Kr.version,rendererPackageName:Kr.rendererPackageName,rendererConfig:Kr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Pn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Hh(e),e===null?null:e.stateNode},findFiberByHostInstance:Kr.findFiberByHostInstance||Wb,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Io=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Io.isDisabled&&Io.supportsFiber)try{Xa=Io.inject(Gb),fn=Io}catch{}}Pt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Vb;Pt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$d(t))throw Error(de(200));return $b(e,t,null,n)};Pt.createRoot=function(e,t){if(!$d(e))throw Error(de(299));var n=!1,i="",r=xy;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(r=t.onRecoverableError)),t=Ld(e,1,!1,null,null,n,!1,i,r),e[jn]=t.current,Is(e.nodeType===8?e.parentNode:e),new Hd(t)};Pt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(de(188)):(e=Object.keys(e).join(","),Error(de(268,e)));return e=Hh(t),e=e===null?null:e.stateNode,e};Pt.flushSync=function(e){return Ri(e)};Pt.hydrate=function(e,t,n){if(!cl(t))throw Error(de(200));return ul(null,e,t,!0,n)};Pt.hydrateRoot=function(e,t,n){if(!$d(e))throw Error(de(405));var i=n!=null&&n.hydratedSources||null,r=!1,s="",o=xy;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=vy(t,null,e,1,n??null,r,!1,s,o),e[jn]=t.current,Is(e),i)for(e=0;e<i.length;e++)n=i[e],r=n._getVersion,r=r(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,r]:t.mutableSourceEagerHydrationData.push(n,r);return new ll(t)};Pt.render=function(e,t,n){if(!cl(t))throw Error(de(200));return ul(null,e,t,!1,n)};Pt.unmountComponentAtNode=function(e){if(!cl(e))throw Error(de(40));return e._reactRootContainer?(Ri(function(){ul(null,null,e,!1,function(){e._reactRootContainer=null,e[jn]=null})}),!0):!1};Pt.unstable_batchedUpdates=Fd;Pt.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!cl(n))throw Error(de(200));if(e==null||e._reactInternals===void 0)throw Error(de(38));return ul(e,t,n,!1,i)};Pt.version="18.3.1-next-f1338f8080-20240426";function _y(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(_y)}catch(e){console.error(e)}}_y(),_h.exports=Pt;var Nn=_h.exports;const or=Rr(Nn);var Pp=Nn;Sc.createRoot=Pp.createRoot,Sc.hydrateRoot=Pp.hydrateRoot;const qb=({onNewWorkspace:e,onClearWorkspace:t,onRemoveWorkspace:n,workspaceCount:i,onGenerateWorkflow:r,onSaveWorkflow:s,saveButtonLabel:o})=>l.jsxs("div",{className:"actions-bar",style:{position:"relative"},children:[l.jsx("button",{className:"actions-button",onClick:e,children:"New Workspace"}),l.jsx("div",{className:"separator"}),l.jsx("button",{className:"actions-button",onClick:t,children:"Clear Workspace"}),l.jsx("div",{className:"separator"}),l.jsx("button",{className:"actions-button",onClick:n,disabled:i===1,children:"Remove Workspace"}),l.jsx("div",{className:"separator"}),l.jsx("button",{className:"actions-button btn-save",onClick:s,children:o||"Save Workflow"}),l.jsx("div",{className:"separator"}),l.jsx("button",{className:"actions-button btn-generate",onClick:r,children:"Generate Workflow"})]});var by={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function n(){for(var s="",o=0;o<arguments.length;o++){var a=arguments[o];a&&(s=r(s,i(a)))}return s}function i(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return n.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var o="";for(var a in s)t.call(s,a)&&s[a]&&(o=r(o,a));return o}function r(s,o){return o?s?s+" "+o:s+o:s}e.exports?(n.default=n,e.exports=n):window.classNames=n})()})(by);var Yb=by.exports;const Te=Rr(Yb);function vu(){return vu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},vu.apply(null,arguments)}function ky(e,t){if(e==null)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.indexOf(i)!==-1)continue;n[i]=e[i]}return n}function Op(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function Xb(e){var t=Zb(e,"string");return typeof t=="symbol"?t:String(t)}function Zb(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Qb(e,t,n){var i=k.useRef(e!==void 0),r=k.useState(t),s=r[0],o=r[1],a=e!==void 0,c=i.current;return i.current=a,!a&&c&&s!==t&&o(t),[a?e:s,k.useCallback(function(u){for(var d=arguments.length,f=new Array(d>1?d-1:0),p=1;p<d;p++)f[p-1]=arguments[p];n&&n.apply(void 0,[u].concat(f)),o(u)},[n])]}function Jb(e,t){return Object.keys(t).reduce(function(n,i){var r,s=n,o=s[Op(i)],a=s[i],c=ky(s,[Op(i),i].map(Xb)),u=t[i],d=Qb(a,o,e[u]),f=d[0],p=d[1];return vu({},c,(r={},r[i]=f,r[u]=p,r))},e)}function xu(e,t){return xu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},xu(e,t)}function ek(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,xu(e,t)}const tk=["xxl","xl","lg","md","sm","xs"],nk="xs",to=k.createContext({prefixes:{},breakpoints:tk,minBreakpoint:nk}),{Consumer:ZT,Provider:QT}=to;function Pe(e,t){const{prefixes:n}=k.useContext(to);return e||n[t]||t}function ik(){const{breakpoints:e}=k.useContext(to);return e}function rk(){const{minBreakpoint:e}=k.useContext(to);return e}function sk(){const{dir:e}=k.useContext(to);return e==="rtl"}function dl(e){return e&&e.ownerDocument||document}function ok(e){var t=dl(e);return t&&t.defaultView||window}function ak(e,t){return ok(e).getComputedStyle(e,t)}var lk=/([A-Z])/g;function ck(e){return e.replace(lk,"-$1").toLowerCase()}var uk=/^ms-/;function Ao(e){return ck(e).replace(uk,"-ms-")}var dk=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function fk(e){return!!(e&&dk.test(e))}function Sn(e,t){var n="",i="";if(typeof t=="string")return e.style.getPropertyValue(Ao(t))||ak(e).getPropertyValue(Ao(t));Object.keys(t).forEach(function(r){var s=t[r];!s&&s!==0?e.style.removeProperty(Ao(r)):fk(r)?i+=r+"("+s+") ":n+=Ao(r)+": "+s+";"}),i&&(n+="transform: "+i+";"),e.style.cssText+=";"+n}var Ey={exports:{}},pk="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",mk=pk,hk=mk;function Ny(){}function Sy(){}Sy.resetWarningCache=Ny;var gk=function(){function e(i,r,s,o,a,c){if(c!==hk){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:Sy,resetWarningCache:Ny};return n.PropTypes=n,n};Ey.exports=gk();var yk=Ey.exports;const In=Rr(yk),Bp={disabled:!1},Iy=ie.createContext(null);var wk=function(t){return t.scrollTop},is="unmounted",$n="exited",un="entering",qn="entered",Fs="exiting",On=function(e){ek(t,e);function t(i,r){var s;s=e.call(this,i,r)||this;var o=r,a=o&&!o.isMounting?i.enter:i.appear,c;return s.appearStatus=null,i.in?a?(c=$n,s.appearStatus=un):c=qn:i.unmountOnExit||i.mountOnEnter?c=is:c=$n,s.state={status:c},s.nextCallback=null,s}t.getDerivedStateFromProps=function(r,s){var o=r.in;return o&&s.status===is?{status:$n}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(r){var s=null;if(r!==this.props){var o=this.state.status;this.props.in?o!==un&&o!==qn&&(s=un):(o===un||o===qn)&&(s=Fs)}this.updateStatus(!1,s)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var r=this.props.timeout,s,o,a;return s=o=a=r,r!=null&&typeof r!="number"&&(s=r.exit,o=r.enter,a=r.appear!==void 0?r.appear:o),{exit:s,enter:o,appear:a}},n.updateStatus=function(r,s){if(r===void 0&&(r=!1),s!==null)if(this.cancelNextCallback(),s===un){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:or.findDOMNode(this);o&&wk(o)}this.performEnter(r)}else this.performExit();else this.props.unmountOnExit&&this.state.status===$n&&this.setState({status:is})},n.performEnter=function(r){var s=this,o=this.props.enter,a=this.context?this.context.isMounting:r,c=this.props.nodeRef?[a]:[or.findDOMNode(this),a],u=c[0],d=c[1],f=this.getTimeouts(),p=a?f.appear:f.enter;if(!r&&!o||Bp.disabled){this.safeSetState({status:qn},function(){s.props.onEntered(u)});return}this.props.onEnter(u,d),this.safeSetState({status:un},function(){s.props.onEntering(u,d),s.onTransitionEnd(p,function(){s.safeSetState({status:qn},function(){s.props.onEntered(u,d)})})})},n.performExit=function(){var r=this,s=this.props.exit,o=this.getTimeouts(),a=this.props.nodeRef?void 0:or.findDOMNode(this);if(!s||Bp.disabled){this.safeSetState({status:$n},function(){r.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:Fs},function(){r.props.onExiting(a),r.onTransitionEnd(o.exit,function(){r.safeSetState({status:$n},function(){r.props.onExited(a)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(r,s){s=this.setNextCallback(s),this.setState(r,s)},n.setNextCallback=function(r){var s=this,o=!0;return this.nextCallback=function(a){o&&(o=!1,s.nextCallback=null,r(a))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},n.onTransitionEnd=function(r,s){this.setNextCallback(s);var o=this.props.nodeRef?this.props.nodeRef.current:or.findDOMNode(this),a=r==null&&!this.props.addEndListener;if(!o||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var c=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],u=c[0],d=c[1];this.props.addEndListener(u,d)}r!=null&&setTimeout(this.nextCallback,r)},n.render=function(){var r=this.state.status;if(r===is)return null;var s=this.props,o=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var a=ky(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return ie.createElement(Iy.Provider,{value:null},typeof o=="function"?o(r,a):ie.cloneElement(ie.Children.only(o),a))},t}(ie.Component);On.contextType=Iy;On.propTypes={};function Bi(){}On.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Bi,onEntering:Bi,onEntered:Bi,onExit:Bi,onExiting:Bi,onExited:Bi};On.UNMOUNTED=is;On.EXITED=$n;On.ENTERING=un;On.ENTERED=qn;On.EXITING=Fs;function vk(e){return e.code==="Escape"||e.keyCode===27}function xk(){const e=k.version.split(".");return{major:+e[0],minor:+e[1],patch:+e[2]}}function no(e){if(!e||typeof e=="function")return null;const{major:t}=xk();return t>=19?e.props.ref:e.ref}const Fr=!!(typeof window<"u"&&window.document&&window.document.createElement);var _u=!1,bu=!1;try{var tc={get passive(){return _u=!0},get once(){return bu=_u=!0}};Fr&&(window.addEventListener("test",tc,tc),window.removeEventListener("test",tc,!0))}catch{}function Ay(e,t,n,i){if(i&&typeof i!="boolean"&&!bu){var r=i.once,s=i.capture,o=n;!bu&&r&&(o=n.__once||function a(c){this.removeEventListener(t,a,s),n.call(this,c)},n.__once=o),e.addEventListener(t,o,_u?i:s)}e.addEventListener(t,n,i)}function ku(e,t,n,i){var r=i&&typeof i!="boolean"?i.capture:i;e.removeEventListener(t,n,r),n.__once&&e.removeEventListener(t,n.__once,r)}function Ca(e,t,n,i){return Ay(e,t,n,i),function(){ku(e,t,n,i)}}function _k(e,t,n,i){if(i===void 0&&(i=!0),e){var r=document.createEvent("HTMLEvents");r.initEvent(t,n,i),e.dispatchEvent(r)}}function bk(e){var t=Sn(e,"transitionDuration")||"",n=t.indexOf("ms")===-1?1e3:1;return parseFloat(t)*n}function kk(e,t,n){n===void 0&&(n=5);var i=!1,r=setTimeout(function(){i||_k(e,"transitionend",!0)},t+n),s=Ca(e,"transitionend",function(){i=!0},{once:!0});return function(){clearTimeout(r),s()}}function Cy(e,t,n,i){n==null&&(n=bk(e)||0);var r=kk(e,n,i),s=Ca(e,"transitionend",t);return function(){r(),s()}}function Lp(e,t){const n=Sn(e,t)||"",i=n.indexOf("ms")===-1?1e3:1;return parseFloat(n)*i}function jy(e,t){const n=Lp(e,"transitionDuration"),i=Lp(e,"transitionDelay"),r=Cy(e,s=>{s.target===e&&(r(),t(s))},n+i)}function Vr(...e){return e.filter(t=>t!=null).reduce((t,n)=>{if(typeof n!="function")throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return t===null?n:function(...r){t.apply(this,r),n.apply(this,r)}},null)}function Ty(e){e.offsetHeight}const Up=e=>!e||typeof e=="function"?e:t=>{e.current=t};function Ek(e,t){const n=Up(e),i=Up(t);return r=>{n&&n(r),i&&i(r)}}function Ry(e,t){return k.useMemo(()=>Ek(e,t),[e,t])}function Nk(e){return e&&"setState"in e?or.findDOMNode(e):e??null}const Dy=ie.forwardRef(({onEnter:e,onEntering:t,onEntered:n,onExit:i,onExiting:r,onExited:s,addEndListener:o,children:a,childRef:c,...u},d)=>{const f=k.useRef(null),p=Ry(f,c),m=T=>{p(Nk(T))},v=T=>C=>{T&&f.current&&T(f.current,C)},g=k.useCallback(v(e),[e]),x=k.useCallback(v(t),[t]),h=k.useCallback(v(n),[n]),y=k.useCallback(v(i),[i]),_=k.useCallback(v(r),[r]),b=k.useCallback(v(s),[s]),N=k.useCallback(v(o),[o]);return l.jsx(On,{ref:d,...u,onEnter:g,onEntered:h,onEntering:x,onExit:y,onExited:b,onExiting:_,addEndListener:N,nodeRef:f,children:typeof a=="function"?(T,C)=>a(T,{...C,ref:m}):ie.cloneElement(a,{ref:m})})}),Sk={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function Ik(e,t){const n=`offset${e[0].toUpperCase()}${e.slice(1)}`,i=t[n],r=Sk[e];return i+parseInt(Sn(t,r[0]),10)+parseInt(Sn(t,r[1]),10)}const Ak={[$n]:"collapse",[Fs]:"collapsing",[un]:"collapsing",[qn]:"collapse show"},Ck=ie.forwardRef(({onEnter:e,onEntering:t,onEntered:n,onExit:i,onExiting:r,className:s,children:o,dimension:a="height",in:c=!1,timeout:u=300,mountOnEnter:d=!1,unmountOnExit:f=!1,appear:p=!1,getDimensionValue:m=Ik,...v},g)=>{const x=typeof a=="function"?a():a,h=k.useMemo(()=>Vr(T=>{T.style[x]="0"},e),[x,e]),y=k.useMemo(()=>Vr(T=>{const C=`scroll${x[0].toUpperCase()}${x.slice(1)}`;T.style[x]=`${T[C]}px`},t),[x,t]),_=k.useMemo(()=>Vr(T=>{T.style[x]=null},n),[x,n]),b=k.useMemo(()=>Vr(T=>{T.style[x]=`${m(x,T)}px`,Ty(T)},i),[i,m,x]),N=k.useMemo(()=>Vr(T=>{T.style[x]=null},r),[x,r]);return l.jsx(Dy,{ref:g,addEndListener:jy,...v,"aria-expanded":v.role?c:null,onEnter:h,onEntering:y,onEntered:_,onExit:b,onExiting:N,childRef:no(o),in:c,timeout:u,mountOnEnter:d,unmountOnExit:f,appear:p,children:(T,C)=>ie.cloneElement(o,{...C,className:Te(s,o.props.className,Ak[T],x==="width"&&"collapse-horizontal")})})});function My(e,t){return Array.isArray(e)?e.includes(t):e===t}const io=k.createContext({});io.displayName="AccordionContext";const Wd=k.forwardRef(({as:e="div",bsPrefix:t,className:n,children:i,eventKey:r,...s},o)=>{const{activeEventKey:a}=k.useContext(io);return t=Pe(t,"accordion-collapse"),l.jsx(Ck,{ref:o,in:My(a,r),...s,className:Te(n,t),children:l.jsx(e,{children:k.Children.only(i)})})});Wd.displayName="AccordionCollapse";const fl=k.createContext({eventKey:""});fl.displayName="AccordionItemContext";const zy=k.forwardRef(({as:e="div",bsPrefix:t,className:n,onEnter:i,onEntering:r,onEntered:s,onExit:o,onExiting:a,onExited:c,...u},d)=>{t=Pe(t,"accordion-body");const{eventKey:f}=k.useContext(fl);return l.jsx(Wd,{eventKey:f,onEnter:i,onEntering:r,onEntered:s,onExit:o,onExiting:a,onExited:c,children:l.jsx(e,{ref:d,...u,className:Te(n,t)})})});zy.displayName="AccordionBody";function jk(e,t){const{activeEventKey:n,onSelect:i,alwaysOpen:r}=k.useContext(io);return s=>{let o=e===n?null:e;r&&(Array.isArray(n)?n.includes(e)?o=n.filter(a=>a!==e):o=[...n,e]:o=[e]),i==null||i(o,s),t==null||t(s)}}const Kd=k.forwardRef(({as:e="button",bsPrefix:t,className:n,onClick:i,...r},s)=>{t=Pe(t,"accordion-button");const{eventKey:o}=k.useContext(fl),a=jk(o,i),{activeEventKey:c}=k.useContext(io);return e==="button"&&(r.type="button"),l.jsx(e,{ref:s,onClick:a,...r,"aria-expanded":Array.isArray(c)?c.includes(o):o===c,className:Te(n,t,!My(c,o)&&"collapsed")})});Kd.displayName="AccordionButton";const Fy=k.forwardRef(({as:e="h2","aria-controls":t,bsPrefix:n,className:i,children:r,onClick:s,...o},a)=>(n=Pe(n,"accordion-header"),l.jsx(e,{ref:a,...o,className:Te(i,n),children:l.jsx(Kd,{onClick:s,"aria-controls":t,children:r})})));Fy.displayName="AccordionHeader";const Py=k.forwardRef(({as:e="div",bsPrefix:t,className:n,eventKey:i,...r},s)=>{t=Pe(t,"accordion-item");const o=k.useMemo(()=>({eventKey:i}),[i]);return l.jsx(fl.Provider,{value:o,children:l.jsx(e,{ref:s,...r,className:Te(n,t)})})});Py.displayName="AccordionItem";const Oy=k.forwardRef((e,t)=>{const{as:n="div",activeKey:i,bsPrefix:r,className:s,onSelect:o,flush:a,alwaysOpen:c,...u}=Jb(e,{activeKey:"onSelect"}),d=Pe(r,"accordion"),f=k.useMemo(()=>({activeEventKey:i,onSelect:o,alwaysOpen:c}),[i,o,c]);return l.jsx(io.Provider,{value:f,children:l.jsx(n,{ref:t,...u,className:Te(s,d,a&&`${d}-flush`)})})});Oy.displayName="Accordion";const De=Object.assign(Oy,{Button:Kd,Collapse:Wd,Item:Py,Header:Fy,Body:zy});function Tk(e){const t=k.useRef(e);return k.useEffect(()=>{t.current=e},[e]),t}function ja(e){const t=Tk(e);return k.useCallback(function(...n){return t.current&&t.current(...n)},[t])}const Rk=e=>k.forwardRef((t,n)=>l.jsx("div",{...t,ref:n,className:Te(t.className,e)}));function Dk(e){const t=k.useRef(e);return k.useEffect(()=>{t.current=e},[e]),t}function yi(e){const t=Dk(e);return k.useCallback(function(...n){return t.current&&t.current(...n)},[t])}function Mk(){const e=k.useRef(!0),t=k.useRef(()=>e.current);return k.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),t.current}function zk(e){const t=k.useRef(null);return k.useEffect(()=>{t.current=e}),t.current}const Fk=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",Pk=typeof document<"u",Hp=Pk||Fk?k.useLayoutEffect:k.useEffect,Ok=["as","disabled"];function Bk(e,t){if(e==null)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;n[i]=e[i]}return n}function Lk(e){return!e||e.trim()==="#"}function By({tagName:e,disabled:t,href:n,target:i,rel:r,role:s,onClick:o,tabIndex:a=0,type:c}){e||(n!=null||i!=null||r!=null?e="a":e="button");const u={tagName:e};if(e==="button")return[{type:c||"button",disabled:t},u];const d=p=>{if((t||e==="a"&&Lk(n))&&p.preventDefault(),t){p.stopPropagation();return}o==null||o(p)},f=p=>{p.key===" "&&(p.preventDefault(),d(p))};return e==="a"&&(n||(n="#"),t&&(n=void 0)),[{role:s??"button",disabled:void 0,tabIndex:t?void 0:a,href:n,target:e==="a"?i:void 0,"aria-disabled":t||void 0,rel:e==="a"?r:void 0,onClick:d,onKeyDown:f},u]}const Uk=k.forwardRef((e,t)=>{let{as:n,disabled:i}=e,r=Bk(e,Ok);const[s,{tagName:o}]=By(Object.assign({tagName:n,disabled:i},r));return l.jsx(o,Object.assign({},r,s,{ref:t}))});Uk.displayName="Button";const Hk={[un]:"show",[qn]:"show"},pl=k.forwardRef(({className:e,children:t,transitionClasses:n={},onEnter:i,...r},s)=>{const o={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...r},a=k.useCallback((c,u)=>{Ty(c),i==null||i(c,u)},[i]);return l.jsx(Dy,{ref:s,addEndListener:jy,...o,onEnter:a,childRef:no(t),children:(c,u)=>k.cloneElement(t,{...u,className:Te("fade",e,t.props.className,Hk[c],n[c])})})});pl.displayName="Fade";const $k={"aria-label":In.string,onClick:In.func,variant:In.oneOf(["white"])},ml=k.forwardRef(({className:e,variant:t,"aria-label":n="Close",...i},r)=>l.jsx("button",{ref:r,type:"button",className:Te("btn-close",t&&`btn-close-${t}`,e),"aria-label":n,...i}));ml.displayName="CloseButton";ml.propTypes=$k;const Di=k.forwardRef(({as:e,bsPrefix:t,variant:n="primary",size:i,active:r=!1,disabled:s=!1,className:o,...a},c)=>{const u=Pe(t,"btn"),[d,{tagName:f}]=By({tagName:e,disabled:s,...a}),p=f;return l.jsx(p,{...d,...a,ref:c,disabled:s,className:Te(o,u,r&&"active",n&&`${u}-${n}`,i&&`${u}-${i}`,a.href&&s&&"disabled")})});Di.displayName="Button";function Wk(){const e=k.useRef(!0),t=k.useRef(()=>e.current);return k.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),t.current}function Kk(e){const t=k.useRef(e);return t.current=e,t}function Ly(e){const t=Kk(e);k.useEffect(()=>()=>t.current(),[])}const Eu=2**31-1;function Uy(e,t,n){const i=n-Date.now();e.current=i<=Eu?setTimeout(t,i):setTimeout(()=>Uy(e,t,n),Eu)}function Vk(){const e=Wk(),t=k.useRef();return Ly(()=>clearTimeout(t.current)),k.useMemo(()=>{const n=()=>clearTimeout(t.current);function i(r,s=0){e()&&(n(),s<=Eu?t.current=setTimeout(r,s):Uy(t,r,Date.now()+s))}return{set:i,clear:n,handleRef:t}},[])}function Gk(e,t){return k.Children.toArray(e).some(n=>k.isValidElement(n)&&n.type===t)}function qk({as:e,bsPrefix:t,className:n,...i}){t=Pe(t,"col");const r=ik(),s=rk(),o=[],a=[];return r.forEach(c=>{const u=i[c];delete i[c];let d,f,p;typeof u=="object"&&u!=null?{span:d,offset:f,order:p}=u:d=u;const m=c!==s?`-${c}`:"";d&&o.push(d===!0?`${t}${m}`:`${t}${m}-${d}`),p!=null&&a.push(`order${m}-${p}`),f!=null&&a.push(`offset${m}-${f}`)}),[{...i,className:Te(n,...o,...a)},{as:e,bsPrefix:t,spans:o}]}const Hy=k.forwardRef((e,t)=>{const[{className:n,...i},{as:r="div",bsPrefix:s,spans:o}]=qk(e);return l.jsx(r,{...i,ref:t,className:Te(n,!o.length&&s)})});Hy.displayName="Col";var Yk=Function.prototype.bind.call(Function.prototype.call,[].slice);function Li(e,t){return Yk(e.querySelectorAll(t))}function $p(e,t){if(e.contains)return e.contains(t);if(e.compareDocumentPosition)return e===t||!!(e.compareDocumentPosition(t)&16)}const Xk="data-rr-ui-";function Zk(e){return`${Xk}${e}`}const $y=k.createContext(Fr?window:void 0);$y.Provider;function Vd(){return k.useContext($y)}const Qk={type:In.string,tooltip:In.bool,as:In.elementType},hl=k.forwardRef(({as:e="div",className:t,type:n="valid",tooltip:i=!1,...r},s)=>l.jsx(e,{...r,ref:s,className:Te(t,`${n}-${i?"tooltip":"feedback"}`)}));hl.displayName="Feedback";hl.propTypes=Qk;const Dn=k.createContext({}),Gd=k.forwardRef(({id:e,bsPrefix:t,className:n,type:i="checkbox",isValid:r=!1,isInvalid:s=!1,as:o="input",...a},c)=>{const{controlId:u}=k.useContext(Dn);return t=Pe(t,"form-check-input"),l.jsx(o,{...a,ref:c,type:i,id:e||u,className:Te(n,t,r&&"is-valid",s&&"is-invalid")})});Gd.displayName="FormCheckInput";const Ta=k.forwardRef(({bsPrefix:e,className:t,htmlFor:n,...i},r)=>{const{controlId:s}=k.useContext(Dn);return e=Pe(e,"form-check-label"),l.jsx("label",{...i,ref:r,htmlFor:n||s,className:Te(t,e)})});Ta.displayName="FormCheckLabel";const Wy=k.forwardRef(({id:e,bsPrefix:t,bsSwitchPrefix:n,inline:i=!1,reverse:r=!1,disabled:s=!1,isValid:o=!1,isInvalid:a=!1,feedbackTooltip:c=!1,feedback:u,feedbackType:d,className:f,style:p,title:m="",type:v="checkbox",label:g,children:x,as:h="input",...y},_)=>{t=Pe(t,"form-check"),n=Pe(n,"form-switch");const{controlId:b}=k.useContext(Dn),N=k.useMemo(()=>({controlId:e||b}),[b,e]),T=!x&&g!=null&&g!==!1||Gk(x,Ta),C=l.jsx(Gd,{...y,type:v==="switch"?"checkbox":v,ref:_,isValid:o,isInvalid:a,disabled:s,as:h});return l.jsx(Dn.Provider,{value:N,children:l.jsx("div",{style:p,className:Te(f,T&&t,i&&`${t}-inline`,r&&`${t}-reverse`,v==="switch"&&n),children:x||l.jsxs(l.Fragment,{children:[C,T&&l.jsx(Ta,{title:m,children:g}),u&&l.jsx(hl,{type:d,tooltip:c,children:u})]})})})});Wy.displayName="FormCheck";const Ra=Object.assign(Wy,{Input:Gd,Label:Ta}),Ky=k.forwardRef(({bsPrefix:e,type:t,size:n,htmlSize:i,id:r,className:s,isValid:o=!1,isInvalid:a=!1,plaintext:c,readOnly:u,as:d="input",...f},p)=>{const{controlId:m}=k.useContext(Dn);return e=Pe(e,"form-control"),l.jsx(d,{...f,type:t,size:i,ref:p,readOnly:u,id:r||m,className:Te(s,c?`${e}-plaintext`:e,n&&`${e}-${n}`,t==="color"&&`${e}-color`,o&&"is-valid",a&&"is-invalid")})});Ky.displayName="FormControl";const Jk=Object.assign(Ky,{Feedback:hl}),Vy=k.forwardRef(({className:e,bsPrefix:t,as:n="div",...i},r)=>(t=Pe(t,"form-floating"),l.jsx(n,{ref:r,className:Te(e,t),...i})));Vy.displayName="FormFloating";const qd=k.forwardRef(({controlId:e,as:t="div",...n},i)=>{const r=k.useMemo(()=>({controlId:e}),[e]);return l.jsx(Dn.Provider,{value:r,children:l.jsx(t,{...n,ref:i})})});qd.displayName="FormGroup";const Gy=k.forwardRef(({as:e="label",bsPrefix:t,column:n=!1,visuallyHidden:i=!1,className:r,htmlFor:s,...o},a)=>{const{controlId:c}=k.useContext(Dn);t=Pe(t,"form-label");let u="col-form-label";typeof n=="string"&&(u=`${u} ${u}-${n}`);const d=Te(r,t,i&&"visually-hidden",n&&u);return s=s||c,n?l.jsx(Hy,{ref:a,as:"label",className:d,htmlFor:s,...o}):l.jsx(e,{ref:a,className:d,htmlFor:s,...o})});Gy.displayName="FormLabel";const qy=k.forwardRef(({bsPrefix:e,className:t,id:n,...i},r)=>{const{controlId:s}=k.useContext(Dn);return e=Pe(e,"form-range"),l.jsx("input",{...i,type:"range",ref:r,className:Te(t,e),id:n||s})});qy.displayName="FormRange";const Yy=k.forwardRef(({bsPrefix:e,size:t,htmlSize:n,className:i,isValid:r=!1,isInvalid:s=!1,id:o,...a},c)=>{const{controlId:u}=k.useContext(Dn);return e=Pe(e,"form-select"),l.jsx("select",{...a,size:n,ref:c,className:Te(i,e,t&&`${e}-${t}`,r&&"is-valid",s&&"is-invalid"),id:o||u})});Yy.displayName="FormSelect";const Xy=k.forwardRef(({bsPrefix:e,className:t,as:n="small",muted:i,...r},s)=>(e=Pe(e,"form-text"),l.jsx(n,{...r,ref:s,className:Te(t,e,i&&"text-muted")})));Xy.displayName="FormText";const Zy=k.forwardRef((e,t)=>l.jsx(Ra,{...e,ref:t,type:"switch"}));Zy.displayName="Switch";const e1=Object.assign(Zy,{Input:Ra.Input,Label:Ra.Label}),Qy=k.forwardRef(({bsPrefix:e,className:t,children:n,controlId:i,label:r,...s},o)=>(e=Pe(e,"form-floating"),l.jsxs(qd,{ref:o,className:Te(t,e),controlId:i,...s,children:[n,l.jsx("label",{htmlFor:i,children:r})]})));Qy.displayName="FloatingLabel";const t1={_ref:In.any,validated:In.bool,as:In.elementType},Yd=k.forwardRef(({className:e,validated:t,as:n="form",...i},r)=>l.jsx(n,{...i,ref:r,className:Te(e,t&&"was-validated")}));Yd.displayName="Form";Yd.propTypes=t1;const je=Object.assign(Yd,{Group:qd,Control:Jk,Floating:Vy,Check:Ra,Switch:e1,Label:Gy,Text:Xy,Range:qy,Select:Yy,FloatingLabel:Qy}),Wp=e=>!e||typeof e=="function"?e:t=>{e.current=t};function n1(e,t){const n=Wp(e),i=Wp(t);return r=>{n&&n(r),i&&i(r)}}function Xd(e,t){return k.useMemo(()=>n1(e,t),[e,t])}var Co;function Kp(e){if((!Co&&Co!==0||e)&&Fr){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),Co=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return Co}function i1(){return k.useState(null)}function nc(e){e===void 0&&(e=dl());try{var t=e.activeElement;return!t||!t.nodeName?null:t}catch{return e.body}}function r1(e){const t=k.useRef(e);return t.current=e,t}function s1(e){const t=r1(e);k.useEffect(()=>()=>t.current(),[])}function o1(e=document){const t=e.defaultView;return Math.abs(t.innerWidth-e.documentElement.clientWidth)}const Vp=Zk("modal-open");class Zd{constructor({ownerDocument:t,handleContainerOverflow:n=!0,isRTL:i=!1}={}){this.handleContainerOverflow=n,this.isRTL=i,this.modals=[],this.ownerDocument=t}getScrollbarWidth(){return o1(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(t){}removeModalAttributes(t){}setContainerStyle(t){const n={overflow:"hidden"},i=this.isRTL?"paddingLeft":"paddingRight",r=this.getElement();t.style={overflow:r.style.overflow,[i]:r.style[i]},t.scrollBarWidth&&(n[i]=`${parseInt(Sn(r,i)||"0",10)+t.scrollBarWidth}px`),r.setAttribute(Vp,""),Sn(r,n)}reset(){[...this.modals].forEach(t=>this.remove(t))}removeContainerStyle(t){const n=this.getElement();n.removeAttribute(Vp),Object.assign(n.style,t.style)}add(t){let n=this.modals.indexOf(t);return n!==-1||(n=this.modals.length,this.modals.push(t),this.setModalAttributes(t),n!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),n}remove(t){const n=this.modals.indexOf(t);n!==-1&&(this.modals.splice(n,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(t))}isTopModal(t){return!!this.modals.length&&this.modals[this.modals.length-1]===t}}const ic=(e,t)=>Fr?e==null?(t||dl()).body:(typeof e=="function"&&(e=e()),e&&"current"in e&&(e=e.current),e&&("nodeType"in e||e.getBoundingClientRect)?e:null):null;function a1(e,t){const n=Vd(),[i,r]=k.useState(()=>ic(e,n==null?void 0:n.document));if(!i){const s=ic(e);s&&r(s)}return k.useEffect(()=>{},[t,i]),k.useEffect(()=>{const s=ic(e);s!==i&&r(s)},[e,i]),i}function l1({children:e,in:t,onExited:n,mountOnEnter:i,unmountOnExit:r}){const s=k.useRef(null),o=k.useRef(t),a=yi(n);k.useEffect(()=>{t?o.current=!0:a(s.current)},[t,a]);const c=Xd(s,no(e)),u=k.cloneElement(e,{ref:c});return t?u:r||!o.current&&i?null:u}const c1=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children"];function u1(e,t){if(e==null)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;n[i]=e[i]}return n}function d1(e){let{onEnter:t,onEntering:n,onEntered:i,onExit:r,onExiting:s,onExited:o,addEndListener:a,children:c}=e,u=u1(e,c1);const d=k.useRef(null),f=Xd(d,no(c)),p=b=>N=>{b&&d.current&&b(d.current,N)},m=k.useCallback(p(t),[t]),v=k.useCallback(p(n),[n]),g=k.useCallback(p(i),[i]),x=k.useCallback(p(r),[r]),h=k.useCallback(p(s),[s]),y=k.useCallback(p(o),[o]),_=k.useCallback(p(a),[a]);return Object.assign({},u,{nodeRef:d},t&&{onEnter:m},n&&{onEntering:v},i&&{onEntered:g},r&&{onExit:x},s&&{onExiting:h},o&&{onExited:y},a&&{addEndListener:_},{children:typeof c=="function"?(b,N)=>c(b,Object.assign({},N,{ref:f})):k.cloneElement(c,{ref:f})})}const f1=["component"];function p1(e,t){if(e==null)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;n[i]=e[i]}return n}const m1=k.forwardRef((e,t)=>{let{component:n}=e,i=p1(e,f1);const r=d1(i);return l.jsx(n,Object.assign({ref:t},r))});function h1({in:e,onTransition:t}){const n=k.useRef(null),i=k.useRef(!0),r=yi(t);return Hp(()=>{if(!n.current)return;let s=!1;return r({in:e,element:n.current,initial:i.current,isStale:()=>s}),()=>{s=!0}},[e,r]),Hp(()=>(i.current=!1,()=>{i.current=!0}),[]),n}function g1({children:e,in:t,onExited:n,onEntered:i,transition:r}){const[s,o]=k.useState(!t);t&&s&&o(!1);const a=h1({in:!!t,onTransition:u=>{const d=()=>{u.isStale()||(u.in?i==null||i(u.element,u.initial):(o(!0),n==null||n(u.element)))};Promise.resolve(r(u)).then(d,f=>{throw u.in||o(!0),f})}}),c=Xd(a,no(e));return s&&!t?null:k.cloneElement(e,{ref:c})}function Gp(e,t,n){return e?l.jsx(m1,Object.assign({},n,{component:e})):t?l.jsx(g1,Object.assign({},n,{transition:t})):l.jsx(l1,Object.assign({},n))}const y1=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function w1(e,t){if(e==null)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;n[i]=e[i]}return n}let rc;function v1(e){return rc||(rc=new Zd({ownerDocument:e==null?void 0:e.document})),rc}function x1(e){const t=Vd(),n=e||v1(t),i=k.useRef({dialog:null,backdrop:null});return Object.assign(i.current,{add:()=>n.add(i.current),remove:()=>n.remove(i.current),isTopModal:()=>n.isTopModal(i.current),setDialogRef:k.useCallback(r=>{i.current.dialog=r},[]),setBackdropRef:k.useCallback(r=>{i.current.backdrop=r},[])})}const Jy=k.forwardRef((e,t)=>{let{show:n=!1,role:i="dialog",className:r,style:s,children:o,backdrop:a=!0,keyboard:c=!0,onBackdropClick:u,onEscapeKeyDown:d,transition:f,runTransition:p,backdropTransition:m,runBackdropTransition:v,autoFocus:g=!0,enforceFocus:x=!0,restoreFocus:h=!0,restoreFocusOptions:y,renderDialog:_,renderBackdrop:b=J=>l.jsx("div",Object.assign({},J)),manager:N,container:T,onShow:C,onHide:P=()=>{},onExit:j,onExited:I,onExiting:$,onEnter:S,onEntering:F,onEntered:w}=e,B=w1(e,y1);const H=Vd(),W=a1(T),R=x1(N),D=Mk(),U=zk(n),[O,A]=k.useState(!n),Y=k.useRef(null);k.useImperativeHandle(t,()=>R,[R]),Fr&&!U&&n&&(Y.current=nc(H==null?void 0:H.document)),n&&O&&A(!1);const G=yi(()=>{if(R.add(),ue.current=Ca(document,"keydown",ae),oe.current=Ca(document,"focus",()=>setTimeout(se),!0),C&&C(),g){var J,te;const L=nc((J=(te=R.dialog)==null?void 0:te.ownerDocument)!=null?J:H==null?void 0:H.document);R.dialog&&L&&!$p(R.dialog,L)&&(Y.current=L,R.dialog.focus())}}),Z=yi(()=>{if(R.remove(),ue.current==null||ue.current(),oe.current==null||oe.current(),h){var J;(J=Y.current)==null||J.focus==null||J.focus(y),Y.current=null}});k.useEffect(()=>{!n||!W||G()},[n,W,G]),k.useEffect(()=>{O&&Z()},[O,Z]),s1(()=>{Z()});const se=yi(()=>{if(!x||!D()||!R.isTopModal())return;const J=nc(H==null?void 0:H.document);R.dialog&&J&&!$p(R.dialog,J)&&R.dialog.focus()}),le=yi(J=>{J.target===J.currentTarget&&(u==null||u(J),a===!0&&P())}),ae=yi(J=>{c&&vk(J)&&R.isTopModal()&&(d==null||d(J),J.defaultPrevented||P())}),oe=k.useRef(),ue=k.useRef(),we=(...J)=>{A(!0),I==null||I(...J)};if(!W)return null;const ve=Object.assign({role:i,ref:R.setDialogRef,"aria-modal":i==="dialog"?!0:void 0},B,{style:s,className:r,tabIndex:-1});let ke=_?_(ve):l.jsx("div",Object.assign({},ve,{children:k.cloneElement(o,{role:"document"})}));ke=Gp(f,p,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!n,onExit:j,onExiting:$,onExited:we,onEnter:S,onEntering:F,onEntered:w,children:ke});let E=null;return a&&(E=b({ref:R.setBackdropRef,onClick:le}),E=Gp(m,v,{in:!!n,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:E})),l.jsx(l.Fragment,{children:or.createPortal(l.jsxs(l.Fragment,{children:[E,ke]}),W)})});Jy.displayName="Modal";const _1=Object.assign(Jy,{Manager:Zd});function b1(e,t){return e.classList?e.classList.contains(t):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")!==-1}function k1(e,t){e.classList?e.classList.add(t):b1(e,t)||(typeof e.className=="string"?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}function qp(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function E1(e,t){e.classList?e.classList.remove(t):typeof e.className=="string"?e.className=qp(e.className,t):e.setAttribute("class",qp(e.className&&e.className.baseVal||"",t))}const Ui={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class N1 extends Zd{adjustAndStore(t,n,i){const r=n.style[t];n.dataset[t]=r,Sn(n,{[t]:`${parseFloat(Sn(n,t))+i}px`})}restore(t,n){const i=n.dataset[t];i!==void 0&&(delete n.dataset[t],Sn(n,{[t]:i}))}setContainerStyle(t){super.setContainerStyle(t);const n=this.getElement();if(k1(n,"modal-open"),!t.scrollBarWidth)return;const i=this.isRTL?"paddingLeft":"paddingRight",r=this.isRTL?"marginLeft":"marginRight";Li(n,Ui.FIXED_CONTENT).forEach(s=>this.adjustAndStore(i,s,t.scrollBarWidth)),Li(n,Ui.STICKY_CONTENT).forEach(s=>this.adjustAndStore(r,s,-t.scrollBarWidth)),Li(n,Ui.NAVBAR_TOGGLER).forEach(s=>this.adjustAndStore(r,s,t.scrollBarWidth))}removeContainerStyle(t){super.removeContainerStyle(t);const n=this.getElement();E1(n,"modal-open");const i=this.isRTL?"paddingLeft":"paddingRight",r=this.isRTL?"marginLeft":"marginRight";Li(n,Ui.FIXED_CONTENT).forEach(s=>this.restore(i,s)),Li(n,Ui.STICKY_CONTENT).forEach(s=>this.restore(r,s)),Li(n,Ui.NAVBAR_TOGGLER).forEach(s=>this.restore(r,s))}}let sc;function S1(e){return sc||(sc=new N1(e)),sc}const ew=k.forwardRef(({className:e,bsPrefix:t,as:n="div",...i},r)=>(t=Pe(t,"modal-body"),l.jsx(n,{ref:r,className:Te(e,t),...i})));ew.displayName="ModalBody";const tw=k.createContext({onHide(){}}),Qd=k.forwardRef(({bsPrefix:e,className:t,contentClassName:n,centered:i,size:r,fullscreen:s,children:o,scrollable:a,...c},u)=>{e=Pe(e,"modal");const d=`${e}-dialog`,f=typeof s=="string"?`${e}-fullscreen-${s}`:`${e}-fullscreen`;return l.jsx("div",{...c,ref:u,className:Te(d,t,r&&`${e}-${r}`,i&&`${d}-centered`,a&&`${d}-scrollable`,s&&f),children:l.jsx("div",{className:Te(`${e}-content`,n),children:o})})});Qd.displayName="ModalDialog";const nw=k.forwardRef(({className:e,bsPrefix:t,as:n="div",...i},r)=>(t=Pe(t,"modal-footer"),l.jsx(n,{ref:r,className:Te(e,t),...i})));nw.displayName="ModalFooter";const I1=k.forwardRef(({closeLabel:e="Close",closeVariant:t,closeButton:n=!1,onHide:i,children:r,...s},o)=>{const a=k.useContext(tw),c=ja(()=>{a==null||a.onHide(),i==null||i()});return l.jsxs("div",{ref:o,...s,children:[r,n&&l.jsx(ml,{"aria-label":e,variant:t,onClick:c})]})}),iw=k.forwardRef(({bsPrefix:e,className:t,closeLabel:n="Close",closeButton:i=!1,...r},s)=>(e=Pe(e,"modal-header"),l.jsx(I1,{ref:s,...r,className:Te(t,e),closeLabel:n,closeButton:i})));iw.displayName="ModalHeader";const A1=Rk("h4"),rw=k.forwardRef(({className:e,bsPrefix:t,as:n=A1,...i},r)=>(t=Pe(t,"modal-title"),l.jsx(n,{ref:r,className:Te(e,t),...i})));rw.displayName="ModalTitle";function C1(e){return l.jsx(pl,{...e,timeout:null})}function j1(e){return l.jsx(pl,{...e,timeout:null})}const sw=k.forwardRef(({bsPrefix:e,className:t,style:n,dialogClassName:i,contentClassName:r,children:s,dialogAs:o=Qd,"data-bs-theme":a,"aria-labelledby":c,"aria-describedby":u,"aria-label":d,show:f=!1,animation:p=!0,backdrop:m=!0,keyboard:v=!0,onEscapeKeyDown:g,onShow:x,onHide:h,container:y,autoFocus:_=!0,enforceFocus:b=!0,restoreFocus:N=!0,restoreFocusOptions:T,onEntered:C,onExit:P,onExiting:j,onEnter:I,onEntering:$,onExited:S,backdropClassName:F,manager:w,...B},H)=>{const[W,R]=k.useState({}),[D,U]=k.useState(!1),O=k.useRef(!1),A=k.useRef(!1),Y=k.useRef(null),[G,Z]=i1(),se=Ry(H,Z),le=ja(h),ae=sk();e=Pe(e,"modal");const oe=k.useMemo(()=>({onHide:le}),[le]);function ue(){return w||S1({isRTL:ae})}function we(ee){if(!Fr)return;const ce=ue().getScrollbarWidth()>0,fe=ee.scrollHeight>dl(ee).documentElement.clientHeight;R({paddingRight:ce&&!fe?Kp():void 0,paddingLeft:!ce&&fe?Kp():void 0})}const ve=ja(()=>{G&&we(G.dialog)});Ly(()=>{ku(window,"resize",ve),Y.current==null||Y.current()});const ke=()=>{O.current=!0},E=ee=>{O.current&&G&&ee.target===G.dialog&&(A.current=!0),O.current=!1},J=()=>{U(!0),Y.current=Cy(G.dialog,()=>{U(!1)})},te=ee=>{ee.target===ee.currentTarget&&J()},L=ee=>{if(m==="static"){te(ee);return}if(A.current||ee.target!==ee.currentTarget){A.current=!1;return}h==null||h()},M=ee=>{v?g==null||g(ee):(ee.preventDefault(),m==="static"&&J())},q=(ee,ce)=>{ee&&we(ee),I==null||I(ee,ce)},K=ee=>{Y.current==null||Y.current(),P==null||P(ee)},ne=(ee,ce)=>{$==null||$(ee,ce),Ay(window,"resize",ve)},z=ee=>{ee&&(ee.style.display=""),S==null||S(ee),ku(window,"resize",ve)},V=k.useCallback(ee=>l.jsx("div",{...ee,className:Te(`${e}-backdrop`,F,!p&&"show")}),[p,F,e]),Q={...n,...W};Q.display="block";const X=ee=>l.jsx("div",{role:"dialog",...ee,style:Q,className:Te(t,e,D&&`${e}-static`,!p&&"show"),onClick:m?L:void 0,onMouseUp:E,"data-bs-theme":a,"aria-label":d,"aria-labelledby":c,"aria-describedby":u,children:l.jsx(o,{...B,onMouseDown:ke,className:i,contentClassName:r,children:s})});return l.jsx(tw.Provider,{value:oe,children:l.jsx(_1,{show:f,ref:se,backdrop:m,container:y,keyboard:!0,autoFocus:_,enforceFocus:b,restoreFocus:N,restoreFocusOptions:T,onEscapeKeyDown:M,onShow:x,onHide:h,onEnter:q,onEntering:ne,onEntered:C,onExit:K,onExiting:j,onExited:z,manager:ue(),transition:p?C1:void 0,backdropTransition:p?j1:void 0,renderBackdrop:V,renderDialog:X})})});sw.displayName="Modal";const Be=Object.assign(sw,{Body:ew,Header:iw,Title:rw,Footer:nw,Dialog:Qd,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150}),T1={[un]:"showing",[Fs]:"showing show"},ow=k.forwardRef((e,t)=>l.jsx(pl,{...e,ref:t,transitionClasses:T1}));ow.displayName="ToastFade";const aw=k.createContext({onClose(){}}),lw=k.forwardRef(({bsPrefix:e,closeLabel:t="Close",closeVariant:n,closeButton:i=!0,className:r,children:s,...o},a)=>{e=Pe(e,"toast-header");const c=k.useContext(aw),u=ja(d=>{c==null||c.onClose==null||c.onClose(d)});return l.jsxs("div",{ref:a,...o,className:Te(e,r),children:[s,i&&l.jsx(ml,{"aria-label":t,variant:n,onClick:u,"data-dismiss":"toast"})]})});lw.displayName="ToastHeader";const cw=k.forwardRef(({className:e,bsPrefix:t,as:n="div",...i},r)=>(t=Pe(t,"toast-body"),l.jsx(n,{ref:r,className:Te(e,t),...i})));cw.displayName="ToastBody";const uw=k.forwardRef(({bsPrefix:e,className:t,transition:n=ow,show:i=!0,animation:r=!0,delay:s=5e3,autohide:o=!1,onClose:a,onEntered:c,onExit:u,onExiting:d,onEnter:f,onEntering:p,onExited:m,bg:v,...g},x)=>{e=Pe(e,"toast");const h=k.useRef(s),y=k.useRef(a);k.useEffect(()=>{h.current=s,y.current=a},[s,a]);const _=Vk(),b=!!(o&&i),N=k.useCallback(()=>{b&&(y.current==null||y.current())},[b]);k.useEffect(()=>{_.set(N,h.current)},[_,N]);const T=k.useMemo(()=>({onClose:a}),[a]),C=!!(n&&r),P=l.jsx("div",{...g,ref:x,className:Te(e,t,v&&`bg-${v}`,!C&&(i?"show":"hide")),role:"alert","aria-live":"assertive","aria-atomic":"true"});return l.jsx(aw.Provider,{value:T,children:C&&n?l.jsx(n,{in:i,onEnter:f,onEntering:p,onEntered:c,onExit:u,onExiting:d,onExited:m,unmountOnExit:!0,children:P}):P})});uw.displayName="Toast";const Yp=Object.assign(uw,{Body:cw,Header:lw}),R1={"top-start":"top-0 start-0","top-center":"top-0 start-50 translate-middle-x","top-end":"top-0 end-0","middle-start":"top-50 start-0 translate-middle-y","middle-center":"top-50 start-50 translate-middle","middle-end":"top-50 end-0 translate-middle-y","bottom-start":"bottom-0 start-0","bottom-center":"bottom-0 start-50 translate-middle-x","bottom-end":"bottom-0 end-0"},dw=k.forwardRef(({bsPrefix:e,position:t,containerPosition:n,className:i,as:r="div",...s},o)=>(e=Pe(e,"toast-container"),l.jsx(r,{ref:o,...s,className:Te(e,t&&R1[t],n&&`position-${n}`,i)})));dw.displayName="ToastContainer";const D1=[{key:"0",title:"Getting Started"},{key:"1",title:"CWL Basics"},{key:"2",title:"Tool Menu & Search"},{key:"3",title:"Building a Workflow"},{key:"4",title:"Connecting Nodes"},{key:"5",title:"Configuring Parameters"},{key:"6",title:"Scatter, Conditions & Expressions"},{key:"7",title:"BIDS Integration"},{key:"8",title:"Custom Workflows"},{key:"9",title:"CWL Preview Panel"},{key:"10",title:"Workspaces & Export"}];function M1(){const[e,t]=k.useState(!1),[n,i]=k.useState("0");return l.jsxs("div",{className:"header-bar",children:[l.jsx("h1",{children:"niBuild"}),l.jsx("span",{className:"header-span",onClick:()=>t(!0),children:"[how-to]"}),l.jsx("a",{className:"header-span header-link",href:"https://github.com/KunaalAgarwal/niBuild",target:"_blank",rel:"noopener noreferrer",children:"[github]"}),l.jsx("a",{className:"header-span header-link",href:"https://github.com/KunaalAgarwal/niBuild/issues",target:"_blank",rel:"noopener noreferrer",children:"[issues]"}),l.jsxs(Be,{className:"howto-modal",show:e,onHide:()=>t(!1),size:"xl",centered:!0,scrollable:!0,children:[l.jsx(Be.Header,{closeButton:!0,children:l.jsx(Be.Title,{children:"niBuild User Manual"})}),l.jsxs(Be.Body,{children:[l.jsx("div",{className:"howto-nav",children:D1.map(r=>l.jsx("span",{className:`howto-nav-item${n===r.key?" active":""}`,onClick:()=>i(r.key),children:r.title},r.key))}),l.jsxs(De,{activeKey:n,onSelect:i,children:[l.jsxs(De.Item,{eventKey:"0",children:[l.jsx(De.Header,{children:"Getting Started"}),l.jsxs(De.Body,{children:[l.jsxs("p",{className:"howto-section-intro",children:["niBuild is a browser-based visual workflow builder for neuroimaging analysis. Design processing pipelines by dragging tools onto a canvas, configure parameters, and export a self-contained bundle with"," ",l.jsx("a",{className:"howto-link",href:"https://www.commonwl.org/v1.2/",target:"_blank",rel:"noopener noreferrer",children:"CWL"})," ","workflows, Docker/Singularity containers, and FAIR-compliant metadata."]}),l.jsx("div",{className:"howto-subheading",children:"Interface Layout"}),l.jsxs("ul",{className:"howto-list",children:[l.jsxs("li",{children:[l.jsx("strong",{children:"Tool Menu"})," (left)  Browse and search 100+ neuroimaging tools organized by imaging modality and software library."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Canvas"})," (center)  Drag-and-drop workspace where you build your pipeline by connecting processing steps."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"CWL Preview"})," (right)  Live-updating preview of the generated CWL workflow and job template."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Actions Bar"})," (top)  Workspace management, workflow saving, and export controls."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Workspace Bar"})," (bottom)  Switch between multiple independent workflow canvases."]})]}),l.jsxs("div",{className:"howto-tip",children:[l.jsx("strong",{children:"Tip:"})," No installation required. niBuild runs entirely in your browser and all data stays local."]})]})]}),l.jsxs(De.Item,{eventKey:"1",children:[l.jsx(De.Header,{children:"CWL Basics"}),l.jsxs(De.Body,{children:[l.jsxs("p",{className:"howto-section-intro",children:[l.jsx("a",{className:"howto-link",href:"https://www.commonwl.org/v1.2/",target:"_blank",rel:"noopener noreferrer",children:"CWL (Common Workflow Language)"})," ","is an open standard for describing computational workflows. niBuild generates CWL v1.2 workflows that can be executed by any CWL-compliant engine (e.g., ",l.jsx("a",{className:"howto-link",href:"https://github.com/common-workflow-language/cwltool",target:"_blank",rel:"noopener noreferrer",children:"cwltool"}),","," ",l.jsx("a",{className:"howto-link",href:"https://toil.ucsc-cgl.org/",target:"_blank",rel:"noopener noreferrer",children:"Toil"}),","," ",l.jsx("a",{className:"howto-link",href:"https://www.arvados.org/",target:"_blank",rel:"noopener noreferrer",children:"Arvados"}),")."]}),l.jsx("div",{className:"howto-subheading",children:"Key Concepts"}),l.jsxs("ul",{className:"howto-list",children:[l.jsxs("li",{children:[l.jsx("strong",{children:"Workflow"}),"  A directed graph of processing steps. Each step runs a command-line tool inside a Docker container. niBuild generates one ",l.jsx("code",{className:"howto-code",children:".cwl"})," workflow file for your entire pipeline."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Step"}),"  A single processing operation (e.g., brain extraction, registration). Each node on the niBuild canvas becomes a step in the CWL workflow."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"CommandLineTool"}),"  The CWL definition for a single tool, specifying its Docker image, command-line arguments, inputs, and outputs. niBuild includes pre-built ",l.jsx("code",{className:"howto-code",children:".cwl"})," files for every tool."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Inputs & Outputs"}),"  Each step declares typed inputs it consumes and outputs it produces. Connections on the canvas wire outputs of one step to inputs of the next."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Job Template"}),"  A ",l.jsx("code",{className:"howto-code",children:".yml"})," file that provides concrete values for the workflow's top-level inputs (file paths, parameter values). niBuild pre-fills this with your configured parameters."]})]}),l.jsx("div",{className:"howto-subheading",children:"CWL Data Types"}),l.jsx("p",{className:"howto-section-intro",children:"CWL uses a typed system for inputs and outputs. niBuild handles type matching automatically when you connect nodes:"}),l.jsxs("ul",{className:"howto-list",children:[l.jsxs("li",{children:[l.jsx("code",{className:"howto-code",children:"File"}),"  A file path (e.g., a NIfTI image). Most neuroimaging tool inputs and outputs are Files."]}),l.jsxs("li",{children:[l.jsx("code",{className:"howto-code",children:"Directory"}),"  A directory path (e.g., a FreeSurfer subjects directory)."]}),l.jsxs("li",{children:[l.jsx("code",{className:"howto-code",children:"string"}),"  A text value (e.g., a subject ID or output prefix)."]}),l.jsxs("li",{children:[l.jsx("code",{className:"howto-code",children:"int"})," / ",l.jsx("code",{className:"howto-code",children:"float"}),"  Numeric values (e.g., a smoothing kernel size or a threshold)."]}),l.jsxs("li",{children:[l.jsx("code",{className:"howto-code",children:"boolean"}),"  A true/false flag (e.g., whether to generate a brain mask)."]}),l.jsxs("li",{children:[l.jsx("code",{className:"howto-code",children:"enum"}),"  One of a fixed set of values (e.g., a cost function or interpolation method)."]}),l.jsxs("li",{children:[l.jsx("code",{className:"howto-code",children:"File[]"})," / ",l.jsx("code",{className:"howto-code",children:"string[]"}),"  Arrays of the above types, used with scatter (batch processing)."]})]}),l.jsx("div",{className:"howto-subheading",children:"How niBuild Maps to CWL"}),l.jsxs("table",{className:"howto-table",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"niBuild"}),l.jsx("th",{children:"CWL"})]})}),l.jsxs("tbody",{children:[l.jsxs("tr",{children:[l.jsx("td",{children:"Node on canvas"}),l.jsx("td",{children:"Workflow step"})]}),l.jsxs("tr",{children:[l.jsx("td",{children:"Edge between nodes"}),l.jsxs("td",{children:["Step input wiring (",l.jsx("code",{className:"howto-code",children:"source:"}),")"]})]}),l.jsxs("tr",{children:[l.jsx("td",{children:"Parameter value in modal"}),l.jsxs("td",{children:["Step input ",l.jsx("code",{className:"howto-code",children:"default:"})," value"]})]}),l.jsxs("tr",{children:[l.jsx("td",{children:"Docker version selector"}),l.jsxs("td",{children:[l.jsx("code",{className:"howto-code",children:"dockerPull:"})," image tag"]})]}),l.jsxs("tr",{children:[l.jsx("td",{children:"Workflow Input node"}),l.jsx("td",{children:"Top-level workflow input"})]}),l.jsxs("tr",{children:[l.jsx("td",{children:"Workflow Output node"}),l.jsx("td",{children:"Top-level workflow output"})]}),l.jsxs("tr",{children:[l.jsx("td",{children:"Scatter toggle"}),l.jsxs("td",{children:[l.jsx("code",{className:"howto-code",children:"scatter:"})," directive on step"]})]}),l.jsxs("tr",{children:[l.jsx("td",{children:"When expression"}),l.jsxs("td",{children:[l.jsx("code",{className:"howto-code",children:"when:"})," condition on step"]})]})]})]}),l.jsx("div",{className:"howto-subheading",children:"Docker Containers"}),l.jsx("p",{className:"howto-section-intro",children:"Every tool in niBuild runs inside a Docker container, ensuring reproducibility regardless of the host system. Each library has its own Docker image. When you select a Docker version in the parameter modal, you're pinning the exact software version that will be used at runtime. The exported bundle includes all container references and scripts to pre-pull images."})]})]}),l.jsxs(De.Item,{eventKey:"2",children:[l.jsx(De.Header,{children:"Tool Menu & Search"}),l.jsxs(De.Body,{children:[l.jsxs("p",{className:"howto-section-intro",children:["The left sidebar contains all available neuroimaging tools organized hierarchically: first by ",l.jsx("strong",{children:"imaging modality"}),", then by ",l.jsx("strong",{children:"software library"}),", then by ",l.jsx("strong",{children:"functional category"}),"."]}),l.jsxs("ol",{className:"howto-steps",children:[l.jsx("li",{children:"Click a modality header to expand it and see the libraries within."}),l.jsx("li",{children:"Expand a library to see individual tools grouped by category."}),l.jsx("li",{children:"Hover over any tool to see a tooltip with its full name, function description, expected input, key parameters, and typical use case."}),l.jsx("li",{children:"Double-click a tool in the menu to open its official documentation in a new tab."}),l.jsx("li",{children:"Drag a tool from the menu and drop it onto the canvas to add it to your workflow."})]}),l.jsx("div",{className:"howto-subheading",children:"Imaging Modalities"}),l.jsx("p",{className:"howto-section-intro",children:"Tools are organized into 7 imaging modalities:"}),l.jsxs("ul",{className:"howto-list",children:[l.jsxs("li",{children:[l.jsx("strong",{children:"Structural MRI"}),"  T1/T2-weighted imaging for brain anatomy. Tools for skull-stripping, tissue segmentation, cortical reconstruction, and spatial registration."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Functional MRI"}),"  BOLD-contrast imaging for brain activity. Tools for motion correction, slice timing, spatial smoothing, temporal filtering, and statistical modeling."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Diffusion MRI"}),"  Diffusion-weighted imaging (DWI) for white matter microstructure. Tools for eddy current correction, tensor fitting, tractography, and connectivity analysis."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Arterial Spin Labeling (ASL)"}),"  Non-invasive perfusion imaging using magnetically labeled blood. Tools for cerebral blood flow (CBF) quantification and partial volume correction."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"PET"}),"  Positron Emission Tomography for molecular imaging. Tools for kinetic modeling, partial volume correction, and tracer-specific quantification."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Multimodal"}),"  Cross-modality analysis pipelines. Tools that integrate structural, functional, and diffusion data for comprehensive brain mapping."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Utilities"}),"  General-purpose neuroimaging utilities for format conversion, image math, resampling, and quality control."]})]}),l.jsx("div",{className:"howto-subheading",children:"Software Libraries"}),l.jsx("p",{className:"howto-section-intro",children:"niBuild includes tools from 9 neuroimaging software libraries. Each library runs inside its own Docker container:"}),l.jsxs("table",{className:"howto-table",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Library"}),l.jsx("th",{children:"Docker Image"}),l.jsx("th",{children:"Description"})]})}),l.jsxs("tbody",{children:[l.jsxs("tr",{children:[l.jsx("td",{children:l.jsx("strong",{children:"FSL"})}),l.jsx("td",{children:l.jsx("code",{className:"howto-code",children:"brainlife/fsl"})}),l.jsx("td",{children:"FMRIB Software Library. Comprehensive suite for structural, functional, and diffusion analysis. Includes BET, FLIRT, FAST, FEAT, MELODIC, FDT, TBSS, and more."})]}),l.jsxs("tr",{children:[l.jsx("td",{children:l.jsx("strong",{children:"AFNI"})}),l.jsx("td",{children:l.jsx("code",{className:"howto-code",children:"brainlife/afni"})}),l.jsx("td",{children:"Analysis of Functional NeuroImages. Extensive tools for functional MRI analysis including motion correction, denoising, smoothing, statistical modeling, and connectivity."})]}),l.jsxs("tr",{children:[l.jsx("td",{children:l.jsx("strong",{children:"FreeSurfer"})}),l.jsx("td",{children:l.jsx("code",{className:"howto-code",children:"freesurfer/freesurfer"})}),l.jsx("td",{children:"Cortical surface reconstruction and parcellation. Includes recon-all for automated cortical analysis, mri_convert for format conversion, and PET processing tools."})]}),l.jsxs("tr",{children:[l.jsx("td",{children:l.jsx("strong",{children:"ANTs"})}),l.jsx("td",{children:l.jsx("code",{className:"howto-code",children:"antsx/ants"})}),l.jsx("td",{children:"Advanced Normalization Tools. State-of-the-art image registration (SyN), segmentation (Atropos), cortical thickness (DiReCT), and bias correction (N4)."})]}),l.jsxs("tr",{children:[l.jsx("td",{children:l.jsx("strong",{children:"MRtrix3"})}),l.jsx("td",{children:l.jsx("code",{className:"howto-code",children:"mrtrix3/mrtrix3"})}),l.jsx("td",{children:"Diffusion MRI analysis toolkit. Specializes in constrained spherical deconvolution (CSD), fiber orientation distribution (FOD) estimation, and anatomically-constrained tractography (ACT)."})]}),l.jsxs("tr",{children:[l.jsx("td",{children:l.jsx("strong",{children:"Connectome Workbench"})}),l.jsx("td",{children:l.jsx("code",{className:"howto-code",children:"khanlab/connectome-workbench"})}),l.jsx("td",{children:"HCP Connectome tools for surface-based analysis. CIFTI file operations and surface data smoothing for cortical analysis."})]}),l.jsxs("tr",{children:[l.jsx("td",{children:l.jsx("strong",{children:"fMRIPrep"})}),l.jsx("td",{children:l.jsx("code",{className:"howto-code",children:"nipreps/fmriprep"})}),l.jsx("td",{children:"Robust, automated fMRI preprocessing pipeline. Produces analysis-ready BOLD data with comprehensive quality reports."})]}),l.jsxs("tr",{children:[l.jsx("td",{children:l.jsx("strong",{children:"MRIQC"})}),l.jsx("td",{children:l.jsx("code",{className:"howto-code",children:"nipreps/mriqc"})}),l.jsx("td",{children:"MRI Quality Control. Extracts image quality metrics (SNR, CNR, motion parameters) and generates visual quality reports."})]}),l.jsxs("tr",{children:[l.jsx("td",{children:l.jsx("strong",{children:"AMICO"})}),l.jsx("td",{children:l.jsx("code",{className:"howto-code",children:"cookpa/amico-noddi"})}),l.jsx("td",{children:"Accelerated Microstructure Imaging via Convex Optimization. Fits biophysical models (NODDI) to diffusion MRI data for neurite density and orientation dispersion."})]})]})]}),l.jsx("div",{className:"howto-subheading",children:"Library Coverage by Modality"}),l.jsxs("table",{className:"howto-table howto-coverage-table",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Library"}),l.jsx("th",{children:"Structural"}),l.jsx("th",{children:"Functional"}),l.jsx("th",{children:"Diffusion"}),l.jsx("th",{children:"ASL"}),l.jsx("th",{children:"PET"}),l.jsx("th",{children:"Multimodal"}),l.jsx("th",{children:"Utilities"})]})}),l.jsxs("tbody",{children:[l.jsxs("tr",{children:[l.jsx("td",{children:"FSL"}),l.jsx("td",{children:""}),l.jsx("td",{children:""}),l.jsx("td",{children:""}),l.jsx("td",{children:""}),l.jsx("td",{}),l.jsx("td",{}),l.jsx("td",{children:""})]}),l.jsxs("tr",{children:[l.jsx("td",{children:"AFNI"}),l.jsx("td",{children:""}),l.jsx("td",{children:""}),l.jsx("td",{}),l.jsx("td",{}),l.jsx("td",{}),l.jsx("td",{}),l.jsx("td",{children:""})]}),l.jsxs("tr",{children:[l.jsx("td",{children:"FreeSurfer"}),l.jsx("td",{children:""}),l.jsx("td",{children:""}),l.jsx("td",{children:""}),l.jsx("td",{}),l.jsx("td",{children:""}),l.jsx("td",{}),l.jsx("td",{children:""})]}),l.jsxs("tr",{children:[l.jsx("td",{children:"ANTs"}),l.jsx("td",{children:""}),l.jsx("td",{children:""}),l.jsx("td",{}),l.jsx("td",{}),l.jsx("td",{}),l.jsx("td",{children:""}),l.jsx("td",{children:""})]}),l.jsxs("tr",{children:[l.jsx("td",{children:"MRtrix3"}),l.jsx("td",{}),l.jsx("td",{}),l.jsx("td",{children:""}),l.jsx("td",{}),l.jsx("td",{}),l.jsx("td",{}),l.jsx("td",{})]}),l.jsxs("tr",{children:[l.jsx("td",{children:"Workbench"}),l.jsx("td",{children:""}),l.jsx("td",{children:""}),l.jsx("td",{}),l.jsx("td",{}),l.jsx("td",{}),l.jsx("td",{}),l.jsx("td",{})]}),l.jsxs("tr",{children:[l.jsx("td",{children:"fMRIPrep"}),l.jsx("td",{}),l.jsx("td",{children:""}),l.jsx("td",{}),l.jsx("td",{}),l.jsx("td",{}),l.jsx("td",{}),l.jsx("td",{})]}),l.jsxs("tr",{children:[l.jsx("td",{children:"MRIQC"}),l.jsx("td",{}),l.jsx("td",{children:""}),l.jsx("td",{}),l.jsx("td",{}),l.jsx("td",{}),l.jsx("td",{}),l.jsx("td",{})]}),l.jsxs("tr",{children:[l.jsx("td",{children:"AMICO"}),l.jsx("td",{}),l.jsx("td",{}),l.jsx("td",{children:""}),l.jsx("td",{}),l.jsx("td",{}),l.jsx("td",{}),l.jsx("td",{})]})]})]}),l.jsx("div",{className:"howto-subheading",children:"Search"}),l.jsxs("ul",{className:"howto-list",children:[l.jsx("li",{children:"Type in the search bar to filter tools by name, function description, or modality."}),l.jsxs("li",{children:["Use modality prefix syntax for targeted filtering:",l.jsxs("ul",{className:"howto-nested-list",children:[l.jsxs("li",{children:[l.jsx("code",{className:"howto-code",children:"Structural MRI/"}),"  shows all structural MRI tools"]}),l.jsxs("li",{children:[l.jsx("code",{className:"howto-code",children:"MRI/bet"}),'  searches for "bet" within all MRI modalities']}),l.jsxs("li",{children:[l.jsx("code",{className:"howto-code",children:"Diffusion/"}),"  shows all diffusion tools"]})]})]}),l.jsx("li",{children:"Custom workflows are also searchable by name or by the tools they contain."})]}),l.jsx("div",{className:"howto-subheading",children:"I/O Nodes"}),l.jsx("p",{className:"howto-section-intro",children:'The "I/O" section at the top of the menu contains special nodes that define pipeline entry and exit points:'}),l.jsxs("ul",{className:"howto-list",children:[l.jsxs("li",{children:[l.jsx("strong",{children:"Workflow Input"}),"  defines an input file or value that the user supplies when running the pipeline."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Workflow Output"}),"  marks a result that should be collected as a final output of the pipeline."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"BIDS Dataset"}),"  imports files from a BIDS-compliant dataset directory (see ",l.jsx("span",{className:"howto-nav-ref",onClick:()=>i("7"),children:"BIDS Integration"}),")."]})]})]})]}),l.jsxs(De.Item,{eventKey:"3",children:[l.jsx(De.Header,{children:"Building a Workflow"}),l.jsxs(De.Body,{children:[l.jsx("p",{className:"howto-section-intro",children:"Build your pipeline by dragging tools onto the canvas and connecting them to define the data flow."}),l.jsxs("ol",{className:"howto-steps",children:[l.jsx("li",{children:"Drag a tool from the left-side menu and drop it onto the canvas. A node appears representing that processing step."}),l.jsx("li",{children:"Drag additional tools to add more steps to your pipeline."}),l.jsx("li",{children:"Connect two nodes by clicking and dragging from one node's output handle (bottom edge) to another node's input handle (top edge)."}),l.jsxs("li",{children:["When a connection is drawn, the Edge Mapping Modal opens automatically so you can map specific outputs to inputs (see ",l.jsx("span",{className:"howto-nav-ref",onClick:()=>i("4"),children:"Connecting Nodes"}),")."]})]}),l.jsx("div",{className:"howto-subheading",children:"Canvas Controls"}),l.jsxs("ul",{className:"howto-list",children:[l.jsx("li",{children:"Scroll to zoom in and out."}),l.jsx("li",{children:"Click and drag on empty canvas space to pan."}),l.jsx("li",{children:"Use the controls in the bottom-left corner for zoom buttons and fit-to-view."}),l.jsx("li",{children:"The minimap in the bottom-right provides an overview of your full workflow."})]}),l.jsx("div",{className:"howto-subheading",children:"Removing Elements"}),l.jsxs("ul",{className:"howto-list",children:[l.jsxs("li",{children:["Click a node or edge to select it, then press the ",l.jsx("strong",{children:"Delete"})," key to remove it."]}),l.jsx("li",{children:"Invalid connections between incompatible tools will show a warning toast explaining the reason."})]})]})]}),l.jsxs(De.Item,{eventKey:"4",children:[l.jsx(De.Header,{children:"Connecting Nodes"}),l.jsxs(De.Body,{children:[l.jsx("p",{className:"howto-section-intro",children:"Connections define how data flows between processing steps. Each connection maps specific outputs of a source tool to specific inputs of a target tool."}),l.jsxs("ol",{className:"howto-steps",children:[l.jsx("li",{children:"Draw a connection between two nodes (or double-click an existing edge) to open the Edge Mapping Modal."}),l.jsxs("li",{children:["The left column shows all available ",l.jsx("strong",{children:"outputs"})," from the source node. The right column shows all available ",l.jsx("strong",{children:"inputs"})," on the target node."]}),l.jsx("li",{children:"Click an output on the left, then click an input on the right to create a mapping. A connecting line appears between them."}),l.jsx("li",{children:"Click on a connecting line to remove that mapping."}),l.jsx("li",{children:"You can create multiple mappings per edge to pass several outputs to different inputs simultaneously."})]}),l.jsx("div",{className:"howto-subheading",children:"Link Merge Strategy"}),l.jsx("p",{className:"howto-section-intro",children:"When multiple edges feed the same input on a node, you must choose a merge strategy. Set this in the node's parameter modal (double-click the target node):"}),l.jsxs("ul",{className:"howto-list",children:[l.jsxs("li",{children:[l.jsx("code",{className:"howto-code",children:"merge_flattened"}),"  combines all upstream outputs into a single flat array, e.g. ",l.jsx("code",{className:"howto-code",children:"[a, b, c]"})]}),l.jsxs("li",{children:[l.jsx("code",{className:"howto-code",children:"merge_nested"}),"  preserves grouping per source, e.g. ",l.jsx("code",{className:"howto-code",children:"[[a], [b, c]]"})]})]}),l.jsx("div",{className:"howto-subheading",children:"Type Compatibility"}),l.jsxs("ul",{className:"howto-list",children:[l.jsx("li",{children:"niBuild validates type compatibility (File vs. non-File, array vs. scalar) and file extension compatibility between outputs and inputs."}),l.jsx("li",{children:"Incompatible mappings are highlighted with warnings. Only valid mappings can be saved."})]})]})]}),l.jsxs(De.Item,{eventKey:"5",children:[l.jsx(De.Header,{children:"Configuring Parameters"}),l.jsxs(De.Body,{children:[l.jsx("p",{className:"howto-section-intro",children:"Double-click any node on the canvas to open its parameter configuration modal."}),l.jsx("div",{className:"howto-subheading",children:"Docker Image Version"}),l.jsx("p",{className:"howto-section-intro",children:"At the top of the modal, select or type a specific Docker image tag to pin the tool to a particular software version. This ensures reproducibility across different computing environments."}),l.jsx("div",{className:"howto-subheading",children:"Parameters"}),l.jsxs("ul",{className:"howto-list",children:[l.jsxs("li",{children:[l.jsx("strong",{children:"Required parameters"})," are shown first and must be set or wired from an upstream connection."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Optional parameters"})," are shown below a separator and have sensible defaults."]})]}),l.jsx("div",{className:"howto-subheading",children:"Parameter Types"}),l.jsxs("ul",{className:"howto-list",children:[l.jsxs("li",{children:[l.jsx("strong",{children:"Numbers"}),"  numeric input fields, some with min/max bounds shown as placeholders."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Text"}),"  string input fields for filenames, labels, or other text values."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Booleans"}),"  toggle switches for on/off flags."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Enums"}),"  dropdown menus with predefined valid values."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Files / Directories"}),"  wired automatically from upstream connections (shown with a blue highlight and the source node name)."]})]}),l.jsxs("div",{className:"howto-tip",children:[l.jsx("strong",{children:"Tip:"})," Parameters that are already wired from an upstream connection display the source node and output name. You don't need to set these manually."]})]})]}),l.jsxs(De.Item,{eventKey:"6",children:[l.jsx(De.Header,{children:"Scatter, Conditions & Expressions"}),l.jsxs(De.Body,{children:[l.jsx("div",{className:"howto-subheading",children:"Scatter (Batch Processing)"}),l.jsx("p",{className:"howto-section-intro",children:'Enable the "Scatter" toggle on a node to run that processing step once per input file, rather than once for all inputs combined.'}),l.jsxs("ul",{className:"howto-list",children:[l.jsx("li",{children:"Useful for processing multiple subjects or runs in parallel."}),l.jsx("li",{children:"When enabled on the first node in a chain, scatter propagates automatically to all downstream connected nodes."})]}),l.jsx("div",{className:"howto-subheading",children:"Conditional Steps (When Expression)"}),l.jsx("p",{className:"howto-section-intro",children:'Add a "when" expression to conditionally execute a step at runtime.'}),l.jsxs("ol",{className:"howto-steps",children:[l.jsx("li",{children:"Double-click a node to open its parameter modal."}),l.jsx("li",{children:'In the "When Expression" section, select a parameter from the dropdown.'}),l.jsx("li",{children:"Enter a condition using a comparison operator."})]}),l.jsxs("p",{className:"howto-section-intro",children:["Example: selecting parameter ",l.jsx("code",{className:"howto-code",children:"run_step"})," with condition ",l.jsx("code",{className:"howto-code",children:"== true"})," produces:"]}),l.jsx("pre",{className:"howto-code-block",children:"$(inputs.run_step == true)"}),l.jsx("p",{className:"howto-section-intro",children:"When the condition evaluates to false at runtime, the step is skipped and produces null outputs."}),l.jsx("div",{className:"howto-subheading",children:"Expressions (fx)"}),l.jsxs("p",{className:"howto-section-intro",children:["Click the ",l.jsx("strong",{children:"fx"})," button next to any parameter to transform its value with a CWL expression."]}),l.jsxs("ul",{className:"howto-list",children:[l.jsxs("li",{children:["Type only the expression body  the ",l.jsx("code",{className:"howto-code",children:"$(...)"})," wrapper is added automatically."]}),l.jsxs("li",{children:["For ",l.jsx("strong",{children:"scalar parameters"})," (numbers, strings): ",l.jsx("code",{className:"howto-code",children:"self"})," refers to the raw value.",l.jsx("ul",{className:"howto-nested-list",children:l.jsxs("li",{children:["Example: ",l.jsx("code",{className:"howto-code",children:"self / 2.355"})," converts FWHM to sigma"]})})]}),l.jsxs("li",{children:["For ",l.jsx("strong",{children:"File parameters"}),": ",l.jsx("code",{className:"howto-code",children:"self"})," is a File object with properties:",l.jsxs("ul",{className:"howto-nested-list",children:[l.jsxs("li",{children:[l.jsx("code",{className:"howto-code",children:"self.nameroot"}),"  filename without extension"]}),l.jsxs("li",{children:[l.jsx("code",{className:"howto-code",children:"self.basename"}),"  full filename with extension"]}),l.jsxs("li",{children:[l.jsx("code",{className:"howto-code",children:"self.dirname"}),"  parent directory path"]})]})]}),l.jsx("li",{children:"Use the template dropdown for common expression patterns."})]})]})]}),l.jsxs(De.Item,{eventKey:"7",children:[l.jsx(De.Header,{children:"BIDS Integration"}),l.jsxs(De.Body,{children:[l.jsxs("p",{className:"howto-section-intro",children:[l.jsx("a",{className:"howto-link",href:"https://bids-specification.readthedocs.io/",target:"_blank",rel:"noopener noreferrer",children:"BIDS (Brain Imaging Data Structure)"})," ","is a community standard for organizing neuroimaging datasets into a consistent directory hierarchy. niBuild can parse a BIDS dataset and automatically generate typed workflow inputs for your data files."]}),l.jsx("div",{className:"howto-subheading",children:"BIDS Directory Structure"}),l.jsx("p",{className:"howto-section-intro",children:"A BIDS dataset follows this hierarchy:"}),l.jsx("pre",{className:"howto-code-block",children:`dataset/
 dataset_description.json   # Required: dataset name, BIDS version
 participants.tsv           # Subject demographics (age, sex, etc.)
 sub-01/                    # Subject directory
    ses-pre/               # Session directory (optional)
       anat/              # Anatomical images
          sub-01_ses-pre_T1w.nii.gz
          sub-01_ses-pre_T1w.json    # Sidecar metadata
       func/              # Functional images
          sub-01_ses-pre_task-rest_bold.nii.gz
          sub-01_ses-pre_task-rest_bold.json
          sub-01_ses-pre_task-rest_events.tsv
       dwi/               # Diffusion images
          sub-01_ses-pre_dwi.nii.gz
          sub-01_ses-pre_dwi.bval
          sub-01_ses-pre_dwi.bvec
       fmap/              # Field maps
           sub-01_ses-pre_phasediff.nii.gz
    ses-post/
        ...
 sub-02/
     ...`}),l.jsx("div",{className:"howto-subheading",children:"BIDS Naming Convention"}),l.jsx("p",{className:"howto-section-intro",children:"BIDS filenames encode metadata as key-value entity pairs separated by underscores:"}),l.jsx("pre",{className:"howto-code-block",children:"sub-01_ses-pre_task-rest_run-01_bold.nii.gz"}),l.jsx("p",{className:"howto-section-intro",children:"Common BIDS entities:"}),l.jsxs("ul",{className:"howto-list",children:[l.jsxs("li",{children:[l.jsx("code",{className:"howto-code",children:"sub"}),"  Subject identifier (required)"]}),l.jsxs("li",{children:[l.jsx("code",{className:"howto-code",children:"ses"}),"  Session identifier (e.g., pre/post intervention, timepoint)"]}),l.jsxs("li",{children:[l.jsx("code",{className:"howto-code",children:"task"}),"  Task name for functional scans (e.g., rest, flanker, nback)"]}),l.jsxs("li",{children:[l.jsx("code",{className:"howto-code",children:"acq"}),"  Acquisition parameters (e.g., resolution, sequence variant)"]}),l.jsxs("li",{children:[l.jsx("code",{className:"howto-code",children:"run"}),"  Run index when a scan is repeated within a session"]}),l.jsxs("li",{children:[l.jsx("code",{className:"howto-code",children:"dir"}),"  Phase-encoding direction (e.g., AP, PA) for field maps"]}),l.jsxs("li",{children:[l.jsx("code",{className:"howto-code",children:"echo"}),"  Echo index for multi-echo sequences"]}),l.jsxs("li",{children:[l.jsx("code",{className:"howto-code",children:"rec"}),"  Reconstruction method"]}),l.jsxs("li",{children:[l.jsx("code",{className:"howto-code",children:"space"}),"  Reference space (e.g., MNI152NLin2009cAsym)"]})]}),l.jsx("div",{className:"howto-subheading",children:"Data Types"}),l.jsx("p",{className:"howto-section-intro",children:"Each subject directory contains subdirectories for different imaging data types:"}),l.jsxs("ul",{className:"howto-list",children:[l.jsxs("li",{children:[l.jsx("code",{className:"howto-code",children:"anat"}),"  Structural imaging (T1-weighted, T2-weighted, FLAIR, proton density, etc.)"]}),l.jsxs("li",{children:[l.jsx("code",{className:"howto-code",children:"func"}),"  Task-based and resting-state functional MRI (BOLD signal)"]}),l.jsxs("li",{children:[l.jsx("code",{className:"howto-code",children:"dwi"}),"  Diffusion-weighted imaging for white matter tractography"]}),l.jsxs("li",{children:[l.jsx("code",{className:"howto-code",children:"fmap"}),"  Field maps for distortion correction (magnitude, phase difference, EPI)"]}),l.jsxs("li",{children:[l.jsx("code",{className:"howto-code",children:"perf"}),"  Perfusion imaging (arterial spin labeling, M0 calibration scans)"]}),l.jsxs("li",{children:[l.jsx("code",{className:"howto-code",children:"pet"}),"  Positron emission tomography"]}),l.jsxs("li",{children:[l.jsx("code",{className:"howto-code",children:"meg"})," / ",l.jsx("code",{className:"howto-code",children:"eeg"})," / ",l.jsx("code",{className:"howto-code",children:"ieeg"}),"  Magneto/electroencephalography recordings"]})]}),l.jsx("div",{className:"howto-subheading",children:"Common Suffixes"}),l.jsx("p",{className:"howto-section-intro",children:"The suffix at the end of a BIDS filename (before the extension) identifies the image type:"}),l.jsxs("table",{className:"howto-table",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Suffix"}),l.jsx("th",{children:"Data Type"}),l.jsx("th",{children:"Description"})]})}),l.jsxs("tbody",{children:[l.jsxs("tr",{children:[l.jsx("td",{children:l.jsx("code",{className:"howto-code",children:"T1w"})}),l.jsx("td",{children:"anat"}),l.jsx("td",{children:"T1-weighted structural image"})]}),l.jsxs("tr",{children:[l.jsx("td",{children:l.jsx("code",{className:"howto-code",children:"T2w"})}),l.jsx("td",{children:"anat"}),l.jsx("td",{children:"T2-weighted structural image"})]}),l.jsxs("tr",{children:[l.jsx("td",{children:l.jsx("code",{className:"howto-code",children:"FLAIR"})}),l.jsx("td",{children:"anat"}),l.jsx("td",{children:"Fluid-attenuated inversion recovery"})]}),l.jsxs("tr",{children:[l.jsx("td",{children:l.jsx("code",{className:"howto-code",children:"bold"})}),l.jsx("td",{children:"func"}),l.jsx("td",{children:"Blood oxygen level dependent (fMRI timeseries)"})]}),l.jsxs("tr",{children:[l.jsx("td",{children:l.jsx("code",{className:"howto-code",children:"sbref"})}),l.jsx("td",{children:"func"}),l.jsx("td",{children:"Single-band reference image"})]}),l.jsxs("tr",{children:[l.jsx("td",{children:l.jsx("code",{className:"howto-code",children:"dwi"})}),l.jsx("td",{children:"dwi"}),l.jsx("td",{children:"Diffusion-weighted image"})]}),l.jsxs("tr",{children:[l.jsx("td",{children:l.jsx("code",{className:"howto-code",children:"phasediff"})}),l.jsx("td",{children:"fmap"}),l.jsx("td",{children:"Phase difference map for B0 unwarping"})]}),l.jsxs("tr",{children:[l.jsx("td",{children:l.jsx("code",{className:"howto-code",children:"magnitude1"})}),l.jsx("td",{children:"fmap"}),l.jsx("td",{children:"First magnitude image for field mapping"})]}),l.jsxs("tr",{children:[l.jsx("td",{children:l.jsx("code",{className:"howto-code",children:"epi"})}),l.jsx("td",{children:"fmap"}),l.jsx("td",{children:"EPI-based field map (e.g., reverse phase-encode)"})]}),l.jsxs("tr",{children:[l.jsx("td",{children:l.jsx("code",{className:"howto-code",children:"asl"})}),l.jsx("td",{children:"perf"}),l.jsx("td",{children:"Arterial spin labeling perfusion image"})]}),l.jsxs("tr",{children:[l.jsx("td",{children:l.jsx("code",{className:"howto-code",children:"T1map"})}),l.jsx("td",{children:"anat"}),l.jsx("td",{children:"Quantitative T1 relaxation time map"})]})]})]}),l.jsx("div",{className:"howto-subheading",children:"File Formats"}),l.jsxs("ul",{className:"howto-list",children:[l.jsxs("li",{children:[l.jsx("code",{className:"howto-code",children:".nii.gz"})," / ",l.jsx("code",{className:"howto-code",children:".nii"}),"  NIfTI image data (the primary neuroimaging format)"]}),l.jsxs("li",{children:[l.jsx("code",{className:"howto-code",children:".json"}),"  Sidecar metadata (acquisition parameters like TR, TE, flip angle)"]}),l.jsxs("li",{children:[l.jsx("code",{className:"howto-code",children:".tsv"}),"  Tab-separated values (event timing files, participant demographics)"]}),l.jsxs("li",{children:[l.jsx("code",{className:"howto-code",children:".bval"})," / ",l.jsx("code",{className:"howto-code",children:".bvec"}),"  Diffusion gradient tables (b-values and b-vectors)"]})]}),l.jsx("div",{className:"howto-subheading",children:"Using BIDS in niBuild"}),l.jsxs("ol",{className:"howto-steps",children:[l.jsxs("li",{children:['Expand the "I/O" section in the tool menu and drag ',l.jsx("strong",{children:"BIDS Dataset"})," onto the canvas."]}),l.jsx("li",{children:"A modal opens prompting you to select a BIDS-compliant directory from your local filesystem."}),l.jsx("li",{children:"niBuild parses the directory structure client-side, detecting subjects, sessions, data types, and file suffixes."}),l.jsxs("li",{children:["Use the ",l.jsx("strong",{children:"subject panel"})," to select or deselect individual subjects (with Select All / Deselect All buttons). You can search subjects by ID or demographics."]}),l.jsxs("li",{children:["Enable or disable ",l.jsx("strong",{children:"data types"})," (e.g., anat, func, dwi) in the data type grid. Unavailable data types are grayed out."]}),l.jsxs("li",{children:["Configure ",l.jsx("strong",{children:"output groups"}),": each group specifies a data type, suffix, and optional filters (task, run, acquisition). Each group becomes an output port on the BIDS node."]}),l.jsx("li",{children:"Connect BIDS output ports to downstream tool inputs just like any other edge connection."})]}),l.jsxs("div",{className:"howto-tip",children:[l.jsx("strong",{children:"Note:"})," All file parsing happens in your browser  no data is uploaded to any server. The path preview shows exactly which files match your selections. BIDS outputs are always arrays (one file per subject), so scatter is enabled automatically on downstream nodes."]})]})]}),l.jsxs(De.Item,{eventKey:"8",children:[l.jsx(De.Header,{children:"Custom Workflows"}),l.jsxs(De.Body,{children:[l.jsx("p",{className:"howto-section-intro",children:"Save and reuse common processing pipelines as custom workflow nodes. A custom workflow encapsulates a multi-step pipeline into a single reusable node."}),l.jsx("div",{className:"howto-subheading",children:"Saving a Workflow"}),l.jsxs("ol",{className:"howto-steps",children:[l.jsx("li",{children:"Build a pipeline on the canvas as usual."}),l.jsxs("li",{children:["Enter a name in the ",l.jsx("strong",{children:"Workflow Name"})," input field above the canvas."]}),l.jsxs("li",{children:["Click ",l.jsx("strong",{children:"Save Workflow"})," in the actions bar. If the name already exists, the existing workflow is updated."]})]}),l.jsx("div",{className:"howto-subheading",children:"Using a Custom Workflow"}),l.jsxs("ol",{className:"howto-steps",children:[l.jsxs("li",{children:["Saved workflows appear in the ",l.jsx("strong",{children:"My Workflows"})," section of the tool menu."]}),l.jsx("li",{children:"Drag a custom workflow onto any workspace to use it as a single reusable node."}),l.jsx("li",{children:"Double-click the custom workflow node to configure parameters for each internal step. Use the arrow buttons to navigate between steps."})]}),l.jsx("div",{className:"howto-subheading",children:"Managing Custom Workflows"}),l.jsxs("ul",{className:"howto-list",children:[l.jsxs("li",{children:["Click the ",l.jsx("strong",{children:"pencil icon"})," next to a saved workflow to edit it in a new workspace."]}),l.jsxs("li",{children:["Click the ",l.jsx("strong",{children:"X icon"})," to delete a workflow (with confirmation). Deleting also removes instances from all workspaces."]}),l.jsx("li",{children:"Custom workflows are stored in your browser's localStorage and persist across sessions."}),l.jsx("li",{children:"At export time, custom workflow nodes are expanded into their constituent processing steps in the generated CWL."})]})]})]}),l.jsxs(De.Item,{eventKey:"9",children:[l.jsx(De.Header,{children:"CWL Preview Panel"}),l.jsxs(De.Body,{children:[l.jsx("p",{className:"howto-section-intro",children:"The right-side panel shows a live preview of the CWL workflow that niBuild will generate from your current canvas. The preview updates automatically as you add, remove, or reconfigure nodes and edges."}),l.jsxs("ul",{className:"howto-list",children:[l.jsxs("li",{children:["Toggle between the ",l.jsx("strong",{children:".cwl"})," tab (workflow definition) and the ",l.jsx("strong",{children:".yml"})," tab (job template with your parameter values)."]}),l.jsx("li",{children:"Syntax highlighting: keys in blue, strings in green, booleans in orange, comments in gray."}),l.jsxs("li",{children:["Click ",l.jsx("strong",{children:"Copy"})," to copy the current tab's content to your clipboard."]}),l.jsxs("li",{children:["Click ",l.jsx("strong",{children:"Expand"})," to view the preview in a fullscreen modal for detailed review."]}),l.jsx("li",{children:"Use the toggle button to collapse or expand the panel. Panel state is saved in localStorage."})]}),l.jsxs("div",{className:"howto-tip",children:[l.jsx("strong",{children:"Note:"})," The preview requires at least two connected non-I/O nodes to generate output."]})]})]}),l.jsxs(De.Item,{eventKey:"10",children:[l.jsx(De.Header,{children:"Workspaces & Export"}),l.jsxs(De.Body,{children:[l.jsx("div",{className:"howto-subheading",children:"Workspaces"}),l.jsxs("ul",{className:"howto-list",children:[l.jsx("li",{children:"Each workspace is an independent canvas with its own nodes and edges."}),l.jsxs("li",{children:["Create a new workspace with ",l.jsx("strong",{children:"New Workspace"}),", clear the current one with ",l.jsx("strong",{children:"Clear Workspace"}),", or remove it with ",l.jsx("strong",{children:"Remove Workspace"}),"."]}),l.jsx("li",{children:"Navigate between workspaces using the page tabs at the bottom of the screen."}),l.jsx("li",{children:"Workspace state is automatically saved in your browser storage."})]}),l.jsx("div",{className:"howto-subheading",children:"Output Name"}),l.jsxs("p",{className:"howto-section-intro",children:["Set the exported filename using the ",l.jsx("strong",{children:"Output"})," input field in the toolbar. This name is used for the CWL workflow file and the downloaded bundle."]}),l.jsx("div",{className:"howto-subheading",children:"Generate Workflow"}),l.jsxs("p",{className:"howto-section-intro",children:["Click ",l.jsx("strong",{children:"Generate Workflow"})," to download a ",l.jsx("code",{className:"howto-code",children:".crate.zip"})," bundle containing everything needed to run your pipeline:"]}),l.jsxs("ul",{className:"howto-list",children:[l.jsxs("li",{children:[l.jsx("code",{className:"howto-code",children:"workflows/pipeline.cwl"}),"  CWL workflow definition"]}),l.jsxs("li",{children:[l.jsx("code",{className:"howto-code",children:"workflows/pipeline_job.yml"}),"  job template pre-filled with your configured parameter values"]}),l.jsxs("li",{children:[l.jsx("code",{className:"howto-code",children:"cwl/"}),"  individual tool CWL files with pinned Docker image versions"]}),l.jsxs("li",{children:[l.jsx("code",{className:"howto-code",children:"Dockerfile"})," + ",l.jsx("code",{className:"howto-code",children:"run.sh"}),"  one-command execution via Docker"]}),l.jsxs("li",{children:[l.jsx("code",{className:"howto-code",children:"Singularity.def"})," + ",l.jsx("code",{className:"howto-code",children:"run_singularity.sh"}),"  for HPC environments using Singularity/Apptainer"]}),l.jsxs("li",{children:[l.jsx("code",{className:"howto-code",children:"prefetch_images.sh"}),"  pre-pull all required container images"]}),l.jsxs("li",{children:[l.jsx("code",{className:"howto-code",children:"ro-crate-metadata.json"}),"  JSON-LD metadata for FAIR compliance and"," ",l.jsx("a",{className:"howto-link",href:"https://workflowhub.eu/",target:"_blank",rel:"noopener noreferrer",children:"WorkflowHub"})," discovery"]}),l.jsxs("li",{children:[l.jsx("code",{className:"howto-code",children:"README.md"}),"  setup and execution instructions"]})]}),l.jsxs("div",{className:"howto-tip",children:[l.jsx("strong",{children:"Tip:"})," The exported bundle is a"," ",l.jsx("a",{className:"howto-link",href:"https://www.commonwl.org/v1.2/",target:"_blank",rel:"noopener noreferrer",children:"CWL v1.2"})," ","Workflow RO-Crate. Run it with any CWL-compliant engine (e.g., cwltool, Toil) or use the included Docker/Singularity scripts."]})]})]})]})]})]})]})}function jo({name:e,toolInfo:t,onDragStart:n,warningIcon:i}){const[r,s]=k.useState(!1),[o,a]=k.useState({top:0,left:0}),c=k.useRef(null),u=v=>v.length>18?"font-smaller":v.length>10?"font-small":"",d=()=>{if(c.current){const v=c.current.getBoundingClientRect();a({top:v.top+v.height/2,left:v.right+10})}s(!0)},f=()=>{s(!1)},p=()=>{t!=null&&t.docUrl&&window.open(t.docUrl,"_blank","noopener,noreferrer")},m=u(e);return l.jsxs("div",{ref:c,className:`workflow-menu-item ${m}`,draggable:!0,onDragStart:v=>n(v,e),onMouseEnter:d,onMouseLeave:f,onDoubleClick:p,children:[l.jsxs("span",{className:"tool-name",children:[i&&l.jsx("span",{className:"menu-item-warning",title:"Workflow has validation warnings",children:"! "}),e]}),t&&r&&Nn.createPortal(l.jsxs("div",{className:"workflow-tooltip",style:{top:o.top,left:o.left,transform:"translateY(-50%)"},children:[t.fullName&&l.jsx("div",{className:"tooltip-section tooltip-fullname",children:l.jsx("span",{className:"tooltip-text",children:t.fullName})}),l.jsxs("div",{className:"tooltip-section",children:[l.jsx("span",{className:"tooltip-label",children:"Function:"}),l.jsx("span",{className:"tooltip-text",children:t.function})]}),t.modality&&l.jsxs("div",{className:"tooltip-section",children:[l.jsx("span",{className:"tooltip-label",children:"Expected Input:"}),l.jsx("span",{className:"tooltip-text",children:t.modality})]}),t.keyParameters&&l.jsxs("div",{className:"tooltip-section",children:[l.jsx("span",{className:"tooltip-label",children:"Key Parameters:"}),l.jsx("span",{className:"tooltip-text",children:t.keyParameters})]}),t.keyPoints&&l.jsxs("div",{className:"tooltip-section",children:[l.jsx("span",{className:"tooltip-label",children:"Key Points:"}),l.jsx("span",{className:"tooltip-text",children:t.keyPoints})]}),l.jsxs("div",{className:"tooltip-section",children:[l.jsx("span",{className:"tooltip-label",children:"Typical Use:"}),l.jsx("span",{className:"tooltip-text",children:t.typicalUse})]})]}),document.body)]})}function z1({children:e,name:t,description:n}){const[i,r]=k.useState(!1),[s,o]=k.useState({top:0,left:0}),a=k.useRef(null),c=()=>{if(a.current){const d=a.current.getBoundingClientRect();o({top:d.top+d.height/2,left:d.right+10})}r(!0)},u=()=>{r(!1)};return l.jsxs(l.Fragment,{children:[l.jsx("div",{ref:a,onMouseEnter:c,onMouseLeave:u,children:e}),i&&n&&Nn.createPortal(l.jsxs("div",{className:"workflow-tooltip",style:{top:s.top,left:s.left,transform:"translateY(-50%)"},children:[l.jsx("div",{className:"tooltip-section tooltip-fullname",children:l.jsx("span",{className:"tooltip-text",children:t})}),l.jsxs("div",{className:"tooltip-section",children:[l.jsx("span",{className:"tooltip-label",children:"Description"}),l.jsx("span",{className:"tooltip-text",children:n})]})]}),document.body)]})}const F1={fsl:"brainlife/fsl",afni:"brainlife/afni",ants:"antsx/ants",freesurfer:"freesurfer/freesurfer",mrtrix3:"mrtrix3/mrtrix3",fmriprep:"nipreps/fmriprep",mriqc:"nipreps/mriqc",connectome_workbench:"khanlab/connectome-workbench",amico:"cookpa/amico-noddi"},Jd={bet:{cwlPath:"cwl/fsl/bet.cwl",bounds:{frac:[0,1],vert_frac:[-1,1]},requires:{brain_mask:"mask",brain_skull:"skull",brain_mesh:"mesh"},fullName:"Brain Extraction Tool (BET)",function:"Removes non-brain tissue from MRI images using a deformable surface model that iteratively fits to the brain boundary.",modality:"T1-weighted structural image (3D NIfTI). Can also process 4D fMRI with -F flag.",keyParameters:"-f (fractional intensity 01, default 0.5), -g (vertical gradient), -R (robust mode), -m (output binary mask)",keyPoints:"Default threshold works for most T1s. Use -R for noisy/difficult data. Lower -f (~0.3) for functional images.",typicalUse:"First step in structural or functional preprocessing to isolate brain tissue.",inputExtensions:{input:[".nii",".nii.gz"]},outputExtensions:{brain_extraction:[".nii",".nii.gz"],brain_mask:[".nii",".nii.gz"],brain_skull:[".nii",".nii.gz"],brain_mesh:[".vtk"],brain_registration:[".nii",".nii.gz"]},docUrl:"https://fsl.fmrib.ox.ac.uk/fsl/fslwiki/BET"},fast:{cwlPath:"cwl/fsl/fast.cwl",requires:{output_bias_field:"bias_field",output_bias_corrected_image:"bias_corrected_image",output_probability_maps:"probability_maps",output_segments:"segments"},enumHints:{image_type:[1,2,3]},fullName:"FMRIB's Automated Segmentation Tool (FAST)",function:"Segments brain images into gray matter, white matter, and CSF using a hidden Markov random field model with integrated bias field correction.",modality:"Brain-extracted T1-weighted 3D NIfTI volume.",keyParameters:"-n (number of tissue classes, default 3), -t (image type: 1=T1, 2=T2, 3=PD), -B (output bias field), -o (output basename)",keyPoints:"Input must be brain-extracted. Outputs partial volume maps (*_pve_0/1/2) for each tissue class. Use -B to get estimated bias field.",typicalUse:"Tissue probability maps for normalization, VBM studies, or masking.",inputExtensions:{input:[".nii",".nii.gz"],manualseg:[".nii",".nii.gz"],initialize_priors:[".mat"]},outputExtensions:{segmented_files:[".nii.gz"],output_bias_field:[".nii.gz"],output_bias_corrected_image:[".nii.gz"],output_probability_maps:[".nii.gz"],output_segments:[".nii.gz"]},docUrl:"https://fsl.fmrib.ox.ac.uk/fsl/fslwiki/FAST"},fslreorient2std:{cwlPath:"cwl/fsl/fslreorient2std.cwl",fullName:"FSL Reorient to Standard Orientation",function:"Reorients images to match standard (MNI) orientation using 90-degree rotations and flips only.",modality:"3D or 4D NIfTI volume in any orientation.",keyParameters:"<input> [output]",keyPoints:"Only applies 90-degree rotations/flips (no interpolation). Does not register to standard space. Should be run as first step before any processing.",typicalUse:"Ensuring consistent orientation before processing.",inputExtensions:{input:[".nii",".nii.gz"]},outputExtensions:{reoriented_image:[".nii",".nii.gz"]},docUrl:"https://fsl.fmrib.ox.ac.uk/fsl/fslwiki/Orientation%20Explained"},fslroi:{cwlPath:"cwl/fsl/fslroi.cwl",fullName:"FSL Region of Interest Extraction (fslroi)",function:"Extracts a spatial or temporal sub-region from NIfTI images.",modality:"3D or 4D NIfTI volume.",keyParameters:"<input> <output> <xmin> <xsize> <ymin> <ysize> <zmin> <zsize> [<tmin> <tsize>]",keyPoints:"Indices are 0-based. For temporal extraction only, use: fslroi input output tmin tsize. Useful for extracting reference volumes from 4D data.",typicalUse:"Cropping images spatially or selecting specific time points from 4D data.",inputExtensions:{input:[".nii",".nii.gz"]},outputExtensions:{roi_image:[".nii",".nii.gz"]},docUrl:"https://fsl.fmrib.ox.ac.uk/fsl/fslwiki/Fslutils"},fslsplit:{cwlPath:"cwl/fsl/fslsplit.cwl",enumHints:{dimension:["t","x","y","z"]},fullName:"FSL Volume Split (fslsplit)",function:"Splits a 4D time series into individual 3D volumes or splits along any spatial axis.",modality:"4D NIfTI time series.",keyParameters:"<input> [output_basename] -t/-x/-y/-z (split direction, default -t for time)",keyPoints:"Default splits along time dimension. Output files are numbered sequentially (vol0000, vol0001, ...). Useful for per-volume quality control.",typicalUse:"Processing individual volumes separately, quality control inspection.",inputExtensions:{input:[".nii",".nii.gz"]},outputExtensions:{split_files:[".nii",".nii.gz"]},docUrl:"https://fsl.fmrib.ox.ac.uk/fsl/fslwiki/Fslutils"},fslmerge:{cwlPath:"cwl/fsl/fslmerge.cwl",fullName:"FSL Volume Merge (fslmerge)",function:"Concatenates multiple 3D volumes into a 4D time series or merges along any spatial axis.",modality:"Multiple 3D NIfTI volumes.",keyParameters:"-t/-x/-y/-z/-a (merge direction), <output> <input1> <input2> ...",keyPoints:"Use -t for temporal concatenation (most common). -a auto-detects axis. Input images must have matching spatial dimensions when merging in time.",typicalUse:"Combining processed volumes back into 4D, concatenating runs.",inputExtensions:{input_files:[".nii",".nii.gz"]},outputExtensions:{merged_image:[".nii",".nii.gz"]},docUrl:"https://fsl.fmrib.ox.ac.uk/fsl/fslwiki/Fslutils"},fslstats:{cwlPath:"cwl/fsl/fslstats.cwl",fullName:"FSL Image Statistics (fslstats)",function:"Computes various summary statistics from image data, optionally within a mask region.",modality:"3D or 4D NIfTI volume, optional mask.",keyParameters:"-k (mask image), -m (mean), -s (standard deviation), -r (min max), -V (volume in voxels and mm3), -p (nth percentile)",keyPoints:"Apply -k mask before other options. Use -t for per-volume stats on 4D data. Outputs to stdout for easy scripting.",typicalUse:"Extracting summary statistics from ROIs or whole-brain.",inputExtensions:{input:[".nii",".nii.gz"],mask:[".nii",".nii.gz"],index_mask:[".nii",".nii.gz"]},outputExtensions:{stats_output:[".txt"]},docUrl:"https://fsl.fmrib.ox.ac.uk/fsl/fslwiki/Fslutils"},fslmeants:{cwlPath:"cwl/fsl/fslmeants.cwl",fullName:"FSL Mean Time Series Extraction (fslmeants)",function:"Extracts the mean time series from a 4D dataset within a mask or at specified coordinates.",modality:"4D fMRI NIfTI time series plus ROI mask or coordinates.",keyParameters:"-i (input 4D), -o (output text file), -m (mask image), -c (x y z coordinates), --eig (output eigenvariates)",keyPoints:"Outputs one value per timepoint. Use -m for mask-based extraction, -c for single-voxel. --eig outputs eigenvariate (first principal component) instead of mean.",typicalUse:"ROI time series extraction for seed-based connectivity analysis.",inputExtensions:{input:[".nii",".nii.gz"],mask:[".nii",".nii.gz"],label:[".nii",".nii.gz"]},outputExtensions:{timeseries:[".txt"]},docUrl:"https://fsl.fmrib.ox.ac.uk/fsl/fslwiki/Fslutils"},cluster:{cwlPath:"cwl/fsl/cluster.cwl",fullName:"FSL Cluster Analysis (cluster)",function:"Identifies contiguous clusters of suprathreshold voxels in statistical images and reports their properties.",modality:"Statistical map (z-stat or p-value 3D NIfTI).",keyParameters:"-i (input stat image), -t (z threshold), -p (p threshold), --oindex (cluster index output), --olmax (local maxima output), -c (cope image for effect sizes)",keyPoints:"Reports cluster size, peak coordinates, and p-values. Use with -c to get mean COPE within clusters. GRF-based p-values require smoothness estimates.",typicalUse:"Cluster-based thresholding and extracting peak coordinates from statistical maps.",inputExtensions:{input:[".nii",".nii.gz"],cope:[".nii",".nii.gz"],xfm:[".mat"],stdvol:[".nii",".nii.gz"],warpvol:[".nii",".nii.gz"]},outputExtensions:{cluster_table:[".txt"],cluster_index:[".nii",".nii.gz"],thresholded_image:[".nii",".nii.gz"],local_maxima_txt:[".txt"],local_maxima_image:[".nii",".nii.gz"],size_image:[".nii",".nii.gz"],max_image:[".nii",".nii.gz"],mean_image:[".nii",".nii.gz"],pvals_image:[".nii",".nii.gz"]},docUrl:"https://fsl.fmrib.ox.ac.uk/fsl/fslwiki/Cluster"},mcflirt:{cwlPath:"cwl/fsl/mcflirt.cwl",enumHints:{cost:["mutualinfo","corratio","normcorr","normmi","leastsquares"]},fullName:"Motion Correction using FLIRT (MCFLIRT)",function:"Intra-modal motion correction for fMRI time series using rigid-body (6-DOF) transformations optimized for fMRI data.",modality:"4D fMRI NIfTI time series.",keyParameters:"-refvol (reference volume index), -cost (cost function), -plots (output motion parameter plots), -mats (save transformation matrices)",keyPoints:"Default reference is middle volume. Use -plots for motion parameter files (6 columns: 3 rotations + 3 translations). Motion params useful as nuisance regressors.",typicalUse:"Correcting head motion in functional data; motion parameters used as nuisance regressors.",inputExtensions:{input:[".nii",".nii.gz"],ref_file:[".nii",".nii.gz"],init:[".mat"]},outputExtensions:{motion_corrected:[".nii",".nii.gz"],motion_parameters:[".par"],mean_image:[".nii",".nii.gz"],variance_image:[".nii",".nii.gz"],std_image:[".nii",".nii.gz"],transformation_matrices:[".mat"],rms_files:[".rms"]},docUrl:"https://fsl.fmrib.ox.ac.uk/fsl/fslwiki/MCFLIRT"},slicetimer:{cwlPath:"cwl/fsl/slicetimer.cwl",fullName:"FMRIB's Slice Timing Correction (SliceTimer)",function:"Corrects for differences in slice acquisition times within each volume using sinc interpolation.",modality:"4D fMRI NIfTI time series.",keyParameters:"-r (TR in seconds), --odd (interleaved odd slices first), --down (reverse slice order), --tcustom (custom timing file)",keyPoints:"Must match actual acquisition order. Important for event-related designs with short TRs. Less critical for long TRs or block designs.",typicalUse:"Temporal alignment of slices acquired at different times within each TR.",inputExtensions:{input:[".nii",".nii.gz"],custom_order:[".txt"],custom_timings:[".txt"]},outputExtensions:{slice_time_corrected:[".nii",".nii.gz"]},docUrl:"https://fsl.fmrib.ox.ac.uk/fsl/fslwiki/SliceTimer"},susan:{cwlPath:"cwl/fsl/susan.cwl",fullName:"Smallest Univalue Segment Assimilating Nucleus (SUSAN)",function:"Edge-preserving noise reduction using nonlinear filtering that smooths within tissue boundaries while preserving edges.",modality:"3D or 4D NIfTI volume (structural or functional).",keyParameters:"<input> <brightness_threshold> <spatial_size_mm> <dimensionality> <use_median> <n_usans> [<usan1>] <output>",keyPoints:"Brightness threshold typically 0.75 * median intensity. Set dimensionality to 3 for 3D volumes. Better edge preservation than Gaussian smoothing.",typicalUse:"Noise reduction while preserving structural boundaries in functional or structural data.",inputExtensions:{input:[".nii",".nii.gz"]},outputExtensions:{smoothed_image:[".nii",".nii.gz"]},docUrl:"https://fsl.fmrib.ox.ac.uk/fsl/fslwiki/SUSAN"},flirt:{cwlPath:"cwl/fsl/flirt.cwl",enumHints:{cost:["mutualinfo","corratio","normcorr","normmi","leastsq","bbr"],interp:["trilinear","nearestneighbour","sinc","spline"]},fullName:"FMRIB's Linear Image Registration Tool (FLIRT)",function:"Linear (affine) registration between images using optimized cost functions with 6, 7, 9, or 12 degrees of freedom.",modality:"Any 3D NIfTI volume pair (structural, functional, or standard template).",keyParameters:"-ref (reference image), -dof (degrees of freedom: 6/7/9/12), -cost (cost function), -omat (output matrix)",keyPoints:"Use 6-DOF for within-subject rigid-body, 12-DOF for cross-subject affine. Cost function matters: corratio for intra-modal, mutualinfo for inter-modal.",typicalUse:"EPI-to-structural alignment, structural-to-standard registration.",inputExtensions:{input:[".nii",".nii.gz"],reference:[".nii",".nii.gz"],init_matrix:[".mat"],in_weight:[".nii",".nii.gz"],ref_weight:[".nii",".nii.gz"],wm_seg:[".nii",".nii.gz"],fieldmap:[".nii",".nii.gz"],fieldmapmask:[".nii",".nii.gz"],schedule:[".sch"]},outputExtensions:{registered_image:[".nii",".nii.gz"],transformation_matrix:[".mat"]},docUrl:"https://fsl.fmrib.ox.ac.uk/fsl/fslwiki/FLIRT"},applywarp:{cwlPath:"cwl/fsl/applywarp.cwl",enumHints:{interp:["nn","trilinear","sinc","spline"]},fullName:"FSL Apply Warp Field (applywarp)",function:"Applies linear and/or non-linear warp fields to transform images between coordinate spaces.",modality:"3D or 4D NIfTI volume plus warp field and/or affine matrix.",keyParameters:"-i (input), -r (reference), -o (output), -w (warp field), --premat (pre-warp affine), --postmat (post-warp affine), --interp (interpolation)",keyPoints:"Can chain affine + nonlinear transforms in one step. Use --interp=nn for label images, --interp=spline for continuous images. Reference defines output grid.",typicalUse:"Applying normalization warps to functional data or atlas labels.",inputExtensions:{input:[".nii",".nii.gz"],reference:[".nii",".nii.gz"],warp:[".nii",".nii.gz"],premat:[".mat"],postmat:[".mat"],mask:[".nii",".nii.gz"]},outputExtensions:{warped_image:[".nii",".nii.gz"]},docUrl:"https://fsl.fmrib.ox.ac.uk/fsl/fslwiki/FNIRT/UserGuide#Applying_the_warps"},invwarp:{cwlPath:"cwl/fsl/invwarp.cwl",fullName:"FSL Invert Warp Field (invwarp)",function:"Computes the inverse of a non-linear warp field for reverse transformations.",modality:"Non-linear warp field (4D NIfTI from FNIRT --cout output).",keyParameters:"-w (input warp), -o (output inverse warp), -r (reference image for output space)",keyPoints:"Needed to map atlas/standard-space ROIs back to native space. Reference should be the image that was originally warped.",typicalUse:"Creating inverse transformations for atlas-to-native space mapping.",inputExtensions:{warp:[".nii",".nii.gz"],reference:[".nii",".nii.gz"]},outputExtensions:{inverse_warp:[".nii",".nii.gz"]},docUrl:"https://fsl.fmrib.ox.ac.uk/fsl/fslwiki/FNIRT/UserGuide#Inverting_warps"},convertwarp:{cwlPath:"cwl/fsl/convertwarp.cwl",fullName:"FSL Convert/Combine Warps (convertwarp)",function:"Combines multiple warp fields and affine matrices into a single composite warp for efficient one-step transformation.",modality:"Warp fields and/or affine matrices from FLIRT/FNIRT.",keyParameters:"-r (reference), -o (output), --premat (first affine), --warp1 (first warp), --midmat (middle affine), --warp2 (second warp), --postmat (final affine)",keyPoints:"Applying one combined warp is faster and has less interpolation error than chaining multiple transformations. Transform order: premat > warp1 > midmat > warp2 > postmat.",typicalUse:"Concatenating multiple transformations (e.g., func > struct > standard) efficiently.",inputExtensions:{reference:[".nii",".nii.gz"],warp1:[".nii",".nii.gz"],warp2:[".nii",".nii.gz"],premat:[".mat"],midmat:[".mat"],postmat:[".mat"],shiftmap:[".nii",".nii.gz"]},outputExtensions:{combined_warp:[".nii",".nii.gz"]},docUrl:"https://fsl.fmrib.ox.ac.uk/fsl/fslwiki/FNIRT/UserGuide#Combining_warps"},fslmaths:{cwlPath:"cwl/fsl/fslmaths.cwl",fullName:"FSL Mathematical Image Operations (fslmaths)",function:"Performs a wide range of voxelwise mathematical operations on NIfTI images including arithmetic, filtering, thresholding, and morphological operations.",modality:"3D or 4D NIfTI volume(s).",keyParameters:"-add/-sub/-mul/-div (arithmetic), -thr/-uthr (thresholding), -bin (binarize), -s (smoothing sigma mm), -bptf (bandpass temporal filter)",keyPoints:"Swiss army knife of neuroimaging. Operations are applied left to right. Use -odt to control output data type. -bptf values are in volumes not seconds.",typicalUse:"Mathematical operations, masking, thresholding, temporal filtering.",inputExtensions:{input:[".nii",".nii.gz"],add_file:[".nii",".nii.gz"],sub_file:[".nii",".nii.gz"],mul_file:[".nii",".nii.gz"],div_file:[".nii",".nii.gz"],mas:[".nii",".nii.gz"],max_file:[".nii",".nii.gz"],min_file:[".nii",".nii.gz"]},outputExtensions:{output_image:[".nii",".nii.gz"]},docUrl:"https://fsl.fmrib.ox.ac.uk/fsl/fslwiki/Fslutils"},fnirt:{cwlPath:"cwl/fsl/fnirt.cwl",fullName:"FMRIB's Non-linear Image Registration Tool (FNIRT)",function:"Non-linear registration using B-spline deformations for precise anatomical alignment to a template.",modality:"T1-weighted 3D NIfTI volume plus reference template. Requires initial affine from FLIRT.",keyParameters:"--ref (reference), --aff (initial affine), --config (config file), --cout (coefficient output), --iout (warped output)",keyPoints:"Always run FLIRT first for initial alignment. Use --config=T1_2_MNI152_2mm for standard T1-to-MNI. Computationally intensive.",typicalUse:"High-accuracy normalization to MNI space for group analyses.",inputExtensions:{input:[".nii",".nii.gz"],reference:[".nii",".nii.gz"],affine:[".mat"],inwarp:[".nii",".nii.gz"],intin:[".nii",".nii.gz"],config:[".cnf"],refmask:[".nii",".nii.gz"],inmask:[".nii",".nii.gz"]},outputExtensions:{warp_coefficients:[".nii",".nii.gz"],warped_image:[".nii",".nii.gz"],displacement_field:[".nii",".nii.gz"],jacobian_map:[".nii",".nii.gz"],intensity_modulated_ref:[".nii",".nii.gz"]},docUrl:"https://fsl.fmrib.ox.ac.uk/fsl/fslwiki/FNIRT"},fugue:{cwlPath:"cwl/fsl/fugue.cwl",enumHints:{unwarpdir:["x","y","z","x-","y-","z-"]},fullName:"FMRIB's Utility for Geometrically Unwarping EPIs (FUGUE)",function:"Corrects geometric distortions in EPI images caused by magnetic field inhomogeneity using acquired fieldmap data.",modality:"3D/4D EPI NIfTI plus preprocessed fieldmap (in rad/s).",keyParameters:"--loadfmap (fieldmap), --dwell (echo spacing in seconds), --unwarpdir (phase-encode direction: x/y/z/-x/-y/-z)",keyPoints:"Requires preprocessed fieldmap (e.g., from fsl_prepare_fieldmap). Dwell time and unwarp direction must match acquisition parameters.",typicalUse:"Distortion correction when fieldmap data is available.",inputExtensions:{input:[".nii",".nii.gz"],phasemap:[".nii",".nii.gz"],loadfmap:[".nii",".nii.gz"],loadshift:[".nii",".nii.gz"],mask:[".nii",".nii.gz"]},outputExtensions:{unwarped_image:[".nii",".nii.gz"],warped_image:[".nii",".nii.gz"],fieldmap_output:[".nii",".nii.gz"],shiftmap_output:[".nii",".nii.gz"]},docUrl:"https://fsl.fmrib.ox.ac.uk/fsl/fslwiki/FUGUE"},topup:{cwlPath:"cwl/fsl/topup.cwl",fullName:"Tool for Estimating and Correcting Susceptibility-Induced Distortions (TOPUP)",function:"Estimates and corrects susceptibility-induced distortions using pairs of images with reversed phase-encode directions.",modality:"4D NIfTI with concatenated blip-up/blip-down b=0 images, plus acquisition parameters file.",keyParameters:"--imain (concatenated images), --datain (acquisition parameters file), --config (config file), --out (output basename)",keyPoints:"Requires reversed phase-encode image pair. Default config b02b0.cnf works well for most data. Outputs warp fields reusable by applytopup.",typicalUse:"Distortion correction using blip-up/blip-down acquisitions for fMRI or DWI.",inputExtensions:{input:[".nii",".nii.gz"],encoding_file:[".txt"],config:[".cnf"]},outputExtensions:{movpar:[".txt"],fieldcoef:[".nii",".nii.gz"],fieldmap:[".nii",".nii.gz"],corrected_images:[".nii",".nii.gz"],displacement_fields:[".nii",".nii.gz"],jacobian_images:[".nii",".nii.gz"]},docUrl:"https://fsl.fmrib.ox.ac.uk/fsl/fslwiki/topup"},film_gls:{cwlPath:"cwl/fsl/film_gls.cwl",fullName:"FMRIB's Improved Linear Model (FILM)",function:"Fits general linear model to fMRI time series with prewhitening using autocorrelation correction.",modality:"4D fMRI NIfTI time series plus design matrix and contrast files.",keyParameters:"--in (input 4D), --pd (design matrix), --con (contrast file), --thr (threshold), --sa (smoothed autocorrelation)",keyPoints:"Core statistical engine of FEAT. Design matrix must be pre-generated (e.g., via Feat_model). Outputs parameter estimates (pe), contrasts (cope), and stats (zstat).",typicalUse:"First-level statistical analysis within FEAT or standalone.",inputExtensions:{input:[".nii",".nii.gz"],design_file:[".mat"]},outputExtensions:{residual4d:[".nii",".nii.gz"],param_estimates:[".nii",".nii.gz"],sigmasquareds:[".nii",".nii.gz"],threshac1:[".nii",".nii.gz"]},docUrl:"https://fsl.fmrib.ox.ac.uk/fsl/fslwiki/FILM"},flameo:{cwlPath:"cwl/fsl/flameo.cwl",fullName:"FMRIB's Local Analysis of Mixed Effects (FLAME)",function:"Group-level mixed-effects analysis accounting for both within-subject and between-subject variance using MCMC-based Bayesian estimation.",modality:"4D NIfTI of stacked subject-level COPEs, VARCOPEs, plus group design matrix and contrast files.",keyParameters:"--cope (cope image), --vc (varcope image), --dm (design matrix), --cs (contrast file), --runmode (fe/ols/flame1/flame12)",keyPoints:"FLAME1 is recommended (good accuracy with reasonable speed). OLS is fast but ignores within-subject variance. FLAME1+2 is most accurate but slowest.",typicalUse:"Second-level group analyses with proper random effects.",inputExtensions:{cope_file:[".nii",".nii.gz"],var_cope_file:[".nii",".nii.gz"],mask_file:[".nii",".nii.gz"],design_file:[".mat"],t_con_file:[".con"],cov_split_file:[".grp"],f_con_file:[".fts"],dof_var_cope_file:[".nii",".nii.gz"]},outputExtensions:{copes:[".nii",".nii.gz"],var_copes:[".nii",".nii.gz"],tstats:[".nii",".nii.gz"],zstats:[".nii",".nii.gz"],fstats:[".nii",".nii.gz"],zfstats:[".nii",".nii.gz"],tdof:[".nii",".nii.gz"],res4d:[".nii",".nii.gz"],weights:[".nii",".nii.gz"]},docUrl:"https://fsl.fmrib.ox.ac.uk/fsl/fslwiki/FLAME"},randomise:{cwlPath:"cwl/fsl/randomise.cwl",fullName:"FSL Randomise Permutation Testing",function:"Non-parametric permutation testing for statistical inference with multiple correction methods including TFCE.",modality:"4D NIfTI of stacked subject images plus design matrix and contrast files.",keyParameters:"-i (input 4D), -o (output basename), -d (design matrix), -t (contrast file), -n (num permutations), -T (TFCE)",keyPoints:"Use -T for TFCE (recommended). 5000+ permutations for publication. Computationally intensive but provides strong family-wise error control.",typicalUse:"Group-level inference with family-wise error correction (VBM, TBSS, etc.).",inputExtensions:{input:[".nii",".nii.gz"],design_mat:[".mat"],tcon:[".con"],fcon:[".fts"],mask:[".nii",".nii.gz"],x_block_labels:[".txt"]},outputExtensions:{t_corrp:[".nii.gz"],t_p:[".nii.gz"],tstat:[".nii",".nii.gz"],f_corrp:[".nii.gz"],f_p:[".nii.gz"],fstat:[".nii",".nii.gz"]},docUrl:"https://fsl.fmrib.ox.ac.uk/fsl/fslwiki/Randomise"},melodic:{cwlPath:"cwl/fsl/melodic.cwl",enumHints:{approach:["defl","symm","tica","concat"]},fullName:"Multivariate Exploratory Linear Optimized Decomposition into Independent Components (MELODIC)",function:"Probabilistic ICA that decomposes fMRI data into spatially independent components representing signal and noise sources.",modality:"4D fMRI NIfTI time series (single-subject or concatenated multi-subject).",keyParameters:"-i (input 4D), -o (output directory), -d (dimensionality), --report (generate HTML report), --bgimage (background for report)",keyPoints:"Auto-dimensionality estimation by default (Laplace approximation). Can be run single-subject or group. Components classified as signal vs. noise manually or via FIX.",typicalUse:"Data exploration, artifact identification, resting-state network analysis.",inputExtensions:{input_files:[".nii",".nii.gz"],mask:[".nii",".nii.gz"],ICs:[".nii",".nii.gz"],mix:[".txt"],t_des:[".mat"],t_con:[".con"],s_des:[".mat"],s_con:[".con"],bg_image:[".nii",".nii.gz"]},outputExtensions:{melodic_IC:[".nii",".nii.gz"],melodic_mix:[".txt"],melodic_FTmix:[".txt"],melodic_Tmodes:[".txt"],mean:[".nii",".nii.gz"]},docUrl:"https://fsl.fmrib.ox.ac.uk/fsl/fslwiki/MELODIC"},dual_regression:{cwlPath:"cwl/fsl/dual_regression.cwl",fullName:"FSL Dual Regression",function:"Projects group-level ICA spatial maps back to individual subjects via spatial then temporal regression to obtain subject-specific network maps.",modality:"4D fMRI NIfTI time series for each subject plus group ICA spatial maps.",keyParameters:"<group_ICA_maps> <design_matrix> <design_contrasts> <num_permutations> <subject_list>",keyPoints:"Two-stage regression: (1) spatial regression gives subject time courses, (2) temporal regression gives subject spatial maps. Can include randomise for group comparison.",typicalUse:"Subject-level ICA-based resting-state network analysis and group comparisons.",inputExtensions:{group_IC_maps:[".nii",".nii.gz"],design_mat:[".mat"],design_con:[".con"],input_files:[".nii",".nii.gz"]},outputExtensions:{stage1_timeseries:[".txt"],stage2_spatial_maps:[".nii",".nii.gz"],stage3_tstats:[".nii",".nii.gz"],stage3_corrp:[".nii",".nii.gz"]},docUrl:"https://fsl.fmrib.ox.ac.uk/fsl/fslwiki/DualRegression"},run_first_all:{cwlPath:"cwl/fsl/run_first_all.cwl",enumHints:{method:["auto","fast","none"]},fullName:"FMRIB's Integrated Registration and Segmentation Tool (FIRST)",function:"Automated segmentation of subcortical structures using shape and appearance models trained on manually labeled data.",modality:"T1-weighted 3D NIfTI volume (does not need to be brain-extracted).",keyParameters:"-i (input image), -o (output basename), -b (run BET first), -s (comma-separated structures list)",keyPoints:"Models 15 subcortical structures. Outputs meshes (.vtk) and volumetric labels. Can run on selected structures only with -s flag.",typicalUse:"Volumetric analysis of subcortical structures (hippocampus, amygdala, caudate, etc.).",inputExtensions:{input:[".nii",".nii.gz"],affine:[".mat"]},outputExtensions:{segmentation_files:[".nii.gz"],vtk_meshes:[".vtk"],bvars:[".bvars"]},docUrl:"https://fsl.fmrib.ox.ac.uk/fsl/fslwiki/FIRST"},sienax:{cwlPath:"cwl/fsl/sienax.cwl",fullName:"SIENA Cross-Sectional (SIENAX)",function:"Cross-sectional brain volume estimation normalized for head size using atlas-based scaling.",modality:"T1-weighted 3D NIfTI volume.",keyParameters:"-o (output directory), -r (regional analysis), -BET (BET options), -S (SIENAX options)",keyPoints:"Single timepoint analysis. Normalizes volumes by head size for cross-subject comparisons. Reports total brain, GM, and WM volumes.",typicalUse:"Single timepoint normalized brain volume measures.",inputExtensions:{input:[".nii",".nii.gz"],lesion_mask:[".nii",".nii.gz"]},outputExtensions:{report:[".sienax"],brain_volume:[".nii",".nii.gz"],segmentation:[".nii",".nii.gz"]},docUrl:"https://fsl.fmrib.ox.ac.uk/fsl/fslwiki/SIENA"},siena:{cwlPath:"cwl/fsl/siena.cwl",fullName:"Structural Image Evaluation using Normalisation of Atrophy (SIENA)",function:"Estimates percentage brain volume change between two timepoints using edge-point displacement analysis.",modality:"Two T1-weighted 3D NIfTI volumes from different timepoints.",keyParameters:"-o (output directory), -BET (BET options), -2 (2-class segmentation), -S (SIENA step options)",keyPoints:"Requires two scans of same subject at different timepoints. Reports percentage brain volume change (PBVC). Accurate to ~0.2% volume change.",typicalUse:"Measuring brain volume change over time (e.g., atrophy in neurodegeneration).",inputExtensions:{input1:[".nii",".nii.gz"],input2:[".nii",".nii.gz"],ventricle_mask:[".nii",".nii.gz"]},outputExtensions:{report:[".siena"],pbvc:[".sienax"],edge_points:[".nii",".nii.gz"],flow_images:[".nii",".nii.gz"]},docUrl:"https://fsl.fmrib.ox.ac.uk/fsl/fslwiki/SIENA"},fsl_anat:{cwlPath:"cwl/fsl/fsl_anat.cwl",fullName:"FSL Anatomical Processing Pipeline",function:"Comprehensive automated pipeline for structural T1 processing including reorientation, cropping, bias correction, registration, segmentation, and subcortical segmentation.",modality:"T1-weighted 3D NIfTI volume.",keyParameters:"-i (input image), --noseg (skip segmentation), --nosubcortseg (skip subcortical), --nononlinreg (skip non-linear registration)",keyPoints:"Runs BET, FAST, FLIRT, FNIRT, and FIRST in sequence. Creates output directory with all intermediate files. Good for standardized structural processing.",typicalUse:"Full structural preprocessing from T1 image.",inputExtensions:{input:[".nii",".nii.gz"]},outputExtensions:{t1:[".nii",".nii.gz"],t1_brain:[".nii",".nii.gz"],t1_brain_mask:[".nii",".nii.gz"],t1_biascorr:[".nii",".nii.gz"],t1_biascorr_brain:[".nii",".nii.gz"],mni_to_t1_nonlin_warp:[".nii",".nii.gz"],t1_to_mni_nonlin_warp:[".nii",".nii.gz"],segmentation:[".nii",".nii.gz"],subcortical_seg:[".nii",".nii.gz"]},docUrl:"https://fsl.fmrib.ox.ac.uk/fsl/fslwiki/fsl_anat"},probtrackx2:{cwlPath:"cwl/fsl/probtrackx2.cwl",fullName:"Probabilistic Tractography with Crossing Fibres (probtrackx2)",function:"Probabilistic tractography using fiber orientation distributions from bedpostx to trace white matter pathways.",modality:"BEDPOSTX output directory plus seed mask (3D NIfTI).",keyParameters:"-x (seed mask), -s (bedpostx merged samples), --dir (output directory), -l (loop check), --waypoints (waypoint masks), --avoid (exclusion mask)",keyPoints:"Requires bedpostx output. Use --omatrix1 for seed-to-voxel connectivity, --omatrix2 for NxN connectivity. Waypoints constrain tractography to specific paths.",typicalUse:"White matter connectivity analysis, tract-based statistics.",inputExtensions:{mask:[".nii",".nii.gz"],seed:[".nii",".nii.gz",".txt"],waypoints:[".nii",".nii.gz",".txt"],avoid:[".nii",".nii.gz"],stop:[".nii",".nii.gz"],target_masks:[".txt"],xfm:[".mat"],invxfm:[".mat"],seedref:[".nii",".nii.gz"]},outputExtensions:{fdt_paths:[".nii",".nii.gz"],way_total:[".txt"],matrix:[".dot"],targets:[".nii",".nii.gz"]},docUrl:"https://fsl.fmrib.ox.ac.uk/fsl/fslwiki/FDT/UserGuide#PROBTRACKX"},"3dSkullStrip":{cwlPath:"cwl/afni/3dSkullStrip.cwl",bounds:{shrink_fac:[0,1]},fullName:"AFNI 3D Skull Strip",function:"Removes non-brain tissue using a modified spherical surface expansion algorithm adapted from BET.",modality:"T1-weighted or T2-weighted 3D NIfTI/AFNI volume.",keyParameters:"-input (input dataset), -prefix (output prefix), -push_to_edge (expand mask), -orig_vol (output original volume)",keyPoints:"Often more aggressive than BET. Use -push_to_edge if too much brain is removed. Works on T1 or T2 images.",typicalUse:"Brain extraction for structural or functional images in AFNI pipelines.",inputExtensions:{input:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"]},outputExtensions:{skull_stripped:["+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],mask:["+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"]},docUrl:"https://afni.nimh.nih.gov/pub/dist/doc/program_help/3dSkullStrip.html"},"3dvolreg":{cwlPath:"cwl/afni/3dvolreg.cwl",fullName:"AFNI 3D Volume Registration (3dvolreg)",function:"Rigid-body motion correction by registering all volumes in a 4D dataset to a base volume.",modality:"4D fMRI NIfTI/AFNI time series.",keyParameters:"-base (reference volume index or dataset), -prefix (output), -1Dfile (motion parameters output), -maxdisp1D (max displacement output)",keyPoints:"Default base is volume 0; use median volume for better results. Motion parameters output as 6 columns.",typicalUse:"Motion correction for fMRI; outputs 6 motion parameters for nuisance regression.",inputExtensions:{input:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],base_file:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],weight:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"]},outputExtensions:{registered:["+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],motion_params:[".1D"],motion_1D:[".1D"],transform_matrix:[".aff12.1D"],max_displacement:[".1D"]},docUrl:"https://afni.nimh.nih.gov/pub/dist/doc/program_help/3dvolreg.html"},"3dTshift":{cwlPath:"cwl/afni/3dTshift.cwl",fullName:"AFNI 3D Temporal Shift (3dTshift)",function:"Corrects for slice timing differences by shifting each voxel time series to a common temporal reference.",modality:"4D fMRI NIfTI/AFNI time series.",keyParameters:"-prefix (output), -tpattern (slice timing pattern: alt+z, seq+z, etc.), -tzero (align to time zero), -TR (repetition time)",keyPoints:"Auto-detects slice timing from header if available. Common patterns: alt+z (interleaved ascending), seq+z (sequential ascending).",typicalUse:"Aligning all slices to the same temporal reference in fMRI data.",inputExtensions:{input:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],voxshift:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"]},outputExtensions:{shifted:["+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"]},docUrl:"https://afni.nimh.nih.gov/pub/dist/doc/program_help/3dTshift.html"},"3dDespike":{cwlPath:"cwl/afni/3dDespike.cwl",fullName:"AFNI 3D Despike (3dDespike)",function:"Removes transient signal spikes from fMRI time series using an L1-norm fitting approach.",modality:"4D fMRI NIfTI/AFNI time series.",keyParameters:"-prefix (output), -ssave (save spike fit), -nomask (process all voxels), -NEW (updated algorithm)",keyPoints:"Run early in preprocessing pipeline (before motion correction). -NEW algorithm recommended.",typicalUse:"Artifact removal before other preprocessing steps.",inputExtensions:{input:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"]},outputExtensions:{despiked:["+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],spikiness:["+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"]},docUrl:"https://afni.nimh.nih.gov/pub/dist/doc/program_help/3dDespike.html"},"3dBandpass":{cwlPath:"cwl/afni/3dBandpass.cwl",fullName:"AFNI 3D Bandpass Filter (3dBandpass)",function:"Applies temporal bandpass filtering to fMRI time series with optional simultaneous nuisance regression.",modality:"4D fMRI NIfTI/AFNI time series.",keyParameters:"<fbot> <ftop> (frequency range in Hz), -prefix (output), -ort (nuisance regressors file)",keyPoints:"Typical resting-state range: 0.01-0.1 Hz. Can simultaneously regress nuisance signals with -ort.",typicalUse:"Resting-state frequency filtering (typically 0.01-0.1 Hz).",inputExtensions:{input:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],ort:[".1D",".txt"],dsort:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],mask:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"]},outputExtensions:{filtered:["+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"]},docUrl:"https://afni.nimh.nih.gov/pub/dist/doc/program_help/3dBandpass.html"},"3dBlurToFWHM":{cwlPath:"cwl/afni/3dBlurToFWHM.cwl",fullName:"AFNI 3D Adaptive Smoothing to Target FWHM",function:"Adaptively smooths data to achieve a target smoothness level, accounting for existing smoothness.",modality:"3D or 4D NIfTI/AFNI volume with mask.",keyParameters:"-input (input dataset), -prefix (output), -FWHM (target smoothness in mm), -mask (brain mask)",keyPoints:"Measures existing smoothness and adds only enough to reach target FWHM. Better than fixed-kernel smoothing.",typicalUse:"Achieving consistent smoothness across subjects/studies.",inputExtensions:{input:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],blurmaster:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],mask:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"]},outputExtensions:{blurred:["+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"]},docUrl:"https://afni.nimh.nih.gov/pub/dist/doc/program_help/3dBlurToFWHM.html"},"3dmerge":{cwlPath:"cwl/afni/3dmerge.cwl",fullName:"AFNI 3D Merge and Smooth (3dmerge)",function:"Combines spatial filtering and dataset merging operations, commonly used for Gaussian smoothing.",modality:"3D or 4D NIfTI/AFNI volume.",keyParameters:"-1blur_fwhm (FWHM in mm), -doall (process all sub-bricks), -prefix (output)",keyPoints:"Simple Gaussian smoothing with -1blur_fwhm. -doall applies to all volumes in 4D.",typicalUse:"Gaussian smoothing of functional data.",inputExtensions:{input:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"]},outputExtensions:{merged:["+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"]},docUrl:"https://afni.nimh.nih.gov/pub/dist/doc/program_help/3dmerge.html"},"3dAllineate":{cwlPath:"cwl/afni/3dAllineate.cwl",enumHints:{cost:["ls","mi","crM","nmi","hel","lpc"],warp:["shift_only","shift_rotate","shift_rotate_scale","affine_general"],interp:["NN","linear","cubic","quintic"]},fullName:"AFNI 3D Affine Registration (3dAllineate)",function:"Linear (affine) registration with multiple cost functions and optimization methods.",modality:"Any 3D NIfTI/AFNI volume pair.",keyParameters:"-source (moving image), -base (reference), -prefix (output), -cost (cost function: lpc, mi, nmi), -1Dmatrix_save (save transform)",keyPoints:"lpc cost recommended for EPI-to-T1 alignment. nmi for intra-modal.",typicalUse:"Affine alignment between modalities or to standard space.",inputExtensions:{source:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],base:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],oned_matrix_apply:[".1D",".txt"],oned_param_apply:[".1D",".txt"],weight:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],emask:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],source_mask:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],master:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"]},outputExtensions:{aligned:["+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],matrix:[".aff12.1D"],params:[".1D"]},docUrl:"https://afni.nimh.nih.gov/pub/dist/doc/program_help/3dAllineate.html"},"3dQwarp":{cwlPath:"cwl/afni/3dQwarp.cwl",fullName:"AFNI 3D Nonlinear Warp (3dQwarp)",function:"Non-linear registration using cubic polynomial basis functions for precise anatomical alignment.",modality:"T1-weighted 3D NIfTI/AFNI volumes (source and base, both skull-stripped).",keyParameters:"-source (moving), -base (reference), -prefix (output), -blur (smoothing), -minpatch (minimum patch size)",keyPoints:"Both images should be skull-stripped. Use -blur 0 3 for typical T1 registration. Usually preceded by 3dAllineate.",typicalUse:"High-accuracy normalization to template.",inputExtensions:{source:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],base:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],iniwarp:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK",".1D",".txt"],emask:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"]},outputExtensions:{warped:["+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],warp:["+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],inverse_warp:["+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"]},docUrl:"https://afni.nimh.nih.gov/pub/dist/doc/program_help/3dQwarp.html"},"3dUnifize":{cwlPath:"cwl/afni/3dUnifize.cwl",fullName:"AFNI 3D Intensity Uniformization (3dUnifize)",function:"Corrects intensity inhomogeneity (bias field) to produce uniform white matter intensity.",modality:"T1-weighted or T2-weighted 3D NIfTI/AFNI volume.",keyParameters:"-input (input), -prefix (output), -T2 (for T2-weighted input), -GM (also unifize gray matter)",keyPoints:"Fast bias correction alternative to N4. Works well for T1 images by default. Use -T2 flag for T2-weighted images.",typicalUse:"Bias correction before segmentation or registration.",inputExtensions:{input:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"]},outputExtensions:{unifized:["+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],scale_factors:["+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],automask:["+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"]},docUrl:"https://afni.nimh.nih.gov/pub/dist/doc/program_help/3dUnifize.html"},"3dAutomask":{cwlPath:"cwl/afni/3dAutomask.cwl",bounds:{clfrac:[.1,.9]},fullName:"AFNI 3D Automatic Mask Creation (3dAutomask)",function:"Creates a brain mask automatically from EPI data by finding connected high-intensity voxels.",modality:"3D or 4D EPI NIfTI/AFNI volume.",keyParameters:"-prefix (output mask), -dilate (number of dilation steps), -erode (number of erosion steps), -clfrac (clip fraction)",keyPoints:"Works on EPI data directly (no structural needed). Lower -clfrac includes more voxels.",typicalUse:"Generating functional brain masks from EPI data.",inputExtensions:{input:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"]},outputExtensions:{mask:["+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],masked_input:["+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],depth_map:["+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"]},docUrl:"https://afni.nimh.nih.gov/pub/dist/doc/program_help/3dAutomask.html"},"3dTcat":{cwlPath:"cwl/afni/3dTcat.cwl",fullName:"AFNI 3D Temporal Concatenate (3dTcat)",function:"Concatenates datasets along the time dimension or selects specific sub-bricks from 4D data.",modality:"3D or 4D NIfTI/AFNI volumes.",keyParameters:"-prefix (output), <dataset>[selector] (input with optional sub-brick selector)",keyPoints:"Sub-brick selectors allow flexible volume selection: [0..5] for first 6, [0..$-3] to skip last 3.",typicalUse:"Combining runs, removing initial steady-state volumes.",inputExtensions:{input:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],glueto:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"]},outputExtensions:{concatenated:["+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"]},docUrl:"https://afni.nimh.nih.gov/pub/dist/doc/program_help/3dTcat.html"},"@auto_tlrc":{cwlPath:"cwl/afni/auto_tlrc.cwl",enumHints:{xform:["affine_general","shift_rotate_scale"]},fullName:"AFNI Automated Talairach Transformation (@auto_tlrc)",function:"Automated Talairach transformation using affine registration to a template atlas.",modality:"T1-weighted 3D NIfTI/AFNI volume.",keyParameters:"-base (template), -input (anatomical), -no_ss (skip skull strip)",keyPoints:"Legacy tool for Talairach normalization. For modern analyses, prefer @SSwarper or 3dQwarp.",typicalUse:"Legacy Talairach normalization.",inputExtensions:{input:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],base:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],init_xform:[".1D",".txt"],apar:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"]},outputExtensions:{tlrc_anat:["+tlrc.HEAD","+tlrc.BRIK",".nii",".nii.gz"],transform:[".Xat.1D"]},docUrl:"https://afni.nimh.nih.gov/pub/dist/doc/program_help/@auto_tlrc.html"},"@SSwarper":{cwlPath:"cwl/afni/SSwarper.cwl",fullName:"AFNI Skull Strip and Nonlinear Warp (@SSwarper)",function:"Combined skull stripping and non-linear warping to template in a single optimized pipeline.",modality:"T1-weighted 3D NIfTI volume plus reference template.",keyParameters:"-input (T1 image), -base (template), -subid (subject ID), -odir (output dir)",keyPoints:"Preferred over separate skull-strip + registration. Output compatible with afni_proc.py.",typicalUse:"Modern anatomical preprocessing for afni_proc.py pipelines.",inputExtensions:{input:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],base:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],mask_ss:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"]},outputExtensions:{skull_stripped:[".nii",".nii.gz"],warped:["+tlrc.HEAD","+tlrc.BRIK",".nii",".nii.gz"],warp:["+tlrc.HEAD","+tlrc.BRIK",".nii",".nii.gz"],affine:[".aff12.1D"]},docUrl:"https://afni.nimh.nih.gov/pub/dist/doc/program_help/@SSwarper.html"},align_epi_anat:{cwlPath:"cwl/afni/align_epi_anat.cwl",fullName:"AFNI align_epi_anat  EPI-to-Anatomy Alignment",function:"Aligns EPI functional images to anatomical images with optional distortion correction using local Pearson correlation.",modality:"EPI volume (3D NIfTI) plus T1-weighted anatomical.",keyParameters:"-epi (EPI dataset), -anat (anatomical), -epi_base (EPI reference volume), -cost (cost function, default lpc)",keyPoints:"lpc cost function designed for EPI-to-T1 alignment. Central tool in afni_proc.py.",typicalUse:"Core EPI-to-structural alignment in functional preprocessing.",inputExtensions:{epi:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],anat:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"]},outputExtensions:{aligned_anat:["+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],aligned_epi:["+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],transform_matrix:[".aff12.1D"],volreg_output:["+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"]},docUrl:"https://afni.nimh.nih.gov/pub/dist/doc/program_help/align_epi_anat.py.html"},"3dDeconvolve":{cwlPath:"cwl/afni/3dDeconvolve.cwl",fullName:"AFNI 3D Deconvolve (GLM Analysis)",function:"Multiple linear regression analysis for fMRI with flexible hemodynamic response function models.",modality:"4D fMRI NIfTI/AFNI time series plus stimulus timing files.",keyParameters:"-input (4D data), -polort (polynomial detrending order), -num_stimts (number of regressors), -stim_times (timing files with HRF model), -gltsym (contrasts)",keyPoints:"Supports many HRF models (GAM, BLOCK, dmBLOCK, TENT, CSPLIN). Use -x1D_stop to generate design matrix only.",typicalUse:"First-level GLM analysis with flexible HRF models.",inputExtensions:{input:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],stim_times:[".1D",".txt"],stim_file:[".1D",".txt"],ortvec:[".1D",".txt"],mask:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],censor:[".1D",".txt"]},outputExtensions:{stats:["+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],design_matrix:[".1D"],xmat:[".xmat.1D"],fitted:["+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],residuals:["+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"]},docUrl:"https://afni.nimh.nih.gov/pub/dist/doc/program_help/3dDeconvolve.html"},"3dREMLfit":{cwlPath:"cwl/afni/3dREMLfit.cwl",fullName:"AFNI 3D REML Fit (Improved GLM)",function:"GLM with ARMA(1,1) temporal autocorrelation correction using restricted maximum likelihood estimation.",modality:"4D fMRI NIfTI/AFNI time series plus design matrix from 3dDeconvolve.",keyParameters:"-matrix (design matrix from 3dDeconvolve -x1D), -input (4D data), -Rbuck (output stats), -Rvar (output variance)",keyPoints:"More accurate statistics than 3dDeconvolve OLS. Run after 3dDeconvolve for improved inference.",typicalUse:"More accurate first-level statistics than 3dDeconvolve OLS.",inputExtensions:{input:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],matrix:[".1D",".txt"],mask:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],STATmask:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],ABfile:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],addbase:[".1D",".txt"],slibase:[".1D",".txt"],dsort:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"]},outputExtensions:{stats:["+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],betas:["+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK",".nii",".nii.gz"],variance:["+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK",".nii",".nii.gz"],fitted:["+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK",".nii",".nii.gz"],residuals:["+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK",".nii",".nii.gz"]},docUrl:"https://afni.nimh.nih.gov/pub/dist/doc/program_help/3dREMLfit.html"},"3dttest++":{cwlPath:"cwl/afni/3dttest++.cwl",fullName:"AFNI 3D T-Test (3dttest++)",function:"Two-sample t-test with support for covariates, paired tests, and cluster-level inference.",modality:"Subject-level 3D NIfTI/AFNI volumes.",keyParameters:"-setA/-setB (group datasets), -prefix (output), -covariates (covariate file), -paired (paired test), -Clustsim (cluster simulation)",keyPoints:"Use -Clustsim for built-in cluster-level correction. -covariates allows continuous covariates.",typicalUse:"Group comparisons with covariate control.",inputExtensions:{setA:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],setB:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],covariates:[".1D",".txt"],mask:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"]},outputExtensions:{stats:["+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],residuals:["+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK",".nii",".nii.gz"]},docUrl:"https://afni.nimh.nih.gov/pub/dist/doc/program_help/3dttest++.html"},"3dANOVA":{cwlPath:"cwl/afni/3dANOVA.cwl",fullName:"AFNI 3D One-Way ANOVA",function:"Voxelwise fixed-effects one-way analysis of variance.",modality:"Multiple 3D NIfTI/AFNI volumes organized by factor level.",keyParameters:"-levels (number of levels), -dset (level dataset), -ftr (F-test output), -mean (level means output)",keyPoints:"Fixed-effects only. For random/mixed effects, use 3dMVM or 3dLME instead.",typicalUse:"Single-factor group analysis.",inputExtensions:{dset:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],mask:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"]},outputExtensions:{stats:["+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],f_stat:["+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"]},docUrl:"https://afni.nimh.nih.gov/pub/dist/doc/program_help/3dANOVA.html"},"3dANOVA2":{cwlPath:"cwl/afni/3dANOVA2.cwl",fullName:"AFNI 3D Two-Way ANOVA",function:"Voxelwise fixed-effects two-way analysis of variance with main effects and interaction.",modality:"Multiple 3D NIfTI/AFNI volumes organized by two factors.",keyParameters:"-type (1-5, model type), -alevels/-blevels (factor levels), -dset (datasets), -fa/-fb/-fab (F-tests)",keyPoints:"Type determines fixed/random effects per factor. Types 1-3 for within-subject designs.",typicalUse:"Two-factor factorial designs.",inputExtensions:{dset:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],mask:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"]},outputExtensions:{stats:["+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"]},docUrl:"https://afni.nimh.nih.gov/pub/dist/doc/program_help/3dANOVA2.html"},"3dANOVA3":{cwlPath:"cwl/afni/3dANOVA3.cwl",fullName:"AFNI 3D Three-Way ANOVA",function:"Voxelwise fixed-effects three-way analysis of variance.",modality:"Multiple 3D NIfTI/AFNI volumes organized by three factors.",keyParameters:"-type (1-5), -alevels/-blevels/-clevels, -dset, -fa/-fb/-fc/-fab/-fac/-fbc/-fabc (F-tests)",keyPoints:"Extension of 3dANOVA2 to three factors. Consider 3dMVM for more flexible modeling.",typicalUse:"Three-factor factorial designs.",inputExtensions:{dset:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],mask:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"]},outputExtensions:{stats:["+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"]},docUrl:"https://afni.nimh.nih.gov/pub/dist/doc/program_help/3dANOVA3.html"},"3dClustSim":{cwlPath:"cwl/afni/3dClustSim.cwl",fullName:"AFNI 3D Cluster Size Simulation (3dClustSim)",function:"Simulates null distribution of cluster sizes for determining cluster-extent thresholds that control family-wise error rate.",modality:"Brain mask (3D NIfTI/AFNI) plus smoothness estimates from 3dFWHMx.",keyParameters:"-mask (brain mask), -acf (ACF parameters from 3dFWHMx), -athr (per-voxel alpha), -pthr (per-voxel p thresholds)",keyPoints:"Use ACF-based smoothness (not FWHM) from 3dFWHMx on residuals. Updated in 2016 for non-Gaussian assumptions.",typicalUse:"Determining cluster size thresholds for multiple comparison correction.",inputExtensions:{mask:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],inset:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"]},outputExtensions:{clustsim_1D:[".1D"],clustsim_niml:[".niml"]},docUrl:"https://afni.nimh.nih.gov/pub/dist/doc/program_help/3dClustSim.html"},"3dFWHMx":{cwlPath:"cwl/afni/3dFWHMx.cwl",fullName:"AFNI 3D Smoothness Estimation (3dFWHMx)",function:"Estimates spatial smoothness of data using the autocorrelation function (ACF) model.",modality:"Residual 4D NIfTI/AFNI from GLM analysis plus brain mask.",keyParameters:"-input (residuals), -mask (brain mask), -acf (output ACF parameters), -detrend (detrend order)",keyPoints:"Run on residuals (not original data). ACF model accounts for non-Gaussian spatial structure. Output feeds into 3dClustSim.",typicalUse:"Getting smoothness estimates for 3dClustSim.",inputExtensions:{input:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],mask:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"]},outputExtensions:{fwhm_output:[".1D"],acf_output:[".1D"],detrended:["+orig.HEAD","+orig.BRIK",".nii",".nii.gz"]},docUrl:"https://afni.nimh.nih.gov/pub/dist/doc/program_help/3dFWHMx.html"},"3dMEMA":{cwlPath:"cwl/afni/3dMEMA.cwl",fullName:"AFNI 3D Mixed Effects Meta Analysis (3dMEMA)",function:"Mixed effects meta-analysis for group studies that properly accounts for within and between-subject variance.",modality:"Subject-level beta and t-statistic volumes (3D NIfTI/AFNI).",keyParameters:"-set (group name and subject beta+tstat pairs), -groups (group names), -covariates (covariate file), -prefix (output)",keyPoints:"Uses both beta and t-stat from each subject. Better for unequal within-subject variance. Requires R.",typicalUse:"Group analysis with proper mixed effects modeling.",inputExtensions:{set:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],mask:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],covariates:[".1D",".txt"]},outputExtensions:{stats:["+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"]},docUrl:"https://afni.nimh.nih.gov/pub/dist/doc/program_help/3dMEMA.html"},"3dMVM":{cwlPath:"cwl/afni/3dMVM.cwl",fullName:"AFNI 3D MultiVariate Modeling (3dMVM)",function:"Multivariate modeling framework supporting ANOVA/ANCOVA designs with between and within-subject factors.",modality:"Subject-level 3D NIfTI/AFNI volumes with data table specifying factors.",keyParameters:"-dataTable (structured input table), -bsVars (between-subject variables), -wsVars (within-subject variables), -qVars (quantitative variables)",keyPoints:"Most flexible group analysis tool in AFNI. Handles complex repeated measures designs. Requires R.",typicalUse:"Complex repeated measures and mixed designs.",inputExtensions:{table:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],mask:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"]},outputExtensions:{stats:["+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"]},docUrl:"https://afni.nimh.nih.gov/pub/dist/doc/program_help/3dMVM.html"},"3dLME":{cwlPath:"cwl/afni/3dLME.cwl",fullName:"AFNI 3D Linear Mixed Effects (3dLME)",function:"Linear mixed effects modeling using R lme4 package for designs with random effects.",modality:"Subject-level 3D NIfTI/AFNI volumes with data table.",keyParameters:"-dataTable (input table), -model (model formula), -ranEff (random effects specification), -qVars (quantitative variables)",keyPoints:"Best for longitudinal data and nested designs. Uses R lme4 syntax. Handles missing data naturally.",typicalUse:"Longitudinal data, nested designs with random effects.",inputExtensions:{table:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],mask:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"]},outputExtensions:{stats:["+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],residuals:["+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],random_effects:["+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"]},docUrl:"https://afni.nimh.nih.gov/pub/dist/doc/program_help/3dLME.html"},"3dLMEr":{cwlPath:"cwl/afni/3dLMEr.cwl",fullName:"AFNI 3D Linear Mixed Effects with R (3dLMEr)",function:"Linear mixed effects with direct R formula syntax integration for flexible model specification.",modality:"Subject-level 3D NIfTI/AFNI volumes with data table.",keyParameters:"-dataTable (input table), -model (R lmer formula), -qVars (quantitative variables), -gltCode (contrast specification)",keyPoints:"More flexible than 3dLME. Uses lmerTest for degrees of freedom. Accepts full R formula syntax.",typicalUse:"Flexible mixed effects with R formula syntax.",inputExtensions:{table:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],mask:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"]},outputExtensions:{stats:["+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],residuals:["+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],random_effects:["+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"]},docUrl:"https://afni.nimh.nih.gov/pub/dist/doc/program_help/3dLMEr.html"},"3dNetCorr":{cwlPath:"cwl/afni/3dNetCorr.cwl",fullName:"AFNI 3D Network Correlation Matrix (3dNetCorr)",function:"Computes pairwise correlation matrices between ROI time series extracted from a parcellation atlas.",modality:"4D fMRI NIfTI/AFNI time series plus integer-labeled parcellation volume.",keyParameters:"-inset (4D time series), -in_rois (parcellation), -prefix (output), -fish_z (Fisher z-transform), -ts_out (output time series)",keyPoints:"Outputs correlation matrix as text file. Use -fish_z for Fisher z-transformed values.",typicalUse:"Creating functional connectivity matrices from parcellations.",inputExtensions:{inset:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],in_rois:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],mask:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],weight_ts:[".1D",".txt"],weight_corr:[".1D",".txt"]},outputExtensions:{correlation_matrix:[".netcc"],time_series:[".netts"],wb_corr_maps:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK"]},docUrl:"https://afni.nimh.nih.gov/pub/dist/doc/program_help/3dNetCorr.html"},"3dTcorr1D":{cwlPath:"cwl/afni/3dTcorr1D.cwl",fullName:"AFNI 3D Seed-Based Correlation (3dTcorr1D)",function:"Computes voxelwise correlation between a 4D dataset and one or more 1D seed time series.",modality:"4D fMRI NIfTI/AFNI time series plus 1D seed time series file.",keyParameters:"-prefix (output), <4D_dataset> <1D_seed_timeseries>",keyPoints:"Simple seed-based correlation. Extract seed time series first (e.g., with 3dmaskave).",typicalUse:"Seed-based functional connectivity analysis.",inputExtensions:{xset:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],y1D:[".1D",".txt"],mask:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"]},outputExtensions:{correlation:["+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"]},docUrl:"https://afni.nimh.nih.gov/pub/dist/doc/program_help/3dTcorr1D.html"},"3dTcorrMap":{cwlPath:"cwl/afni/3dTcorrMap.cwl",fullName:"AFNI 3D Whole-Brain Correlation Map (3dTcorrMap)",function:"Computes various whole-brain voxelwise correlation metrics including average correlation and global connectivity.",modality:"4D fMRI NIfTI/AFNI time series plus brain mask.",keyParameters:"-input (4D data), -mask (brain mask), -Mean (mean correlation map), -Hist (histogram outputs)",keyPoints:"Computes every-voxel-to-every-voxel correlations. Memory intensive.",typicalUse:"Global connectivity metrics, whole-brain correlation exploration.",inputExtensions:{input:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],seed:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],mask:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],ort:[".1D",".txt"]},outputExtensions:{mean_corr:["+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],zmean_corr:["+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],corrmap:["+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"]},docUrl:"https://afni.nimh.nih.gov/pub/dist/doc/program_help/3dTcorrMap.html"},"3dRSFC":{cwlPath:"cwl/afni/3dRSFC.cwl",fullName:"AFNI 3D Resting State Functional Connectivity (3dRSFC)",function:"Computes resting-state frequency-domain metrics including ALFF, fALFF, mALFF, and RSFA from bandpass-filtered data.",modality:"4D resting-state fMRI NIfTI/AFNI time series plus brain mask.",keyParameters:"<fbot> <ftop> (frequency range), -prefix (output), -input (4D data), -mask (brain mask)",keyPoints:"Computes ALFF (amplitude of low-frequency fluctuations), fALFF (fractional ALFF), and RSFA.",typicalUse:"Amplitude of low-frequency fluctuations analysis in resting-state fMRI.",inputExtensions:{input:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],ort:[".1D",".txt"],dsort:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],mask:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"]},outputExtensions:{filtered:["+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],alff:["+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],falff:["+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],rsfa:["+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"]},docUrl:"https://afni.nimh.nih.gov/pub/dist/doc/program_help/3dRSFC.html"},"3dROIstats":{cwlPath:"cwl/afni/3dROIstats.cwl",fullName:"AFNI 3D ROI Statistics (3dROIstats)",function:"Extracts statistical summary measures from data within defined ROI masks.",modality:"3D or 4D NIfTI/AFNI volume plus ROI mask with integer labels.",keyParameters:"-mask (ROI mask), -nzmean (mean of non-zero voxels), -nzvoxels (count non-zero voxels), -minmax (min and max)",keyPoints:"Can handle multi-label ROI masks. Outputs one row per volume, one column per ROI.",typicalUse:"Extracting mean values from defined regions of interest.",inputExtensions:{input:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],mask:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],roisel:[".1D",".txt"]},outputExtensions:{stats:[".txt"]},docUrl:"https://afni.nimh.nih.gov/pub/dist/doc/program_help/3dROIstats.html"},"3dmaskave":{cwlPath:"cwl/afni/3dmaskave.cwl",fullName:"AFNI 3D Mask Average (3dmaskave)",function:"Extracts and outputs the average time series from voxels within a mask region.",modality:"4D fMRI NIfTI/AFNI time series plus binary mask.",keyParameters:"-mask (mask dataset), -quiet (output values only), -mrange (min max value range in mask)",keyPoints:"Simple and fast ROI time series extraction. Output is one value per timepoint to stdout.",typicalUse:"Simple ROI time series extraction for connectivity analysis.",inputExtensions:{input:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],mask:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"]},outputExtensions:{average:[".1D"]},docUrl:"https://afni.nimh.nih.gov/pub/dist/doc/program_help/3dmaskave.html"},"3dUndump":{cwlPath:"cwl/afni/3dUndump.cwl",enumHints:{datum:["byte","short","float"]},fullName:"AFNI 3D Undump (Coordinate to Volume)",function:"Creates a 3D dataset from a text file containing voxel coordinates and values.",modality:"Text coordinate file plus master dataset for grid definition.",keyParameters:"-prefix (output), -master (template grid), -xyz (coordinates are in mm), -srad (sphere radius in mm)",keyPoints:"Use -srad to create spherical ROIs at each coordinate. Master dataset defines output grid.",typicalUse:"Creating spherical ROIs from peak coordinates.",inputExtensions:{input:[".1D",".txt"],master:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],mask:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],ROImask:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"]},outputExtensions:{dataset:["+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"]},docUrl:"https://afni.nimh.nih.gov/pub/dist/doc/program_help/3dUndump.html"},whereami:{cwlPath:"cwl/afni/whereami.cwl",fullName:"AFNI Atlas Location Query (whereami)",function:"Reports anatomical atlas labels for given coordinates or identifies regions in multiple atlases simultaneously.",modality:"MNI or Talairach coordinates, or labeled dataset.",keyParameters:"-coord_file (coordinate file), -atlas (atlas name), -lpi/-rai (coordinate system)",keyPoints:"Queries multiple atlases at once by default. Coordinates must match atlas space.",typicalUse:"Identifying anatomical locations of activation peaks.",inputExtensions:{coord_file:[".1D",".txt"],dset:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],bmask:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],omask:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"]},outputExtensions:{output:[".txt"],mask_output:["+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK",".nii",".nii.gz"]},docUrl:"https://afni.nimh.nih.gov/pub/dist/doc/program_help/whereami.html"},"3dresample":{cwlPath:"cwl/afni/3dresample.cwl",enumHints:{rmode:["NN","Li","Cu","Bk"]},fullName:"AFNI 3D Resample (3dresample)",function:"Resamples a dataset to match the grid of another dataset or to a specified voxel size.",modality:"3D or 4D NIfTI/AFNI volume.",keyParameters:"-master (template grid), -prefix (output), -dxyz (voxel size), -rmode (interpolation: NN, Li, Cu)",keyPoints:"Use -rmode NN for label/mask images, Li or Cu for continuous data.",typicalUse:"Matching resolution between datasets for analysis.",inputExtensions:{input:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],master:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"]},outputExtensions:{resampled:["+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"]},docUrl:"https://afni.nimh.nih.gov/pub/dist/doc/program_help/3dresample.html"},"3dfractionize":{cwlPath:"cwl/afni/3dfractionize.cwl",fullName:"AFNI 3D Fractionize (ROI Resampling)",function:"Resamples ROI/atlas datasets using fractional occupancy to maintain region representation at different resolutions.",modality:"ROI/atlas volume (3D NIfTI/AFNI) plus template for target grid.",keyParameters:"-template (target grid), -input (ROI dataset), -prefix (output), -clip (fraction threshold, default 0.5)",keyPoints:"Better than nearest-neighbor for resampling parcellations. Preserves small ROIs better.",typicalUse:"Resampling parcellations to functional resolution.",inputExtensions:{template:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],input:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],warp:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"]},outputExtensions:{fractionized:["+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"]},docUrl:"https://afni.nimh.nih.gov/pub/dist/doc/program_help/3dfractionize.html"},"3dcalc":{cwlPath:"cwl/afni/3dcalc.cwl",enumHints:{datum:["byte","short","float"]},fullName:"AFNI 3D Voxelwise Calculator (3dcalc)",function:"Voxelwise mathematical calculator supporting extensive expression syntax for operations on one or more datasets.",modality:"3D or 4D NIfTI/AFNI volume(s).",keyParameters:"-a/-b/-c (input datasets), -expr (mathematical expression), -prefix (output), -datum (output data type)",keyPoints:"Extremely flexible expression syntax. Supports conditionals, trigonometric, and logical operations. Up to 26 inputs (a-z).",typicalUse:"Mathematical operations, masking, thresholding, combining datasets.",inputExtensions:{a:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],b:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],c:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],d:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"]},outputExtensions:{result:["+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"]},docUrl:"https://afni.nimh.nih.gov/pub/dist/doc/program_help/3dcalc.html"},"3dTstat":{cwlPath:"cwl/afni/3dTstat.cwl",fullName:"AFNI 3D Temporal Statistics (3dTstat)",function:"Computes voxelwise temporal statistics (mean, stdev, median, etc.) across a 4D time series.",modality:"4D NIfTI/AFNI time series.",keyParameters:"-prefix (output), -mean/-stdev/-median/-max/-min (statistic type), -mask (optional mask)",keyPoints:"Default computes mean. Can compute multiple statistics in one run.",typicalUse:"Creating mean functional images, variance maps, temporal SNR.",inputExtensions:{input:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],mask:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"]},outputExtensions:{stats:["+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"]},docUrl:"https://afni.nimh.nih.gov/pub/dist/doc/program_help/3dTstat.html"},"3dinfo":{cwlPath:"cwl/afni/3dinfo.cwl",fullName:"AFNI 3D Dataset Information (3dinfo)",function:"Displays header information and metadata from AFNI/NIfTI datasets.",modality:"Any NIfTI or AFNI format dataset.",keyParameters:"-n4 (dimensions), -tr (TR), -orient (orientation), -prefix (prefix only), -space (coordinate space)",keyPoints:"Essential for scripting and QC. Use specific flags for machine-readable output.",typicalUse:"Quality control, scripting decisions based on data properties.",inputExtensions:{input:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"]},outputExtensions:{info:[".txt"]},docUrl:"https://afni.nimh.nih.gov/pub/dist/doc/program_help/3dinfo.html"},"3dcopy":{cwlPath:"cwl/afni/3dcopy.cwl",fullName:"AFNI 3D Dataset Copy (3dcopy)",function:"Copies a dataset with optional format conversion between AFNI and NIfTI formats.",modality:"Any NIfTI or AFNI format dataset.",keyParameters:"<input> <output> (format determined by output extension)",keyPoints:"Output format determined by extension. Simple way to convert between formats.",typicalUse:"Format conversion between AFNI and NIfTI, making editable copies.",inputExtensions:{old_dataset:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"]},outputExtensions:{copied:["+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"]},docUrl:"https://afni.nimh.nih.gov/pub/dist/doc/program_help/3dcopy.html"},"3dZeropad":{cwlPath:"cwl/afni/3dZeropad.cwl",fullName:"AFNI 3D Zero Padding (3dZeropad)",function:"Adds zero-valued slices around dataset boundaries to extend the image matrix.",modality:"3D or 4D NIfTI/AFNI volume.",keyParameters:"-I/-S/-A/-P/-R/-L (add slices in each direction), -master (match grid of master dataset), -prefix (output)",keyPoints:"Use -master to match another dataset grid. Can also crop with negative values.",typicalUse:"Matching matrix sizes between datasets, preventing edge effects.",inputExtensions:{input:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],master:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"]},outputExtensions:{padded:["+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"]},docUrl:"https://afni.nimh.nih.gov/pub/dist/doc/program_help/3dZeropad.html"},"3dNwarpApply":{cwlPath:"cwl/afni/3dNwarpApply.cwl",enumHints:{interp:["NN","linear","cubic","quintic","wsinc5"]},fullName:"AFNI 3D Nonlinear Warp Apply",function:"Applies precomputed nonlinear warps (from 3dQwarp) to transform datasets.",modality:"3D or 4D NIfTI/AFNI volume plus warp dataset.",keyParameters:"-nwarp (warp dataset), -source (input), -master (reference grid), -prefix (output), -interp (interpolation method)",keyPoints:"Can concatenate multiple warps in -nwarp string. Use wsinc5 interpolation for best quality.",typicalUse:"Applying 3dQwarp transformations to functional or other data.",inputExtensions:{nwarp:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],source:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"]},outputExtensions:{warped:["+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"]},docUrl:"https://afni.nimh.nih.gov/pub/dist/doc/program_help/3dNwarpApply.html"},"3dNwarpCat":{cwlPath:"cwl/afni/3dNwarpCat.cwl",enumHints:{interp:["linear","quintic","wsinc5"]},fullName:"AFNI 3D Nonlinear Warp Concatenate",function:"Concatenates multiple nonlinear warps and affine matrices into a single combined warp.",modality:"Multiple warp datasets and/or affine matrix files.",keyParameters:"-prefix (output), -warp1/-warp2/... (warps to concatenate), -iwarp (use inverse of a warp)",keyPoints:"Reduces interpolation artifacts from multiple separate applications. Can invert individual warps in the chain.",typicalUse:"Combining transformations efficiently for one-step resampling.",inputExtensions:{warp1:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],warp2:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],warp3:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"],warp4:[".nii",".nii.gz","+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"]},outputExtensions:{concatenated_warp:["+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK"]},docUrl:"https://afni.nimh.nih.gov/pub/dist/doc/program_help/3dNwarpCat.html"},mri_convert:{cwlPath:"cwl/freesurfer/mri_convert.cwl",enumHints:{resample_type:["interpolate","weighted","nearest","sinc","cubic"]},fullName:"FreeSurfer MRI Format Conversion (mri_convert)",function:"Converts between neuroimaging file formats (DICOM, NIfTI, MGH/MGZ, ANALYZE, etc.) with optional resampling and conforming.",modality:"Any neuroimaging volume format.",keyParameters:"--conform (resample to 256 cubed at 1mm isotropic), --out_type (output format), -vs (voxel size)",keyPoints:"Use --conform to prepare T1 for FreeSurfer processing. Handles DICOM to NIfTI conversion. Can change voxel size and data type.",typicalUse:"Converting DICOM to NIfTI, conforming images to FreeSurfer standards.",inputExtensions:{input:[".mgz",".mgh",".nii",".nii.gz",".img",".hdr",".mnc"],reslice_like:[".mgz",".mgh",".nii",".nii.gz"],apply_transform:[".xfm",".m3z",".lta"],apply_inverse_transform:[".xfm",".m3z",".lta"]},outputExtensions:{converted:[".mgz",".mgh",".nii",".nii.gz"]},docUrl:"https://surfer.nmr.mgh.harvard.edu/fswiki/mri_convert"},mri_watershed:{cwlPath:"cwl/freesurfer/mri_watershed.cwl",fullName:"FreeSurfer MRI Watershed Skull Stripping",function:"Brain extraction using a hybrid watershed/surface deformation algorithm to find the brain-skull boundary.",modality:"T1-weighted 3D volume (typically MGZ format within FreeSurfer pipeline).",keyParameters:"-T1 (specify T1 volume), -atlas (use atlas for initial estimate), -h (preflooding height, default 25)",keyPoints:"Core component of recon-all. Adjust -h parameter if too much/too little brain removed. Usually part of autorecon1.",typicalUse:"Brain extraction within recon-all pipeline.",inputExtensions:{input:[".mgz",".mgh",".nii",".nii.gz"],brain_atlas:[".mgz",".mgh",".nii",".nii.gz",".gca"]},outputExtensions:{brain:[".mgz",".mgh",".nii",".nii.gz"]},docUrl:"https://surfer.nmr.mgh.harvard.edu/fswiki/mri_watershed"},mri_normalize:{cwlPath:"cwl/freesurfer/mri_normalize.cwl",fullName:"FreeSurfer MRI Intensity Normalization",function:"Normalizes T1 image intensities so that white matter has a target intensity value (default 110).",modality:"T1-weighted 3D volume (MGZ format, within FreeSurfer pipeline).",keyParameters:"-n (number of iterations), -b (bias field smoothing sigma), -aseg (use aseg for normalization regions)",keyPoints:"Part of recon-all autorecon1. Creates nu.mgz (non-uniformity corrected) and T1.mgz (intensity normalized).",typicalUse:"Preparing T1 for segmentation within FreeSurfer pipeline.",inputExtensions:{input:[".mgz",".mgh",".nii",".nii.gz"],mask:[".mgz",".mgh",".nii",".nii.gz"],aseg:[".mgz",".mgh",".nii",".nii.gz"],control_points:[".dat"],brain_mask:[".mgz",".mgh",".nii",".nii.gz"]},outputExtensions:{normalized:[".mgz",".mgh",".nii",".nii.gz"]},docUrl:"https://surfer.nmr.mgh.harvard.edu/fswiki/mri_normalize"},mri_segment:{cwlPath:"cwl/freesurfer/mri_segment.cwl",fullName:"FreeSurfer MRI White Matter Segmentation",function:"Segments white matter from normalized T1 image using intensity thresholding and morphological operations.",modality:"Intensity-normalized T1 volume (T1.mgz from mri_normalize).",keyParameters:"-thicken (thicken WM), -wlo/-whi (WM intensity range)",keyPoints:"Part of recon-all. Outputs wm.mgz used for surface reconstruction. Quality depends on good intensity normalization.",typicalUse:"White matter identification for surface reconstruction.",inputExtensions:{input:[".mgz",".mgh",".nii",".nii.gz"]},outputExtensions:{segmentation:[".mgz",".mgh",".nii",".nii.gz"]},docUrl:"https://surfer.nmr.mgh.harvard.edu/fswiki/mri_segment"},mris_inflate:{cwlPath:"cwl/freesurfer/mris_inflate.cwl",fullName:"FreeSurfer Surface Inflation",function:"Inflates folded cortical surface to a smooth shape while minimizing metric distortion for visualization.",modality:"FreeSurfer surface file (e.g., lh.smoothwm).",keyParameters:"-n (number of iterations), -dist (target distance)",keyPoints:"Creates inflated surface for visualizing buried cortex. Part of recon-all. Metric distortion encoded in sulc file.",typicalUse:"Creating inflated surfaces for visualization of cortical data.",inputExtensions:{input:[".white",".pial",".smoothwm",".orig",".inflated"]},outputExtensions:{inflated:[".inflated"],sulc_file:[".sulc"]},docUrl:"https://surfer.nmr.mgh.harvard.edu/fswiki/mris_inflate"},mris_sphere:{cwlPath:"cwl/freesurfer/mris_sphere.cwl",fullName:"FreeSurfer Surface to Sphere Mapping",function:"Maps the inflated cortical surface to a sphere for inter-subject spherical registration.",modality:"FreeSurfer inflated surface file.",keyParameters:"(minimal user-facing parameters; uses inflated surface)",keyPoints:"Prerequisite for cortical atlas registration. Part of recon-all. Spherical mapping enables vertex-wise inter-subject comparisons.",typicalUse:"Preparing cortical surface for spherical registration and atlas labeling.",inputExtensions:{input:[".inflated",".white",".pial",".smoothwm",".orig"],in_smoothwm:[".smoothwm",".white",".pial",".orig"]},outputExtensions:{sphere:[".sphere"]},docUrl:"https://surfer.nmr.mgh.harvard.edu/fswiki/mris_sphere"},mri_aparc2aseg:{cwlPath:"cwl/freesurfer/mri_aparc2aseg.cwl",fullName:"FreeSurfer Cortical Parcellation to Volume",function:"Combines surface-based cortical parcellation (aparc) with volumetric subcortical segmentation (aseg) into a single volume.",modality:"FreeSurfer subject directory (requires completed recon-all).",keyParameters:"--s (subject), --annot (annotation name, default aparc), --o (output volume)",keyPoints:"Creates aparc+aseg.mgz combining ~80 cortical and subcortical regions. Different parcellation schemes available.",typicalUse:"Creating volumetric parcellation from surface labels for ROI analysis.",inputExtensions:{volmask:[".mgz",".mgh",".nii",".nii.gz"],ribbon:[".mgz",".mgh",".nii",".nii.gz"]},outputExtensions:{aparc_aseg:[".mgz",".nii.gz"]},docUrl:"https://surfer.nmr.mgh.harvard.edu/fswiki/mri_aparc2aseg"},mri_annotation2label:{cwlPath:"cwl/freesurfer/mri_annotation2label.cwl",fullName:"FreeSurfer Annotation to Individual Labels",function:"Extracts individual region labels from a surface annotation file into separate label files.",modality:"FreeSurfer annotation file (e.g., lh.aparc.annot).",keyParameters:"--subject (subject), --hemi (hemisphere), --annotation (annotation name), --outdir (output directory)",keyPoints:"Creates one .label file per region. Label files contain vertex indices and coordinates.",typicalUse:"Extracting individual ROIs from parcellation for targeted analysis.",inputExtensions:{ctab:[".txt",".ctab"]},outputExtensions:{border_file:[".border"]},docUrl:"https://surfer.nmr.mgh.harvard.edu/fswiki/mri_annotation2label"},mris_ca_label:{cwlPath:"cwl/freesurfer/mris_ca_label.cwl",fullName:"FreeSurfer Cortical Atlas Labeling",function:"Applies a cortical parcellation atlas to an individual subject using trained classifier on spherical surface.",modality:"FreeSurfer subject directory with sphere.reg (requires completed recon-all).",keyParameters:"<subject> <hemisphere> <sphere.reg> <atlas.gcs> <output_annotation>",keyPoints:"Uses Gaussian classifier atlas trained on manual labels. Part of recon-all. Different atlases available.",typicalUse:"Applying cortical parcellation atlas to individual subjects.",inputExtensions:{canonsurf:[".sphere.reg",".sphere"],classifier:[".gcs"],aseg:[".mgz",".mgh",".nii",".nii.gz"],l:[".label"],t:[".txt",".ctab"]},outputExtensions:{annotation:[".annot"]},docUrl:"https://surfer.nmr.mgh.harvard.edu/fswiki/mris_ca_label"},mri_label2vol:{cwlPath:"cwl/freesurfer/mri_label2vol.cwl",fullName:"FreeSurfer Label to Volume Conversion",function:"Converts surface-based labels to volumetric ROIs using a registration matrix.",modality:"FreeSurfer label file plus template volume and registration.",keyParameters:"--label (input label), --temp (template volume), --reg (registration file), --o (output volume), --proj (projection parameters)",keyPoints:"Requires registration between surface and target volume space. Use --proj to control projection depth.",typicalUse:"Creating volumetric ROIs from FreeSurfer surface parcellations.",inputExtensions:{label:[".label"],annot:[".annot"],seg:[".mgz",".mgh",".nii",".nii.gz"],temp:[".mgz",".mgh",".nii",".nii.gz"],reg:[".dat",".lta"]},outputExtensions:{label_volume:[".mgz",".mgh",".nii",".nii.gz"],hits_volume:[".mgz",".mgh",".nii",".nii.gz"]},docUrl:"https://surfer.nmr.mgh.harvard.edu/fswiki/mri_label2vol"},bbregister:{cwlPath:"cwl/freesurfer/bbregister.cwl",enumHints:{contrast_type:["t1","t2","bold","dti"],init:["coreg","rr","spm","fsl","header","best"],dof:["6","9","12"]},fullName:"FreeSurfer Boundary-Based Registration (bbregister)",function:"High-quality registration of functional EPI images to FreeSurfer anatomy using white matter boundary contrast.",modality:"3D EPI volume (mean/example func) plus FreeSurfer subject directory.",keyParameters:"--s (subject), --mov (moving/source image), --reg (output registration), --init-fsl (initialization method), --bold (contrast type)",keyPoints:"Superior to volume-based registration for EPI-to-T1. Requires completed recon-all. --init-fsl recommended.",typicalUse:"High-quality EPI to T1 registration using cortical surfaces.",inputExtensions:{source_file:[".mgz",".mgh",".nii",".nii.gz"],init_reg:[".dat",".lta"],int:[".mgz",".mgh",".nii",".nii.gz"]},outputExtensions:{out_reg:[".dat",".lta"],out_fsl_mat:[".mat"],mincost:[".mincost"]},docUrl:"https://surfer.nmr.mgh.harvard.edu/fswiki/bbregister"},mri_vol2surf:{cwlPath:"cwl/freesurfer/mri_vol2surf.cwl",enumHints:{interp:["nearest","trilinear"]},fullName:"FreeSurfer Volume to Surface Projection",function:"Projects volumetric data (fMRI, PET, etc.) onto the cortical surface using specified sampling method.",modality:"3D or 4D NIfTI/MGZ volume plus FreeSurfer subject registration.",keyParameters:"--mov (input volume), --reg (registration), --hemi (hemisphere), --projfrac (fraction of cortical thickness), --o (output)",keyPoints:"Use --projfrac 0.5 to sample at mid-cortical depth. Can average across depths with --projfrac-avg.",typicalUse:"Mapping functional or PET data to cortical surface for surface-based analysis.",inputExtensions:{source_file:[".mgz",".mgh",".nii",".nii.gz"],reg_file:[".dat",".lta"],surf_file:[".white",".pial",".inflated",".smoothwm",".orig"],mask_label:[".label"]},outputExtensions:{out_file:[".mgh",".mgz",".nii",".nii.gz",".w"]},docUrl:"https://surfer.nmr.mgh.harvard.edu/fswiki/mri_vol2surf"},mri_surf2vol:{cwlPath:"cwl/freesurfer/mri_surf2vol.cwl",fullName:"FreeSurfer Surface to Volume Projection",function:"Projects surface-based data back to volumetric space using registration and template volume.",modality:"FreeSurfer surface overlay file plus template volume and registration.",keyParameters:"--surfval (surface data), --reg (registration), --template (output grid template), --hemi (hemisphere), --o (output volume)",keyPoints:"Inverse of mri_vol2surf. Template defines output grid dimensions.",typicalUse:"Converting surface-based results back to volume space for reporting.",inputExtensions:{source_file:[".mgh",".mgz",".nii",".nii.gz",".w",".curv",".sulc",".thickness",".area"],reg:[".dat",".lta"],template:[".mgz",".mgh",".nii",".nii.gz"],ribbon:[".mgz",".mgh",".nii",".nii.gz"],merge:[".mgz",".mgh",".nii",".nii.gz"]},outputExtensions:{out_file:[".mgz",".mgh",".nii",".nii.gz"]},docUrl:"https://surfer.nmr.mgh.harvard.edu/fswiki/mri_surf2vol"},mris_preproc:{cwlPath:"cwl/freesurfer/mris_preproc.cwl",fullName:"FreeSurfer Surface Data Preprocessing for Group Analysis",function:"Concatenates surface data across subjects onto a common template surface for group-level analysis.",modality:"Per-subject surface overlays (thickness, area, etc.) from FreeSurfer processing.",keyParameters:"--s (subject list), --meas (measure: thickness, area, volume), --target (target subject/template), --hemi (hemisphere), --o (output)",keyPoints:"Resamples all subjects to common surface (fsaverage). Can smooth on surface with --fwhm.",typicalUse:"Preparing surface data for group statistical analysis.",inputExtensions:{fsgd:[".fsgd"],f:[".txt"],mask:[".label"]},outputExtensions:{out_file:[".mgh",".mgz",".nii",".nii.gz"]},docUrl:"https://surfer.nmr.mgh.harvard.edu/fswiki/mris_preproc"},mri_glmfit:{cwlPath:"cwl/freesurfer/mri_glmfit.cwl",fullName:"FreeSurfer General Linear Model (mri_glmfit)",function:"Fits a general linear model on surface or volume data for group-level statistical analysis.",modality:"Concatenated surface data from mris_preproc or stacked volume data.",keyParameters:"--y (input data), --fsgd (FreeSurfer group descriptor), --C (contrast file), --surf (surface subject), --glmdir (output directory)",keyPoints:"Uses FSGD file for design specification. Supports DODS and DOSS design types. Can run on surface or volume data.",typicalUse:"Surface-based or volume-based group statistical analysis.",inputExtensions:{y:[".mgh",".mgz",".nii",".nii.gz"],fsgd:[".fsgd"],design:[".mat",".txt"],C:[".mat",".txt",".mtx"],mask:[".mgh",".mgz",".nii",".nii.gz",".label"],wls:[".mgh",".mgz",".nii",".nii.gz"]},outputExtensions:{},docUrl:"https://surfer.nmr.mgh.harvard.edu/fswiki/mri_glmfit"},mris_anatomical_stats:{cwlPath:"cwl/freesurfer/mris_anatomical_stats.cwl",fullName:"FreeSurfer Surface Anatomical Statistics",function:"Computes surface-based morphometric measures (thickness, area, volume, curvature) for each region in a parcellation.",modality:"FreeSurfer subject directory with completed recon-all.",keyParameters:"-a (annotation file), -f (output stats file), -b (output table format)",keyPoints:"Outputs per-region cortical thickness, surface area, gray matter volume, and curvature.",typicalUse:"Extracting regional cortical thickness, area, and volume measures.",inputExtensions:{annotation:[".annot"],label:[".label"],cortex:[".label"],ctab:[".txt",".ctab"]},outputExtensions:{stats_table:[".txt",".csv",".dat"],stats:[".stats"]},docUrl:"https://surfer.nmr.mgh.harvard.edu/fswiki/mris_anatomical_stats"},mri_segstats:{cwlPath:"cwl/freesurfer/mri_segstats.cwl",fullName:"FreeSurfer Segmentation Statistics",function:"Computes volume and intensity statistics for each region in a segmentation volume.",modality:"Segmentation volume (e.g., aseg.mgz) plus optional intensity volume.",keyParameters:"--seg (segmentation), --i (intensity volume), --ctab (color table), --sum (output summary file), --excludeid 0 (exclude background)",keyPoints:"Reports volume, mean intensity, and other statistics per region. Can use any segmentation volume.",typicalUse:"Extracting regional volumes and mean intensities per structure.",inputExtensions:{seg:[".mgz",".mgh",".nii",".nii.gz"],in:[".mgz",".mgh",".nii",".nii.gz"],ctab:[".txt",".ctab"],mask:[".mgz",".mgh",".nii",".nii.gz"],brainmask:[".mgz",".mgh",".nii",".nii.gz"],pv:[".mgz",".mgh",".nii",".nii.gz"]},outputExtensions:{summary:[".stats",".txt",".dat",".csv"],avgwf_file:[".txt",".dat"],avgwfvol_file:[".mgz",".mgh",".nii",".nii.gz"]},docUrl:"https://surfer.nmr.mgh.harvard.edu/fswiki/mri_segstats"},aparcstats2table:{cwlPath:"cwl/freesurfer/aparcstats2table.cwl",enumHints:{meas:["area","volume","thickness","thicknessstd","meancurv","gauscurv","foldind","curvind"],delimiter:["tab","comma","space","semicolon"]},fullName:"FreeSurfer Cortical Stats to Group Table",function:"Collects cortical parcellation statistics across multiple subjects into a single table for group analysis.",modality:"Multiple FreeSurfer subject directories with completed recon-all.",keyParameters:"--subjects (subject list), --hemi (hemisphere), --meas (measure: thickness, area, volume), --tablefile (output table)",keyPoints:"Creates one row per subject, one column per region. Output table ready for statistical software.",typicalUse:"Creating group spreadsheet of cortical morphometry for statistical analysis.",inputExtensions:{subjectsfile:[".txt"]},outputExtensions:{table:[".txt",".csv",".dat"]},docUrl:"https://surfer.nmr.mgh.harvard.edu/fswiki/aparcstats2table"},asegstats2table:{cwlPath:"cwl/freesurfer/asegstats2table.cwl",enumHints:{meas:["volume","mean"],delimiter:["tab","comma","space","semicolon"]},fullName:"FreeSurfer Subcortical Stats to Group Table",function:"Collects subcortical segmentation statistics across multiple subjects into a single table.",modality:"Multiple FreeSurfer subject directories with completed recon-all.",keyParameters:"--subjects (subject list), --meas (measure: volume, mean), --tablefile (output table), --stats (stats file name)",keyPoints:"Creates one row per subject with subcortical volumes. Default uses aseg.stats.",typicalUse:"Group analysis of subcortical volumes.",inputExtensions:{subjectsfile:[".txt"],segids:[".txt"]},outputExtensions:{table:[".txt",".csv",".dat"]},docUrl:"https://surfer.nmr.mgh.harvard.edu/fswiki/asegstats2table"},dmri_postreg:{cwlPath:"cwl/freesurfer/dmri_postreg.cwl",enumHints:{interp:["nearest","trilin","cubic"]},fullName:"FreeSurfer Diffusion Post-Registration Processing",function:"Post-registration processing for diffusion MRI data as part of the TRACULA tractography pipeline.",modality:"Registered diffusion MRI data within FreeSurfer/TRACULA directory structure.",keyParameters:"--s (subject), --reg (registration method: bbr or manual)",keyPoints:"Part of TRACULA pipeline. Handles diffusion-to-structural registration refinement. Usually called by trac-all.",typicalUse:"Part of TRACULA pipeline for automated tractography.",inputExtensions:{input:[".mgz",".mgh",".nii",".nii.gz"],reg:[".dat",".lta"],xfm:[".xfm",".lta",".dat"],ref:[".mgz",".mgh",".nii",".nii.gz"],mask:[".mgz",".mgh",".nii",".nii.gz"]},outputExtensions:{out_file:[".mgz",".mgh",".nii",".nii.gz"]},docUrl:"https://surfer.nmr.mgh.harvard.edu/fswiki/dmri_postreg"},N4BiasFieldCorrection:{cwlPath:"cwl/ants/N4BiasFieldCorrection.cwl",fullName:"ANTs N4 Bias Field Correction",function:"Advanced bias field (intensity inhomogeneity) correction using the N4 algorithm with iterative B-spline fitting.",modality:"3D NIfTI volume (any MRI contrast), optional brain mask.",keyParameters:"-d (dimension), -i (input), -o (output [,bias_field]), -x (mask), -s (shrink factor), -c (convergence)",keyPoints:"Gold standard for bias correction. Use mask to restrict correction to brain. -s 4 speeds up computation.",typicalUse:"Removing intensity inhomogeneity before segmentation or registration.",inputExtensions:{input_image:[".nii",".nii.gz"],mask_image:[".nii",".nii.gz"],weight_image:[".nii",".nii.gz"]},outputExtensions:{corrected_image:[".nii.gz"],bias_field:[".nii.gz"]},docUrl:"https://github.com/ANTsX/ANTs/wiki/Atropos-and-N4"},DenoiseImage:{cwlPath:"cwl/ants/DenoiseImage.cwl",enumHints:{noise_model:["Rician","Gaussian"]},fullName:"ANTs Non-Local Means Denoising",function:"Reduces noise in MRI images using an adaptive non-local means algorithm that preserves structural details.",modality:"3D NIfTI volume (any MRI contrast).",keyParameters:"-d (dimension), -i (input), -o (output [,noise_image]), -v (verbose)",keyPoints:"Preserves edges better than Gaussian smoothing. Can output estimated noise image. Apply before bias correction.",typicalUse:"Noise reduction while preserving structural edges.",inputExtensions:{input_image:[".nii",".nii.gz"],mask_image:[".nii",".nii.gz"]},outputExtensions:{denoised_image:[".nii.gz"],noise_image:[".nii.gz"]},docUrl:"https://github.com/ANTsX/ANTs/wiki/DenoiseImage"},ImageMath:{cwlPath:"cwl/ants/ImageMath.cwl",fullName:"ANTs Image Math Operations",function:"Versatile tool for image arithmetic, morphological operations, distance transforms, and various measurements.",modality:"3D NIfTI volume(s).",keyParameters:"<dimension> <output> <operation> <input1> [input2] [parameters]",keyPoints:"Operations include: m (multiply), + (add), ME/MD (erode/dilate), GetLargestComponent, FillHoles, Normalize.",typicalUse:"Mathematical operations, morphological operations, connected component analysis.",inputExtensions:{input_image:[".nii",".nii.gz"],second_input:[".nii",".nii.gz"]},outputExtensions:{output:[".nii",".nii.gz"]},docUrl:"https://github.com/ANTsX/ANTs/wiki/ImageMath"},ThresholdImage:{cwlPath:"cwl/ants/ThresholdImage.cwl",enumHints:{threshold_mode:["Otsu","Kmeans"]},fullName:"ANTs Image Thresholding",function:"Applies various thresholding methods to create binary masks, including Otsu and k-means adaptive thresholding.",modality:"3D NIfTI volume.",keyParameters:"<dimension> <input> <output> <lower> <upper> (binary) or Otsu <num_thresholds> (automatic)",keyPoints:"Otsu mode automatically finds optimal threshold. Binary mode uses explicit lower/upper bounds.",typicalUse:"Creating binary masks, Otsu-based adaptive thresholding.",inputExtensions:{input_image:[".nii",".nii.gz"],mask_image:[".nii",".nii.gz"]},outputExtensions:{thresholded:[".nii",".nii.gz"]},docUrl:"https://github.com/ANTsX/ANTs/wiki"},LabelGeometryMeasures:{cwlPath:"cwl/ants/LabelGeometryMeasures.cwl",fullName:"ANTs Label Geometry Measures",function:"Computes geometric properties (volume, centroid, bounding box, eccentricity) for each labeled region in a parcellation.",modality:"3D integer-labeled NIfTI volume (parcellation/segmentation), optional intensity image.",keyParameters:"<dimension> <label_image> [<intensity_image>] [<output_csv>]",keyPoints:"Outputs CSV with volume, centroid, elongation, roundness per label.",typicalUse:"Extracting volume, centroid, and shape measures per labeled region.",inputExtensions:{label_image:[".nii",".nii.gz"],intensity_image:[".nii",".nii.gz"]},outputExtensions:{csv_output:[".csv"]},docUrl:"https://github.com/ANTsX/ANTs/wiki"},"antsJointLabelFusion.sh":{cwlPath:"cwl/ants/antsJointLabelFusion.cwl",fullName:"ANTs Joint Label Fusion",function:"Multi-atlas segmentation that combines labels from multiple pre-labeled atlases using joint label fusion with local weighting.",modality:"Target 3D NIfTI volume plus multiple atlas images with corresponding label maps.",keyParameters:"-d (dimension), -t (target image), -g (atlas images), -l (atlas labels), -o (output prefix)",keyPoints:"More accurate than single-atlas segmentation. Requires multiple registered atlases. Computationally intensive but highly accurate.",typicalUse:"High-accuracy segmentation using multiple atlas priors.",inputExtensions:{target_image:[".nii",".nii.gz"],atlas_images:[".nii",".nii.gz"],atlas_labels:[".nii",".nii.gz"],mask_image:[".nii",".nii.gz"]},outputExtensions:{labeled_image:[".nii.gz"],intensity_fusion:[".nii.gz"]},docUrl:"https://github.com/ANTsX/ANTs/wiki/antsJointLabelFusion"},antsRegistration:{cwlPath:"cwl/ants/antsRegistration.cwl",enumHints:{interpolation:["Linear","NearestNeighbor","BSpline","Gaussian"]},fullName:"ANTs Multi-Stage Image Registration",function:"State-of-the-art image registration supporting multiple stages (rigid, affine, SyN) with configurable metrics and convergence.",modality:"Any 3D NIfTI volume pair (fixed and moving images).",keyParameters:"-d (dimension), -f (fixed), -m (moving), -t (transform type), -c (convergence), -s (smoothing sigmas), -o (output)",keyPoints:"Multi-stage approach: rigid then affine then SyN. SyN is symmetric diffeomorphic. CC metric best for intra-modal, MI for inter-modal.",typicalUse:"High-quality multi-stage registration with full parameter control.",inputExtensions:{fixed_image:[".nii",".nii.gz"],moving_image:[".nii",".nii.gz"],initial_moving_transform:[".mat",".h5",".nii.gz",".txt"]},outputExtensions:{warped_image:[".nii.gz"],inverse_warped_image:[".nii.gz"],forward_transforms:[".mat",".nii.gz"],inverse_transforms:[".nii.gz"]},docUrl:"https://github.com/ANTsX/ANTs/wiki/Anatomy-of-an-antsRegistration-call"},"antsRegistrationSyN.sh":{cwlPath:"cwl/ants/antsRegistrationSyN.cwl",enumHints:{transform_type:["t","r","a","s","sr","b","br"]},fullName:"ANTs SyN Registration with Defaults",function:"Symmetric normalization registration with sensible default parameters for common registration tasks.",modality:"Any 3D NIfTI volume pair.",keyParameters:"-d (dimension), -f (fixed), -m (moving), -o (output prefix), -t (transform type: s=SyN, b=BSplineSyN, a=affine only)",keyPoints:"Good defaults for most use cases. Outputs forward/inverse warps and affine. Preferred over raw antsRegistration for simplicity.",typicalUse:"Standard registration with good defaults for structural normalization.",inputExtensions:{fixed_image:[".nii",".nii.gz"],moving_image:[".nii",".nii.gz"],initial_transform:[".mat",".h5",".nii.gz",".txt"]},outputExtensions:{warped_image:[".nii.gz"],inverse_warped_image:[".nii.gz"],affine_transform:[".mat"],warp_field:[".nii.gz"],inverse_warp_field:[".nii.gz"]},docUrl:"https://github.com/ANTsX/ANTs/wiki/Anatomy-of-an-antsRegistration-call"},"antsRegistrationSyNQuick.sh":{cwlPath:"cwl/ants/antsRegistrationSyNQuick.cwl",enumHints:{transform_type:["t","r","a","s","sr","b","br"]},fullName:"ANTs Quick SyN Registration",function:"Fast SyN registration with reduced iterations and coarser sampling for rapid approximate registration.",modality:"Any 3D NIfTI volume pair.",keyParameters:"-d (dimension), -f (fixed), -m (moving), -o (output prefix), -t (transform type)",keyPoints:"Same interface as antsRegistrationSyN.sh but ~4x faster with slightly less accuracy.",typicalUse:"Quick registration when speed is priority over maximum accuracy.",inputExtensions:{fixed_image:[".nii",".nii.gz"],moving_image:[".nii",".nii.gz"],initial_transform:[".mat",".h5",".nii.gz",".txt"]},outputExtensions:{warped_image:[".nii.gz"],inverse_warped_image:[".nii.gz"],affine_transform:[".mat"],warp_field:[".nii.gz"],inverse_warp_field:[".nii.gz"]},docUrl:"https://github.com/ANTsX/ANTs/wiki/Anatomy-of-an-antsRegistration-call"},antsApplyTransforms:{cwlPath:"cwl/ants/antsApplyTransforms.cwl",enumHints:{interpolation:["Linear","NearestNeighbor","Gaussian","BSpline","GenericLabel"],input_image_type:["0","1","2","3"]},fullName:"ANTs Apply Transforms",function:"Applies one or more precomputed transformations (affine + warp) to images, applying transforms in reverse order of specification.",modality:"3D or 4D NIfTI volume plus transform files (affine .mat and/or warp .nii.gz).",keyParameters:"-d (dimension), -i (input), -r (reference), -o (output), -t (transforms, applied last-to-first), -n (interpolation: Linear, NearestNeighbor, BSpline)",keyPoints:"Transforms applied in REVERSE order listed. Use -n NearestNeighbor for label images. -e flag for time series.",typicalUse:"Applying registration transforms to data, labels, or ROIs.",inputExtensions:{input_image:[".nii",".nii.gz"],reference_image:[".nii",".nii.gz"],transforms:[".mat",".h5",".nii.gz",".txt"]},outputExtensions:{transformed_image:[".nii",".nii.gz"]},docUrl:"https://github.com/ANTsX/ANTs/wiki/Anatomy-of-an-antsRegistration-call"},antsMotionCorr:{cwlPath:"cwl/ants/antsMotionCorr.cwl",fullName:"ANTs Motion Correction",function:"Motion correction for time series data using ANTs registration framework with rigid or affine transformations.",modality:"4D fMRI or dynamic PET NIfTI time series.",keyParameters:"-d (dimension), -a (compute average), -o (output), -u (use fixed reference), -m (metric)",keyPoints:"Can compute average image and motion-correct simultaneously. Uses ANTs optimization. Slower than MCFLIRT.",typicalUse:"High-quality motion correction using ANTs registration framework.",inputExtensions:{fixed_image:[".nii",".nii.gz"],moving_image:[".nii",".nii.gz"]},outputExtensions:{corrected_image:[".nii.gz"],average_image:[".nii.gz"],motion_parameters:[".csv"],displacement_field:[".nii.gz"]},docUrl:"https://github.com/ANTsX/ANTs/wiki/antsMotionCorr"},"antsIntermodalityIntrasubject.sh":{cwlPath:"cwl/ants/antsIntermodalityIntrasubject.cwl",enumHints:{transform_type:["0","1","2","3"]},fullName:"ANTs Intermodality Intrasubject Registration",function:"Specialized registration between different imaging modalities within the same subject.",modality:"Two different-modality volumes from the same subject (e.g., T1 + T2, or T1 + EPI).",keyParameters:"-d (dimension), -i (input modality 1), -r (reference modality 2), -o (output prefix), -t (transform type)",keyPoints:"Uses mutual information cost function appropriate for cross-modal registration.",typicalUse:"T1-to-T2, fMRI-to-T1, or DWI-to-T1 within-subject alignment.",outputExtensions:{warped_image:[".nii.gz"],affine_transform:[".mat"],warp_field:[".nii.gz"],inverse_warp_field:[".nii.gz"]},docUrl:"https://github.com/ANTsX/ANTs/wiki/Anatomy-of-an-antsRegistration-call"},Atropos:{cwlPath:"cwl/ants/Atropos.cwl",enumHints:{likelihood_model:["Gaussian","HistogramParzenWindows","ManifoldParzenWindows"]},fullName:"ANTs Atropos Tissue Segmentation",function:"Probabilistic tissue segmentation using expectation-maximization algorithm with Markov random field spatial prior.",modality:"Brain-extracted 3D NIfTI volume plus brain mask.",keyParameters:"-d (dimension), -a (input image), -x (mask), -i (initialization: KMeans[N] or PriorProbabilityImages), -c (convergence), -o (output)",keyPoints:"Initialize with KMeans[3] for basic GM/WM/CSF or use prior probability images. MRF prior improves spatial coherence.",typicalUse:"GMM-based brain tissue segmentation with spatial regularization.",inputExtensions:{intensity_image:[".nii",".nii.gz"],mask_image:[".nii",".nii.gz"]},outputExtensions:{segmentation:[".nii",".nii.gz"],posteriors:[".nii.gz"]},docUrl:"https://github.com/ANTsX/ANTs/wiki/Atropos-and-N4"},"antsAtroposN4.sh":{cwlPath:"cwl/ants/antsAtroposN4.cwl",fullName:"ANTs Combined Atropos with N4 Bias Correction",function:"Iteratively combines N4 bias field correction with Atropos segmentation for improved results on biased images.",modality:"Brain-extracted 3D NIfTI volume plus brain mask.",keyParameters:"-d (dimension), -a (anatomical image), -x (mask), -c (number of classes), -o (output prefix), -n (number of iterations)",keyPoints:"Iterative approach: N4 correction improves segmentation, which improves next N4 iteration. Superior to running separately.",typicalUse:"Iterative N4 + segmentation for better results on images with bias field.",inputExtensions:{input_image:[".nii",".nii.gz"],mask_image:[".nii",".nii.gz"]},outputExtensions:{segmentation:[".nii.gz"],posteriors:[".nii.gz"],bias_corrected:[".nii.gz"]},docUrl:"https://github.com/ANTsX/ANTs/wiki/Atropos-and-N4"},"antsBrainExtraction.sh":{cwlPath:"cwl/ants/antsBrainExtraction.cwl",fullName:"ANTs Template-Based Brain Extraction",function:"High-quality brain extraction using registration to a brain template and tissue priors for robust skull stripping.",modality:"T1-weighted 3D NIfTI volume plus brain template and brain probability mask.",keyParameters:"-d (dimension, 3), -a (anatomical image), -e (brain template), -m (brain probability mask), -o (output prefix)",keyPoints:"More robust than BET for difficult cases. Requires template and prior. Slower but generally more accurate.",typicalUse:"High-quality skull stripping, especially for challenging datasets.",inputExtensions:{anatomical_image:[".nii",".nii.gz"],template:[".nii",".nii.gz"],brain_probability_mask:[".nii",".nii.gz"],registration_mask:[".nii",".nii.gz"]},outputExtensions:{brain_extracted:[".nii.gz"],brain_mask:[".nii.gz"],brain_n4:[".nii.gz"],registration_template:[".nii.gz"]},docUrl:"https://github.com/ANTsX/ANTs/wiki/antsBrainExtraction-and-templates"},KellyKapowski:{cwlPath:"cwl/ants/KellyKapowski.cwl",fullName:"ANTs DiReCT Cortical Thickness (KellyKapowski)",function:"Estimates cortical thickness using the DiReCT algorithm from segmentation data.",modality:"Tissue segmentation image plus GM and WM probability maps (3D NIfTI).",keyParameters:"-d (dimension), -s (segmentation image), -g (GM probability), -w (WM probability), -o (output thickness map), -c (convergence)",keyPoints:"Core thickness estimation engine used by antsCorticalThickness.sh. Requires good segmentation as input.",typicalUse:"Computing cortical thickness from pre-existing tissue segmentation.",inputExtensions:{segmentation_image:[".nii",".nii.gz"],gray_matter_prob:[".nii",".nii.gz"],white_matter_prob:[".nii",".nii.gz"]},outputExtensions:{thickness_image:[".nii",".nii.gz"]},docUrl:"https://github.com/ANTsX/ANTs/wiki/antsCorticalThickness-and-Templates"},"antsCorticalThickness.sh":{cwlPath:"cwl/ants/antsCorticalThickness.cwl",enumHints:{run_stage:["0","1","2","3"]},fullName:"ANTs Cortical Thickness Pipeline",function:"Complete automated pipeline for cortical thickness estimation using DiReCT, including brain extraction, segmentation, and registration.",modality:"T1-weighted 3D NIfTI volume plus brain template and tissue priors.",keyParameters:"-d (dimension), -a (anatomical image), -e (brain template), -m (brain probability mask), -p (tissue priors prefix), -o (output prefix)",keyPoints:"Runs full pipeline: N4, brain extraction, segmentation, registration, thickness. Requires template and priors. Computationally intensive.",typicalUse:"Complete DiReCT-based cortical thickness measurement pipeline.",inputExtensions:{anatomical_image:[".nii",".nii.gz"],template:[".nii",".nii.gz"],brain_probability_mask:[".nii",".nii.gz"],registration_mask:[".nii",".nii.gz"],extraction_registration_mask:[".nii",".nii.gz"]},outputExtensions:{brain_extraction_mask:[".nii.gz"],brain_segmentation:[".nii.gz"],cortical_thickness:[".nii.gz"],brain_normalized:[".nii.gz"],subject_to_template_warp:[".nii.gz"],subject_to_template_affine:[".mat"],template_to_subject_warp:[".nii.gz"],template_to_subject_affine:[".mat"],segmentation_posteriors:[".nii.gz"]},docUrl:"https://github.com/ANTsX/ANTs/wiki/antsCorticalThickness-and-Templates"},eddy:{cwlPath:"cwl/fsl/eddy.cwl",fullName:"FSL Eddy Current and Motion Correction (eddy)",function:"Corrects eddy current-induced distortions and subject movement in diffusion MRI data using a Gaussian process model.",modality:"4D diffusion-weighted NIfTI with b-values (.bval), b-vectors (.bvec), acquisition parameters, and index files.",keyParameters:"--imain (input DWI), --bvals, --bvecs, --acqp (acquisition params), --index (volume indices), --topup (topup output), --out (output)",keyPoints:"Should follow topup if available. Outputs rotated bvecs to account for motion. Use --repol for outlier replacement. GPU version (eddy_cuda) much faster.",typicalUse:"Primary preprocessing step for diffusion MRI after topup distortion correction.",inputExtensions:{input:[".nii",".nii.gz"],bvals:[".bval"],bvecs:[".bvec"],acqp:[".txt"],index:[".txt"],mask:[".nii",".nii.gz"]},outputExtensions:{corrected_image:[".nii",".nii.gz"],rotated_bvecs:[".eddy_rotated_bvecs"],parameters:[".eddy_parameters"]},docUrl:"https://fsl.fmrib.ox.ac.uk/fsl/fslwiki/eddy"},dtifit:{cwlPath:"cwl/fsl/dtifit.cwl",requires:{tensor:"save_tensor"},fullName:"FSL Diffusion Tensor Fitting (dtifit)",function:"Fits a diffusion tensor model to each voxel of preprocessed diffusion-weighted data to generate scalar diffusion maps.",modality:"4D diffusion-weighted NIfTI with b-values (.bval), b-vectors (.bvec), and brain mask.",keyParameters:"-k (input DWI), -o (output basename), -m (brain mask), -r (bvecs file), -b (bvals file)",keyPoints:"Outputs FA, MD, eigenvalues (L1/L2/L3), eigenvectors (V1/V2/V3), and full tensor. Assumes single-fiber per voxel (use bedpostx for crossing fibers).",typicalUse:"Generating fractional anisotropy (FA) and mean diffusivity (MD) maps from DWI data.",inputExtensions:{data:[".nii",".nii.gz"],mask:[".nii",".nii.gz"],bvecs:[".bvec"],bvals:[".bval"]},outputExtensions:{FA:[".nii",".nii.gz"],MD:[".nii",".nii.gz"],L1:[".nii",".nii.gz"],L2:[".nii",".nii.gz"],L3:[".nii",".nii.gz"],V1:[".nii",".nii.gz"],V2:[".nii",".nii.gz"],V3:[".nii",".nii.gz"],tensor:[".nii",".nii.gz"]},docUrl:"https://fsl.fmrib.ox.ac.uk/fsl/fslwiki/FDT/UserGuide#DTIFIT"},bedpostx:{cwlPath:"cwl/fsl/bedpostx.cwl",fullName:"Bayesian Estimation of Diffusion Parameters Obtained using Sampling Techniques (BEDPOSTX)",function:"Bayesian estimation of fiber orientation distributions using MCMC sampling, supporting multiple crossing fibers per voxel.",modality:"Directory containing 4D DWI (data.nii.gz), b-values (bvals), b-vectors (bvecs), and brain mask (nodif_brain_mask.nii.gz).",keyParameters:"<data_directory>, -n (max fibers per voxel, default 3)",keyPoints:"Very computationally intensive (hours-days). GPU version (bedpostx_gpu) strongly recommended. Required before probtrackx2. Outputs fiber orientations and uncertainty estimates.",typicalUse:"Prerequisite for probabilistic tractography with probtrackx2.",inputExtensions:{},outputExtensions:{merged_samples:[".nii.gz"]},docUrl:"https://fsl.fmrib.ox.ac.uk/fsl/fslwiki/FDT/UserGuide#BEDPOSTX"},tbss_1_preproc:{cwlPath:"cwl/fsl/tbss_1_preproc.cwl",fullName:"TBSS Step 1: Preprocessing",function:"Preprocesses FA images for TBSS by slightly eroding them and zeroing end slices to remove outlier voxels.",modality:"FA maps (3D NIfTI) from dtifit, placed in a common directory.",keyParameters:"*.nii.gz (all FA images in current directory)",keyPoints:"Run from directory containing all subjects FA images. Creates FA/ subdirectory with preprocessed images. Must be run before tbss_2_reg.",typicalUse:"First step of TBSS pipeline for voxelwise diffusion analysis.",inputExtensions:{fa_images:[".nii",".nii.gz"]},outputExtensions:{},docUrl:"https://fsl.fmrib.ox.ac.uk/fsl/fslwiki/TBSS/UserGuide"},tbss_2_reg:{cwlPath:"cwl/fsl/tbss_2_reg.cwl",fullName:"TBSS Step 2: Registration",function:"Registers all FA images to a target (best subject or standard-space template) using non-linear registration.",modality:"Preprocessed FA images from tbss_1_preproc.",keyParameters:"-T (use FMRIB58_FA as target), -t <target> (use specified target), -n (find best subject as target)",keyPoints:"Use -T for standard target (recommended for most analyses). -n finds best representative subject but takes longer. Registration quality should be checked visually.",typicalUse:"Second step of TBSS pipeline: aligning all subjects to common space.",inputExtensions:{target_image:[".nii",".nii.gz"]},outputExtensions:{},docUrl:"https://fsl.fmrib.ox.ac.uk/fsl/fslwiki/TBSS/UserGuide"},tbss_3_postreg:{cwlPath:"cwl/fsl/tbss_3_postreg.cwl",fullName:"TBSS Step 3: Post-Registration",function:"Creates mean FA image and FA skeleton by projecting registered FA data onto a mean tract center.",modality:"Registered FA images from tbss_2_reg.",keyParameters:"-S (use study-specific mean FA and skeleton), -T (use FMRIB58_FA mean and skeleton)",keyPoints:"Creates mean_FA, mean_FA_skeleton, and all_FA (4D). Skeleton threshold typically 0.2 FA. -S recommended for study-specific analysis.",typicalUse:"Third step of TBSS: creating the white matter skeleton for analysis.",inputExtensions:{},outputExtensions:{mean_FA:[".nii.gz"],mean_FA_skeleton:[".nii.gz"],all_FA:[".nii.gz"]},docUrl:"https://fsl.fmrib.ox.ac.uk/fsl/fslwiki/TBSS/UserGuide"},tbss_4_prestats:{cwlPath:"cwl/fsl/tbss_4_prestats.cwl",fullName:"TBSS Step 4: Pre-Statistics",function:"Projects all subjects FA data onto the mean FA skeleton, ready for voxelwise cross-subject statistics.",modality:"Mean FA skeleton from tbss_3_postreg plus registered FA images.",keyParameters:"<threshold> (FA threshold for skeleton, typically 0.2)",keyPoints:"Threshold determines which voxels are included in skeleton. Creates all_FA_skeletonised (4D) ready for randomise. Can also project non-FA data (MD, etc.) using tbss_non_FA.",typicalUse:"Final TBSS step before statistical analysis with randomise.",inputExtensions:{},outputExtensions:{all_FA_skeletonised:[".nii.gz"]},docUrl:"https://fsl.fmrib.ox.ac.uk/fsl/fslwiki/TBSS/UserGuide"},oxford_asl:{cwlPath:"cwl/fsl/oxford_asl.cwl",fullName:"Oxford ASL Processing Pipeline",function:"Complete pipeline for ASL MRI quantification including motion correction, registration, calibration, and partial volume correction.",modality:"4D ASL NIfTI (tag/control pairs) plus structural T1 image.",keyParameters:"-i (input ASL), -o (output dir), -s (structural image), --casl/--pasl (labeling type), --iaf (input format: tc/ct/diff), --tis (inversion times)",keyPoints:"Handles both pASL and CASL/pCASL. Performs kinetic modeling via BASIL internally. Use --wp for white paper quantification mode. Requires calibration image for absolute CBF.",typicalUse:"Complete ASL quantification from raw data to calibrated CBF maps.",inputExtensions:{input:[".nii",".nii.gz"],mask:[".nii",".nii.gz"],structural:[".nii",".nii.gz"],calib:[".nii",".nii.gz"]},outputExtensions:{perfusion:[".nii.gz"],arrival:[".nii.gz"]},docUrl:"https://fsl.fmrib.ox.ac.uk/fsl/fslwiki/BASIL"},basil:{cwlPath:"cwl/fsl/basil.cwl",fullName:"Bayesian Inference for Arterial Spin Labeling (BASIL)",function:"Bayesian kinetic model inversion for ASL data using variational Bayes to estimate perfusion and arrival time.",modality:"4D ASL NIfTI (differenced tag-control or raw tag/control pairs).",keyParameters:"-i (input ASL), -o (output dir), --tis (inversion times), --casl/--pasl, --bolus (bolus duration), --bat (arterial transit time prior)",keyPoints:"Core kinetic modeling engine used by oxford_asl. Multi-TI data enables arrival time estimation. Spatial regularization improves estimates in low-SNR regions.",typicalUse:"Bayesian perfusion quantification with uncertainty estimation.",inputExtensions:{input:[".nii",".nii.gz"],mask:[".nii",".nii.gz"],options_file:[".txt"],pgm:[".nii",".nii.gz"],pwm:[".nii",".nii.gz"],t1im:[".nii",".nii.gz"]},outputExtensions:{perfusion:[".nii.gz"]},docUrl:"https://fsl.fmrib.ox.ac.uk/fsl/fslwiki/BASIL"},asl_calib:{cwlPath:"cwl/fsl/asl_calib.cwl",fullName:"ASL Calibration (asl_calib)",function:"Calibrates ASL perfusion data to absolute CBF units (ml/100g/min) using an M0 calibration image.",modality:"Perfusion image (3D NIfTI) plus M0 calibration image and structural reference.",keyParameters:"-i (perfusion image), -c (M0 calibration image), -s (structural image), --mode (voxelwise or reference region), --tr (TR of calibration)",keyPoints:"Two modes: voxelwise (divides each voxel by local M0) or reference region (uses CSF M0 as reference). Reference region mode more robust to coil sensitivity variations.",typicalUse:"Converting relative perfusion signals to absolute CBF values.",inputExtensions:{calib_image:[".nii",".nii.gz"],perfusion:[".nii",".nii.gz"],structural:[".nii",".nii.gz"],transform:[".mat"],mask:[".nii",".nii.gz"],bmask:[".nii",".nii.gz"],str2std:[".mat"],warp:[".nii",".nii.gz"]},outputExtensions:{calibrated_perfusion:[".nii",".nii.gz"]},docUrl:"https://fsl.fmrib.ox.ac.uk/fsl/fslwiki/BASIL"},dwidenoise:{cwlPath:"cwl/mrtrix3/dwidenoise.cwl",requires:{noise_map:"noise"},fullName:"MRtrix3 DWI Denoising (MP-PCA)",function:"Removes thermal noise from diffusion MRI data using Marchenko-Pastur PCA exploiting data redundancy across diffusion directions.",modality:"4D diffusion-weighted NIfTI with multiple diffusion directions (minimum ~30 recommended).",keyParameters:"<input> <output>, -noise (output noise map), -extent (spatial patch size, default 5,5,5), -mask (brain mask)",keyPoints:"Should be run FIRST, before any other processing. Requires sufficient number of diffusion directions. Noise map useful for QC.",typicalUse:"First step in DWI preprocessing to improve SNR.",inputExtensions:{input:[".mif",".nii",".nii.gz",".mgh",".mgz"],mask:[".mif",".nii",".nii.gz",".mgh",".mgz"]},outputExtensions:{denoised:[".mif",".nii",".nii.gz"],noise_map:[".mif",".nii",".nii.gz"]},docUrl:"https://mrtrix.readthedocs.io/en/latest/reference/commands/dwidenoise.html"},mrdegibbs:{cwlPath:"cwl/mrtrix3/mrdegibbs.cwl",fullName:"MRtrix3 Gibbs Ringing Removal",function:"Removes Gibbs ringing artifacts (truncation artifacts) from MRI data using a local subvoxel-shift method.",modality:"3D or 4D NIfTI volume (structural or diffusion).",keyParameters:"<input> <output>, -axes (axes along which data was acquired, default 0,1)",keyPoints:"Run after dwidenoise but before any interpolation-based processing. Only effective if data was NOT zero-filled in k-space.",typicalUse:"Removing Gibbs ringing after denoising, before other preprocessing.",inputExtensions:{input:[".mif",".nii",".nii.gz",".mgh",".mgz"]},outputExtensions:{degibbs:[".mif",".nii",".nii.gz"]},docUrl:"https://mrtrix.readthedocs.io/en/latest/reference/commands/mrdegibbs.html"},dwi2tensor:{cwlPath:"cwl/mrtrix3/dwi2tensor.cwl",requires:{b0_image:"b0",kurtosis_tensor:"dkt"},fullName:"MRtrix3 Diffusion Tensor Estimation",function:"Estimates the diffusion tensor model at each voxel from preprocessed DWI data using weighted or ordinary least squares.",modality:"4D diffusion-weighted NIfTI with gradient table (b-values and b-vectors).",keyParameters:"<input> <output>, -mask (brain mask), -b0 (output mean b=0 image), -dkt (output diffusion kurtosis tensor)",keyPoints:"Assumes single fiber per voxel. Gradient information must be in image header or provided via -fslgrad bvecs bvals.",typicalUse:"Fitting diffusion tensor to DWI data for FA/MD map generation.",inputExtensions:{input:[".mif",".nii",".nii.gz",".mgh",".mgz"],mask:[".mif",".nii",".nii.gz",".mgh",".mgz"]},outputExtensions:{tensor:[".mif",".nii",".nii.gz"],b0_image:[".mif",".nii",".nii.gz"],kurtosis_tensor:[".mif",".nii",".nii.gz"]},docUrl:"https://mrtrix.readthedocs.io/en/latest/reference/commands/dwi2tensor.html"},tensor2metric:{cwlPath:"cwl/mrtrix3/tensor2metric.cwl",requires:{fa_map:"fa",md_map:"adc",ad_map:"ad",rd_map:"rd"},fullName:"MRtrix3 Tensor Metric Extraction",function:"Extracts scalar metrics (FA, MD, AD, RD, eigenvalues, eigenvectors) from a fitted diffusion tensor image.",modality:"Diffusion tensor image (4D NIfTI from dwi2tensor).",keyParameters:"<input>, -fa (output FA map), -adc (output MD map), -ad (output AD), -rd (output RD), -vector (output eigenvectors)",keyPoints:"Multiple outputs can be generated in a single run. FA range 0-1. Specify each desired output explicitly.",typicalUse:"Generating FA, MD, and other scalar diffusion maps from tensor.",inputExtensions:{input:[".mif",".nii",".nii.gz",".mgh",".mgz"],mask:[".mif",".nii",".nii.gz",".mgh",".mgz"]},outputExtensions:{fa_map:[".mif",".nii",".nii.gz"],md_map:[".mif",".nii",".nii.gz"],ad_map:[".mif",".nii",".nii.gz"],rd_map:[".mif",".nii",".nii.gz"]},docUrl:"https://mrtrix.readthedocs.io/en/latest/reference/commands/tensor2metric.html"},dwi2fod:{cwlPath:"cwl/mrtrix3/dwi2fod.cwl",fullName:"MRtrix3 Fiber Orientation Distribution Estimation",function:"Estimates fiber orientation distributions (FODs) using constrained spherical deconvolution to resolve crossing fibers.",modality:"4D diffusion-weighted NIfTI with multi-shell or single-shell data, plus tissue response functions.",keyParameters:"<algorithm> <input> <wm_response> <wm_fod> [<gm_response> <gm_fod>] [<csf_response> <csf_fod>], -mask (brain mask)",keyPoints:"Use msmt_csd for multi-shell data (recommended), csd for single-shell. Response functions from dwi2response.",typicalUse:"Estimating fiber orientations for subsequent tractography.",inputExtensions:{input:[".mif",".nii",".nii.gz",".mgh",".mgz"],wm_response:[".txt"],gm_response:[".txt"],csf_response:[".txt"],mask:[".mif",".nii",".nii.gz",".mgh",".mgz"]},outputExtensions:{wm_fod_image:[".mif",".nii",".nii.gz"],gm_fod_image:[".mif",".nii",".nii.gz"],csf_fod_image:[".mif",".nii",".nii.gz"]},docUrl:"https://mrtrix.readthedocs.io/en/latest/reference/commands/dwi2fod.html"},tckgen:{cwlPath:"cwl/mrtrix3/tckgen.cwl",fullName:"MRtrix3 Streamline Tractography Generation",function:"Generates streamline tractograms using various algorithms (iFOD2, FACT, etc.) from FOD or tensor images.",modality:"FOD image (from dwi2fod) or tensor image, plus optional seed/mask/ROI images.",keyParameters:"<source> <output.tck>, -algorithm (iFOD2, FACT, etc.), -seed_image (seeding region), -select (target streamline count), -cutoff (FOD amplitude cutoff)",keyPoints:"iFOD2 (default) is probabilistic and handles crossing fibers. Use -select for target count. -cutoff controls termination.",typicalUse:"Generating whole-brain or ROI-seeded tractograms.",inputExtensions:{source:[".mif",".nii",".nii.gz",".mgh",".mgz"],seed_image:[".mif",".nii",".nii.gz",".mgh",".mgz"],act:[".mif",".nii",".nii.gz",".mgh",".mgz"]},outputExtensions:{tractogram:[".tck"]},docUrl:"https://mrtrix.readthedocs.io/en/latest/reference/commands/tckgen.html"},tcksift:{cwlPath:"cwl/mrtrix3/tcksift.cwl",fullName:"MRtrix3 SIFT Tractogram Filtering",function:"Filters tractograms to improve biological plausibility by matching streamline density to FOD lobe integrals.",modality:"Tractogram (.tck) plus FOD image used for tractography.",keyParameters:"<input.tck> <output.tck>, -act (ACT image), -term_number (target streamline count)",keyPoints:"Dramatically improves connectome quantification. Run after tckgen. SIFT2 (tcksift2) outputs weights instead of filtering.",typicalUse:"Improving tractogram biological accuracy before connectome construction.",inputExtensions:{input_tracks:[".tck"],fod:[".mif",".nii",".nii.gz",".mgh",".mgz"],act:[".mif",".nii",".nii.gz",".mgh",".mgz"]},outputExtensions:{filtered_tractogram:[".tck"]},docUrl:"https://mrtrix.readthedocs.io/en/latest/reference/commands/tcksift.html"},tck2connectome:{cwlPath:"cwl/mrtrix3/tck2connectome.cwl",fullName:"MRtrix3 Tractogram to Connectome",function:"Constructs a structural connectivity matrix by counting streamlines connecting pairs of regions from a parcellation.",modality:"Tractogram (.tck) plus parcellation volume (integer-labeled 3D NIfTI).",keyParameters:"<input.tck> <parcellation> <output.csv>, -assignment_radial_search (search radius), -scale_length (length scaling)",keyPoints:"Output is NxN matrix. Use SIFT/SIFT2 filtered tractogram for quantitative connectomics. -symmetric recommended.",typicalUse:"Building structural connectivity matrices from tractography and parcellation.",inputExtensions:{input_tracks:[".tck"],parcellation:[".mif",".nii",".nii.gz",".mgh",".mgz"]},outputExtensions:{connectome:[".csv"]},docUrl:"https://mrtrix.readthedocs.io/en/latest/reference/commands/tck2connectome.html"},fmriprep:{cwlPath:"cwl/fmriprep/fmriprep.cwl",fullName:"fMRIPrep: Robust fMRI Preprocessing Pipeline",function:"Automated, robust preprocessing pipeline for task-based and resting-state fMRI, combining tools from FSL, FreeSurfer, ANTs, and AFNI with best practices.",modality:"BIDS-formatted dataset containing T1w anatomical and BOLD fMRI data (NIfTI format).",keyParameters:"<bids_dir> <output_dir> participant, --participant-label (subject IDs), --output-spaces (target spaces), --fs-license-file (FreeSurfer license)",keyPoints:"Requires BIDS-formatted input. Handles brain extraction, segmentation, registration, motion correction, distortion correction, and confound estimation. Generates comprehensive visual QC reports.",typicalUse:"Complete standardized fMRI preprocessing from BIDS data to analysis-ready outputs.",inputExtensions:{fs_license_file:[".txt"]},outputExtensions:{},docUrl:"https://fmriprep.org/en/stable/"},mriqc:{cwlPath:"cwl/mriqc/mriqc.cwl",fullName:"MRIQC: MRI Quality Control Pipeline",function:"Automated quality control pipeline that extracts image quality metrics (IQMs) from structural and functional MRI and generates visual reports.",modality:"BIDS-formatted dataset containing T1w, T2w, and/or BOLD fMRI data (NIfTI format).",keyParameters:"<bids_dir> <output_dir> participant, --participant-label (subject IDs), --modalities (T1w, T2w, bold), --no-sub (skip submission to web API)",keyPoints:"Requires BIDS-formatted input. Computes dozens of IQMs (SNR, CNR, EFC, FBER, motion metrics). Generates individual and group-level visual reports.",typicalUse:"Automated quality assessment of MRI data before preprocessing.",inputExtensions:{},outputExtensions:{},docUrl:"https://mriqc.readthedocs.io/en/stable/"},mri_gtmpvc:{cwlPath:"cwl/freesurfer/mri_gtmpvc.cwl",fullName:"FreeSurfer Geometric Transfer Matrix Partial Volume Correction",function:"Performs partial volume correction for PET data using the geometric transfer matrix method based on high-resolution anatomical segmentation.",modality:"PET volume (3D NIfTI/MGZ) plus FreeSurfer segmentation (aparc+aseg).",keyParameters:"--i (input PET), --seg (segmentation), --reg (registration to anatomy), --psf (point spread function FWHM in mm), --o (output directory)",keyPoints:"Accounts for PET spatial resolution blurring across tissue boundaries. PSF should match scanner resolution (~4-6mm).",typicalUse:"Partial volume correction of PET data using anatomical segmentation.",inputExtensions:{input:[".mgz",".mgh",".nii",".nii.gz"],seg:[".mgz",".mgh",".nii",".nii.gz"],reg:[".lta",".dat"]},outputExtensions:{gtm_stats:[".dat"]},docUrl:"https://surfer.nmr.mgh.harvard.edu/fswiki/PetSurfer"},tbss_non_FA:{cwlPath:"cwl/fsl/tbss_non_FA.cwl",fullName:"TBSS Non-FA Image Projection",function:"Projects non-FA diffusion images (MD, AD, RD, etc.) onto the mean FA skeleton using the same registration from the FA-based TBSS pipeline.",modality:"Non-FA diffusion scalar maps (3D NIfTI) in same space as FA images used for TBSS.",keyParameters:"<non_FA_image> (e.g., all_MD) - run after tbss_4_prestats with non-FA data in stats directory",keyPoints:"Must run full TBSS pipeline on FA first. Non-FA images must be in same native space as original FA. Creates all_<measure>_skeletonised for use with randomise.",typicalUse:"Analyzing MD, AD, RD, or other diffusion metrics on the FA-derived skeleton.",inputExtensions:{},outputExtensions:{skeletonised_data:[".nii.gz"]},docUrl:"https://fsl.fmrib.ox.ac.uk/fsl/fslwiki/TBSS/UserGuide#Using_non-FA_Images_in_TBSS"},applytopup:{cwlPath:"cwl/fsl/applytopup.cwl",fullName:"FSL Apply Topup Distortion Correction",function:"Applies the susceptibility-induced off-resonance field estimated by topup to correct distortions in EPI images.",modality:"3D or 4D EPI NIfTI plus topup output (movpar.txt and fieldcoef files).",keyParameters:"--imain (input images), --topup (topup output prefix), --datain (acquisition parameters), --inindex (index into datain), --out (output), --method (jac or lsr)",keyPoints:"Use after running topup. --method=jac applies Jacobian modulation (recommended for fMRI). Can apply to multiple images at once.",typicalUse:"Applying distortion correction to fMRI or DWI data using pre-computed topup results.",inputExtensions:{input:[".nii",".nii.gz"],topup_fieldcoef:[".nii",".nii.gz"],topup_movpar:[".txt"],encoding_file:[".txt"]},outputExtensions:{corrected_images:[".nii",".nii.gz"]},docUrl:"https://fsl.fmrib.ox.ac.uk/fsl/fslwiki/topup/ApplyTopupUsersGuide"},fsl_prepare_fieldmap:{cwlPath:"cwl/fsl/fsl_prepare_fieldmap.cwl",fullName:"FSL Fieldmap Preparation",function:"Prepares a fieldmap for use with FUGUE by converting phase difference images to radians per second.",modality:"Phase difference image and magnitude image from gradient echo fieldmap acquisition.",keyParameters:"<scanner> <phase_image> <magnitude_image> <output_fieldmap> <delta_TE_ms>",keyPoints:"Scanner type determines unwrapping method (SIEMENS most common). Delta TE is the echo time difference in milliseconds. Output is in rad/s for use with FUGUE.",typicalUse:"Converting raw fieldmap images to FUGUE-compatible format for EPI distortion correction.",inputExtensions:{phase_image:[".nii",".nii.gz"],magnitude_image:[".nii",".nii.gz"]},outputExtensions:{fieldmap:[".nii",".nii.gz"]},docUrl:"https://fsl.fmrib.ox.ac.uk/fsl/fslwiki/FUGUE/Guide#SIEMENS_data"},prelude:{cwlPath:"cwl/fsl/prelude.cwl",fullName:"FSL Phase Region Expanding Labeller for Unwrapping Discrete Estimates (PRELUDE)",function:"Performs 3D phase unwrapping on wrapped phase images using a region-growing algorithm.",modality:"Wrapped phase image (3D NIfTI) plus optional magnitude image for masking.",keyParameters:"-p (wrapped phase), -a (magnitude for mask), -o (output unwrapped phase), -m (brain mask), -f (apply phase filter)",keyPoints:"Essential preprocessing for fieldmap-based distortion correction. Magnitude image improves unwrapping quality. Can handle phase wraps > 2pi.",typicalUse:"Unwrapping phase images before fieldmap calculation for distortion correction.",inputExtensions:{phase:[".nii",".nii.gz"],magnitude:[".nii",".nii.gz"],complex_input:[".nii",".nii.gz"],mask:[".nii",".nii.gz"]},outputExtensions:{unwrapped_phase:[".nii",".nii.gz"],saved_mask:[".nii",".nii.gz"]},docUrl:"https://fsl.fmrib.ox.ac.uk/fsl/fslwiki/FUGUE/Guide#PRELUDE_.28phase_unwrapping.29"},bianca:{cwlPath:"cwl/fsl/bianca.cwl",fullName:"Brain Intensity AbNormality Classification Algorithm (BIANCA)",function:"Automated white matter hyperintensity (WMH) segmentation using supervised machine learning (k-nearest neighbor) trained on manually labeled data.",modality:"T1-weighted and FLAIR images (3D NIfTI), plus training data with manual WMH masks.",keyParameters:"--singlefile (input file list), --labelfeaturenum (which feature is the manual label), --brainmaskfeaturenum (brain mask feature), --querysubjectnum (subject to segment), --trainingnums (training subjects)",keyPoints:"Requires training data with manual WMH labels. Uses spatial and intensity features. Performance depends on training data quality and similarity to test data.",typicalUse:"Automated white matter lesion segmentation in aging, small vessel disease, or MS studies.",inputExtensions:{singlefile:[".txt"]},outputExtensions:{wmh_map:[".nii.gz"]},docUrl:"https://fsl.fmrib.ox.ac.uk/fsl/fslwiki/BIANCA"},robustfov:{cwlPath:"cwl/fsl/robustfov.cwl",fullName:"FSL Robust Field of View Reduction",function:"Automatically identifies and removes neck/non-brain tissue by estimating the brain center and reducing the field of view to a standard size.",modality:"T1-weighted 3D NIfTI volume (full head coverage).",keyParameters:"-i (input), -r (output ROI volume), -m (output transformation matrix), -b (brain size estimate in mm, default 170)",keyPoints:"Useful for images with extensive neck coverage. Run before BET for more robust brain extraction. Does not resample, just crops.",typicalUse:"Preprocessing step before brain extraction to remove neck and improve BET robustness.",inputExtensions:{input:[".nii",".nii.gz"]},outputExtensions:{cropped_image:[".nii",".nii.gz"],transform_matrix:[".mat"]},docUrl:"https://fsl.fmrib.ox.ac.uk/fsl/fslwiki/fsl_anat"},"recon-all":{cwlPath:"cwl/freesurfer/recon-all.cwl",fullName:"FreeSurfer Complete Cortical Reconstruction Pipeline",function:"Fully automated pipeline for cortical surface reconstruction and parcellation, including skull stripping, segmentation, surface tessellation, topology correction, inflation, registration, and parcellation.",modality:"T1-weighted 3D NIfTI or DICOM. Optional T2w or FLAIR for pial surface refinement.",keyParameters:"-s (subject ID), -i (input T1w), -T2 (T2w image for pial), -FLAIR (FLAIR for pial), -all (run full pipeline), -autorecon1/-autorecon2/-autorecon3 (run specific stages)",keyPoints:"Runtime 6-24 hours per subject. Creates cortical surfaces (white, pial), parcellations (Desikan-Killiany, Destrieux), subcortical segmentation (aseg), and morphometric measures. Use -T2pial or -FLAIRpial for improved pial surface placement.",typicalUse:"Complete cortical reconstruction for surface-based morphometry, parcellation-based analysis, and as prerequisite for fMRI surface analysis.",inputExtensions:{input_t1:[".mgz",".mgh",".nii",".nii.gz"],t2_image:[".mgz",".mgh",".nii",".nii.gz"],flair_image:[".mgz",".mgh",".nii",".nii.gz"]},outputExtensions:{},docUrl:"https://surfer.nmr.mgh.harvard.edu/fswiki/recon-all"},wb_command_cifti_create_dense_timeseries:{cwlPath:"cwl/connectome_workbench/wb_command_cifti_create_dense_timeseries.cwl",fullName:"Connectome Workbench CIFTI Dense Timeseries Creation",function:"Creates a CIFTI dense timeseries file (.dtseries.nii) combining cortical surface data with subcortical volume data in a single grayordinates representation.",modality:"Surface GIFTI files (left/right hemisphere) plus subcortical volume NIfTI, or volume-only input.",keyParameters:"<cifti-out> -volume <volume> <label> -left-metric <metric> -right-metric <metric> -timestep <seconds> -timestart <seconds>",keyPoints:"Core format for HCP-style analysis. Combines cortical surfaces and subcortical volumes. Standard grayordinate space is 91k (32k per hemisphere + subcortical).",typicalUse:"Creating CIFTI format fMRI data for HCP-style surface-based analysis.",inputExtensions:{volume_data:[".nii",".nii.gz"],structure_label_volume:[".nii",".nii.gz"],left_metric:[".func.gii",".shape.gii"],roi_left:[".func.gii",".shape.gii"],right_metric:[".func.gii",".shape.gii"],roi_right:[".func.gii",".shape.gii"],cerebellum_metric:[".func.gii",".shape.gii"]},outputExtensions:{cifti_output:[".dtseries.nii"]},docUrl:"https://www.humanconnectome.org/software/workbench-command/-cifti-create-dense-timeseries"},wb_command_cifti_separate:{cwlPath:"cwl/connectome_workbench/wb_command_cifti_separate.cwl",fullName:"Connectome Workbench CIFTI Separate",function:"Extracts surface or volume components from a CIFTI file into separate GIFTI metric or NIfTI volume files.",modality:"CIFTI dense file (.dscalar.nii, .dtseries.nii, etc.).",keyParameters:"<cifti-in> <direction> -volume-all <volume-out> -metric <structure> <metric-out>",keyPoints:"Opposite of cifti-create operations. Useful for extracting data for tools that do not support CIFTI format.",typicalUse:"Extracting surface or volume data from CIFTI files for further processing.",inputExtensions:{cifti_in:[".dtseries.nii",".dscalar.nii",".dlabel.nii",".dconn.nii"]},outputExtensions:{volume_output:[".nii",".nii.gz"],left_metric_output:[".func.gii"],right_metric_output:[".func.gii"]},docUrl:"https://www.humanconnectome.org/software/workbench-command/-cifti-separate"},wb_command_cifti_smoothing:{cwlPath:"cwl/connectome_workbench/wb_command_cifti_smoothing.cwl",fullName:"Connectome Workbench CIFTI Smoothing",function:"Applies geodesic Gaussian smoothing to CIFTI data on cortical surfaces and Euclidean smoothing in subcortical volumes.",modality:"CIFTI dense file plus surface files for each hemisphere.",keyParameters:"<cifti-in> <surface-kernel> <volume-kernel> <direction> <cifti-out> -left-surface <surface> -right-surface <surface> -fix-zeros-volume -fix-zeros-surface",keyPoints:"Surface smoothing follows cortical geometry (geodesic). Typical kernel 4-6mm FWHM. -fix-zeros prevents smoothing across medial wall.",typicalUse:"Spatial smoothing of fMRI data in CIFTI format for HCP-style pipelines.",inputExtensions:{cifti_in:[".dtseries.nii",".dscalar.nii",".dlabel.nii",".dconn.nii"],left_surface:[".surf.gii"],right_surface:[".surf.gii"],cerebellum_surface:[".surf.gii"],cifti_roi:[".dscalar.nii",".dlabel.nii",".dtseries.nii",".dconn.nii"]},outputExtensions:{smoothed_cifti:[".dtseries.nii",".dscalar.nii"]},docUrl:"https://www.humanconnectome.org/software/workbench-command/-cifti-smoothing"},wb_command_metric_smoothing:{cwlPath:"cwl/connectome_workbench/wb_command_metric_smoothing.cwl",fullName:"Connectome Workbench Surface Metric Smoothing",function:"Applies geodesic Gaussian smoothing to surface metric data following the cortical surface geometry.",modality:"Surface GIFTI (.surf.gii) plus metric GIFTI (.func.gii or .shape.gii).",keyParameters:"<surface> <metric-in> <smoothing-kernel> <metric-out> -roi <roi-metric> -fix-zeros",keyPoints:"Smoothing follows cortical folding pattern rather than 3D Euclidean distance. ROI can restrict smoothing to specific regions.",typicalUse:"Smoothing surface-based data (thickness, curvature, fMRI) for visualization or statistics.",inputExtensions:{surface:[".surf.gii"],metric_in:[".func.gii",".shape.gii"],roi:[".func.gii",".shape.gii"],corrected_areas:[".func.gii",".shape.gii"]},outputExtensions:{smoothed_metric:[".func.gii"]},docUrl:"https://www.humanconnectome.org/software/workbench-command/-metric-smoothing"},wb_command_surface_sphere_project_unproject:{cwlPath:"cwl/connectome_workbench/wb_command_surface_sphere_project_unproject.cwl",fullName:"Connectome Workbench Surface Registration Transform",function:"Applies MSM or FreeSurfer spherical registration by projecting coordinates through registered sphere to target space.",modality:"Surface GIFTI files (sphere-in, sphere-project-to, sphere-unproject-from).",keyParameters:"<surface-in> <sphere-in> <sphere-project-to> <sphere-unproject-from> <surface-out>",keyPoints:"Core operation for applying surface-based registration. Used to resample surfaces to different template spaces (fsaverage, fs_LR).",typicalUse:"Applying surface registration transforms to resample data between atlas spaces.",inputExtensions:{sphere_in:[".surf.gii"],sphere_project_to:[".surf.gii"],sphere_unproject_from:[".surf.gii"]},outputExtensions:{output_sphere:[".surf.gii"]},docUrl:"https://www.humanconnectome.org/software/workbench-command/-surface-sphere-project-unproject"},amico_noddi:{cwlPath:"cwl/amico/amico_noddi.cwl",fullName:"AMICO NODDI Fitting",function:"Fits the NODDI (Neurite Orientation Dispersion and Density Imaging) model to multi-shell diffusion MRI data using convex optimization for fast and robust estimation.",modality:"Multi-shell diffusion MRI (4D NIfTI) with b-values and b-vectors, plus brain mask.",keyParameters:'Python: amico.core.setup(), amico.core.load_data(), amico.core.set_model("NODDI"), amico.core.fit()',keyPoints:"Requires multi-shell acquisition (recommended: b=0,1000,2000 s/mm2). Outputs NDI (neurite density), ODI (orientation dispersion), and fISO (isotropic fraction). Much faster than original NODDI MATLAB toolbox.",typicalUse:"Microstructural imaging for neurite density and orientation dispersion in white matter.",inputExtensions:{dwi:[".nii",".nii.gz"],bvals:[".bval"],bvecs:[".bvec"],mask:[".nii",".nii.gz"]},outputExtensions:{ndi_map:[".nii.gz"],odi_map:[".nii.gz"],fiso_map:[".nii.gz"]},docUrl:"https://github.com/daducci/AMICO"}},Xp=["FSL","AFNI","SPM","FreeSurfer","ANTs","MRtrix3","fMRIPrep","MRIQC","Connectome Workbench","AMICO"],Jo={"I/O":[{name:"Input",fullName:"Workflow Input",function:"Represents external input data entering the workflow",typicalUse:"Connect to the first processing step to show where data comes from",isDummy:!0},{name:"Output",fullName:"Workflow Output",function:"Represents the final output of the workflow",typicalUse:"Connect from the last processing step to show where results go",isDummy:!0},{name:"BIDS Input",fullName:"BIDS Dataset Input",function:"Loads a BIDS-formatted neuroimaging dataset and exposes selected data streams as output ports",typicalUse:"Drag onto canvas, select your BIDS directory, choose subjects and modalities, then wire outputs to processing tools",isDummy:!0,isBIDS:!0}]},fw={FSL:["latest","6.0.4-patched2","6.0.4-patched","6.0.4","6.0.4-xenial","5.0.11","6.0.0","6.0.1","5.0.9"],AFNI:["latest","16.3.0"],ANTs:["latest","master","v2.6.5","2.6.5","v2.6.4","2.6.4","v2.6.3","2.6.3","v2.6.2","2.6.2","v2.6.1","2.6.1","v2.6.0","2.6.0","v2.5.4"],FreeSurfer:["latest","8.1.0","8.0.0","7.2.0","7.3.0","7.3.1","7.3.2","7.4.1","7.1.1","6.0"],MRtrix3:["latest","3.0.8","3.0.7","3.0.5","3.0.4","3.0.3"],fMRIPrep:["latest","unstable","25.2.4","premask","25.2.3","25.2.2","25.2.1","25.2.0","pre-release","25.1.4","25.1.3","25.1.2","25.1.1","25.1.0","25.0.0"],MRIQC:["latest","experimental","25.0.0rc0","24.0.2","24.0.1","24.0.0","24.0.0rc8","24.0.0rc7","24.0.0rc6","24.0.0rc5","24.0.0rc4","24.0.0rc3","24.0.0rc2","24.0.0rc1","23.1.1"],"Connectome Workbench":["latest"],AMICO:["latest","0.1.2","0.1.1","0.0.4"]},oc=["Structural MRI","Functional MRI","Diffusion MRI","Arterial Spin Labeling","PET","Multimodal","Utilities"],P1={"Structural MRI":"T1/T2-weighted imaging for brain anatomy. Used for skull-stripping, tissue segmentation, cortical reconstruction, and spatial registration.","Functional MRI":"BOLD-contrast imaging for brain activity. Used for motion correction, slice timing, spatial smoothing, temporal filtering, and statistical modeling.","Diffusion MRI":"Diffusion-weighted imaging for white matter microstructure. Used for eddy current correction, tensor fitting, tractography, and connectivity analysis.","Arterial Spin Labeling":"Non-invasive perfusion imaging using magnetically labeled blood. Used for cerebral blood flow quantification and partial volume correction.",PET:"Positron Emission Tomography for molecular imaging. Used for kinetic modeling, partial volume correction, and tracer-specific quantification.",Multimodal:"Cross-modality analysis pipelines. Tools that integrate structural, functional, and diffusion data for comprehensive brain mapping.",Utilities:"General-purpose neuroimaging utilities. Used for format conversion, image math, resampling, and quality control."},pw={"Structural MRI":{FSL:{"Brain Extraction":["bet"],"Tissue Segmentation":["fast","run_first_all"],Registration:["flirt","fnirt"],Pipelines:["fsl_anat","siena","sienax"],"Lesion Segmentation":["bianca"]},ANTs:{"Brain Extraction":["antsBrainExtraction.sh"],Segmentation:["Atropos","antsAtroposN4.sh"],Registration:["antsRegistration","antsRegistrationSyN.sh","antsRegistrationSyNQuick.sh"],"Cortical Thickness":["antsCorticalThickness.sh","KellyKapowski"]},FreeSurfer:{"Surface Reconstruction":["recon-all","mri_convert","mri_watershed","mri_normalize","mri_segment","mris_inflate","mris_sphere"],Parcellation:["mri_aparc2aseg","mri_annotation2label","mris_ca_label","mri_label2vol"],Morphometry:["mris_anatomical_stats","mri_segstats","aparcstats2table","asegstats2table"]},AFNI:{"Brain Extraction":["3dSkullStrip","@SSwarper"],"Bias Correction":["3dUnifize"],Registration:["3dAllineate","3dQwarp","@auto_tlrc"]},"Connectome Workbench":{"Surface Registration":["wb_command_surface_sphere_project_unproject"]}},"Functional MRI":{FSL:{"Motion Correction":["mcflirt"],"Slice Timing":["slicetimer"],"Distortion Correction":["fugue","topup","applytopup","fsl_prepare_fieldmap","prelude"],Smoothing:["susan"],"Statistical Analysis":["film_gls","flameo","randomise"],"ICA/Denoising":["melodic","dual_regression"]},AFNI:{"Motion Correction":["3dvolreg"],"Slice Timing":["3dTshift"],Denoising:["3dDespike","3dBandpass"],Smoothing:["3dBlurToFWHM","3dmerge"],Masking:["3dAutomask"],Registration:["align_epi_anat"],"Statistical Analysis":["3dDeconvolve","3dREMLfit","3dMEMA","3dANOVA","3dANOVA2","3dANOVA3","3dttest++","3dMVM","3dLME","3dLMEr"],"Multiple Comparisons":["3dClustSim","3dFWHMx"],Connectivity:["3dNetCorr","3dTcorr1D","3dTcorrMap","3dRSFC"],"ROI Analysis":["3dROIstats","3dmaskave"]},FreeSurfer:{"Functional Analysis":["bbregister","mri_vol2surf","mri_surf2vol","mris_preproc","mri_glmfit"]},ANTs:{"Motion Correction":["antsMotionCorr"]},fMRIPrep:{Pipeline:["fmriprep"]},MRIQC:{Pipeline:["mriqc"]},"Connectome Workbench":{"CIFTI Operations":["wb_command_cifti_create_dense_timeseries","wb_command_cifti_separate"],"Surface Smoothing":["wb_command_cifti_smoothing","wb_command_metric_smoothing"]}},"Diffusion MRI":{FSL:{Preprocessing:["eddy","topup"],"Tensor Fitting":["dtifit"],Tractography:["bedpostx","probtrackx2"],TBSS:["tbss_1_preproc","tbss_2_reg","tbss_3_postreg","tbss_4_prestats","tbss_non_FA"]},MRtrix3:{Preprocessing:["dwidenoise","mrdegibbs"],"Tensor/FOD":["dwi2tensor","tensor2metric","dwi2fod"],Tractography:["tckgen","tcksift","tck2connectome"]},FreeSurfer:{Diffusion:["dmri_postreg"]},AMICO:{"Microstructure Modeling":["amico_noddi"]}},"Arterial Spin Labeling":{FSL:{"ASL Processing":["oxford_asl","basil","asl_calib"]}},PET:{FreeSurfer:{"PET Processing":["mri_gtmpvc"]}},Multimodal:{ANTs:{"Intermodal Registration":["antsIntermodalityIntrasubject.sh"]}},Utilities:{FSL:{"Image Math":["fslmaths","fslstats","fslroi","fslmeants"],"Volume Operations":["fslsplit","fslmerge","fslreorient2std","robustfov"],"Warp Utilities":["applywarp","invwarp","convertwarp"],Clustering:["cluster"]},AFNI:{"Image Math":["3dcalc","3dTstat"],"Dataset Operations":["3dinfo","3dcopy","3dZeropad","3dTcat"],"ROI Utilities":["3dUndump","whereami","3dresample","3dfractionize"],"Warp Utilities":["3dNwarpApply","3dNwarpCat"]},ANTs:{"Preprocessing Utilities":["N4BiasFieldCorrection","DenoiseImage"],"Image Operations":["ImageMath","ThresholdImage"],"Label Analysis":["LabelGeometryMeasures","antsJointLabelFusion.sh"],"Transform Utilities":["antsApplyTransforms"]},FreeSurfer:{"Format Conversion":["mri_convert"]}}},gl=new Map(Object.entries(Jd).map(([e,t])=>[e,t]));for(const e of Object.values(Jo))for(const t of e)gl.set(t.name,t);function O1(e){const t={};for(const[n,i]of Object.entries(e)){t[n]={};for(const[r,s]of Object.entries(i)){t[n][r]={};for(const[o,a]of Object.entries(s))t[n][r][o]=a.map(c=>{const u=gl.get(c);return u?{name:c,...u}:null}).filter(Boolean)}}return t}const ac=O1(pw);if(typeof process>"u"){const e=new Set;for(const t of Object.values(pw))for(const n of Object.values(t))for(const i of Object.values(n))i.forEach(r=>e.add(r));for(const[t,n]of gl.entries())n.isDummy||e.has(t)||console.warn(`[toolAnnotations] Tool "${t}" has annotations but is not assigned to any modality`)}function Nu(e,t,n=300){const i=k.useRef(null),r=k.useRef(t);r.current=t,k.useEffect(()=>(i.current&&clearTimeout(i.current),i.current=setTimeout(()=>{try{localStorage.setItem(e,JSON.stringify(r.current))}catch(s){console.error(`Failed to save to localStorage key "${e}":`,s)}},n),()=>{i.current&&clearTimeout(i.current)}),[e,t,n])}function B1(){const[e,t]=k.useState(()=>{try{const o=JSON.parse(localStorage.getItem("customWorkflows"));return Array.isArray(o)?o:[]}catch{return[]}});return Nu("customWorkflows",e,300),{customWorkflows:e,saveWorkflow:o=>{const a=e.findIndex(c=>c.name===o.name);return a>=0?(t(c=>{const u=[...c];return u[a]={...o,id:c[a].id,createdAt:c[a].createdAt,updatedAt:Date.now()},u}),"updated"):(t(c=>[...c,{...o,id:crypto.randomUUID(),createdAt:Date.now(),updatedAt:Date.now()}]),"created")},updateWorkflow:(o,a)=>{t(c=>c.map(u=>u.id===o?{...u,...a,updatedAt:Date.now()}:u))},deleteWorkflow:o=>{t(a=>a.filter(c=>c.id!==o))},getNextDefaultName:()=>{const o=/^Custom Workflow (\d+)$/,a=e.map(u=>u.name.match(o)).filter(Boolean).map(u=>parseInt(u[1],10));return`Custom Workflow ${a.length===0?1:Math.max(...a)+1}`}}}const mw=k.createContext(null);function L1({children:e}){const t=B1();return l.jsx(mw.Provider,{value:t,children:e})}const ef=()=>k.useContext(mw);function U1({onEditWorkflow:e,onDeleteWorkflow:t}){const{customWorkflows:n,deleteWorkflow:i}=ef(),[r,s]=k.useState(()=>{const b={DummyNodes:!1,MyWorkflows:!1};return oc.forEach(N=>{b[N]=!1}),b}),[o,a]=k.useState(""),[c,u]=k.useState(null),d=k.useRef(null),f=k.useRef(null);k.useEffect(()=>{if(!c)return;const b=N=>{d.current&&!d.current.contains(N.target)&&u(null)};return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[c]);const p=k.useCallback(b=>{s(N=>({...N,[b]:!N[b]}))},[]),m=k.useCallback((b,N,T=!1)=>{var P;b.dataTransfer.setData("node/name",N),b.dataTransfer.setData("node/isDummy",T.toString());const C=(P=Jo["I/O"])==null?void 0:P.find(j=>j.name===N);C!=null&&C.isBIDS&&b.dataTransfer.setData("node/isBIDS","true")},[]),v=k.useCallback((b,N)=>{b.dataTransfer.setData("node/name",N.name),b.dataTransfer.setData("node/isDummy","false"),b.dataTransfer.setData("node/customWorkflowId",N.id)},[]),g=b=>{const N=ac[b];if(!N)return 0;let T=0;for(const C of Object.values(N))for(const P of Object.values(C))T+=P.length;return T},x=(b,N)=>{const T=b[N];return T?Object.values(T).reduce((C,P)=>C+P.length,0):0},h=k.useMemo(()=>{const b=o.trim().toLowerCase();if(!b)return null;let N=null,T=b;if(b.includes("/")){const P=b.indexOf("/");N=b.slice(0,P).trim(),T=b.slice(P+1).trim()}const C=[];for(const P of oc){const j=P.toLowerCase(),I=ac[P];if(I&&!(N&&!j.includes(N)))for(const[$,S]of Object.entries(I))for(const[F,w]of Object.entries(S))for(const B of w){if(N&&!T){C.push({modality:P,library:$,category:F,tool:B});continue}const H=T||b;[B.name,B.fullName||"",B.function||"",P].some(R=>R.toLowerCase().includes(H))&&C.push({modality:P,library:$,category:F,tool:B})}}for(const P of n){const j=P.nodes.filter(S=>!S.isDummy).map(S=>S.label),I=[P.name,...j],$=T||b;I.some(S=>S.toLowerCase().includes($))&&C.push({modality:"My Workflows",library:"Custom",category:"Custom",tool:{name:P.name,fullName:P.name,function:`Custom workflow with ${j.length} tools: ${j.join(", ")}`,typicalUse:`Tools: ${j.join(", ")}`},isCustomWorkflow:!0,customWorkflow:P})}return C},[o,n]),y=()=>{var b;a(""),(b=f.current)==null||b.focus()},_=()=>{if(h.length===0)return l.jsxs("div",{className:"workflow-search-empty",children:["No tools match ",o.trim(),""]});const b={};for(const N of h)b[N.modality]||(b[N.modality]=[]),b[N.modality].push(N);return Object.entries(b).map(([N,T])=>l.jsxs("div",{className:"search-result-group",children:[l.jsx("div",{className:"search-result-modality",children:N}),l.jsx("div",{className:"subsection-tools",children:T.map((C,P)=>l.jsx(jo,{name:C.tool.name,toolInfo:{fullName:C.tool.fullName,function:C.tool.function,modality:C.tool.modality,keyParameters:C.tool.keyParameters,keyPoints:C.tool.keyPoints,typicalUse:C.tool.typicalUse,docUrl:C.tool.docUrl},onDragStart:C.isCustomWorkflow?j=>v(j,C.customWorkflow):m,warningIcon:C.isCustomWorkflow&&C.customWorkflow.hasValidationWarnings},`search-${C.tool.name}-${P}`))})]},N))};return l.jsxs("div",{className:"workflow-menu-container",children:[c&&Nn.createPortal(l.jsxs("div",{ref:d,className:"delete-confirm-portal",style:{top:c.position.top,left:c.position.left,transform:"translateY(-50%)"},children:[l.jsxs("span",{className:"delete-confirm-text",children:["Delete ",c.wfName,"?"]}),l.jsx("span",{className:"delete-confirm-subtext",children:"All canvas instances will be removed."}),l.jsxs("div",{className:"delete-confirm-buttons",children:[l.jsx("button",{className:"delete-confirm-btn delete-confirm-yes",onClick:()=>{t&&t(c.wfId),u(null)},children:"Yes"}),l.jsx("button",{className:"delete-confirm-btn delete-confirm-no",onClick:()=>u(null),children:"No"})]})]}),document.body),l.jsx("div",{className:"workflow-search",children:l.jsx("input",{ref:f,type:"text",className:"workflow-search-input",placeholder:"Search tools...",value:o,onChange:b=>a(b.target.value),onKeyDown:b=>{b.key==="Escape"&&y()}})}),l.jsx("div",{className:"workflow-menu",children:h?_():l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"library-section",children:[l.jsxs("div",{className:"library-header io-header",onClick:()=>p("DummyNodes"),children:[l.jsx("span",{className:"chevron",children:r.DummyNodes?"":""}),l.jsx("span",{className:"library-name",children:"I/O"}),l.jsx("span",{className:"tool-count",children:Jo["I/O"].length})]}),r.DummyNodes&&l.jsx("div",{className:"library-tools",children:l.jsx("div",{className:"subsection-tools",children:Jo["I/O"].map((b,N)=>l.jsx(jo,{name:b.name,toolInfo:{fullName:b.fullName,function:b.function,typicalUse:b.typicalUse},onDragStart:(T,C)=>m(T,C,!0)},`dummy-${N}`))})})]}),n.length>0&&l.jsxs("div",{className:"library-section",children:[l.jsxs("div",{className:"library-header my-workflows-header",onClick:()=>p("MyWorkflows"),children:[l.jsx("span",{className:"chevron",children:r.MyWorkflows?"":""}),l.jsx("span",{className:"library-name",children:"My Workflows"}),l.jsx("span",{className:"tool-count",children:n.length})]}),r.MyWorkflows&&l.jsx("div",{className:"library-tools",children:l.jsx("div",{className:"subsection-tools",children:n.map(b=>{const N=b.nodes.filter(T=>!T.isDummy).map(T=>T.label);return l.jsxs("div",{className:"custom-workflow-item-wrapper",children:[l.jsx(jo,{name:b.name,toolInfo:{fullName:b.name,function:`Custom workflow with ${N.length} tools`,typicalUse:`Tools: ${N.join(", ")}`},onDragStart:T=>v(T,b),warningIcon:b.hasValidationWarnings}),l.jsx("div",{className:"custom-workflow-action-left",children:l.jsx("button",{className:"custom-workflow-action-btn edit-btn",title:"Edit in new workspace",onClick:T=>{T.stopPropagation(),e&&e(b)},children:""})}),l.jsx("div",{className:"custom-workflow-action-right",children:l.jsx("button",{className:"custom-workflow-action-btn delete-btn",title:"Delete workflow",onClick:T=>{T.stopPropagation();const C=T.currentTarget.getBoundingClientRect();u({wfId:b.id,wfName:b.name,position:{top:C.top+C.height/2,left:C.right+8}})},children:""})})]},b.id)})})})]}),oc.map(b=>{const N=ac[b],T=r[b],C=g(b),j=(N?Object.keys(N):[]).sort((I,$)=>{const S=Xp.indexOf(I),F=Xp.indexOf($);return(S===-1?999:S)-(F===-1?999:F)});return C===0?null:l.jsxs("div",{className:"modality-section",children:[l.jsx(z1,{name:b,description:P1[b],children:l.jsxs("div",{className:"modality-header",onClick:()=>p(b),children:[l.jsx("span",{className:"chevron",children:T?"":""}),l.jsx("span",{className:"modality-name",children:b}),l.jsx("span",{className:"tool-count",children:C})]})}),T&&l.jsx("div",{className:"modality-content",children:j.map(I=>{const $=N[I],S=`${b}::${I}`,F=r[S],w=x(N,I),B=Object.keys($||{});return w===0?null:l.jsxs("div",{className:"library-section",children:[l.jsxs("div",{className:"library-header",onClick:()=>p(S),children:[l.jsx("span",{className:"chevron",children:F?"":""}),l.jsx("span",{className:"library-name",children:I}),l.jsx("span",{className:"tool-count",children:w})]}),F&&l.jsx("div",{className:"library-tools",children:B.map(H=>l.jsxs("div",{className:"subsection",children:[l.jsx("div",{className:"subsection-header",children:H}),l.jsx("div",{className:"subsection-tools",children:$[H].map((W,R)=>l.jsx(jo,{name:W.name,toolInfo:{fullName:W.fullName,function:W.function,modality:W.modality,keyParameters:W.keyParameters,keyPoints:W.keyPoints,typicalUse:W.typicalUse,docUrl:W.docUrl},onDragStart:m},`${S}-${H}-${R}`))})]},H))})]},S)})})]},b)})]})})]})}function H1({workspaces:e,current:t,onChange:n}){const r=()=>{const s=e.length;return s<=5?[...Array(s).keys()]:t<3?[...Array(5).keys()]:t>=s-3?[...Array(5).keys()].map(o=>s-5+o):[0,"...",t,"...",s-1]};return l.jsxs("div",{className:"toggle-workflow-bar",children:[l.jsx("button",{className:"btn-secondary",disabled:t===0,onClick:()=>n(t-1),children:" Previous"}),l.jsx("div",{className:"page-numbers",children:r().map((s,o)=>s==="..."?l.jsx("span",{children:"..."},o):l.jsx("span",{className:s===t?"active":"",onClick:()=>n(s),children:s+1},o))}),l.jsx("button",{className:"btn-secondary",disabled:t===e.length-1,onClick:()=>n(t+1),children:"Next "})]})}function pt(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,i;n<e.length;n++)(i=pt(e[n]))!==""&&(t+=(t&&" ")+i);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var hw={exports:{}},gw={},yw={exports:{}},ww={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ir=k;function $1(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var W1=typeof Object.is=="function"?Object.is:$1,K1=Ir.useState,V1=Ir.useEffect,G1=Ir.useLayoutEffect,q1=Ir.useDebugValue;function Y1(e,t){var n=t(),i=K1({inst:{value:n,getSnapshot:t}}),r=i[0].inst,s=i[1];return G1(function(){r.value=n,r.getSnapshot=t,lc(r)&&s({inst:r})},[e,n,t]),V1(function(){return lc(r)&&s({inst:r}),e(function(){lc(r)&&s({inst:r})})},[e]),q1(n),n}function lc(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!W1(e,n)}catch{return!0}}function X1(e,t){return t()}var Z1=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?X1:Y1;ww.useSyncExternalStore=Ir.useSyncExternalStore!==void 0?Ir.useSyncExternalStore:Z1;yw.exports=ww;var Q1=yw.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yl=k,J1=Q1;function eE(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var tE=typeof Object.is=="function"?Object.is:eE,nE=J1.useSyncExternalStore,iE=yl.useRef,rE=yl.useEffect,sE=yl.useMemo,oE=yl.useDebugValue;gw.useSyncExternalStoreWithSelector=function(e,t,n,i,r){var s=iE(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=sE(function(){function c(m){if(!u){if(u=!0,d=m,m=i(m),r!==void 0&&o.hasValue){var v=o.value;if(r(v,m))return f=v}return f=m}if(v=f,tE(d,m))return v;var g=i(m);return r!==void 0&&r(v,g)?(d=m,v):(d=m,f=g)}var u=!1,d,f,p=n===void 0?null:n;return[function(){return c(t())},p===null?void 0:function(){return c(p())}]},[t,n,i,r]);var a=nE(e,s[0],s[1]);return rE(function(){o.hasValue=!0,o.value=a},[a]),oE(a),a};hw.exports=gw;var aE=hw.exports;const lE=Rr(aE),cE={},Zp=e=>{let t;const n=new Set,i=(d,f)=>{const p=typeof d=="function"?d(t):d;if(!Object.is(p,t)){const m=t;t=f??(typeof p!="object"||p===null)?p:Object.assign({},t,p),n.forEach(v=>v(t,m))}},r=()=>t,c={setState:i,getState:r,getInitialState:()=>u,subscribe:d=>(n.add(d),()=>n.delete(d)),destroy:()=>{(cE?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},u=t=e(i,r,c);return c},uE=e=>e?Zp(e):Zp,{useDebugValue:dE}=ie,{useSyncExternalStoreWithSelector:fE}=lE,pE=e=>e;function vw(e,t=pE,n){const i=fE(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return dE(i),i}const Qp=(e,t)=>{const n=uE(e),i=(r,s=t)=>vw(n,r,s);return Object.assign(i,n),i},mE=(e,t)=>e?Qp(e,t):Qp;function lt(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[i,r]of e)if(!Object.is(r,t.get(i)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const i of n)if(!Object.prototype.hasOwnProperty.call(t,i)||!Object.is(e[i],t[i]))return!1;return!0}var hE={value:()=>{}};function wl(){for(var e=0,t=arguments.length,n={},i;e<t;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new ea(n)}function ea(e){this._=e}function gE(e,t){return e.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}ea.prototype=wl.prototype={constructor:ea,on:function(e,t){var n=this._,i=gE(e+"",n),r,s=-1,o=i.length;if(arguments.length<2){for(;++s<o;)if((r=(e=i[s]).type)&&(r=yE(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(r=(e=i[s]).type)n[r]=Jp(n[r],e.name,t);else if(t==null)for(r in n)n[r]=Jp(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new ea(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,s;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],i=0,r=s.length;i<r;++i)s[i].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],r=0,s=i.length;r<s;++r)i[r].value.apply(t,n)}};function yE(e,t){for(var n=0,i=e.length,r;n<i;++n)if((r=e[n]).name===t)return r.value}function Jp(e,t,n){for(var i=0,r=e.length;i<r;++i)if(e[i].name===t){e[i]=hE,e=e.slice(0,i).concat(e.slice(i+1));break}return n!=null&&e.push({name:t,value:n}),e}var Su="http://www.w3.org/1999/xhtml";const em={svg:"http://www.w3.org/2000/svg",xhtml:Su,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function vl(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),em.hasOwnProperty(t)?{space:em[t],local:e}:e}function wE(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Su&&t.documentElement.namespaceURI===Su?t.createElement(e):t.createElementNS(n,e)}}function vE(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function xw(e){var t=vl(e);return(t.local?vE:wE)(t)}function xE(){}function tf(e){return e==null?xE:function(){return this.querySelector(e)}}function _E(e){typeof e!="function"&&(e=tf(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var s=t[r],o=s.length,a=i[r]=new Array(o),c,u,d=0;d<o;++d)(c=s[d])&&(u=e.call(c,c.__data__,d,s))&&("__data__"in c&&(u.__data__=c.__data__),a[d]=u);return new Ft(i,this._parents)}function bE(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function kE(){return[]}function _w(e){return e==null?kE:function(){return this.querySelectorAll(e)}}function EE(e){return function(){return bE(e.apply(this,arguments))}}function NE(e){typeof e=="function"?e=EE(e):e=_w(e);for(var t=this._groups,n=t.length,i=[],r=[],s=0;s<n;++s)for(var o=t[s],a=o.length,c,u=0;u<a;++u)(c=o[u])&&(i.push(e.call(c,c.__data__,u,o)),r.push(c));return new Ft(i,r)}function bw(e){return function(){return this.matches(e)}}function kw(e){return function(t){return t.matches(e)}}var SE=Array.prototype.find;function IE(e){return function(){return SE.call(this.children,e)}}function AE(){return this.firstElementChild}function CE(e){return this.select(e==null?AE:IE(typeof e=="function"?e:kw(e)))}var jE=Array.prototype.filter;function TE(){return Array.from(this.children)}function RE(e){return function(){return jE.call(this.children,e)}}function DE(e){return this.selectAll(e==null?TE:RE(typeof e=="function"?e:kw(e)))}function ME(e){typeof e!="function"&&(e=bw(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var s=t[r],o=s.length,a=i[r]=[],c,u=0;u<o;++u)(c=s[u])&&e.call(c,c.__data__,u,s)&&a.push(c);return new Ft(i,this._parents)}function Ew(e){return new Array(e.length)}function zE(){return new Ft(this._enter||this._groups.map(Ew),this._parents)}function Da(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Da.prototype={constructor:Da,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function FE(e){return function(){return e}}function PE(e,t,n,i,r,s){for(var o=0,a,c=t.length,u=s.length;o<u;++o)(a=t[o])?(a.__data__=s[o],i[o]=a):n[o]=new Da(e,s[o]);for(;o<c;++o)(a=t[o])&&(r[o]=a)}function OE(e,t,n,i,r,s,o){var a,c,u=new Map,d=t.length,f=s.length,p=new Array(d),m;for(a=0;a<d;++a)(c=t[a])&&(p[a]=m=o.call(c,c.__data__,a,t)+"",u.has(m)?r[a]=c:u.set(m,c));for(a=0;a<f;++a)m=o.call(e,s[a],a,s)+"",(c=u.get(m))?(i[a]=c,c.__data__=s[a],u.delete(m)):n[a]=new Da(e,s[a]);for(a=0;a<d;++a)(c=t[a])&&u.get(p[a])===c&&(r[a]=c)}function BE(e){return e.__data__}function LE(e,t){if(!arguments.length)return Array.from(this,BE);var n=t?OE:PE,i=this._parents,r=this._groups;typeof e!="function"&&(e=FE(e));for(var s=r.length,o=new Array(s),a=new Array(s),c=new Array(s),u=0;u<s;++u){var d=i[u],f=r[u],p=f.length,m=UE(e.call(d,d&&d.__data__,u,i)),v=m.length,g=a[u]=new Array(v),x=o[u]=new Array(v),h=c[u]=new Array(p);n(d,f,g,x,h,m,t);for(var y=0,_=0,b,N;y<v;++y)if(b=g[y]){for(y>=_&&(_=y+1);!(N=x[_])&&++_<v;);b._next=N||null}}return o=new Ft(o,i),o._enter=a,o._exit=c,o}function UE(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function HE(){return new Ft(this._exit||this._groups.map(Ew),this._parents)}function $E(e,t,n){var i=this.enter(),r=this,s=this.exit();return typeof e=="function"?(i=e(i),i&&(i=i.selection())):i=i.append(e+""),t!=null&&(r=t(r),r&&(r=r.selection())),n==null?s.remove():n(s),i&&r?i.merge(r).order():r}function WE(e){for(var t=e.selection?e.selection():e,n=this._groups,i=t._groups,r=n.length,s=i.length,o=Math.min(r,s),a=new Array(r),c=0;c<o;++c)for(var u=n[c],d=i[c],f=u.length,p=a[c]=new Array(f),m,v=0;v<f;++v)(m=u[v]||d[v])&&(p[v]=m);for(;c<r;++c)a[c]=n[c];return new Ft(a,this._parents)}function KE(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var i=e[t],r=i.length-1,s=i[r],o;--r>=0;)(o=i[r])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function VE(e){e||(e=GE);function t(f,p){return f&&p?e(f.__data__,p.__data__):!f-!p}for(var n=this._groups,i=n.length,r=new Array(i),s=0;s<i;++s){for(var o=n[s],a=o.length,c=r[s]=new Array(a),u,d=0;d<a;++d)(u=o[d])&&(c[d]=u);c.sort(t)}return new Ft(r,this._parents).order()}function GE(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function qE(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function YE(){return Array.from(this)}function XE(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],r=0,s=i.length;r<s;++r){var o=i[r];if(o)return o}return null}function ZE(){let e=0;for(const t of this)++e;return e}function QE(){return!this.node()}function JE(e){for(var t=this._groups,n=0,i=t.length;n<i;++n)for(var r=t[n],s=0,o=r.length,a;s<o;++s)(a=r[s])&&e.call(a,a.__data__,s,r);return this}function eN(e){return function(){this.removeAttribute(e)}}function tN(e){return function(){this.removeAttributeNS(e.space,e.local)}}function nN(e,t){return function(){this.setAttribute(e,t)}}function iN(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function rN(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function sN(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function oN(e,t){var n=vl(e);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((t==null?n.local?tN:eN:typeof t=="function"?n.local?sN:rN:n.local?iN:nN)(n,t))}function Nw(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function aN(e){return function(){this.style.removeProperty(e)}}function lN(e,t,n){return function(){this.style.setProperty(e,t,n)}}function cN(e,t,n){return function(){var i=t.apply(this,arguments);i==null?this.style.removeProperty(e):this.style.setProperty(e,i,n)}}function uN(e,t,n){return arguments.length>1?this.each((t==null?aN:typeof t=="function"?cN:lN)(e,t,n??"")):Ar(this.node(),e)}function Ar(e,t){return e.style.getPropertyValue(t)||Nw(e).getComputedStyle(e,null).getPropertyValue(t)}function dN(e){return function(){delete this[e]}}function fN(e,t){return function(){this[e]=t}}function pN(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function mN(e,t){return arguments.length>1?this.each((t==null?dN:typeof t=="function"?pN:fN)(e,t)):this.node()[e]}function Sw(e){return e.trim().split(/^|\s+/)}function nf(e){return e.classList||new Iw(e)}function Iw(e){this._node=e,this._names=Sw(e.getAttribute("class")||"")}Iw.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Aw(e,t){for(var n=nf(e),i=-1,r=t.length;++i<r;)n.add(t[i])}function Cw(e,t){for(var n=nf(e),i=-1,r=t.length;++i<r;)n.remove(t[i])}function hN(e){return function(){Aw(this,e)}}function gN(e){return function(){Cw(this,e)}}function yN(e,t){return function(){(t.apply(this,arguments)?Aw:Cw)(this,e)}}function wN(e,t){var n=Sw(e+"");if(arguments.length<2){for(var i=nf(this.node()),r=-1,s=n.length;++r<s;)if(!i.contains(n[r]))return!1;return!0}return this.each((typeof t=="function"?yN:t?hN:gN)(n,t))}function vN(){this.textContent=""}function xN(e){return function(){this.textContent=e}}function _N(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function bN(e){return arguments.length?this.each(e==null?vN:(typeof e=="function"?_N:xN)(e)):this.node().textContent}function kN(){this.innerHTML=""}function EN(e){return function(){this.innerHTML=e}}function NN(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function SN(e){return arguments.length?this.each(e==null?kN:(typeof e=="function"?NN:EN)(e)):this.node().innerHTML}function IN(){this.nextSibling&&this.parentNode.appendChild(this)}function AN(){return this.each(IN)}function CN(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function jN(){return this.each(CN)}function TN(e){var t=typeof e=="function"?e:xw(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function RN(){return null}function DN(e,t){var n=typeof e=="function"?e:xw(e),i=t==null?RN:typeof t=="function"?t:tf(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function MN(){var e=this.parentNode;e&&e.removeChild(this)}function zN(){return this.each(MN)}function FN(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function PN(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ON(e){return this.select(e?PN:FN)}function BN(e){return arguments.length?this.property("__data__",e):this.node().__data__}function LN(e){return function(t){e.call(this,t,this.__data__)}}function UN(e){return e.trim().split(/^|\s+/).map(function(t){var n="",i=t.indexOf(".");return i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),{type:t,name:n}})}function HN(e){return function(){var t=this.__on;if(t){for(var n=0,i=-1,r=t.length,s;n<r;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++i]=s;++i?t.length=i:delete this.__on}}}function $N(e,t,n){return function(){var i=this.__on,r,s=LN(t);if(i){for(var o=0,a=i.length;o<a;++o)if((r=i[o]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=s,r.options=n),r.value=t;return}}this.addEventListener(e.type,s,n),r={type:e.type,name:e.name,value:t,listener:s,options:n},i?i.push(r):this.__on=[r]}}function WN(e,t,n){var i=UN(e+""),r,s=i.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var c=0,u=a.length,d;c<u;++c)for(r=0,d=a[c];r<s;++r)if((o=i[r]).type===d.type&&o.name===d.name)return d.value}return}for(a=t?$N:HN,r=0;r<s;++r)this.each(a(i[r],t,n));return this}function jw(e,t,n){var i=Nw(e),r=i.CustomEvent;typeof r=="function"?r=new r(t,n):(r=i.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function KN(e,t){return function(){return jw(this,e,t)}}function VN(e,t){return function(){return jw(this,e,t.apply(this,arguments))}}function GN(e,t){return this.each((typeof t=="function"?VN:KN)(e,t))}function*qN(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],r=0,s=i.length,o;r<s;++r)(o=i[r])&&(yield o)}var Tw=[null];function Ft(e,t){this._groups=e,this._parents=t}function ro(){return new Ft([[document.documentElement]],Tw)}function YN(){return this}Ft.prototype=ro.prototype={constructor:Ft,select:_E,selectAll:NE,selectChild:CE,selectChildren:DE,filter:ME,data:LE,enter:zE,exit:HE,join:$E,merge:WE,selection:YN,order:KE,sort:VE,call:qE,nodes:YE,node:XE,size:ZE,empty:QE,each:JE,attr:oN,style:uN,property:mN,classed:wN,text:bN,html:SN,raise:AN,lower:jN,append:TN,insert:DN,remove:zN,clone:ON,datum:BN,on:WN,dispatch:GN,[Symbol.iterator]:qN};function Ht(e){return typeof e=="string"?new Ft([[document.querySelector(e)]],[document.documentElement]):new Ft([[e]],Tw)}function XN(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Qt(e,t){if(e=XN(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}const ZN={passive:!1},Ps={capture:!0,passive:!1};function cc(e){e.stopImmediatePropagation()}function gr(e){e.preventDefault(),e.stopImmediatePropagation()}function Rw(e){var t=e.document.documentElement,n=Ht(e).on("dragstart.drag",gr,Ps);"onselectstart"in t?n.on("selectstart.drag",gr,Ps):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Dw(e,t){var n=e.document.documentElement,i=Ht(e).on("dragstart.drag",null);t&&(i.on("click.drag",gr,Ps),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const To=e=>()=>e;function Iu(e,{sourceEvent:t,subject:n,target:i,identifier:r,active:s,x:o,y:a,dx:c,dy:u,dispatch:d}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:d}})}Iu.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function QN(e){return!e.ctrlKey&&!e.button}function JN(){return this.parentNode}function eS(e,t){return t??{x:e.x,y:e.y}}function tS(){return navigator.maxTouchPoints||"ontouchstart"in this}function nS(){var e=QN,t=JN,n=eS,i=tS,r={},s=wl("start","drag","end"),o=0,a,c,u,d,f=0;function p(b){b.on("mousedown.drag",m).filter(i).on("touchstart.drag",x).on("touchmove.drag",h,ZN).on("touchend.drag touchcancel.drag",y).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function m(b,N){if(!(d||!e.call(this,b,N))){var T=_(this,t.call(this,b,N),b,N,"mouse");T&&(Ht(b.view).on("mousemove.drag",v,Ps).on("mouseup.drag",g,Ps),Rw(b.view),cc(b),u=!1,a=b.clientX,c=b.clientY,T("start",b))}}function v(b){if(gr(b),!u){var N=b.clientX-a,T=b.clientY-c;u=N*N+T*T>f}r.mouse("drag",b)}function g(b){Ht(b.view).on("mousemove.drag mouseup.drag",null),Dw(b.view,u),gr(b),r.mouse("end",b)}function x(b,N){if(e.call(this,b,N)){var T=b.changedTouches,C=t.call(this,b,N),P=T.length,j,I;for(j=0;j<P;++j)(I=_(this,C,b,N,T[j].identifier,T[j]))&&(cc(b),I("start",b,T[j]))}}function h(b){var N=b.changedTouches,T=N.length,C,P;for(C=0;C<T;++C)(P=r[N[C].identifier])&&(gr(b),P("drag",b,N[C]))}function y(b){var N=b.changedTouches,T=N.length,C,P;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),C=0;C<T;++C)(P=r[N[C].identifier])&&(cc(b),P("end",b,N[C]))}function _(b,N,T,C,P,j){var I=s.copy(),$=Qt(j||T,N),S,F,w;if((w=n.call(b,new Iu("beforestart",{sourceEvent:T,target:p,identifier:P,active:o,x:$[0],y:$[1],dx:0,dy:0,dispatch:I}),C))!=null)return S=w.x-$[0]||0,F=w.y-$[1]||0,function B(H,W,R){var D=$,U;switch(H){case"start":r[P]=B,U=o++;break;case"end":delete r[P],--o;case"drag":$=Qt(R||W,N),U=o;break}I.call(H,b,new Iu(H,{sourceEvent:W,subject:w,target:p,identifier:P,active:U,x:$[0]+S,y:$[1]+F,dx:$[0]-D[0],dy:$[1]-D[1],dispatch:I}),C)}}return p.filter=function(b){return arguments.length?(e=typeof b=="function"?b:To(!!b),p):e},p.container=function(b){return arguments.length?(t=typeof b=="function"?b:To(b),p):t},p.subject=function(b){return arguments.length?(n=typeof b=="function"?b:To(b),p):n},p.touchable=function(b){return arguments.length?(i=typeof b=="function"?b:To(!!b),p):i},p.on=function(){var b=s.on.apply(s,arguments);return b===s?p:b},p.clickDistance=function(b){return arguments.length?(f=(b=+b)*b,p):Math.sqrt(f)},p}function rf(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Mw(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function so(){}var Os=.7,Ma=1/Os,yr="\\s*([+-]?\\d+)\\s*",Bs="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",mn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",iS=/^#([0-9a-f]{3,8})$/,rS=new RegExp(`^rgb\\(${yr},${yr},${yr}\\)$`),sS=new RegExp(`^rgb\\(${mn},${mn},${mn}\\)$`),oS=new RegExp(`^rgba\\(${yr},${yr},${yr},${Bs}\\)$`),aS=new RegExp(`^rgba\\(${mn},${mn},${mn},${Bs}\\)$`),lS=new RegExp(`^hsl\\(${Bs},${mn},${mn}\\)$`),cS=new RegExp(`^hsla\\(${Bs},${mn},${mn},${Bs}\\)$`),tm={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};rf(so,Ls,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:nm,formatHex:nm,formatHex8:uS,formatHsl:dS,formatRgb:im,toString:im});function nm(){return this.rgb().formatHex()}function uS(){return this.rgb().formatHex8()}function dS(){return zw(this).formatHsl()}function im(){return this.rgb().formatRgb()}function Ls(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=iS.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?rm(t):n===3?new It(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Ro(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Ro(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=rS.exec(e))?new It(t[1],t[2],t[3],1):(t=sS.exec(e))?new It(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=oS.exec(e))?Ro(t[1],t[2],t[3],t[4]):(t=aS.exec(e))?Ro(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=lS.exec(e))?am(t[1],t[2]/100,t[3]/100,1):(t=cS.exec(e))?am(t[1],t[2]/100,t[3]/100,t[4]):tm.hasOwnProperty(e)?rm(tm[e]):e==="transparent"?new It(NaN,NaN,NaN,0):null}function rm(e){return new It(e>>16&255,e>>8&255,e&255,1)}function Ro(e,t,n,i){return i<=0&&(e=t=n=NaN),new It(e,t,n,i)}function fS(e){return e instanceof so||(e=Ls(e)),e?(e=e.rgb(),new It(e.r,e.g,e.b,e.opacity)):new It}function Au(e,t,n,i){return arguments.length===1?fS(e):new It(e,t,n,i??1)}function It(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}rf(It,Au,Mw(so,{brighter(e){return e=e==null?Ma:Math.pow(Ma,e),new It(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Os:Math.pow(Os,e),new It(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new It(Ni(this.r),Ni(this.g),Ni(this.b),za(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:sm,formatHex:sm,formatHex8:pS,formatRgb:om,toString:om}));function sm(){return`#${_i(this.r)}${_i(this.g)}${_i(this.b)}`}function pS(){return`#${_i(this.r)}${_i(this.g)}${_i(this.b)}${_i((isNaN(this.opacity)?1:this.opacity)*255)}`}function om(){const e=za(this.opacity);return`${e===1?"rgb(":"rgba("}${Ni(this.r)}, ${Ni(this.g)}, ${Ni(this.b)}${e===1?")":`, ${e})`}`}function za(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ni(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function _i(e){return e=Ni(e),(e<16?"0":"")+e.toString(16)}function am(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new en(e,t,n,i)}function zw(e){if(e instanceof en)return new en(e.h,e.s,e.l,e.opacity);if(e instanceof so||(e=Ls(e)),!e)return new en;if(e instanceof en)return e;e=e.rgb();var t=e.r/255,n=e.g/255,i=e.b/255,r=Math.min(t,n,i),s=Math.max(t,n,i),o=NaN,a=s-r,c=(s+r)/2;return a?(t===s?o=(n-i)/a+(n<i)*6:n===s?o=(i-t)/a+2:o=(t-n)/a+4,a/=c<.5?s+r:2-s-r,o*=60):a=c>0&&c<1?0:o,new en(o,a,c,e.opacity)}function mS(e,t,n,i){return arguments.length===1?zw(e):new en(e,t,n,i??1)}function en(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}rf(en,mS,Mw(so,{brighter(e){return e=e==null?Ma:Math.pow(Ma,e),new en(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Os:Math.pow(Os,e),new en(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,r=2*n-i;return new It(uc(e>=240?e-240:e+120,r,i),uc(e,r,i),uc(e<120?e+240:e-120,r,i),this.opacity)},clamp(){return new en(lm(this.h),Do(this.s),Do(this.l),za(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=za(this.opacity);return`${e===1?"hsl(":"hsla("}${lm(this.h)}, ${Do(this.s)*100}%, ${Do(this.l)*100}%${e===1?")":`, ${e})`}`}}));function lm(e){return e=(e||0)%360,e<0?e+360:e}function Do(e){return Math.max(0,Math.min(1,e||0))}function uc(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Fw=e=>()=>e;function hS(e,t){return function(n){return e+n*t}}function gS(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}function yS(e){return(e=+e)==1?Pw:function(t,n){return n-t?gS(t,n,e):Fw(isNaN(t)?n:t)}}function Pw(e,t){var n=t-e;return n?hS(e,n):Fw(isNaN(e)?t:e)}const cm=function e(t){var n=yS(t);function i(r,s){var o=n((r=Au(r)).r,(s=Au(s)).r),a=n(r.g,s.g),c=n(r.b,s.b),u=Pw(r.opacity,s.opacity);return function(d){return r.r=o(d),r.g=a(d),r.b=c(d),r.opacity=u(d),r+""}}return i.gamma=e,i}(1);function Wn(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Cu=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,dc=new RegExp(Cu.source,"g");function wS(e){return function(){return e}}function vS(e){return function(t){return e(t)+""}}function xS(e,t){var n=Cu.lastIndex=dc.lastIndex=0,i,r,s,o=-1,a=[],c=[];for(e=e+"",t=t+"";(i=Cu.exec(e))&&(r=dc.exec(t));)(s=r.index)>n&&(s=t.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(i=i[0])===(r=r[0])?a[o]?a[o]+=r:a[++o]=r:(a[++o]=null,c.push({i:o,x:Wn(i,r)})),n=dc.lastIndex;return n<t.length&&(s=t.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?c[0]?vS(c[0].x):wS(t):(t=c.length,function(u){for(var d=0,f;d<t;++d)a[(f=c[d]).i]=f.x(u);return a.join("")})}var um=180/Math.PI,ju={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ow(e,t,n,i,r,s){var o,a,c;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(c=e*n+t*i)&&(n-=e*c,i-=t*c),(a=Math.sqrt(n*n+i*i))&&(n/=a,i/=a,c/=a),e*i<t*n&&(e=-e,t=-t,c=-c,o=-o),{translateX:r,translateY:s,rotate:Math.atan2(t,e)*um,skewX:Math.atan(c)*um,scaleX:o,scaleY:a}}var Mo;function _S(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?ju:Ow(t.a,t.b,t.c,t.d,t.e,t.f)}function bS(e){return e==null||(Mo||(Mo=document.createElementNS("http://www.w3.org/2000/svg","g")),Mo.setAttribute("transform",e),!(e=Mo.transform.baseVal.consolidate()))?ju:(e=e.matrix,Ow(e.a,e.b,e.c,e.d,e.e,e.f))}function Bw(e,t,n,i){function r(u){return u.length?u.pop()+" ":""}function s(u,d,f,p,m,v){if(u!==f||d!==p){var g=m.push("translate(",null,t,null,n);v.push({i:g-4,x:Wn(u,f)},{i:g-2,x:Wn(d,p)})}else(f||p)&&m.push("translate("+f+t+p+n)}function o(u,d,f,p){u!==d?(u-d>180?d+=360:d-u>180&&(u+=360),p.push({i:f.push(r(f)+"rotate(",null,i)-2,x:Wn(u,d)})):d&&f.push(r(f)+"rotate("+d+i)}function a(u,d,f,p){u!==d?p.push({i:f.push(r(f)+"skewX(",null,i)-2,x:Wn(u,d)}):d&&f.push(r(f)+"skewX("+d+i)}function c(u,d,f,p,m,v){if(u!==f||d!==p){var g=m.push(r(m)+"scale(",null,",",null,")");v.push({i:g-4,x:Wn(u,f)},{i:g-2,x:Wn(d,p)})}else(f!==1||p!==1)&&m.push(r(m)+"scale("+f+","+p+")")}return function(u,d){var f=[],p=[];return u=e(u),d=e(d),s(u.translateX,u.translateY,d.translateX,d.translateY,f,p),o(u.rotate,d.rotate,f,p),a(u.skewX,d.skewX,f,p),c(u.scaleX,u.scaleY,d.scaleX,d.scaleY,f,p),u=d=null,function(m){for(var v=-1,g=p.length,x;++v<g;)f[(x=p[v]).i]=x.x(m);return f.join("")}}}var kS=Bw(_S,"px, ","px)","deg)"),ES=Bw(bS,", ",")",")"),NS=1e-12;function dm(e){return((e=Math.exp(e))+1/e)/2}function SS(e){return((e=Math.exp(e))-1/e)/2}function IS(e){return((e=Math.exp(2*e))-1)/(e+1)}const AS=function e(t,n,i){function r(s,o){var a=s[0],c=s[1],u=s[2],d=o[0],f=o[1],p=o[2],m=d-a,v=f-c,g=m*m+v*v,x,h;if(g<NS)h=Math.log(p/u)/t,x=function(C){return[a+C*m,c+C*v,u*Math.exp(t*C*h)]};else{var y=Math.sqrt(g),_=(p*p-u*u+i*g)/(2*u*n*y),b=(p*p-u*u-i*g)/(2*p*n*y),N=Math.log(Math.sqrt(_*_+1)-_),T=Math.log(Math.sqrt(b*b+1)-b);h=(T-N)/t,x=function(C){var P=C*h,j=dm(N),I=u/(n*y)*(j*IS(t*P+N)-SS(N));return[a+I*m,c+I*v,u*j/dm(t*P+N)]}}return x.duration=h*1e3*t/Math.SQRT2,x}return r.rho=function(s){var o=Math.max(.001,+s),a=o*o,c=a*a;return e(o,a,c)},r}(Math.SQRT2,2,4);var Cr=0,rs=0,Gr=0,Lw=1e3,Fa,ss,Pa=0,Mi=0,xl=0,Us=typeof performance=="object"&&performance.now?performance:Date,Uw=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function sf(){return Mi||(Uw(CS),Mi=Us.now()+xl)}function CS(){Mi=0}function Oa(){this._call=this._time=this._next=null}Oa.prototype=Hw.prototype={constructor:Oa,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?sf():+n)+(t==null?0:+t),!this._next&&ss!==this&&(ss?ss._next=this:Fa=this,ss=this),this._call=e,this._time=n,Tu()},stop:function(){this._call&&(this._call=null,this._time=1/0,Tu())}};function Hw(e,t,n){var i=new Oa;return i.restart(e,t,n),i}function jS(){sf(),++Cr;for(var e=Fa,t;e;)(t=Mi-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Cr}function fm(){Mi=(Pa=Us.now())+xl,Cr=rs=0;try{jS()}finally{Cr=0,RS(),Mi=0}}function TS(){var e=Us.now(),t=e-Pa;t>Lw&&(xl-=t,Pa=e)}function RS(){for(var e,t=Fa,n,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Fa=n);ss=e,Tu(i)}function Tu(e){if(!Cr){rs&&(rs=clearTimeout(rs));var t=e-Mi;t>24?(e<1/0&&(rs=setTimeout(fm,e-Us.now()-xl)),Gr&&(Gr=clearInterval(Gr))):(Gr||(Pa=Us.now(),Gr=setInterval(TS,Lw)),Cr=1,Uw(fm))}}function pm(e,t,n){var i=new Oa;return t=t==null?0:+t,i.restart(r=>{i.stop(),e(r+t)},t,n),i}var DS=wl("start","end","cancel","interrupt"),MS=[],$w=0,mm=1,Ru=2,ta=3,hm=4,Du=5,na=6;function _l(e,t,n,i,r,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;zS(e,n,{name:t,index:i,group:r,on:DS,tween:MS,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:$w})}function of(e,t){var n=an(e,t);if(n.state>$w)throw new Error("too late; already scheduled");return n}function gn(e,t){var n=an(e,t);if(n.state>ta)throw new Error("too late; already running");return n}function an(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function zS(e,t,n){var i=e.__transition,r;i[t]=n,n.timer=Hw(s,0,n.time);function s(u){n.state=mm,n.timer.restart(o,n.delay,n.time),n.delay<=u&&o(u-n.delay)}function o(u){var d,f,p,m;if(n.state!==mm)return c();for(d in i)if(m=i[d],m.name===n.name){if(m.state===ta)return pm(o);m.state===hm?(m.state=na,m.timer.stop(),m.on.call("interrupt",e,e.__data__,m.index,m.group),delete i[d]):+d<t&&(m.state=na,m.timer.stop(),m.on.call("cancel",e,e.__data__,m.index,m.group),delete i[d])}if(pm(function(){n.state===ta&&(n.state=hm,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=Ru,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Ru){for(n.state=ta,r=new Array(p=n.tween.length),d=0,f=-1;d<p;++d)(m=n.tween[d].value.call(e,e.__data__,n.index,n.group))&&(r[++f]=m);r.length=f+1}}function a(u){for(var d=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(c),n.state=Du,1),f=-1,p=r.length;++f<p;)r[f].call(e,d);n.state===Du&&(n.on.call("end",e,e.__data__,n.index,n.group),c())}function c(){n.state=na,n.timer.stop(),delete i[t];for(var u in i)return;delete e.__transition}}function ia(e,t){var n=e.__transition,i,r,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((i=n[o]).name!==t){s=!1;continue}r=i.state>Ru&&i.state<Du,i.state=na,i.timer.stop(),i.on.call(r?"interrupt":"cancel",e,e.__data__,i.index,i.group),delete n[o]}s&&delete e.__transition}}function FS(e){return this.each(function(){ia(this,e)})}function PS(e,t){var n,i;return function(){var r=gn(this,e),s=r.tween;if(s!==n){i=n=s;for(var o=0,a=i.length;o<a;++o)if(i[o].name===t){i=i.slice(),i.splice(o,1);break}}r.tween=i}}function OS(e,t,n){var i,r;if(typeof n!="function")throw new Error;return function(){var s=gn(this,e),o=s.tween;if(o!==i){r=(i=o).slice();for(var a={name:t,value:n},c=0,u=r.length;c<u;++c)if(r[c].name===t){r[c]=a;break}c===u&&r.push(a)}s.tween=r}}function BS(e,t){var n=this._id;if(e+="",arguments.length<2){for(var i=an(this.node(),n).tween,r=0,s=i.length,o;r<s;++r)if((o=i[r]).name===e)return o.value;return null}return this.each((t==null?PS:OS)(n,e,t))}function af(e,t,n){var i=e._id;return e.each(function(){var r=gn(this,i);(r.value||(r.value={}))[t]=n.apply(this,arguments)}),function(r){return an(r,i).value[t]}}function Ww(e,t){var n;return(typeof t=="number"?Wn:t instanceof Ls?cm:(n=Ls(t))?(t=n,cm):xS)(e,t)}function LS(e){return function(){this.removeAttribute(e)}}function US(e){return function(){this.removeAttributeNS(e.space,e.local)}}function HS(e,t,n){var i,r=n+"",s;return function(){var o=this.getAttribute(e);return o===r?null:o===i?s:s=t(i=o,n)}}function $S(e,t,n){var i,r=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===r?null:o===i?s:s=t(i=o,n)}}function WS(e,t,n){var i,r,s;return function(){var o,a=n(this),c;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),c=a+"",o===c?null:o===i&&c===r?s:(r=c,s=t(i=o,a)))}}function KS(e,t,n){var i,r,s;return function(){var o,a=n(this),c;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),c=a+"",o===c?null:o===i&&c===r?s:(r=c,s=t(i=o,a)))}}function VS(e,t){var n=vl(e),i=n==="transform"?ES:Ww;return this.attrTween(e,typeof t=="function"?(n.local?KS:WS)(n,i,af(this,"attr."+e,t)):t==null?(n.local?US:LS)(n):(n.local?$S:HS)(n,i,t))}function GS(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function qS(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function YS(e,t){var n,i;function r(){var s=t.apply(this,arguments);return s!==i&&(n=(i=s)&&qS(e,s)),n}return r._value=t,r}function XS(e,t){var n,i;function r(){var s=t.apply(this,arguments);return s!==i&&(n=(i=s)&&GS(e,s)),n}return r._value=t,r}function ZS(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var i=vl(e);return this.tween(n,(i.local?YS:XS)(i,t))}function QS(e,t){return function(){of(this,e).delay=+t.apply(this,arguments)}}function JS(e,t){return t=+t,function(){of(this,e).delay=t}}function eI(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?QS:JS)(t,e)):an(this.node(),t).delay}function tI(e,t){return function(){gn(this,e).duration=+t.apply(this,arguments)}}function nI(e,t){return t=+t,function(){gn(this,e).duration=t}}function iI(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?tI:nI)(t,e)):an(this.node(),t).duration}function rI(e,t){if(typeof t!="function")throw new Error;return function(){gn(this,e).ease=t}}function sI(e){var t=this._id;return arguments.length?this.each(rI(t,e)):an(this.node(),t).ease}function oI(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;gn(this,e).ease=n}}function aI(e){if(typeof e!="function")throw new Error;return this.each(oI(this._id,e))}function lI(e){typeof e!="function"&&(e=bw(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var s=t[r],o=s.length,a=i[r]=[],c,u=0;u<o;++u)(c=s[u])&&e.call(c,c.__data__,u,s)&&a.push(c);return new Mn(i,this._parents,this._name,this._id)}function cI(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,i=t.length,r=n.length,s=Math.min(i,r),o=new Array(i),a=0;a<s;++a)for(var c=t[a],u=n[a],d=c.length,f=o[a]=new Array(d),p,m=0;m<d;++m)(p=c[m]||u[m])&&(f[m]=p);for(;a<i;++a)o[a]=t[a];return new Mn(o,this._parents,this._name,this._id)}function uI(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function dI(e,t,n){var i,r,s=uI(t)?of:gn;return function(){var o=s(this,e),a=o.on;a!==i&&(r=(i=a).copy()).on(t,n),o.on=r}}function fI(e,t){var n=this._id;return arguments.length<2?an(this.node(),n).on.on(e):this.each(dI(n,e,t))}function pI(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function mI(){return this.on("end.remove",pI(this._id))}function hI(e){var t=this._name,n=this._id;typeof e!="function"&&(e=tf(e));for(var i=this._groups,r=i.length,s=new Array(r),o=0;o<r;++o)for(var a=i[o],c=a.length,u=s[o]=new Array(c),d,f,p=0;p<c;++p)(d=a[p])&&(f=e.call(d,d.__data__,p,a))&&("__data__"in d&&(f.__data__=d.__data__),u[p]=f,_l(u[p],t,n,p,u,an(d,n)));return new Mn(s,this._parents,t,n)}function gI(e){var t=this._name,n=this._id;typeof e!="function"&&(e=_w(e));for(var i=this._groups,r=i.length,s=[],o=[],a=0;a<r;++a)for(var c=i[a],u=c.length,d,f=0;f<u;++f)if(d=c[f]){for(var p=e.call(d,d.__data__,f,c),m,v=an(d,n),g=0,x=p.length;g<x;++g)(m=p[g])&&_l(m,t,n,g,p,v);s.push(p),o.push(d)}return new Mn(s,o,t,n)}var yI=ro.prototype.constructor;function wI(){return new yI(this._groups,this._parents)}function vI(e,t){var n,i,r;return function(){var s=Ar(this,e),o=(this.style.removeProperty(e),Ar(this,e));return s===o?null:s===n&&o===i?r:r=t(n=s,i=o)}}function Kw(e){return function(){this.style.removeProperty(e)}}function xI(e,t,n){var i,r=n+"",s;return function(){var o=Ar(this,e);return o===r?null:o===i?s:s=t(i=o,n)}}function _I(e,t,n){var i,r,s;return function(){var o=Ar(this,e),a=n(this),c=a+"";return a==null&&(c=a=(this.style.removeProperty(e),Ar(this,e))),o===c?null:o===i&&c===r?s:(r=c,s=t(i=o,a))}}function bI(e,t){var n,i,r,s="style."+t,o="end."+s,a;return function(){var c=gn(this,e),u=c.on,d=c.value[s]==null?a||(a=Kw(t)):void 0;(u!==n||r!==d)&&(i=(n=u).copy()).on(o,r=d),c.on=i}}function kI(e,t,n){var i=(e+="")=="transform"?kS:Ww;return t==null?this.styleTween(e,vI(e,i)).on("end.style."+e,Kw(e)):typeof t=="function"?this.styleTween(e,_I(e,i,af(this,"style."+e,t))).each(bI(this._id,e)):this.styleTween(e,xI(e,i,t),n).on("end.style."+e,null)}function EI(e,t,n){return function(i){this.style.setProperty(e,t.call(this,i),n)}}function NI(e,t,n){var i,r;function s(){var o=t.apply(this,arguments);return o!==r&&(i=(r=o)&&EI(e,o,n)),i}return s._value=t,s}function SI(e,t,n){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;return this.tween(i,NI(e,t,n??""))}function II(e){return function(){this.textContent=e}}function AI(e){return function(){var t=e(this);this.textContent=t??""}}function CI(e){return this.tween("text",typeof e=="function"?AI(af(this,"text",e)):II(e==null?"":e+""))}function jI(e){return function(t){this.textContent=e.call(this,t)}}function TI(e){var t,n;function i(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&jI(r)),t}return i._value=e,i}function RI(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,TI(e))}function DI(){for(var e=this._name,t=this._id,n=Vw(),i=this._groups,r=i.length,s=0;s<r;++s)for(var o=i[s],a=o.length,c,u=0;u<a;++u)if(c=o[u]){var d=an(c,t);_l(c,e,n,u,o,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new Mn(i,this._parents,e,n)}function MI(){var e,t,n=this,i=n._id,r=n.size();return new Promise(function(s,o){var a={value:o},c={value:function(){--r===0&&s()}};n.each(function(){var u=gn(this,i),d=u.on;d!==e&&(t=(e=d).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(c)),u.on=t}),r===0&&s()})}var zI=0;function Mn(e,t,n,i){this._groups=e,this._parents=t,this._name=n,this._id=i}function Vw(){return++zI}var yn=ro.prototype;Mn.prototype={constructor:Mn,select:hI,selectAll:gI,selectChild:yn.selectChild,selectChildren:yn.selectChildren,filter:lI,merge:cI,selection:wI,transition:DI,call:yn.call,nodes:yn.nodes,node:yn.node,size:yn.size,empty:yn.empty,each:yn.each,on:fI,attr:VS,attrTween:ZS,style:kI,styleTween:SI,text:CI,textTween:RI,remove:mI,tween:BS,delay:eI,duration:iI,ease:sI,easeVarying:aI,end:MI,[Symbol.iterator]:yn[Symbol.iterator]};function FI(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var PI={time:null,delay:0,duration:250,ease:FI};function OI(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function BI(e){var t,n;e instanceof Mn?(t=e._id,e=e._name):(t=Vw(),(n=PI).time=sf(),e=e==null?null:e+"");for(var i=this._groups,r=i.length,s=0;s<r;++s)for(var o=i[s],a=o.length,c,u=0;u<a;++u)(c=o[u])&&_l(c,e,t,u,o,n||OI(c,t));return new Mn(i,this._parents,e,t)}ro.prototype.interrupt=FS;ro.prototype.transition=BI;const zo=e=>()=>e;function LI(e,{sourceEvent:t,target:n,transform:i,dispatch:r}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:r}})}function kn(e,t,n){this.k=e,this.x=t,this.y=n}kn.prototype={constructor:kn,scale:function(e){return e===1?this:new kn(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new kn(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var An=new kn(1,0,0);kn.prototype;function fc(e){e.stopImmediatePropagation()}function qr(e){e.preventDefault(),e.stopImmediatePropagation()}function UI(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function HI(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function gm(){return this.__zoom||An}function $I(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function WI(){return navigator.maxTouchPoints||"ontouchstart"in this}function KI(e,t,n){var i=e.invertX(t[0][0])-n[0][0],r=e.invertX(t[1][0])-n[1][0],s=e.invertY(t[0][1])-n[0][1],o=e.invertY(t[1][1])-n[1][1];return e.translate(r>i?(i+r)/2:Math.min(0,i)||Math.max(0,r),o>s?(s+o)/2:Math.min(0,s)||Math.max(0,o))}function Gw(){var e=UI,t=HI,n=KI,i=$I,r=WI,s=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],a=250,c=AS,u=wl("start","zoom","end"),d,f,p,m=500,v=150,g=0,x=10;function h(w){w.property("__zoom",gm).on("wheel.zoom",P,{passive:!1}).on("mousedown.zoom",j).on("dblclick.zoom",I).filter(r).on("touchstart.zoom",$).on("touchmove.zoom",S).on("touchend.zoom touchcancel.zoom",F).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}h.transform=function(w,B,H,W){var R=w.selection?w.selection():w;R.property("__zoom",gm),w!==R?N(w,B,H,W):R.interrupt().each(function(){T(this,arguments).event(W).start().zoom(null,typeof B=="function"?B.apply(this,arguments):B).end()})},h.scaleBy=function(w,B,H,W){h.scaleTo(w,function(){var R=this.__zoom.k,D=typeof B=="function"?B.apply(this,arguments):B;return R*D},H,W)},h.scaleTo=function(w,B,H,W){h.transform(w,function(){var R=t.apply(this,arguments),D=this.__zoom,U=H==null?b(R):typeof H=="function"?H.apply(this,arguments):H,O=D.invert(U),A=typeof B=="function"?B.apply(this,arguments):B;return n(_(y(D,A),U,O),R,o)},H,W)},h.translateBy=function(w,B,H,W){h.transform(w,function(){return n(this.__zoom.translate(typeof B=="function"?B.apply(this,arguments):B,typeof H=="function"?H.apply(this,arguments):H),t.apply(this,arguments),o)},null,W)},h.translateTo=function(w,B,H,W,R){h.transform(w,function(){var D=t.apply(this,arguments),U=this.__zoom,O=W==null?b(D):typeof W=="function"?W.apply(this,arguments):W;return n(An.translate(O[0],O[1]).scale(U.k).translate(typeof B=="function"?-B.apply(this,arguments):-B,typeof H=="function"?-H.apply(this,arguments):-H),D,o)},W,R)};function y(w,B){return B=Math.max(s[0],Math.min(s[1],B)),B===w.k?w:new kn(B,w.x,w.y)}function _(w,B,H){var W=B[0]-H[0]*w.k,R=B[1]-H[1]*w.k;return W===w.x&&R===w.y?w:new kn(w.k,W,R)}function b(w){return[(+w[0][0]+ +w[1][0])/2,(+w[0][1]+ +w[1][1])/2]}function N(w,B,H,W){w.on("start.zoom",function(){T(this,arguments).event(W).start()}).on("interrupt.zoom end.zoom",function(){T(this,arguments).event(W).end()}).tween("zoom",function(){var R=this,D=arguments,U=T(R,D).event(W),O=t.apply(R,D),A=H==null?b(O):typeof H=="function"?H.apply(R,D):H,Y=Math.max(O[1][0]-O[0][0],O[1][1]-O[0][1]),G=R.__zoom,Z=typeof B=="function"?B.apply(R,D):B,se=c(G.invert(A).concat(Y/G.k),Z.invert(A).concat(Y/Z.k));return function(le){if(le===1)le=Z;else{var ae=se(le),oe=Y/ae[2];le=new kn(oe,A[0]-ae[0]*oe,A[1]-ae[1]*oe)}U.zoom(null,le)}})}function T(w,B,H){return!H&&w.__zooming||new C(w,B)}function C(w,B){this.that=w,this.args=B,this.active=0,this.sourceEvent=null,this.extent=t.apply(w,B),this.taps=0}C.prototype={event:function(w){return w&&(this.sourceEvent=w),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(w,B){return this.mouse&&w!=="mouse"&&(this.mouse[1]=B.invert(this.mouse[0])),this.touch0&&w!=="touch"&&(this.touch0[1]=B.invert(this.touch0[0])),this.touch1&&w!=="touch"&&(this.touch1[1]=B.invert(this.touch1[0])),this.that.__zoom=B,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(w){var B=Ht(this.that).datum();u.call(w,this.that,new LI(w,{sourceEvent:this.sourceEvent,target:h,transform:this.that.__zoom,dispatch:u}),B)}};function P(w,...B){if(!e.apply(this,arguments))return;var H=T(this,B).event(w),W=this.__zoom,R=Math.max(s[0],Math.min(s[1],W.k*Math.pow(2,i.apply(this,arguments)))),D=Qt(w);if(H.wheel)(H.mouse[0][0]!==D[0]||H.mouse[0][1]!==D[1])&&(H.mouse[1]=W.invert(H.mouse[0]=D)),clearTimeout(H.wheel);else{if(W.k===R)return;H.mouse=[D,W.invert(D)],ia(this),H.start()}qr(w),H.wheel=setTimeout(U,v),H.zoom("mouse",n(_(y(W,R),H.mouse[0],H.mouse[1]),H.extent,o));function U(){H.wheel=null,H.end()}}function j(w,...B){if(p||!e.apply(this,arguments))return;var H=w.currentTarget,W=T(this,B,!0).event(w),R=Ht(w.view).on("mousemove.zoom",A,!0).on("mouseup.zoom",Y,!0),D=Qt(w,H),U=w.clientX,O=w.clientY;Rw(w.view),fc(w),W.mouse=[D,this.__zoom.invert(D)],ia(this),W.start();function A(G){if(qr(G),!W.moved){var Z=G.clientX-U,se=G.clientY-O;W.moved=Z*Z+se*se>g}W.event(G).zoom("mouse",n(_(W.that.__zoom,W.mouse[0]=Qt(G,H),W.mouse[1]),W.extent,o))}function Y(G){R.on("mousemove.zoom mouseup.zoom",null),Dw(G.view,W.moved),qr(G),W.event(G).end()}}function I(w,...B){if(e.apply(this,arguments)){var H=this.__zoom,W=Qt(w.changedTouches?w.changedTouches[0]:w,this),R=H.invert(W),D=H.k*(w.shiftKey?.5:2),U=n(_(y(H,D),W,R),t.apply(this,B),o);qr(w),a>0?Ht(this).transition().duration(a).call(N,U,W,w):Ht(this).call(h.transform,U,W,w)}}function $(w,...B){if(e.apply(this,arguments)){var H=w.touches,W=H.length,R=T(this,B,w.changedTouches.length===W).event(w),D,U,O,A;for(fc(w),U=0;U<W;++U)O=H[U],A=Qt(O,this),A=[A,this.__zoom.invert(A),O.identifier],R.touch0?!R.touch1&&R.touch0[2]!==A[2]&&(R.touch1=A,R.taps=0):(R.touch0=A,D=!0,R.taps=1+!!d);d&&(d=clearTimeout(d)),D&&(R.taps<2&&(f=A[0],d=setTimeout(function(){d=null},m)),ia(this),R.start())}}function S(w,...B){if(this.__zooming){var H=T(this,B).event(w),W=w.changedTouches,R=W.length,D,U,O,A;for(qr(w),D=0;D<R;++D)U=W[D],O=Qt(U,this),H.touch0&&H.touch0[2]===U.identifier?H.touch0[0]=O:H.touch1&&H.touch1[2]===U.identifier&&(H.touch1[0]=O);if(U=H.that.__zoom,H.touch1){var Y=H.touch0[0],G=H.touch0[1],Z=H.touch1[0],se=H.touch1[1],le=(le=Z[0]-Y[0])*le+(le=Z[1]-Y[1])*le,ae=(ae=se[0]-G[0])*ae+(ae=se[1]-G[1])*ae;U=y(U,Math.sqrt(le/ae)),O=[(Y[0]+Z[0])/2,(Y[1]+Z[1])/2],A=[(G[0]+se[0])/2,(G[1]+se[1])/2]}else if(H.touch0)O=H.touch0[0],A=H.touch0[1];else return;H.zoom("touch",n(_(U,O,A),H.extent,o))}}function F(w,...B){if(this.__zooming){var H=T(this,B).event(w),W=w.changedTouches,R=W.length,D,U;for(fc(w),p&&clearTimeout(p),p=setTimeout(function(){p=null},m),D=0;D<R;++D)U=W[D],H.touch0&&H.touch0[2]===U.identifier?delete H.touch0:H.touch1&&H.touch1[2]===U.identifier&&delete H.touch1;if(H.touch1&&!H.touch0&&(H.touch0=H.touch1,delete H.touch1),H.touch0)H.touch0[1]=this.__zoom.invert(H.touch0[0]);else if(H.end(),H.taps===2&&(U=Qt(U,this),Math.hypot(f[0]-U[0],f[1]-U[1])<x)){var O=Ht(this).on("dblclick.zoom");O&&O.apply(this,arguments)}}}return h.wheelDelta=function(w){return arguments.length?(i=typeof w=="function"?w:zo(+w),h):i},h.filter=function(w){return arguments.length?(e=typeof w=="function"?w:zo(!!w),h):e},h.touchable=function(w){return arguments.length?(r=typeof w=="function"?w:zo(!!w),h):r},h.extent=function(w){return arguments.length?(t=typeof w=="function"?w:zo([[+w[0][0],+w[0][1]],[+w[1][0],+w[1][1]]]),h):t},h.scaleExtent=function(w){return arguments.length?(s[0]=+w[0],s[1]=+w[1],h):[s[0],s[1]]},h.translateExtent=function(w){return arguments.length?(o[0][0]=+w[0][0],o[1][0]=+w[1][0],o[0][1]=+w[0][1],o[1][1]=+w[1][1],h):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},h.constrain=function(w){return arguments.length?(n=w,h):n},h.duration=function(w){return arguments.length?(a=+w,h):a},h.interpolate=function(w){return arguments.length?(c=w,h):c},h.on=function(){var w=u.on.apply(u,arguments);return w===u?h:w},h.clickDistance=function(w){return arguments.length?(g=(w=+w)*w,h):Math.sqrt(g)},h.tapDistance=function(w){return arguments.length?(x=+w,h):x},h}const bl=k.createContext(null),VI=bl.Provider,zn={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},qw=zn.error001();function Le(e,t){const n=k.useContext(bl);if(n===null)throw new Error(qw);return vw(n,e,t)}const st=()=>{const e=k.useContext(bl);if(e===null)throw new Error(qw);return k.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},GI=e=>e.userSelectionActive?"none":"all";function lf({position:e,children:t,className:n,style:i,...r}){const s=Le(GI),o=`${e}`.split("-");return ie.createElement("div",{className:pt(["react-flow__panel",n,...o]),style:{...i,pointerEvents:s},...r},t)}function qI({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:ie.createElement(lf,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},ie.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const YI=({x:e,y:t,label:n,labelStyle:i={},labelShowBg:r=!0,labelBgStyle:s={},labelBgPadding:o=[2,4],labelBgBorderRadius:a=2,children:c,className:u,...d})=>{const f=k.useRef(null),[p,m]=k.useState({x:0,y:0,width:0,height:0}),v=pt(["react-flow__edge-textwrapper",u]);return k.useEffect(()=>{if(f.current){const g=f.current.getBBox();m({x:g.x,y:g.y,width:g.width,height:g.height})}},[n]),typeof n>"u"||!n?null:ie.createElement("g",{transform:`translate(${e-p.width/2} ${t-p.height/2})`,className:v,visibility:p.width?"visible":"hidden",...d},r&&ie.createElement("rect",{width:p.width+2*o[0],x:-o[0],y:-o[1],height:p.height+2*o[1],className:"react-flow__edge-textbg",style:s,rx:a,ry:a}),ie.createElement("text",{className:"react-flow__edge-text",y:p.height/2,dy:"0.3em",ref:f,style:i},n),c)};var XI=k.memo(YI);const cf=e=>({width:e.offsetWidth,height:e.offsetHeight}),jr=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),uf=(e={x:0,y:0},t)=>({x:jr(e.x,t[0][0],t[1][0]),y:jr(e.y,t[0][1],t[1][1])}),ym=(e,t,n)=>e<t?jr(Math.abs(e-t),1,50)/50:e>n?-jr(Math.abs(e-n),1,50)/50:0,Yw=(e,t)=>{const n=ym(e.x,35,t.width-35)*20,i=ym(e.y,35,t.height-35)*20;return[n,i]},Xw=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},Zw=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Hs=({x:e,y:t,width:n,height:i})=>({x:e,y:t,x2:e+n,y2:t+i}),Qw=({x:e,y:t,x2:n,y2:i})=>({x:e,y:t,width:n-e,height:i-t}),wm=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),ZI=(e,t)=>Qw(Zw(Hs(e),Hs(t))),Mu=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),i=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*i)},QI=e=>Wt(e.width)&&Wt(e.height)&&Wt(e.x)&&Wt(e.y),Wt=e=>!isNaN(e)&&isFinite(e),Qe=Symbol.for("internals"),Jw=["Enter"," ","Escape"],JI=(e,t)=>{},e3=e=>"nativeEvent"in e;function zu(e){var r,s;const t=e3(e)?e.nativeEvent:e,n=((s=(r=t.composedPath)==null?void 0:r.call(t))==null?void 0:s[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(n==null?void 0:n.nodeName)||(n==null?void 0:n.hasAttribute("contenteditable"))||!!(n!=null&&n.closest(".nokey"))}const ev=e=>"clientX"in e,oi=(e,t)=>{var s,o;const n=ev(e),i=n?e.clientX:(s=e.touches)==null?void 0:s[0].clientX,r=n?e.clientY:(o=e.touches)==null?void 0:o[0].clientY;return{x:i-((t==null?void 0:t.left)??0),y:r-((t==null?void 0:t.top)??0)}},Ba=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0},oo=({id:e,path:t,labelX:n,labelY:i,label:r,labelStyle:s,labelShowBg:o,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:p,interactionWidth:m=20})=>ie.createElement(ie.Fragment,null,ie.createElement("path",{id:e,style:d,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:f,markerStart:p}),m&&ie.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:m,className:"react-flow__edge-interaction"}),r&&Wt(n)&&Wt(i)?ie.createElement(XI,{x:n,y:i,label:r,labelStyle:s,labelShowBg:o,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:u}):null);oo.displayName="BaseEdge";function Yr(e,t,n){return n===void 0?n:i=>{const r=t().edges.find(s=>s.id===e);r&&n(i,{...r})}}function tv({sourceX:e,sourceY:t,targetX:n,targetY:i}){const r=Math.abs(n-e)/2,s=n<e?n+r:n-r,o=Math.abs(i-t)/2,a=i<t?i+o:i-o;return[s,a,r,o]}function nv({sourceX:e,sourceY:t,targetX:n,targetY:i,sourceControlX:r,sourceControlY:s,targetControlX:o,targetControlY:a}){const c=e*.125+r*.375+o*.375+n*.125,u=t*.125+s*.375+a*.375+i*.125,d=Math.abs(c-e),f=Math.abs(u-t);return[c,u,d,f]}var zi;(function(e){e.Strict="strict",e.Loose="loose"})(zi||(zi={}));var bi;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(bi||(bi={}));var $s;(function(e){e.Partial="partial",e.Full="full"})($s||($s={}));var Yn;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Yn||(Yn={}));var Ws;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Ws||(Ws={}));var ye;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(ye||(ye={}));function vm({pos:e,x1:t,y1:n,x2:i,y2:r}){return e===ye.Left||e===ye.Right?[.5*(t+i),n]:[t,.5*(n+r)]}function iv({sourceX:e,sourceY:t,sourcePosition:n=ye.Bottom,targetX:i,targetY:r,targetPosition:s=ye.Top}){const[o,a]=vm({pos:n,x1:e,y1:t,x2:i,y2:r}),[c,u]=vm({pos:s,x1:i,y1:r,x2:e,y2:t}),[d,f,p,m]=nv({sourceX:e,sourceY:t,targetX:i,targetY:r,sourceControlX:o,sourceControlY:a,targetControlX:c,targetControlY:u});return[`M${e},${t} C${o},${a} ${c},${u} ${i},${r}`,d,f,p,m]}const df=k.memo(({sourceX:e,sourceY:t,targetX:n,targetY:i,sourcePosition:r=ye.Bottom,targetPosition:s=ye.Top,label:o,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:p,markerEnd:m,markerStart:v,interactionWidth:g})=>{const[x,h,y]=iv({sourceX:e,sourceY:t,sourcePosition:r,targetX:n,targetY:i,targetPosition:s});return ie.createElement(oo,{path:x,labelX:h,labelY:y,label:o,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:p,markerEnd:m,markerStart:v,interactionWidth:g})});df.displayName="SimpleBezierEdge";const xm={[ye.Left]:{x:-1,y:0},[ye.Right]:{x:1,y:0},[ye.Top]:{x:0,y:-1},[ye.Bottom]:{x:0,y:1}},t3=({source:e,sourcePosition:t=ye.Bottom,target:n})=>t===ye.Left||t===ye.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},_m=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function n3({source:e,sourcePosition:t=ye.Bottom,target:n,targetPosition:i=ye.Top,center:r,offset:s}){const o=xm[t],a=xm[i],c={x:e.x+o.x*s,y:e.y+o.y*s},u={x:n.x+a.x*s,y:n.y+a.y*s},d=t3({source:c,sourcePosition:t,target:u}),f=d.x!==0?"x":"y",p=d[f];let m=[],v,g;const x={x:0,y:0},h={x:0,y:0},[y,_,b,N]=tv({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(o[f]*a[f]===-1){v=r.x??y,g=r.y??_;const C=[{x:v,y:c.y},{x:v,y:u.y}],P=[{x:c.x,y:g},{x:u.x,y:g}];o[f]===p?m=f==="x"?C:P:m=f==="x"?P:C}else{const C=[{x:c.x,y:u.y}],P=[{x:u.x,y:c.y}];if(f==="x"?m=o.x===p?P:C:m=o.y===p?C:P,t===i){const F=Math.abs(e[f]-n[f]);if(F<=s){const w=Math.min(s-1,s-F);o[f]===p?x[f]=(c[f]>e[f]?-1:1)*w:h[f]=(u[f]>n[f]?-1:1)*w}}if(t!==i){const F=f==="x"?"y":"x",w=o[f]===a[F],B=c[F]>u[F],H=c[F]<u[F];(o[f]===1&&(!w&&B||w&&H)||o[f]!==1&&(!w&&H||w&&B))&&(m=f==="x"?C:P)}const j={x:c.x+x.x,y:c.y+x.y},I={x:u.x+h.x,y:u.y+h.y},$=Math.max(Math.abs(j.x-m[0].x),Math.abs(I.x-m[0].x)),S=Math.max(Math.abs(j.y-m[0].y),Math.abs(I.y-m[0].y));$>=S?(v=(j.x+I.x)/2,g=m[0].y):(v=m[0].x,g=(j.y+I.y)/2)}return[[e,{x:c.x+x.x,y:c.y+x.y},...m,{x:u.x+h.x,y:u.y+h.y},n],v,g,b,N]}function i3(e,t,n,i){const r=Math.min(_m(e,t)/2,_m(t,n)/2,i),{x:s,y:o}=t;if(e.x===s&&s===n.x||e.y===o&&o===n.y)return`L${s} ${o}`;if(e.y===o){const u=e.x<n.x?-1:1,d=e.y<n.y?1:-1;return`L ${s+r*u},${o}Q ${s},${o} ${s},${o+r*d}`}const a=e.x<n.x?1:-1,c=e.y<n.y?-1:1;return`L ${s},${o+r*c}Q ${s},${o} ${s+r*a},${o}`}function Fu({sourceX:e,sourceY:t,sourcePosition:n=ye.Bottom,targetX:i,targetY:r,targetPosition:s=ye.Top,borderRadius:o=5,centerX:a,centerY:c,offset:u=20}){const[d,f,p,m,v]=n3({source:{x:e,y:t},sourcePosition:n,target:{x:i,y:r},targetPosition:s,center:{x:a,y:c},offset:u});return[d.reduce((x,h,y)=>{let _="";return y>0&&y<d.length-1?_=i3(d[y-1],h,d[y+1],o):_=`${y===0?"M":"L"}${h.x} ${h.y}`,x+=_,x},""),f,p,m,v]}const kl=k.memo(({sourceX:e,sourceY:t,targetX:n,targetY:i,label:r,labelStyle:s,labelShowBg:o,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:u,style:d,sourcePosition:f=ye.Bottom,targetPosition:p=ye.Top,markerEnd:m,markerStart:v,pathOptions:g,interactionWidth:x})=>{const[h,y,_]=Fu({sourceX:e,sourceY:t,sourcePosition:f,targetX:n,targetY:i,targetPosition:p,borderRadius:g==null?void 0:g.borderRadius,offset:g==null?void 0:g.offset});return ie.createElement(oo,{path:h,labelX:y,labelY:_,label:r,labelStyle:s,labelShowBg:o,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:m,markerStart:v,interactionWidth:x})});kl.displayName="SmoothStepEdge";const ff=k.memo(e=>{var t;return ie.createElement(kl,{...e,pathOptions:k.useMemo(()=>{var n;return{borderRadius:0,offset:(n=e.pathOptions)==null?void 0:n.offset}},[(t=e.pathOptions)==null?void 0:t.offset])})});ff.displayName="StepEdge";function r3({sourceX:e,sourceY:t,targetX:n,targetY:i}){const[r,s,o,a]=tv({sourceX:e,sourceY:t,targetX:n,targetY:i});return[`M ${e},${t}L ${n},${i}`,r,s,o,a]}const pf=k.memo(({sourceX:e,sourceY:t,targetX:n,targetY:i,label:r,labelStyle:s,labelShowBg:o,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:p,interactionWidth:m})=>{const[v,g,x]=r3({sourceX:e,sourceY:t,targetX:n,targetY:i});return ie.createElement(oo,{path:v,labelX:g,labelY:x,label:r,labelStyle:s,labelShowBg:o,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:p,interactionWidth:m})});pf.displayName="StraightEdge";function Fo(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function bm({pos:e,x1:t,y1:n,x2:i,y2:r,c:s}){switch(e){case ye.Left:return[t-Fo(t-i,s),n];case ye.Right:return[t+Fo(i-t,s),n];case ye.Top:return[t,n-Fo(n-r,s)];case ye.Bottom:return[t,n+Fo(r-n,s)]}}function rv({sourceX:e,sourceY:t,sourcePosition:n=ye.Bottom,targetX:i,targetY:r,targetPosition:s=ye.Top,curvature:o=.25}){const[a,c]=bm({pos:n,x1:e,y1:t,x2:i,y2:r,c:o}),[u,d]=bm({pos:s,x1:i,y1:r,x2:e,y2:t,c:o}),[f,p,m,v]=nv({sourceX:e,sourceY:t,targetX:i,targetY:r,sourceControlX:a,sourceControlY:c,targetControlX:u,targetControlY:d});return[`M${e},${t} C${a},${c} ${u},${d} ${i},${r}`,f,p,m,v]}const La=k.memo(({sourceX:e,sourceY:t,targetX:n,targetY:i,sourcePosition:r=ye.Bottom,targetPosition:s=ye.Top,label:o,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:p,markerEnd:m,markerStart:v,pathOptions:g,interactionWidth:x})=>{const[h,y,_]=rv({sourceX:e,sourceY:t,sourcePosition:r,targetX:n,targetY:i,targetPosition:s,curvature:g==null?void 0:g.curvature});return ie.createElement(oo,{path:h,labelX:y,labelY:_,label:o,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:p,markerEnd:m,markerStart:v,interactionWidth:x})});La.displayName="BezierEdge";const mf=k.createContext(null),s3=mf.Provider;mf.Consumer;const o3=()=>k.useContext(mf),a3=e=>"id"in e&&"source"in e&&"target"in e,l3=({source:e,sourceHandle:t,target:n,targetHandle:i})=>`reactflow__edge-${e}${t||""}-${n}${i||""}`,Pu=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(i=>`${i}=${e[i]}`).join("&")}`,c3=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),u3=(e,t)=>{if(!e.source||!e.target)return t;let n;return a3(e)?n={...e}:n={...e,id:l3(e)},c3(n,t)?t:t.concat(n)},Ou=({x:e,y:t},[n,i,r],s,[o,a])=>{const c={x:(e-n)/r,y:(t-i)/r};return s?{x:o*Math.round(c.x/o),y:a*Math.round(c.y/a)}:c},sv=({x:e,y:t},[n,i,r])=>({x:e*r+n,y:t*r+i}),Si=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(e.width??0)*t[0],i=(e.height??0)*t[1],r={x:e.position.x-n,y:e.position.y-i};return{...r,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-i}:r}},El=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((i,r)=>{const{x:s,y:o}=Si(r,t).positionAbsolute;return Zw(i,Hs({x:s,y:o,width:r.width||0,height:r.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Qw(n)},ov=(e,t,[n,i,r]=[0,0,1],s=!1,o=!1,a=[0,0])=>{const c={x:(t.x-n)/r,y:(t.y-i)/r,width:t.width/r,height:t.height/r},u=[];return e.forEach(d=>{const{width:f,height:p,selectable:m=!0,hidden:v=!1}=d;if(o&&!m||v)return!1;const{positionAbsolute:g}=Si(d,a),x={x:g.x,y:g.y,width:f||0,height:p||0},h=Mu(c,x),y=typeof f>"u"||typeof p>"u"||f===null||p===null,_=s&&h>0,b=(f||0)*(p||0);(y||_||h>=b||d.dragging)&&u.push(d)}),u},av=(e,t)=>{const n=e.map(i=>i.id);return t.filter(i=>n.includes(i.source)||n.includes(i.target))},lv=(e,t,n,i,r,s=.1)=>{const o=t/(e.width*(1+s)),a=n/(e.height*(1+s)),c=Math.min(o,a),u=jr(c,i,r),d=e.x+e.width/2,f=e.y+e.height/2,p=t/2-d*u,m=n/2-f*u;return{x:p,y:m,zoom:u}},gi=(e,t=0)=>e.transition().duration(t);function km(e,t,n,i){return(t[n]||[]).reduce((r,s)=>{var o,a;return`${e.id}-${s.id}-${n}`!==i&&r.push({id:s.id||null,type:n,nodeId:e.id,x:(((o=e.positionAbsolute)==null?void 0:o.x)??0)+s.x+s.width/2,y:(((a=e.positionAbsolute)==null?void 0:a.y)??0)+s.y+s.height/2}),r},[])}function d3(e,t,n,i,r,s){const{x:o,y:a}=oi(e),u=t.elementsFromPoint(o,a).find(v=>v.classList.contains("react-flow__handle"));if(u){const v=u.getAttribute("data-nodeid");if(v){const g=hf(void 0,u),x=u.getAttribute("data-handleid"),h=s({nodeId:v,id:x,type:g});if(h){const y=r.find(_=>_.nodeId===v&&_.type===g&&_.id===x);return{handle:{id:x,type:g,nodeId:v,x:(y==null?void 0:y.x)||n.x,y:(y==null?void 0:y.y)||n.y},validHandleResult:h}}}}let d=[],f=1/0;if(r.forEach(v=>{const g=Math.sqrt((v.x-n.x)**2+(v.y-n.y)**2);if(g<=i){const x=s(v);g<=f&&(g<f?d=[{handle:v,validHandleResult:x}]:g===f&&d.push({handle:v,validHandleResult:x}),f=g)}}),!d.length)return{handle:null,validHandleResult:cv()};if(d.length===1)return d[0];const p=d.some(({validHandleResult:v})=>v.isValid),m=d.some(({handle:v})=>v.type==="target");return d.find(({handle:v,validHandleResult:g})=>m?v.type==="target":p?g.isValid:!0)||d[0]}const f3={source:null,target:null,sourceHandle:null,targetHandle:null},cv=()=>({handleDomNode:null,isValid:!1,connection:f3,endHandle:null});function uv(e,t,n,i,r,s,o){const a=r==="target",c=o.querySelector(`.react-flow__handle[data-id="${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`),u={...cv(),handleDomNode:c};if(c){const d=hf(void 0,c),f=c.getAttribute("data-nodeid"),p=c.getAttribute("data-handleid"),m=c.classList.contains("connectable"),v=c.classList.contains("connectableend"),g={source:a?f:n,sourceHandle:a?p:i,target:a?n:f,targetHandle:a?i:p};u.connection=g,m&&v&&(t===zi.Strict?a&&d==="source"||!a&&d==="target":f!==n||p!==i)&&(u.endHandle={nodeId:f,handleId:p,type:d},u.isValid=s(g))}return u}function p3({nodes:e,nodeId:t,handleId:n,handleType:i}){return e.reduce((r,s)=>{if(s[Qe]){const{handleBounds:o}=s[Qe];let a=[],c=[];o&&(a=km(s,o,"source",`${t}-${n}-${i}`),c=km(s,o,"target",`${t}-${n}-${i}`)),r.push(...a,...c)}return r},[])}function hf(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function pc(e){e==null||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function m3(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function dv({event:e,handleId:t,nodeId:n,onConnect:i,isTarget:r,getState:s,setState:o,isValidConnection:a,edgeUpdaterType:c,onReconnectEnd:u}){const d=Xw(e.target),{connectionMode:f,domNode:p,autoPanOnConnect:m,connectionRadius:v,onConnectStart:g,panBy:x,getNodes:h,cancelConnection:y}=s();let _=0,b;const{x:N,y:T}=oi(e),C=d==null?void 0:d.elementFromPoint(N,T),P=hf(c,C),j=p==null?void 0:p.getBoundingClientRect();if(!j||!P)return;let I,$=oi(e,j),S=!1,F=null,w=!1,B=null;const H=p3({nodes:h(),nodeId:n,handleId:t,handleType:P}),W=()=>{if(!m)return;const[U,O]=Yw($,j);x({x:U,y:O}),_=requestAnimationFrame(W)};o({connectionPosition:$,connectionStatus:null,connectionNodeId:n,connectionHandleId:t,connectionHandleType:P,connectionStartHandle:{nodeId:n,handleId:t,type:P},connectionEndHandle:null}),g==null||g(e,{nodeId:n,handleId:t,handleType:P});function R(U){const{transform:O}=s();$=oi(U,j);const{handle:A,validHandleResult:Y}=d3(U,d,Ou($,O,!1,[1,1]),v,H,G=>uv(G,f,n,t,r?"target":"source",a,d));if(b=A,S||(W(),S=!0),B=Y.handleDomNode,F=Y.connection,w=Y.isValid,o({connectionPosition:b&&w?sv({x:b.x,y:b.y},O):$,connectionStatus:m3(!!b,w),connectionEndHandle:Y.endHandle}),!b&&!w&&!B)return pc(I);F.source!==F.target&&B&&(pc(I),I=B,B.classList.add("connecting","react-flow__handle-connecting"),B.classList.toggle("valid",w),B.classList.toggle("react-flow__handle-valid",w))}function D(U){var O,A;(b||B)&&F&&w&&(i==null||i(F)),(A=(O=s()).onConnectEnd)==null||A.call(O,U),c&&(u==null||u(U)),pc(I),y(),cancelAnimationFrame(_),S=!1,w=!1,F=null,B=null,d.removeEventListener("mousemove",R),d.removeEventListener("mouseup",D),d.removeEventListener("touchmove",R),d.removeEventListener("touchend",D)}d.addEventListener("mousemove",R),d.addEventListener("mouseup",D),d.addEventListener("touchmove",R),d.addEventListener("touchend",D)}const Em=()=>!0,h3=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),g3=(e,t,n)=>i=>{const{connectionStartHandle:r,connectionEndHandle:s,connectionClickStartHandle:o}=i;return{connecting:(r==null?void 0:r.nodeId)===e&&(r==null?void 0:r.handleId)===t&&(r==null?void 0:r.type)===n||(s==null?void 0:s.nodeId)===e&&(s==null?void 0:s.handleId)===t&&(s==null?void 0:s.type)===n,clickConnecting:(o==null?void 0:o.nodeId)===e&&(o==null?void 0:o.handleId)===t&&(o==null?void 0:o.type)===n}},fv=k.forwardRef(({type:e="source",position:t=ye.Top,isValidConnection:n,isConnectable:i=!0,isConnectableStart:r=!0,isConnectableEnd:s=!0,id:o,onConnect:a,children:c,className:u,onMouseDown:d,onTouchStart:f,...p},m)=>{var j,I;const v=o||null,g=e==="target",x=st(),h=o3(),{connectOnClick:y,noPanClassName:_}=Le(h3,lt),{connecting:b,clickConnecting:N}=Le(g3(h,v,e),lt);h||(I=(j=x.getState()).onError)==null||I.call(j,"010",zn.error010());const T=$=>{const{defaultEdgeOptions:S,onConnect:F,hasDefaultEdges:w}=x.getState(),B={...S,...$};if(w){const{edges:H,setEdges:W}=x.getState();W(u3(B,H))}F==null||F(B),a==null||a(B)},C=$=>{if(!h)return;const S=ev($);r&&(S&&$.button===0||!S)&&dv({event:$,handleId:v,nodeId:h,onConnect:T,isTarget:g,getState:x.getState,setState:x.setState,isValidConnection:n||x.getState().isValidConnection||Em}),S?d==null||d($):f==null||f($)},P=$=>{const{onClickConnectStart:S,onClickConnectEnd:F,connectionClickStartHandle:w,connectionMode:B,isValidConnection:H}=x.getState();if(!h||!w&&!r)return;if(!w){S==null||S($,{nodeId:h,handleId:v,handleType:e}),x.setState({connectionClickStartHandle:{nodeId:h,type:e,handleId:v}});return}const W=Xw($.target),R=n||H||Em,{connection:D,isValid:U}=uv({nodeId:h,id:v,type:e},B,w.nodeId,w.handleId||null,w.type,R,W);U&&T(D),F==null||F($),x.setState({connectionClickStartHandle:null})};return ie.createElement("div",{"data-handleid":v,"data-nodeid":h,"data-handlepos":t,"data-id":`${h}-${v}-${e}`,className:pt(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",_,u,{source:!g,target:g,connectable:i,connectablestart:r,connectableend:s,connecting:N,connectionindicator:i&&(r&&!b||s&&b)}]),onMouseDown:C,onTouchStart:C,onClick:y?P:void 0,ref:m,...p},c)});fv.displayName="Handle";var Bt=k.memo(fv);const pv=({data:e,isConnectable:t,targetPosition:n=ye.Top,sourcePosition:i=ye.Bottom})=>ie.createElement(ie.Fragment,null,ie.createElement(Bt,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,ie.createElement(Bt,{type:"source",position:i,isConnectable:t}));pv.displayName="DefaultNode";var Bu=k.memo(pv);const mv=({data:e,isConnectable:t,sourcePosition:n=ye.Bottom})=>ie.createElement(ie.Fragment,null,e==null?void 0:e.label,ie.createElement(Bt,{type:"source",position:n,isConnectable:t}));mv.displayName="InputNode";var hv=k.memo(mv);const gv=({data:e,isConnectable:t,targetPosition:n=ye.Top})=>ie.createElement(ie.Fragment,null,ie.createElement(Bt,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label);gv.displayName="OutputNode";var yv=k.memo(gv);const gf=()=>null;gf.displayName="GroupNode";const y3=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected).map(t=>({...t}))}),Po=e=>e.id;function w3(e,t){return lt(e.selectedNodes.map(Po),t.selectedNodes.map(Po))&&lt(e.selectedEdges.map(Po),t.selectedEdges.map(Po))}const wv=k.memo(({onSelectionChange:e})=>{const t=st(),{selectedNodes:n,selectedEdges:i}=Le(y3,w3);return k.useEffect(()=>{const r={nodes:n,edges:i};e==null||e(r),t.getState().onSelectionChange.forEach(s=>s(r))},[n,i,e]),null});wv.displayName="SelectionListener";const v3=e=>!!e.onSelectionChange;function x3({onSelectionChange:e}){const t=Le(v3);return e||t?ie.createElement(wv,{onSelectionChange:e}):null}const _3=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function Hi(e,t){k.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function Ce(e,t,n){k.useEffect(()=>{typeof t<"u"&&n({[e]:t})},[t])}const b3=({nodes:e,edges:t,defaultNodes:n,defaultEdges:i,onConnect:r,onConnectStart:s,onConnectEnd:o,onClickConnectStart:a,onClickConnectEnd:c,nodesDraggable:u,nodesConnectable:d,nodesFocusable:f,edgesFocusable:p,edgesUpdatable:m,elevateNodesOnSelect:v,minZoom:g,maxZoom:x,nodeExtent:h,onNodesChange:y,onEdgesChange:_,elementsSelectable:b,connectionMode:N,snapGrid:T,snapToGrid:C,translateExtent:P,connectOnClick:j,defaultEdgeOptions:I,fitView:$,fitViewOptions:S,onNodesDelete:F,onEdgesDelete:w,onNodeDrag:B,onNodeDragStart:H,onNodeDragStop:W,onSelectionDrag:R,onSelectionDragStart:D,onSelectionDragStop:U,noPanClassName:O,nodeOrigin:A,rfId:Y,autoPanOnConnect:G,autoPanOnNodeDrag:Z,onError:se,connectionRadius:le,isValidConnection:ae,nodeDragThreshold:oe})=>{const{setNodes:ue,setEdges:we,setDefaultNodesAndEdges:ve,setMinZoom:ke,setMaxZoom:E,setTranslateExtent:J,setNodeExtent:te,reset:L}=Le(_3,lt),M=st();return k.useEffect(()=>{const q=i==null?void 0:i.map(K=>({...K,...I}));return ve(n,q),()=>{L()}},[]),Ce("defaultEdgeOptions",I,M.setState),Ce("connectionMode",N,M.setState),Ce("onConnect",r,M.setState),Ce("onConnectStart",s,M.setState),Ce("onConnectEnd",o,M.setState),Ce("onClickConnectStart",a,M.setState),Ce("onClickConnectEnd",c,M.setState),Ce("nodesDraggable",u,M.setState),Ce("nodesConnectable",d,M.setState),Ce("nodesFocusable",f,M.setState),Ce("edgesFocusable",p,M.setState),Ce("edgesUpdatable",m,M.setState),Ce("elementsSelectable",b,M.setState),Ce("elevateNodesOnSelect",v,M.setState),Ce("snapToGrid",C,M.setState),Ce("snapGrid",T,M.setState),Ce("onNodesChange",y,M.setState),Ce("onEdgesChange",_,M.setState),Ce("connectOnClick",j,M.setState),Ce("fitViewOnInit",$,M.setState),Ce("fitViewOnInitOptions",S,M.setState),Ce("onNodesDelete",F,M.setState),Ce("onEdgesDelete",w,M.setState),Ce("onNodeDrag",B,M.setState),Ce("onNodeDragStart",H,M.setState),Ce("onNodeDragStop",W,M.setState),Ce("onSelectionDrag",R,M.setState),Ce("onSelectionDragStart",D,M.setState),Ce("onSelectionDragStop",U,M.setState),Ce("noPanClassName",O,M.setState),Ce("nodeOrigin",A,M.setState),Ce("rfId",Y,M.setState),Ce("autoPanOnConnect",G,M.setState),Ce("autoPanOnNodeDrag",Z,M.setState),Ce("onError",se,M.setState),Ce("connectionRadius",le,M.setState),Ce("isValidConnection",ae,M.setState),Ce("nodeDragThreshold",oe,M.setState),Hi(e,ue),Hi(t,we),Hi(g,ke),Hi(x,E),Hi(P,J),Hi(h,te),null},Nm={display:"none"},k3={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},vv="react-flow__node-desc",xv="react-flow__edge-desc",E3="react-flow__aria-live",N3=e=>e.ariaLiveMessage;function S3({rfId:e}){const t=Le(N3);return ie.createElement("div",{id:`${E3}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:k3},t)}function I3({rfId:e,disableKeyboardA11y:t}){return ie.createElement(ie.Fragment,null,ie.createElement("div",{id:`${vv}-${e}`,style:Nm},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),ie.createElement("div",{id:`${xv}-${e}`,style:Nm},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&ie.createElement(S3,{rfId:e}))}var Ks=(e=null,t={actInsideInputWithModifier:!0})=>{const[n,i]=k.useState(!1),r=k.useRef(!1),s=k.useRef(new Set([])),[o,a]=k.useMemo(()=>{if(e!==null){const u=(Array.isArray(e)?e:[e]).filter(f=>typeof f=="string").map(f=>f.split("+")),d=u.reduce((f,p)=>f.concat(...p),[]);return[u,d]}return[[],[]]},[e]);return k.useEffect(()=>{const c=typeof document<"u"?document:null,u=(t==null?void 0:t.target)||c;if(e!==null){const d=m=>{if(r.current=m.ctrlKey||m.metaKey||m.shiftKey,(!r.current||r.current&&!t.actInsideInputWithModifier)&&zu(m))return!1;const g=Im(m.code,a);s.current.add(m[g]),Sm(o,s.current,!1)&&(m.preventDefault(),i(!0))},f=m=>{if((!r.current||r.current&&!t.actInsideInputWithModifier)&&zu(m))return!1;const g=Im(m.code,a);Sm(o,s.current,!0)?(i(!1),s.current.clear()):s.current.delete(m[g]),m.key==="Meta"&&s.current.clear(),r.current=!1},p=()=>{s.current.clear(),i(!1)};return u==null||u.addEventListener("keydown",d),u==null||u.addEventListener("keyup",f),window.addEventListener("blur",p),()=>{u==null||u.removeEventListener("keydown",d),u==null||u.removeEventListener("keyup",f),window.removeEventListener("blur",p)}}},[e,i]),n};function Sm(e,t,n){return e.filter(i=>n||i.length===t.size).some(i=>i.every(r=>t.has(r)))}function Im(e,t){return t.includes(e)?"code":"key"}function _v(e,t,n,i){var a,c;const r=e.parentNode||e.parentId;if(!r)return n;const s=t.get(r),o=Si(s,i);return _v(s,t,{x:(n.x??0)+o.x,y:(n.y??0)+o.y,z:(((a=s[Qe])==null?void 0:a.z)??0)>(n.z??0)?((c=s[Qe])==null?void 0:c.z)??0:n.z??0},i)}function bv(e,t,n){e.forEach(i=>{var s;const r=i.parentNode||i.parentId;if(r&&!e.has(r))throw new Error(`Parent node ${r} not found`);if(r||n!=null&&n[i.id]){const{x:o,y:a,z:c}=_v(i,e,{...i.position,z:((s=i[Qe])==null?void 0:s.z)??0},t);i.positionAbsolute={x:o,y:a},i[Qe].z=c,n!=null&&n[i.id]&&(i[Qe].isParent=!0)}})}function mc(e,t,n,i){const r=new Map,s={},o=i?1e3:0;return e.forEach(a=>{var m;const c=(Wt(a.zIndex)?a.zIndex:0)+(a.selected?o:0),u=t.get(a.id),d={...a,positionAbsolute:{x:a.position.x,y:a.position.y}},f=a.parentNode||a.parentId;f&&(s[f]=!0);const p=(u==null?void 0:u.type)&&(u==null?void 0:u.type)!==a.type;Object.defineProperty(d,Qe,{enumerable:!1,value:{handleBounds:p||(m=u==null?void 0:u[Qe])==null?void 0:m.handleBounds,z:c}}),r.set(a.id,d)}),bv(r,n,s),r}function kv(e,t={}){const{getNodes:n,width:i,height:r,minZoom:s,maxZoom:o,d3Zoom:a,d3Selection:c,fitViewOnInitDone:u,fitViewOnInit:d,nodeOrigin:f}=e(),p=t.initial&&!u&&d;if(a&&c&&(p||!t.initial)){const v=n().filter(x=>{var y;const h=t.includeHiddenNodes?x.width&&x.height:!x.hidden;return(y=t.nodes)!=null&&y.length?h&&t.nodes.some(_=>_.id===x.id):h}),g=v.every(x=>x.width&&x.height);if(v.length>0&&g){const x=El(v,f),{x:h,y,zoom:_}=lv(x,i,r,t.minZoom??s,t.maxZoom??o,t.padding??.1),b=An.translate(h,y).scale(_);return typeof t.duration=="number"&&t.duration>0?a.transform(gi(c,t.duration),b):a.transform(c,b),!0}}return!1}function A3(e,t){return e.forEach(n=>{const i=t.get(n.id);i&&t.set(i.id,{...i,[Qe]:i[Qe],selected:n.selected})}),new Map(t)}function C3(e,t){return t.map(n=>{const i=e.find(r=>r.id===n.id);return i&&(n.selected=i.selected),n})}function Oo({changedNodes:e,changedEdges:t,get:n,set:i}){const{nodeInternals:r,edges:s,onNodesChange:o,onEdgesChange:a,hasDefaultNodes:c,hasDefaultEdges:u}=n();e!=null&&e.length&&(c&&i({nodeInternals:A3(e,r)}),o==null||o(e)),t!=null&&t.length&&(u&&i({edges:C3(t,s)}),a==null||a(t))}const $i=()=>{},j3={zoomIn:$i,zoomOut:$i,zoomTo:$i,getZoom:()=>1,setViewport:$i,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:$i,fitBounds:$i,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},T3=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),R3=()=>{const e=st(),{d3Zoom:t,d3Selection:n}=Le(T3,lt);return k.useMemo(()=>n&&t?{zoomIn:r=>t.scaleBy(gi(n,r==null?void 0:r.duration),1.2),zoomOut:r=>t.scaleBy(gi(n,r==null?void 0:r.duration),1/1.2),zoomTo:(r,s)=>t.scaleTo(gi(n,s==null?void 0:s.duration),r),getZoom:()=>e.getState().transform[2],setViewport:(r,s)=>{const[o,a,c]=e.getState().transform,u=An.translate(r.x??o,r.y??a).scale(r.zoom??c);t.transform(gi(n,s==null?void 0:s.duration),u)},getViewport:()=>{const[r,s,o]=e.getState().transform;return{x:r,y:s,zoom:o}},fitView:r=>kv(e.getState,r),setCenter:(r,s,o)=>{const{width:a,height:c,maxZoom:u}=e.getState(),d=typeof(o==null?void 0:o.zoom)<"u"?o.zoom:u,f=a/2-r*d,p=c/2-s*d,m=An.translate(f,p).scale(d);t.transform(gi(n,o==null?void 0:o.duration),m)},fitBounds:(r,s)=>{const{width:o,height:a,minZoom:c,maxZoom:u}=e.getState(),{x:d,y:f,zoom:p}=lv(r,o,a,c,u,(s==null?void 0:s.padding)??.1),m=An.translate(d,f).scale(p);t.transform(gi(n,s==null?void 0:s.duration),m)},project:r=>{const{transform:s,snapToGrid:o,snapGrid:a}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),Ou(r,s,o,a)},screenToFlowPosition:r=>{const{transform:s,snapToGrid:o,snapGrid:a,domNode:c}=e.getState();if(!c)return r;const{x:u,y:d}=c.getBoundingClientRect(),f={x:r.x-u,y:r.y-d};return Ou(f,s,o,a)},flowToScreenPosition:r=>{const{transform:s,domNode:o}=e.getState();if(!o)return r;const{x:a,y:c}=o.getBoundingClientRect(),u=sv(r,s);return{x:u.x+a,y:u.y+c}},viewportInitialized:!0}:j3,[t,n])};function yf(){const e=R3(),t=st(),n=k.useCallback(()=>t.getState().getNodes().map(g=>({...g})),[]),i=k.useCallback(g=>t.getState().nodeInternals.get(g),[]),r=k.useCallback(()=>{const{edges:g=[]}=t.getState();return g.map(x=>({...x}))},[]),s=k.useCallback(g=>{const{edges:x=[]}=t.getState();return x.find(h=>h.id===g)},[]),o=k.useCallback(g=>{const{getNodes:x,setNodes:h,hasDefaultNodes:y,onNodesChange:_}=t.getState(),b=x(),N=typeof g=="function"?g(b):g;if(y)h(N);else if(_){const T=N.length===0?b.map(C=>({type:"remove",id:C.id})):N.map(C=>({item:C,type:"reset"}));_(T)}},[]),a=k.useCallback(g=>{const{edges:x=[],setEdges:h,hasDefaultEdges:y,onEdgesChange:_}=t.getState(),b=typeof g=="function"?g(x):g;if(y)h(b);else if(_){const N=b.length===0?x.map(T=>({type:"remove",id:T.id})):b.map(T=>({item:T,type:"reset"}));_(N)}},[]),c=k.useCallback(g=>{const x=Array.isArray(g)?g:[g],{getNodes:h,setNodes:y,hasDefaultNodes:_,onNodesChange:b}=t.getState();if(_){const T=[...h(),...x];y(T)}else if(b){const N=x.map(T=>({item:T,type:"add"}));b(N)}},[]),u=k.useCallback(g=>{const x=Array.isArray(g)?g:[g],{edges:h=[],setEdges:y,hasDefaultEdges:_,onEdgesChange:b}=t.getState();if(_)y([...h,...x]);else if(b){const N=x.map(T=>({item:T,type:"add"}));b(N)}},[]),d=k.useCallback(()=>{const{getNodes:g,edges:x=[],transform:h}=t.getState(),[y,_,b]=h;return{nodes:g().map(N=>({...N})),edges:x.map(N=>({...N})),viewport:{x:y,y:_,zoom:b}}},[]),f=k.useCallback(({nodes:g,edges:x})=>{const{nodeInternals:h,getNodes:y,edges:_,hasDefaultNodes:b,hasDefaultEdges:N,onNodesDelete:T,onEdgesDelete:C,onNodesChange:P,onEdgesChange:j}=t.getState(),I=(g||[]).map(B=>B.id),$=(x||[]).map(B=>B.id),S=y().reduce((B,H)=>{const W=H.parentNode||H.parentId,R=!I.includes(H.id)&&W&&B.find(U=>U.id===W);return(typeof H.deletable=="boolean"?H.deletable:!0)&&(I.includes(H.id)||R)&&B.push(H),B},[]),F=_.filter(B=>typeof B.deletable=="boolean"?B.deletable:!0),w=F.filter(B=>$.includes(B.id));if(S||w){const B=av(S,F),H=[...w,...B],W=H.reduce((R,D)=>(R.includes(D.id)||R.push(D.id),R),[]);if((N||b)&&(N&&t.setState({edges:_.filter(R=>!W.includes(R.id))}),b&&(S.forEach(R=>{h.delete(R.id)}),t.setState({nodeInternals:new Map(h)}))),W.length>0&&(C==null||C(H),j&&j(W.map(R=>({id:R,type:"remove"})))),S.length>0&&(T==null||T(S),P)){const R=S.map(D=>({id:D.id,type:"remove"}));P(R)}}},[]),p=k.useCallback(g=>{const x=QI(g),h=x?null:t.getState().nodeInternals.get(g.id);return!x&&!h?[null,null,x]:[x?g:wm(h),h,x]},[]),m=k.useCallback((g,x=!0,h)=>{const[y,_,b]=p(g);return y?(h||t.getState().getNodes()).filter(N=>{if(!b&&(N.id===_.id||!N.positionAbsolute))return!1;const T=wm(N),C=Mu(T,y);return x&&C>0||C>=y.width*y.height}):[]},[]),v=k.useCallback((g,x,h=!0)=>{const[y]=p(g);if(!y)return!1;const _=Mu(y,x);return h&&_>0||_>=y.width*y.height},[]);return k.useMemo(()=>({...e,getNodes:n,getNode:i,getEdges:r,getEdge:s,setNodes:o,setEdges:a,addNodes:c,addEdges:u,toObject:d,deleteElements:f,getIntersectingNodes:m,isNodeIntersecting:v}),[e,n,i,r,s,o,a,c,u,d,f,m,v])}const D3={actInsideInputWithModifier:!1};var M3=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const n=st(),{deleteElements:i}=yf(),r=Ks(e,D3),s=Ks(t);k.useEffect(()=>{if(r){const{edges:o,getNodes:a}=n.getState(),c=a().filter(d=>d.selected),u=o.filter(d=>d.selected);i({nodes:c,edges:u}),n.setState({nodesSelectionActive:!1})}},[r]),k.useEffect(()=>{n.setState({multiSelectionActive:s})},[s])};function z3(e){const t=st();k.useEffect(()=>{let n;const i=()=>{var s,o;if(!e.current)return;const r=cf(e.current);(r.height===0||r.width===0)&&((o=(s=t.getState()).onError)==null||o.call(s,"004",zn.error004())),t.setState({width:r.width||500,height:r.height||500})};return i(),window.addEventListener("resize",i),e.current&&(n=new ResizeObserver(()=>i()),n.observe(e.current)),()=>{window.removeEventListener("resize",i),n&&e.current&&n.unobserve(e.current)}},[])}const wf={position:"absolute",width:"100%",height:"100%",top:0,left:0},F3=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,Bo=e=>({x:e.x,y:e.y,zoom:e.k}),Wi=(e,t)=>e.target.closest(`.${t}`),Am=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),Cm=e=>{const t=e.ctrlKey&&Ba()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},P3=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),O3=({onMove:e,onMoveStart:t,onMoveEnd:n,onPaneContextMenu:i,zoomOnScroll:r=!0,zoomOnPinch:s=!0,panOnScroll:o=!1,panOnScrollSpeed:a=.5,panOnScrollMode:c=bi.Free,zoomOnDoubleClick:u=!0,elementsSelectable:d,panOnDrag:f=!0,defaultViewport:p,translateExtent:m,minZoom:v,maxZoom:g,zoomActivationKeyCode:x,preventScrolling:h=!0,children:y,noWheelClassName:_,noPanClassName:b})=>{const N=k.useRef(),T=st(),C=k.useRef(!1),P=k.useRef(!1),j=k.useRef(null),I=k.useRef({x:0,y:0,zoom:0}),{d3Zoom:$,d3Selection:S,d3ZoomHandler:F,userSelectionActive:w}=Le(P3,lt),B=Ks(x),H=k.useRef(0),W=k.useRef(!1),R=k.useRef();return z3(j),k.useEffect(()=>{if(j.current){const D=j.current.getBoundingClientRect(),U=Gw().scaleExtent([v,g]).translateExtent(m),O=Ht(j.current).call(U),A=An.translate(p.x,p.y).scale(jr(p.zoom,v,g)),Y=[[0,0],[D.width,D.height]],G=U.constrain()(A,Y,m);U.transform(O,G),U.wheelDelta(Cm),T.setState({d3Zoom:U,d3Selection:O,d3ZoomHandler:O.on("wheel.zoom"),transform:[G.x,G.y,G.k],domNode:j.current.closest(".react-flow")})}},[]),k.useEffect(()=>{S&&$&&(o&&!B&&!w?S.on("wheel.zoom",D=>{if(Wi(D,_))return!1;D.preventDefault(),D.stopImmediatePropagation();const U=S.property("__zoom").k||1;if(D.ctrlKey&&s){const ae=Qt(D),oe=Cm(D),ue=U*Math.pow(2,oe);$.scaleTo(S,ue,ae,D);return}const O=D.deltaMode===1?20:1;let A=c===bi.Vertical?0:D.deltaX*O,Y=c===bi.Horizontal?0:D.deltaY*O;!Ba()&&D.shiftKey&&c!==bi.Vertical&&(A=D.deltaY*O,Y=0),$.translateBy(S,-(A/U)*a,-(Y/U)*a,{internal:!0});const G=Bo(S.property("__zoom")),{onViewportChangeStart:Z,onViewportChange:se,onViewportChangeEnd:le}=T.getState();clearTimeout(R.current),W.current||(W.current=!0,t==null||t(D,G),Z==null||Z(G)),W.current&&(e==null||e(D,G),se==null||se(G),R.current=setTimeout(()=>{n==null||n(D,G),le==null||le(G),W.current=!1},150))},{passive:!1}):typeof F<"u"&&S.on("wheel.zoom",function(D,U){if(!h&&D.type==="wheel"&&!D.ctrlKey||Wi(D,_))return null;D.preventDefault(),F.call(this,D,U)},{passive:!1}))},[w,o,c,S,$,F,B,s,h,_,t,e,n]),k.useEffect(()=>{$&&$.on("start",D=>{var A,Y;if(!D.sourceEvent||D.sourceEvent.internal)return null;H.current=(A=D.sourceEvent)==null?void 0:A.button;const{onViewportChangeStart:U}=T.getState(),O=Bo(D.transform);C.current=!0,I.current=O,((Y=D.sourceEvent)==null?void 0:Y.type)==="mousedown"&&T.setState({paneDragging:!0}),U==null||U(O),t==null||t(D.sourceEvent,O)})},[$,t]),k.useEffect(()=>{$&&(w&&!C.current?$.on("zoom",null):w||$.on("zoom",D=>{var O;const{onViewportChange:U}=T.getState();if(T.setState({transform:[D.transform.x,D.transform.y,D.transform.k]}),P.current=!!(i&&Am(f,H.current??0)),(e||U)&&!((O=D.sourceEvent)!=null&&O.internal)){const A=Bo(D.transform);U==null||U(A),e==null||e(D.sourceEvent,A)}}))},[w,$,e,f,i]),k.useEffect(()=>{$&&$.on("end",D=>{if(!D.sourceEvent||D.sourceEvent.internal)return null;const{onViewportChangeEnd:U}=T.getState();if(C.current=!1,T.setState({paneDragging:!1}),i&&Am(f,H.current??0)&&!P.current&&i(D.sourceEvent),P.current=!1,(n||U)&&F3(I.current,D.transform)){const O=Bo(D.transform);I.current=O,clearTimeout(N.current),N.current=setTimeout(()=>{U==null||U(O),n==null||n(D.sourceEvent,O)},o?150:0)}})},[$,o,f,n,i]),k.useEffect(()=>{$&&$.filter(D=>{const U=B||r,O=s&&D.ctrlKey;if((f===!0||Array.isArray(f)&&f.includes(1))&&D.button===1&&D.type==="mousedown"&&(Wi(D,"react-flow__node")||Wi(D,"react-flow__edge")))return!0;if(!f&&!U&&!o&&!u&&!s||w||!u&&D.type==="dblclick"||Wi(D,_)&&D.type==="wheel"||Wi(D,b)&&(D.type!=="wheel"||o&&D.type==="wheel"&&!B)||!s&&D.ctrlKey&&D.type==="wheel"||!U&&!o&&!O&&D.type==="wheel"||!f&&(D.type==="mousedown"||D.type==="touchstart")||Array.isArray(f)&&!f.includes(D.button)&&D.type==="mousedown")return!1;const A=Array.isArray(f)&&f.includes(D.button)||!D.button||D.button<=1;return(!D.ctrlKey||D.type==="wheel")&&A})},[w,$,r,s,o,u,f,d,B]),ie.createElement("div",{className:"react-flow__renderer",ref:j,style:wf},y)},B3=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function L3(){const{userSelectionActive:e,userSelectionRect:t}=Le(B3,lt);return e&&t?ie.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function jm(e,t){const n=t.parentNode||t.parentId,i=e.find(r=>r.id===n);if(i){const r=t.position.x+t.width-i.width,s=t.position.y+t.height-i.height;if(r>0||s>0||t.position.x<0||t.position.y<0){if(i.style={...i.style},i.style.width=i.style.width??i.width,i.style.height=i.style.height??i.height,r>0&&(i.style.width+=r),s>0&&(i.style.height+=s),t.position.x<0){const o=Math.abs(t.position.x);i.position.x=i.position.x-o,i.style.width+=o,t.position.x=0}if(t.position.y<0){const o=Math.abs(t.position.y);i.position.y=i.position.y-o,i.style.height+=o,t.position.y=0}i.width=i.style.width,i.height=i.style.height}}}function Ev(e,t){if(e.some(i=>i.type==="reset"))return e.filter(i=>i.type==="reset").map(i=>i.item);const n=e.filter(i=>i.type==="add").map(i=>i.item);return t.reduce((i,r)=>{const s=e.filter(a=>a.id===r.id);if(s.length===0)return i.push(r),i;const o={...r};for(const a of s)if(a)switch(a.type){case"select":{o.selected=a.selected;break}case"position":{typeof a.position<"u"&&(o.position=a.position),typeof a.positionAbsolute<"u"&&(o.positionAbsolute=a.positionAbsolute),typeof a.dragging<"u"&&(o.dragging=a.dragging),o.expandParent&&jm(i,o);break}case"dimensions":{typeof a.dimensions<"u"&&(o.width=a.dimensions.width,o.height=a.dimensions.height),typeof a.updateStyle<"u"&&(o.style={...o.style||{},...a.dimensions}),typeof a.resizing=="boolean"&&(o.resizing=a.resizing),o.expandParent&&jm(i,o);break}case"remove":return i}return i.push(o),i},n)}function Nv(e,t){return Ev(e,t)}function U3(e,t){return Ev(e,t)}const Kn=(e,t)=>({id:e,type:"select",selected:t});function ar(e,t){return e.reduce((n,i)=>{const r=t.includes(i.id);return!i.selected&&r?(i.selected=!0,n.push(Kn(i.id,!0))):i.selected&&!r&&(i.selected=!1,n.push(Kn(i.id,!1))),n},[])}const hc=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},H3=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),Sv=k.memo(({isSelecting:e,selectionMode:t=$s.Full,panOnDrag:n,onSelectionStart:i,onSelectionEnd:r,onPaneClick:s,onPaneContextMenu:o,onPaneScroll:a,onPaneMouseEnter:c,onPaneMouseMove:u,onPaneMouseLeave:d,children:f})=>{const p=k.useRef(null),m=st(),v=k.useRef(0),g=k.useRef(0),x=k.useRef(),{userSelectionActive:h,elementsSelectable:y,dragging:_}=Le(H3,lt),b=()=>{m.setState({userSelectionActive:!1,userSelectionRect:null}),v.current=0,g.current=0},N=F=>{s==null||s(F),m.getState().resetSelectedElements(),m.setState({nodesSelectionActive:!1})},T=F=>{if(Array.isArray(n)&&(n!=null&&n.includes(2))){F.preventDefault();return}o==null||o(F)},C=a?F=>a(F):void 0,P=F=>{const{resetSelectedElements:w,domNode:B}=m.getState();if(x.current=B==null?void 0:B.getBoundingClientRect(),!y||!e||F.button!==0||F.target!==p.current||!x.current)return;const{x:H,y:W}=oi(F,x.current);w(),m.setState({userSelectionRect:{width:0,height:0,startX:H,startY:W,x:H,y:W}}),i==null||i(F)},j=F=>{const{userSelectionRect:w,nodeInternals:B,edges:H,transform:W,onNodesChange:R,onEdgesChange:D,nodeOrigin:U,getNodes:O}=m.getState();if(!e||!x.current||!w)return;m.setState({userSelectionActive:!0,nodesSelectionActive:!1});const A=oi(F,x.current),Y=w.startX??0,G=w.startY??0,Z={...w,x:A.x<Y?A.x:Y,y:A.y<G?A.y:G,width:Math.abs(A.x-Y),height:Math.abs(A.y-G)},se=O(),le=ov(B,Z,W,t===$s.Partial,!0,U),ae=av(le,H).map(ue=>ue.id),oe=le.map(ue=>ue.id);if(v.current!==oe.length){v.current=oe.length;const ue=ar(se,oe);ue.length&&(R==null||R(ue))}if(g.current!==ae.length){g.current=ae.length;const ue=ar(H,ae);ue.length&&(D==null||D(ue))}m.setState({userSelectionRect:Z})},I=F=>{if(F.button!==0)return;const{userSelectionRect:w}=m.getState();!h&&w&&F.target===p.current&&(N==null||N(F)),m.setState({nodesSelectionActive:v.current>0}),b(),r==null||r(F)},$=F=>{h&&(m.setState({nodesSelectionActive:v.current>0}),r==null||r(F)),b()},S=y&&(e||h);return ie.createElement("div",{className:pt(["react-flow__pane",{dragging:_,selection:e}]),onClick:S?void 0:hc(N,p),onContextMenu:hc(T,p),onWheel:hc(C,p),onMouseEnter:S?void 0:c,onMouseDown:S?P:void 0,onMouseMove:S?j:u,onMouseUp:S?I:void 0,onMouseLeave:S?$:d,ref:p,style:wf},f,ie.createElement(L3,null))});Sv.displayName="Pane";function Iv(e,t){const n=e.parentNode||e.parentId;if(!n)return!1;const i=t.get(n);return i?i.selected?!0:Iv(i,t):!1}function Tm(e,t,n){let i=e;do{if(i!=null&&i.matches(t))return!0;if(i===n.current)return!1;i=i.parentElement}while(i);return!1}function $3(e,t,n,i){return Array.from(e.values()).filter(r=>(r.selected||r.id===i)&&(!r.parentNode||r.parentId||!Iv(r,e))&&(r.draggable||t&&typeof r.draggable>"u")).map(r=>{var s,o;return{id:r.id,position:r.position||{x:0,y:0},positionAbsolute:r.positionAbsolute||{x:0,y:0},distance:{x:n.x-(((s=r.positionAbsolute)==null?void 0:s.x)??0),y:n.y-(((o=r.positionAbsolute)==null?void 0:o.y)??0)},delta:{x:0,y:0},extent:r.extent,parentNode:r.parentNode||r.parentId,parentId:r.parentNode||r.parentId,width:r.width,height:r.height,expandParent:r.expandParent}})}function W3(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function Av(e,t,n,i,r=[0,0],s){const o=W3(e,e.extent||i);let a=o;const c=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(c&&e.width&&e.height){const f=n.get(c),{x:p,y:m}=Si(f,r).positionAbsolute;a=f&&Wt(p)&&Wt(m)&&Wt(f.width)&&Wt(f.height)?[[p+e.width*r[0],m+e.height*r[1]],[p+f.width-e.width+e.width*r[0],m+f.height-e.height+e.height*r[1]]]:a}else s==null||s("005",zn.error005()),a=o;else if(e.extent&&c&&e.extent!=="parent"){const f=n.get(c),{x:p,y:m}=Si(f,r).positionAbsolute;a=[[e.extent[0][0]+p,e.extent[0][1]+m],[e.extent[1][0]+p,e.extent[1][1]+m]]}let u={x:0,y:0};if(c){const f=n.get(c);u=Si(f,r).positionAbsolute}const d=a&&a!=="parent"?uf(t,a):t;return{position:{x:d.x-u.x,y:d.y-u.y},positionAbsolute:d}}function gc({nodeId:e,dragItems:t,nodeInternals:n}){const i=t.map(r=>({...n.get(r.id),position:r.position,positionAbsolute:r.positionAbsolute}));return[e?i.find(r=>r.id===e):i[0],i]}const Rm=(e,t,n,i)=>{const r=t.querySelectorAll(e);if(!r||!r.length)return null;const s=Array.from(r),o=t.getBoundingClientRect(),a={x:o.width*i[0],y:o.height*i[1]};return s.map(c=>{const u=c.getBoundingClientRect();return{id:c.getAttribute("data-handleid"),position:c.getAttribute("data-handlepos"),x:(u.left-o.left-a.x)/n,y:(u.top-o.top-a.y)/n,...cf(c)}})};function Xr(e,t,n){return n===void 0?n:i=>{const r=t().nodeInternals.get(e);r&&n(i,{...r})}}function Lu({id:e,store:t,unselect:n=!1,nodeRef:i}){const{addSelectedNodes:r,unselectNodesAndEdges:s,multiSelectionActive:o,nodeInternals:a,onError:c}=t.getState(),u=a.get(e);if(!u){c==null||c("012",zn.error012(e));return}t.setState({nodesSelectionActive:!1}),u.selected?(n||u.selected&&o)&&(s({nodes:[u],edges:[]}),requestAnimationFrame(()=>{var d;return(d=i==null?void 0:i.current)==null?void 0:d.blur()})):r([e])}function K3(){const e=st();return k.useCallback(({sourceEvent:n})=>{const{transform:i,snapGrid:r,snapToGrid:s}=e.getState(),o=n.touches?n.touches[0].clientX:n.clientX,a=n.touches?n.touches[0].clientY:n.clientY,c={x:(o-i[0])/i[2],y:(a-i[1])/i[2]};return{xSnapped:s?r[0]*Math.round(c.x/r[0]):c.x,ySnapped:s?r[1]*Math.round(c.y/r[1]):c.y,...c}},[])}function yc(e){return(t,n,i)=>e==null?void 0:e(t,i)}function Cv({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:i,nodeId:r,isSelectable:s,selectNodesOnDrag:o}){const a=st(),[c,u]=k.useState(!1),d=k.useRef([]),f=k.useRef({x:null,y:null}),p=k.useRef(0),m=k.useRef(null),v=k.useRef({x:0,y:0}),g=k.useRef(null),x=k.useRef(!1),h=k.useRef(!1),y=k.useRef(!1),_=K3();return k.useEffect(()=>{if(e!=null&&e.current){const b=Ht(e.current),N=({x:P,y:j})=>{const{nodeInternals:I,onNodeDrag:$,onSelectionDrag:S,updateNodePositions:F,nodeExtent:w,snapGrid:B,snapToGrid:H,nodeOrigin:W,onError:R}=a.getState();f.current={x:P,y:j};let D=!1,U={x:0,y:0,x2:0,y2:0};if(d.current.length>1&&w){const A=El(d.current,W);U=Hs(A)}if(d.current=d.current.map(A=>{const Y={x:P-A.distance.x,y:j-A.distance.y};H&&(Y.x=B[0]*Math.round(Y.x/B[0]),Y.y=B[1]*Math.round(Y.y/B[1]));const G=[[w[0][0],w[0][1]],[w[1][0],w[1][1]]];d.current.length>1&&w&&!A.extent&&(G[0][0]=A.positionAbsolute.x-U.x+w[0][0],G[1][0]=A.positionAbsolute.x+(A.width??0)-U.x2+w[1][0],G[0][1]=A.positionAbsolute.y-U.y+w[0][1],G[1][1]=A.positionAbsolute.y+(A.height??0)-U.y2+w[1][1]);const Z=Av(A,Y,I,G,W,R);return D=D||A.position.x!==Z.position.x||A.position.y!==Z.position.y,A.position=Z.position,A.positionAbsolute=Z.positionAbsolute,A}),!D)return;F(d.current,!0,!0),u(!0);const O=r?$:yc(S);if(O&&g.current){const[A,Y]=gc({nodeId:r,dragItems:d.current,nodeInternals:I});O(g.current,A,Y)}},T=()=>{if(!m.current)return;const[P,j]=Yw(v.current,m.current);if(P!==0||j!==0){const{transform:I,panBy:$}=a.getState();f.current.x=(f.current.x??0)-P/I[2],f.current.y=(f.current.y??0)-j/I[2],$({x:P,y:j})&&N(f.current)}p.current=requestAnimationFrame(T)},C=P=>{var W;const{nodeInternals:j,multiSelectionActive:I,nodesDraggable:$,unselectNodesAndEdges:S,onNodeDragStart:F,onSelectionDragStart:w}=a.getState();h.current=!0;const B=r?F:yc(w);(!o||!s)&&!I&&r&&((W=j.get(r))!=null&&W.selected||S()),r&&s&&o&&Lu({id:r,store:a,nodeRef:e});const H=_(P);if(f.current=H,d.current=$3(j,$,H,r),B&&d.current){const[R,D]=gc({nodeId:r,dragItems:d.current,nodeInternals:j});B(P.sourceEvent,R,D)}};if(t)b.on(".drag",null);else{const P=nS().on("start",j=>{const{domNode:I,nodeDragThreshold:$}=a.getState();$===0&&C(j),y.current=!1;const S=_(j);f.current=S,m.current=(I==null?void 0:I.getBoundingClientRect())||null,v.current=oi(j.sourceEvent,m.current)}).on("drag",j=>{var F,w;const I=_(j),{autoPanOnNodeDrag:$,nodeDragThreshold:S}=a.getState();if(j.sourceEvent.type==="touchmove"&&j.sourceEvent.touches.length>1&&(y.current=!0),!y.current){if(!x.current&&h.current&&$&&(x.current=!0,T()),!h.current){const B=I.xSnapped-(((F=f==null?void 0:f.current)==null?void 0:F.x)??0),H=I.ySnapped-(((w=f==null?void 0:f.current)==null?void 0:w.y)??0);Math.sqrt(B*B+H*H)>S&&C(j)}(f.current.x!==I.xSnapped||f.current.y!==I.ySnapped)&&d.current&&h.current&&(g.current=j.sourceEvent,v.current=oi(j.sourceEvent,m.current),N(I))}}).on("end",j=>{if(!(!h.current||y.current)&&(u(!1),x.current=!1,h.current=!1,cancelAnimationFrame(p.current),d.current)){const{updateNodePositions:I,nodeInternals:$,onNodeDragStop:S,onSelectionDragStop:F}=a.getState(),w=r?S:yc(F);if(I(d.current,!1,!1),w){const[B,H]=gc({nodeId:r,dragItems:d.current,nodeInternals:$});w(j.sourceEvent,B,H)}}}).filter(j=>{const I=j.target;return!j.button&&(!n||!Tm(I,`.${n}`,e))&&(!i||Tm(I,i,e))});return b.call(P),()=>{b.on(".drag",null)}}}},[e,t,n,i,s,a,r,o,_]),c}function jv(){const e=st();return k.useCallback(n=>{const{nodeInternals:i,nodeExtent:r,updateNodePositions:s,getNodes:o,snapToGrid:a,snapGrid:c,onError:u,nodesDraggable:d}=e.getState(),f=o().filter(y=>y.selected&&(y.draggable||d&&typeof y.draggable>"u")),p=a?c[0]:5,m=a?c[1]:5,v=n.isShiftPressed?4:1,g=n.x*p*v,x=n.y*m*v,h=f.map(y=>{if(y.positionAbsolute){const _={x:y.positionAbsolute.x+g,y:y.positionAbsolute.y+x};a&&(_.x=c[0]*Math.round(_.x/c[0]),_.y=c[1]*Math.round(_.y/c[1]));const{positionAbsolute:b,position:N}=Av(y,_,i,r,void 0,u);y.position=N,y.positionAbsolute=b}return y});s(h,!0,!1)},[])}const wr={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Zr=e=>{const t=({id:n,type:i,data:r,xPos:s,yPos:o,xPosOrigin:a,yPosOrigin:c,selected:u,onClick:d,onMouseEnter:f,onMouseMove:p,onMouseLeave:m,onContextMenu:v,onDoubleClick:g,style:x,className:h,isDraggable:y,isSelectable:_,isConnectable:b,isFocusable:N,selectNodesOnDrag:T,sourcePosition:C,targetPosition:P,hidden:j,resizeObserver:I,dragHandle:$,zIndex:S,isParent:F,noDragClassName:w,noPanClassName:B,initialized:H,disableKeyboardA11y:W,ariaLabel:R,rfId:D,hasHandleBounds:U})=>{const O=st(),A=k.useRef(null),Y=k.useRef(null),G=k.useRef(C),Z=k.useRef(P),se=k.useRef(i),le=_||y||d||f||p||m,ae=jv(),oe=Xr(n,O.getState,f),ue=Xr(n,O.getState,p),we=Xr(n,O.getState,m),ve=Xr(n,O.getState,v),ke=Xr(n,O.getState,g),E=L=>{const{nodeDragThreshold:M}=O.getState();if(_&&(!T||!y||M>0)&&Lu({id:n,store:O,nodeRef:A}),d){const q=O.getState().nodeInternals.get(n);q&&d(L,{...q})}},J=L=>{if(!zu(L)&&!W)if(Jw.includes(L.key)&&_){const M=L.key==="Escape";Lu({id:n,store:O,unselect:M,nodeRef:A})}else y&&u&&Object.prototype.hasOwnProperty.call(wr,L.key)&&(O.setState({ariaLiveMessage:`Moved selected node ${L.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~s}, y: ${~~o}`}),ae({x:wr[L.key].x,y:wr[L.key].y,isShiftPressed:L.shiftKey}))};k.useEffect(()=>()=>{Y.current&&(I==null||I.unobserve(Y.current),Y.current=null)},[]),k.useEffect(()=>{if(A.current&&!j){const L=A.current;(!H||!U||Y.current!==L)&&(Y.current&&(I==null||I.unobserve(Y.current)),I==null||I.observe(L),Y.current=L)}},[j,H,U]),k.useEffect(()=>{const L=se.current!==i,M=G.current!==C,q=Z.current!==P;A.current&&(L||M||q)&&(L&&(se.current=i),M&&(G.current=C),q&&(Z.current=P),O.getState().updateNodeDimensions([{id:n,nodeElement:A.current,forceUpdate:!0}]))},[n,i,C,P]);const te=Cv({nodeRef:A,disabled:j||!y,noDragClassName:w,handleSelector:$,nodeId:n,isSelectable:_,selectNodesOnDrag:T});return j?null:ie.createElement("div",{className:pt(["react-flow__node",`react-flow__node-${i}`,{[B]:y},h,{selected:u,selectable:_,parent:F,dragging:te}]),ref:A,style:{zIndex:S,transform:`translate(${a}px,${c}px)`,pointerEvents:le?"all":"none",visibility:H?"visible":"hidden",...x},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:oe,onMouseMove:ue,onMouseLeave:we,onContextMenu:ve,onClick:E,onDoubleClick:ke,onKeyDown:N?J:void 0,tabIndex:N?0:void 0,role:N?"button":void 0,"aria-describedby":W?void 0:`${vv}-${D}`,"aria-label":R},ie.createElement(s3,{value:n},ie.createElement(e,{id:n,data:r,type:i,xPos:s,yPos:o,selected:u,isConnectable:b,sourcePosition:C,targetPosition:P,dragging:te,dragHandle:$,zIndex:S})))};return t.displayName="NodeWrapper",k.memo(t)};const V3=e=>{const t=e.getNodes().filter(n=>n.selected);return{...El(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function G3({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const i=st(),{width:r,height:s,x:o,y:a,transformString:c,userSelectionActive:u}=Le(V3,lt),d=jv(),f=k.useRef(null);if(k.useEffect(()=>{var v;n||(v=f.current)==null||v.focus({preventScroll:!0})},[n]),Cv({nodeRef:f}),u||!r||!s)return null;const p=e?v=>{const g=i.getState().getNodes().filter(x=>x.selected);e(v,g)}:void 0,m=v=>{Object.prototype.hasOwnProperty.call(wr,v.key)&&d({x:wr[v.key].x,y:wr[v.key].y,isShiftPressed:v.shiftKey})};return ie.createElement("div",{className:pt(["react-flow__nodesselection","react-flow__container",t]),style:{transform:c}},ie.createElement("div",{ref:f,className:"react-flow__nodesselection-rect",onContextMenu:p,tabIndex:n?void 0:-1,onKeyDown:n?void 0:m,style:{width:r,height:s,top:a,left:o}}))}var q3=k.memo(G3);const Y3=e=>e.nodesSelectionActive,Tv=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:i,onPaneMouseLeave:r,onPaneContextMenu:s,onPaneScroll:o,deleteKeyCode:a,onMove:c,onMoveStart:u,onMoveEnd:d,selectionKeyCode:f,selectionOnDrag:p,selectionMode:m,onSelectionStart:v,onSelectionEnd:g,multiSelectionKeyCode:x,panActivationKeyCode:h,zoomActivationKeyCode:y,elementsSelectable:_,zoomOnScroll:b,zoomOnPinch:N,panOnScroll:T,panOnScrollSpeed:C,panOnScrollMode:P,zoomOnDoubleClick:j,panOnDrag:I,defaultViewport:$,translateExtent:S,minZoom:F,maxZoom:w,preventScrolling:B,onSelectionContextMenu:H,noWheelClassName:W,noPanClassName:R,disableKeyboardA11y:D})=>{const U=Le(Y3),O=Ks(f),A=Ks(h),Y=A||I,G=A||T,Z=O||p&&Y!==!0;return M3({deleteKeyCode:a,multiSelectionKeyCode:x}),ie.createElement(O3,{onMove:c,onMoveStart:u,onMoveEnd:d,onPaneContextMenu:s,elementsSelectable:_,zoomOnScroll:b,zoomOnPinch:N,panOnScroll:G,panOnScrollSpeed:C,panOnScrollMode:P,zoomOnDoubleClick:j,panOnDrag:!O&&Y,defaultViewport:$,translateExtent:S,minZoom:F,maxZoom:w,zoomActivationKeyCode:y,preventScrolling:B,noWheelClassName:W,noPanClassName:R},ie.createElement(Sv,{onSelectionStart:v,onSelectionEnd:g,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:i,onPaneMouseLeave:r,onPaneContextMenu:s,onPaneScroll:o,panOnDrag:Y,isSelecting:!!Z,selectionMode:m},e,U&&ie.createElement(q3,{onSelectionContextMenu:H,noPanClassName:R,disableKeyboardA11y:D})))};Tv.displayName="FlowRenderer";var X3=k.memo(Tv);function Z3(e){return Le(k.useCallback(n=>e?ov(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[e]))}function Q3(e){const t={input:Zr(e.input||hv),default:Zr(e.default||Bu),output:Zr(e.output||yv),group:Zr(e.group||gf)},n={},i=Object.keys(e).filter(r=>!["input","default","output","group"].includes(r)).reduce((r,s)=>(r[s]=Zr(e[s]||Bu),r),n);return{...t,...i}}const J3=({x:e,y:t,width:n,height:i,origin:r})=>!n||!i?{x:e,y:t}:r[0]<0||r[1]<0||r[0]>1||r[1]>1?{x:e,y:t}:{x:e-n*r[0],y:t-i*r[1]},eA=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),Rv=e=>{const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:i,elementsSelectable:r,updateNodeDimensions:s,onError:o}=Le(eA,lt),a=Z3(e.onlyRenderVisibleElements),c=k.useRef(),u=k.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const d=new ResizeObserver(f=>{const p=f.map(m=>({id:m.target.getAttribute("data-id"),nodeElement:m.target,forceUpdate:!0}));s(p)});return c.current=d,d},[]);return k.useEffect(()=>()=>{var d;(d=c==null?void 0:c.current)==null||d.disconnect()},[]),ie.createElement("div",{className:"react-flow__nodes",style:wf},a.map(d=>{var N,T,C;let f=d.type||"default";e.nodeTypes[f]||(o==null||o("003",zn.error003(f)),f="default");const p=e.nodeTypes[f]||e.nodeTypes.default,m=!!(d.draggable||t&&typeof d.draggable>"u"),v=!!(d.selectable||r&&typeof d.selectable>"u"),g=!!(d.connectable||n&&typeof d.connectable>"u"),x=!!(d.focusable||i&&typeof d.focusable>"u"),h=e.nodeExtent?uf(d.positionAbsolute,e.nodeExtent):d.positionAbsolute,y=(h==null?void 0:h.x)??0,_=(h==null?void 0:h.y)??0,b=J3({x:y,y:_,width:d.width??0,height:d.height??0,origin:e.nodeOrigin});return ie.createElement(p,{key:d.id,id:d.id,className:d.className,style:d.style,type:f,data:d.data,sourcePosition:d.sourcePosition||ye.Bottom,targetPosition:d.targetPosition||ye.Top,hidden:d.hidden,xPos:y,yPos:_,xPosOrigin:b.x,yPosOrigin:b.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!d.selected,isDraggable:m,isSelectable:v,isConnectable:g,isFocusable:x,resizeObserver:u,dragHandle:d.dragHandle,zIndex:((N=d[Qe])==null?void 0:N.z)??0,isParent:!!((T=d[Qe])!=null&&T.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!d.width&&!!d.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:d.ariaLabel,hasHandleBounds:!!((C=d[Qe])!=null&&C.handleBounds)})}))};Rv.displayName="NodeRenderer";var tA=k.memo(Rv);const nA=(e,t,n)=>n===ye.Left?e-t:n===ye.Right?e+t:e,iA=(e,t,n)=>n===ye.Top?e-t:n===ye.Bottom?e+t:e,Dm="react-flow__edgeupdater",Mm=({position:e,centerX:t,centerY:n,radius:i=10,onMouseDown:r,onMouseEnter:s,onMouseOut:o,type:a})=>ie.createElement("circle",{onMouseDown:r,onMouseEnter:s,onMouseOut:o,className:pt([Dm,`${Dm}-${a}`]),cx:nA(t,i,e),cy:iA(n,i,e),r:i,stroke:"transparent",fill:"transparent"}),rA=()=>!0;var Ki=e=>{const t=({id:n,className:i,type:r,data:s,onClick:o,onEdgeDoubleClick:a,selected:c,animated:u,label:d,labelStyle:f,labelShowBg:p,labelBgStyle:m,labelBgPadding:v,labelBgBorderRadius:g,style:x,source:h,target:y,sourceX:_,sourceY:b,targetX:N,targetY:T,sourcePosition:C,targetPosition:P,elementsSelectable:j,hidden:I,sourceHandleId:$,targetHandleId:S,onContextMenu:F,onMouseEnter:w,onMouseMove:B,onMouseLeave:H,reconnectRadius:W,onReconnect:R,onReconnectStart:D,onReconnectEnd:U,markerEnd:O,markerStart:A,rfId:Y,ariaLabel:G,isFocusable:Z,isReconnectable:se,pathOptions:le,interactionWidth:ae,disableKeyboardA11y:oe})=>{const ue=k.useRef(null),[we,ve]=k.useState(!1),[ke,E]=k.useState(!1),J=st(),te=k.useMemo(()=>`url('#${Pu(A,Y)}')`,[A,Y]),L=k.useMemo(()=>`url('#${Pu(O,Y)}')`,[O,Y]);if(I)return null;const M=Ne=>{var pe;const{edges:_e,addSelectedEdges:Ie,unselectNodesAndEdges:Et,multiSelectionActive:re}=J.getState(),ge=_e.find(be=>be.id===n);ge&&(j&&(J.setState({nodesSelectionActive:!1}),ge.selected&&re?(Et({nodes:[],edges:[ge]}),(pe=ue.current)==null||pe.blur()):Ie([n])),o&&o(Ne,ge))},q=Yr(n,J.getState,a),K=Yr(n,J.getState,F),ne=Yr(n,J.getState,w),z=Yr(n,J.getState,B),V=Yr(n,J.getState,H),Q=(Ne,_e)=>{if(Ne.button!==0)return;const{edges:Ie,isValidConnection:Et}=J.getState(),re=_e?y:h,ge=(_e?S:$)||null,pe=_e?"target":"source",be=Et||rA,Ee=_e,Ae=Ie.find(Ge=>Ge.id===n);E(!0),D==null||D(Ne,Ae,pe);const Ke=Ge=>{E(!1),U==null||U(Ge,Ae,pe)};dv({event:Ne,handleId:ge,nodeId:re,onConnect:Ge=>R==null?void 0:R(Ae,Ge),isTarget:Ee,getState:J.getState,setState:J.setState,isValidConnection:be,edgeUpdaterType:pe,onReconnectEnd:Ke})},X=Ne=>Q(Ne,!0),ee=Ne=>Q(Ne,!1),ce=()=>ve(!0),fe=()=>ve(!1),me=!j&&!o,Se=Ne=>{var _e;if(!oe&&Jw.includes(Ne.key)&&j){const{unselectNodesAndEdges:Ie,addSelectedEdges:Et,edges:re}=J.getState();Ne.key==="Escape"?((_e=ue.current)==null||_e.blur(),Ie({edges:[re.find(pe=>pe.id===n)]})):Et([n])}};return ie.createElement("g",{className:pt(["react-flow__edge",`react-flow__edge-${r}`,i,{selected:c,animated:u,inactive:me,updating:we}]),onClick:M,onDoubleClick:q,onContextMenu:K,onMouseEnter:ne,onMouseMove:z,onMouseLeave:V,onKeyDown:Z?Se:void 0,tabIndex:Z?0:void 0,role:Z?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":G===null?void 0:G||`Edge from ${h} to ${y}`,"aria-describedby":Z?`${xv}-${Y}`:void 0,ref:ue},!ke&&ie.createElement(e,{id:n,source:h,target:y,selected:c,animated:u,label:d,labelStyle:f,labelShowBg:p,labelBgStyle:m,labelBgPadding:v,labelBgBorderRadius:g,data:s,style:x,sourceX:_,sourceY:b,targetX:N,targetY:T,sourcePosition:C,targetPosition:P,sourceHandleId:$,targetHandleId:S,markerStart:te,markerEnd:L,pathOptions:le,interactionWidth:ae}),se&&ie.createElement(ie.Fragment,null,(se==="source"||se===!0)&&ie.createElement(Mm,{position:C,centerX:_,centerY:b,radius:W,onMouseDown:X,onMouseEnter:ce,onMouseOut:fe,type:"source"}),(se==="target"||se===!0)&&ie.createElement(Mm,{position:P,centerX:N,centerY:T,radius:W,onMouseDown:ee,onMouseEnter:ce,onMouseOut:fe,type:"target"})))};return t.displayName="EdgeWrapper",k.memo(t)};function sA(e){const t={default:Ki(e.default||La),straight:Ki(e.bezier||pf),step:Ki(e.step||ff),smoothstep:Ki(e.step||kl),simplebezier:Ki(e.simplebezier||df)},n={},i=Object.keys(e).filter(r=>!["default","bezier"].includes(r)).reduce((r,s)=>(r[s]=Ki(e[s]||La),r),n);return{...t,...i}}function zm(e,t,n=null){const i=((n==null?void 0:n.x)||0)+t.x,r=((n==null?void 0:n.y)||0)+t.y,s=(n==null?void 0:n.width)||t.width,o=(n==null?void 0:n.height)||t.height;switch(e){case ye.Top:return{x:i+s/2,y:r};case ye.Right:return{x:i+s,y:r+o/2};case ye.Bottom:return{x:i+s/2,y:r+o};case ye.Left:return{x:i,y:r+o/2}}}function Fm(e,t){return e?e.length===1||!t?e[0]:t&&e.find(n=>n.id===t)||null:null}const oA=(e,t,n,i,r,s)=>{const o=zm(n,e,t),a=zm(s,i,r);return{sourceX:o.x,sourceY:o.y,targetX:a.x,targetY:a.y}};function aA({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:i,targetWidth:r,targetHeight:s,width:o,height:a,transform:c}){const u={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+r),y2:Math.max(e.y+i,t.y+s)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const d=Hs({x:(0-c[0])/c[2],y:(0-c[1])/c[2],width:o/c[2],height:a/c[2]}),f=Math.max(0,Math.min(d.x2,u.x2)-Math.max(d.x,u.x)),p=Math.max(0,Math.min(d.y2,u.y2)-Math.max(d.y,u.y));return Math.ceil(f*p)>0}function Pm(e){var i,r,s,o,a;const t=((i=e==null?void 0:e[Qe])==null?void 0:i.handleBounds)||null,n=t&&(e==null?void 0:e.width)&&(e==null?void 0:e.height)&&typeof((r=e==null?void 0:e.positionAbsolute)==null?void 0:r.x)<"u"&&typeof((s=e==null?void 0:e.positionAbsolute)==null?void 0:s.y)<"u";return[{x:((o=e==null?void 0:e.positionAbsolute)==null?void 0:o.x)||0,y:((a=e==null?void 0:e.positionAbsolute)==null?void 0:a.y)||0,width:(e==null?void 0:e.width)||0,height:(e==null?void 0:e.height)||0},t,!!n]}const lA=[{level:0,isMaxLevel:!0,edges:[]}];function cA(e,t,n=!1){let i=-1;const r=e.reduce((o,a)=>{var d,f;const c=Wt(a.zIndex);let u=c?a.zIndex:0;if(n){const p=t.get(a.target),m=t.get(a.source),v=a.selected||(p==null?void 0:p.selected)||(m==null?void 0:m.selected),g=Math.max(((d=m==null?void 0:m[Qe])==null?void 0:d.z)||0,((f=p==null?void 0:p[Qe])==null?void 0:f.z)||0,1e3);u=(c?a.zIndex:0)+(v?g:0)}return o[u]?o[u].push(a):o[u]=[a],i=u>i?u:i,o},{}),s=Object.entries(r).map(([o,a])=>{const c=+o;return{edges:a,level:c,isMaxLevel:c===i}});return s.length===0?lA:s}function uA(e,t,n){const i=Le(k.useCallback(r=>e?r.edges.filter(s=>{const o=t.get(s.source),a=t.get(s.target);return(o==null?void 0:o.width)&&(o==null?void 0:o.height)&&(a==null?void 0:a.width)&&(a==null?void 0:a.height)&&aA({sourcePos:o.positionAbsolute||{x:0,y:0},targetPos:a.positionAbsolute||{x:0,y:0},sourceWidth:o.width,sourceHeight:o.height,targetWidth:a.width,targetHeight:a.height,width:r.width,height:r.height,transform:r.transform})}):r.edges,[e,t]));return cA(i,t,n)}const dA=({color:e="none",strokeWidth:t=1})=>ie.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),fA=({color:e="none",strokeWidth:t=1})=>ie.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),Om={[Ws.Arrow]:dA,[Ws.ArrowClosed]:fA};function pA(e){const t=st();return k.useMemo(()=>{var r,s;return Object.prototype.hasOwnProperty.call(Om,e)?Om[e]:((s=(r=t.getState()).onError)==null||s.call(r,"009",zn.error009(e)),null)},[e])}const mA=({id:e,type:t,color:n,width:i=12.5,height:r=12.5,markerUnits:s="strokeWidth",strokeWidth:o,orient:a="auto-start-reverse"})=>{const c=pA(t);return c?ie.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${i}`,markerHeight:`${r}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:a,refX:"0",refY:"0"},ie.createElement(c,{color:n,strokeWidth:o})):null},hA=({defaultColor:e,rfId:t})=>n=>{const i=[];return n.edges.reduce((r,s)=>([s.markerStart,s.markerEnd].forEach(o=>{if(o&&typeof o=="object"){const a=Pu(o,t);i.includes(a)||(r.push({id:a,color:o.color||e,...o}),i.push(a))}}),r),[]).sort((r,s)=>r.id.localeCompare(s.id))},Dv=({defaultColor:e,rfId:t})=>{const n=Le(k.useCallback(hA({defaultColor:e,rfId:t}),[e,t]),(i,r)=>!(i.length!==r.length||i.some((s,o)=>s.id!==r[o].id)));return ie.createElement("defs",null,n.map(i=>ie.createElement(mA,{id:i.id,key:i.id,type:i.type,color:i.color,width:i.width,height:i.height,markerUnits:i.markerUnits,strokeWidth:i.strokeWidth,orient:i.orient})))};Dv.displayName="MarkerDefinitions";var gA=k.memo(Dv);const yA=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),Mv=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:n,rfId:i,edgeTypes:r,noPanClassName:s,onEdgeContextMenu:o,onEdgeMouseEnter:a,onEdgeMouseMove:c,onEdgeMouseLeave:u,onEdgeClick:d,onEdgeDoubleClick:f,onReconnect:p,onReconnectStart:m,onReconnectEnd:v,reconnectRadius:g,children:x,disableKeyboardA11y:h})=>{const{edgesFocusable:y,edgesUpdatable:_,elementsSelectable:b,width:N,height:T,connectionMode:C,nodeInternals:P,onError:j}=Le(yA,lt),I=uA(t,P,n);return N?ie.createElement(ie.Fragment,null,I.map(({level:$,edges:S,isMaxLevel:F})=>ie.createElement("svg",{key:$,style:{zIndex:$},width:N,height:T,className:"react-flow__edges react-flow__container"},F&&ie.createElement(gA,{defaultColor:e,rfId:i}),ie.createElement("g",null,S.map(w=>{const[B,H,W]=Pm(P.get(w.source)),[R,D,U]=Pm(P.get(w.target));if(!W||!U)return null;let O=w.type||"default";r[O]||(j==null||j("011",zn.error011(O)),O="default");const A=r[O]||r.default,Y=C===zi.Strict?D.target:(D.target??[]).concat(D.source??[]),G=Fm(H.source,w.sourceHandle),Z=Fm(Y,w.targetHandle),se=(G==null?void 0:G.position)||ye.Bottom,le=(Z==null?void 0:Z.position)||ye.Top,ae=!!(w.focusable||y&&typeof w.focusable>"u"),oe=w.reconnectable||w.updatable,ue=typeof p<"u"&&(oe||_&&typeof oe>"u");if(!G||!Z)return j==null||j("008",zn.error008(G,w)),null;const{sourceX:we,sourceY:ve,targetX:ke,targetY:E}=oA(B,G,se,R,Z,le);return ie.createElement(A,{key:w.id,id:w.id,className:pt([w.className,s]),type:O,data:w.data,selected:!!w.selected,animated:!!w.animated,hidden:!!w.hidden,label:w.label,labelStyle:w.labelStyle,labelShowBg:w.labelShowBg,labelBgStyle:w.labelBgStyle,labelBgPadding:w.labelBgPadding,labelBgBorderRadius:w.labelBgBorderRadius,style:w.style,source:w.source,target:w.target,sourceHandleId:w.sourceHandle,targetHandleId:w.targetHandle,markerEnd:w.markerEnd,markerStart:w.markerStart,sourceX:we,sourceY:ve,targetX:ke,targetY:E,sourcePosition:se,targetPosition:le,elementsSelectable:b,onContextMenu:o,onMouseEnter:a,onMouseMove:c,onMouseLeave:u,onClick:d,onEdgeDoubleClick:f,onReconnect:p,onReconnectStart:m,onReconnectEnd:v,reconnectRadius:g,rfId:i,ariaLabel:w.ariaLabel,isFocusable:ae,isReconnectable:ue,pathOptions:"pathOptions"in w?w.pathOptions:void 0,interactionWidth:w.interactionWidth,disableKeyboardA11y:h})})))),x):null};Mv.displayName="EdgeRenderer";var wA=k.memo(Mv);const vA=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function xA({children:e}){const t=Le(vA);return ie.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function _A(e){const t=yf(),n=k.useRef(!1);k.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const bA={[ye.Left]:ye.Right,[ye.Right]:ye.Left,[ye.Top]:ye.Bottom,[ye.Bottom]:ye.Top},zv=({nodeId:e,handleType:t,style:n,type:i=Yn.Bezier,CustomComponent:r,connectionStatus:s})=>{var T,C,P;const{fromNode:o,handleId:a,toX:c,toY:u,connectionMode:d}=Le(k.useCallback(j=>({fromNode:j.nodeInternals.get(e),handleId:j.connectionHandleId,toX:(j.connectionPosition.x-j.transform[0])/j.transform[2],toY:(j.connectionPosition.y-j.transform[1])/j.transform[2],connectionMode:j.connectionMode}),[e]),lt),f=(T=o==null?void 0:o[Qe])==null?void 0:T.handleBounds;let p=f==null?void 0:f[t];if(d===zi.Loose&&(p=p||(f==null?void 0:f[t==="source"?"target":"source"])),!o||!p)return null;const m=a?p.find(j=>j.id===a):p[0],v=m?m.x+m.width/2:(o.width??0)/2,g=m?m.y+m.height/2:o.height??0,x=(((C=o.positionAbsolute)==null?void 0:C.x)??0)+v,h=(((P=o.positionAbsolute)==null?void 0:P.y)??0)+g,y=m==null?void 0:m.position,_=y?bA[y]:null;if(!y||!_)return null;if(r)return ie.createElement(r,{connectionLineType:i,connectionLineStyle:n,fromNode:o,fromHandle:m,fromX:x,fromY:h,toX:c,toY:u,fromPosition:y,toPosition:_,connectionStatus:s});let b="";const N={sourceX:x,sourceY:h,sourcePosition:y,targetX:c,targetY:u,targetPosition:_};return i===Yn.Bezier?[b]=rv(N):i===Yn.Step?[b]=Fu({...N,borderRadius:0}):i===Yn.SmoothStep?[b]=Fu(N):i===Yn.SimpleBezier?[b]=iv(N):b=`M${x},${h} ${c},${u}`,ie.createElement("path",{d:b,fill:"none",className:"react-flow__connection-path",style:n})};zv.displayName="ConnectionLine";const kA=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function EA({containerStyle:e,style:t,type:n,component:i}){const{nodeId:r,handleType:s,nodesConnectable:o,width:a,height:c,connectionStatus:u}=Le(kA,lt);return!(r&&s&&a&&o)?null:ie.createElement("svg",{style:e,width:a,height:c,className:"react-flow__edges react-flow__connectionline react-flow__container"},ie.createElement("g",{className:pt(["react-flow__connection",u])},ie.createElement(zv,{nodeId:r,handleType:s,style:t,type:n,CustomComponent:i,connectionStatus:u})))}function Bm(e,t){return k.useRef(null),st(),k.useMemo(()=>t(e),[e])}const Fv=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:i,onMoveEnd:r,onInit:s,onNodeClick:o,onEdgeClick:a,onNodeDoubleClick:c,onEdgeDoubleClick:u,onNodeMouseEnter:d,onNodeMouseMove:f,onNodeMouseLeave:p,onNodeContextMenu:m,onSelectionContextMenu:v,onSelectionStart:g,onSelectionEnd:x,connectionLineType:h,connectionLineStyle:y,connectionLineComponent:_,connectionLineContainerStyle:b,selectionKeyCode:N,selectionOnDrag:T,selectionMode:C,multiSelectionKeyCode:P,panActivationKeyCode:j,zoomActivationKeyCode:I,deleteKeyCode:$,onlyRenderVisibleElements:S,elementsSelectable:F,selectNodesOnDrag:w,defaultViewport:B,translateExtent:H,minZoom:W,maxZoom:R,preventScrolling:D,defaultMarkerColor:U,zoomOnScroll:O,zoomOnPinch:A,panOnScroll:Y,panOnScrollSpeed:G,panOnScrollMode:Z,zoomOnDoubleClick:se,panOnDrag:le,onPaneClick:ae,onPaneMouseEnter:oe,onPaneMouseMove:ue,onPaneMouseLeave:we,onPaneScroll:ve,onPaneContextMenu:ke,onEdgeContextMenu:E,onEdgeMouseEnter:J,onEdgeMouseMove:te,onEdgeMouseLeave:L,onReconnect:M,onReconnectStart:q,onReconnectEnd:K,reconnectRadius:ne,noDragClassName:z,noWheelClassName:V,noPanClassName:Q,elevateEdgesOnSelect:X,disableKeyboardA11y:ee,nodeOrigin:ce,nodeExtent:fe,rfId:me})=>{const Se=Bm(e,Q3),Ne=Bm(t,sA);return _A(s),ie.createElement(X3,{onPaneClick:ae,onPaneMouseEnter:oe,onPaneMouseMove:ue,onPaneMouseLeave:we,onPaneContextMenu:ke,onPaneScroll:ve,deleteKeyCode:$,selectionKeyCode:N,selectionOnDrag:T,selectionMode:C,onSelectionStart:g,onSelectionEnd:x,multiSelectionKeyCode:P,panActivationKeyCode:j,zoomActivationKeyCode:I,elementsSelectable:F,onMove:n,onMoveStart:i,onMoveEnd:r,zoomOnScroll:O,zoomOnPinch:A,zoomOnDoubleClick:se,panOnScroll:Y,panOnScrollSpeed:G,panOnScrollMode:Z,panOnDrag:le,defaultViewport:B,translateExtent:H,minZoom:W,maxZoom:R,onSelectionContextMenu:v,preventScrolling:D,noDragClassName:z,noWheelClassName:V,noPanClassName:Q,disableKeyboardA11y:ee},ie.createElement(xA,null,ie.createElement(wA,{edgeTypes:Ne,onEdgeClick:a,onEdgeDoubleClick:u,onlyRenderVisibleElements:S,onEdgeContextMenu:E,onEdgeMouseEnter:J,onEdgeMouseMove:te,onEdgeMouseLeave:L,onReconnect:M,onReconnectStart:q,onReconnectEnd:K,reconnectRadius:ne,defaultMarkerColor:U,noPanClassName:Q,elevateEdgesOnSelect:!!X,disableKeyboardA11y:ee,rfId:me},ie.createElement(EA,{style:y,type:h,component:_,containerStyle:b})),ie.createElement("div",{className:"react-flow__edgelabel-renderer"}),ie.createElement(tA,{nodeTypes:Se,onNodeClick:o,onNodeDoubleClick:c,onNodeMouseEnter:d,onNodeMouseMove:f,onNodeMouseLeave:p,onNodeContextMenu:m,selectNodesOnDrag:w,onlyRenderVisibleElements:S,noPanClassName:Q,noDragClassName:z,disableKeyboardA11y:ee,nodeOrigin:ce,nodeExtent:fe,rfId:me})))};Fv.displayName="GraphView";var NA=k.memo(Fv);const Uu=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Ln={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:Uu,nodeExtent:Uu,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:zi.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:JI,isValidConnection:void 0},SA=()=>mE((e,t)=>({...Ln,setNodes:n=>{const{nodeInternals:i,nodeOrigin:r,elevateNodesOnSelect:s}=t();e({nodeInternals:mc(n,i,r,s)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:i={}}=t();e({edges:n.map(r=>({...i,...r}))})},setDefaultNodesAndEdges:(n,i)=>{const r=typeof n<"u",s=typeof i<"u",o=r?mc(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:o,edges:s?i:[],hasDefaultNodes:r,hasDefaultEdges:s})},updateNodeDimensions:n=>{const{onNodesChange:i,nodeInternals:r,fitViewOnInit:s,fitViewOnInitDone:o,fitViewOnInitOptions:a,domNode:c,nodeOrigin:u}=t(),d=c==null?void 0:c.querySelector(".react-flow__viewport");if(!d)return;const f=window.getComputedStyle(d),{m22:p}=new window.DOMMatrixReadOnly(f.transform),m=n.reduce((g,x)=>{const h=r.get(x.id);if(h!=null&&h.hidden)r.set(h.id,{...h,[Qe]:{...h[Qe],handleBounds:void 0}});else if(h){const y=cf(x.nodeElement);!!(y.width&&y.height&&(h.width!==y.width||h.height!==y.height||x.forceUpdate))&&(r.set(h.id,{...h,[Qe]:{...h[Qe],handleBounds:{source:Rm(".source",x.nodeElement,p,u),target:Rm(".target",x.nodeElement,p,u)}},...y}),g.push({id:h.id,type:"dimensions",dimensions:y}))}return g},[]);bv(r,u);const v=o||s&&!o&&kv(t,{initial:!0,...a});e({nodeInternals:new Map(r),fitViewOnInitDone:v}),(m==null?void 0:m.length)>0&&(i==null||i(m))},updateNodePositions:(n,i=!0,r=!1)=>{const{triggerNodeChanges:s}=t(),o=n.map(a=>{const c={id:a.id,type:"position",dragging:r};return i&&(c.positionAbsolute=a.positionAbsolute,c.position=a.position),c});s(o)},triggerNodeChanges:n=>{const{onNodesChange:i,nodeInternals:r,hasDefaultNodes:s,nodeOrigin:o,getNodes:a,elevateNodesOnSelect:c}=t();if(n!=null&&n.length){if(s){const u=Nv(n,a()),d=mc(u,r,o,c);e({nodeInternals:d})}i==null||i(n)}},addSelectedNodes:n=>{const{multiSelectionActive:i,edges:r,getNodes:s}=t();let o,a=null;i?o=n.map(c=>Kn(c,!0)):(o=ar(s(),n),a=ar(r,[])),Oo({changedNodes:o,changedEdges:a,get:t,set:e})},addSelectedEdges:n=>{const{multiSelectionActive:i,edges:r,getNodes:s}=t();let o,a=null;i?o=n.map(c=>Kn(c,!0)):(o=ar(r,n),a=ar(s(),[])),Oo({changedNodes:a,changedEdges:o,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:i}={})=>{const{edges:r,getNodes:s}=t(),o=n||s(),a=i||r,c=o.map(d=>(d.selected=!1,Kn(d.id,!1))),u=a.map(d=>Kn(d.id,!1));Oo({changedNodes:c,changedEdges:u,get:t,set:e})},setMinZoom:n=>{const{d3Zoom:i,maxZoom:r}=t();i==null||i.scaleExtent([n,r]),e({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:i,minZoom:r}=t();i==null||i.scaleExtent([r,n]),e({maxZoom:n})},setTranslateExtent:n=>{var i;(i=t().d3Zoom)==null||i.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:i}=t(),s=i().filter(a=>a.selected).map(a=>Kn(a.id,!1)),o=n.filter(a=>a.selected).map(a=>Kn(a.id,!1));Oo({changedNodes:s,changedEdges:o,get:t,set:e})},setNodeExtent:n=>{const{nodeInternals:i}=t();i.forEach(r=>{r.positionAbsolute=uf(r.position,n)}),e({nodeExtent:n,nodeInternals:new Map(i)})},panBy:n=>{const{transform:i,width:r,height:s,d3Zoom:o,d3Selection:a,translateExtent:c}=t();if(!o||!a||!n.x&&!n.y)return!1;const u=An.translate(i[0]+n.x,i[1]+n.y).scale(i[2]),d=[[0,0],[r,s]],f=o==null?void 0:o.constrain()(u,d,c);return o.transform(a,f),i[0]!==f.x||i[1]!==f.y||i[2]!==f.k},cancelConnection:()=>e({connectionNodeId:Ln.connectionNodeId,connectionHandleId:Ln.connectionHandleId,connectionHandleType:Ln.connectionHandleType,connectionStatus:Ln.connectionStatus,connectionStartHandle:Ln.connectionStartHandle,connectionEndHandle:Ln.connectionEndHandle}),reset:()=>e({...Ln})}),Object.is),Pv=({children:e})=>{const t=k.useRef(null);return t.current||(t.current=SA()),ie.createElement(VI,{value:t.current},e)};Pv.displayName="ReactFlowProvider";const Ov=({children:e})=>k.useContext(bl)?ie.createElement(ie.Fragment,null,e):ie.createElement(Pv,null,e);Ov.displayName="ReactFlowWrapper";const IA={input:hv,default:Bu,output:yv,group:gf},AA={default:La,straight:pf,step:ff,smoothstep:kl,simplebezier:df},CA=[0,0],jA=[15,15],TA={x:0,y:0,zoom:1},RA={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},Bv=k.forwardRef(({nodes:e,edges:t,defaultNodes:n,defaultEdges:i,className:r,nodeTypes:s=IA,edgeTypes:o=AA,onNodeClick:a,onEdgeClick:c,onInit:u,onMove:d,onMoveStart:f,onMoveEnd:p,onConnect:m,onConnectStart:v,onConnectEnd:g,onClickConnectStart:x,onClickConnectEnd:h,onNodeMouseEnter:y,onNodeMouseMove:_,onNodeMouseLeave:b,onNodeContextMenu:N,onNodeDoubleClick:T,onNodeDragStart:C,onNodeDrag:P,onNodeDragStop:j,onNodesDelete:I,onEdgesDelete:$,onSelectionChange:S,onSelectionDragStart:F,onSelectionDrag:w,onSelectionDragStop:B,onSelectionContextMenu:H,onSelectionStart:W,onSelectionEnd:R,connectionMode:D=zi.Strict,connectionLineType:U=Yn.Bezier,connectionLineStyle:O,connectionLineComponent:A,connectionLineContainerStyle:Y,deleteKeyCode:G="Backspace",selectionKeyCode:Z="Shift",selectionOnDrag:se=!1,selectionMode:le=$s.Full,panActivationKeyCode:ae="Space",multiSelectionKeyCode:oe=Ba()?"Meta":"Control",zoomActivationKeyCode:ue=Ba()?"Meta":"Control",snapToGrid:we=!1,snapGrid:ve=jA,onlyRenderVisibleElements:ke=!1,selectNodesOnDrag:E=!0,nodesDraggable:J,nodesConnectable:te,nodesFocusable:L,nodeOrigin:M=CA,edgesFocusable:q,edgesUpdatable:K,elementsSelectable:ne,defaultViewport:z=TA,minZoom:V=.5,maxZoom:Q=2,translateExtent:X=Uu,preventScrolling:ee=!0,nodeExtent:ce,defaultMarkerColor:fe="#b1b1b7",zoomOnScroll:me=!0,zoomOnPinch:Se=!0,panOnScroll:Ne=!1,panOnScrollSpeed:_e=.5,panOnScrollMode:Ie=bi.Free,zoomOnDoubleClick:Et=!0,panOnDrag:re=!0,onPaneClick:ge,onPaneMouseEnter:pe,onPaneMouseMove:be,onPaneMouseLeave:Ee,onPaneScroll:Ae,onPaneContextMenu:Ke,children:Ve,onEdgeContextMenu:Ge,onEdgeDoubleClick:ze,onEdgeMouseEnter:qt,onEdgeMouseMove:Sl,onEdgeMouseLeave:Il,onEdgeUpdate:$e,onEdgeUpdateStart:lo,onEdgeUpdateEnd:co,onReconnect:Pr,onReconnectStart:Qx,onReconnectEnd:Jx,reconnectRadius:e0=10,edgeUpdaterRadius:t0=10,onNodesChange:n0,onEdgesChange:i0,noDragClassName:r0="nodrag",noWheelClassName:s0="nowheel",noPanClassName:Sf="nopan",fitView:o0=!1,fitViewOptions:a0,connectOnClick:l0=!0,attributionPosition:c0,proOptions:u0,defaultEdgeOptions:d0,elevateNodesOnSelect:f0=!0,elevateEdgesOnSelect:p0=!1,disableKeyboardA11y:If=!1,autoPanOnConnect:m0=!0,autoPanOnNodeDrag:h0=!0,connectionRadius:g0=20,isValidConnection:y0,onError:w0,style:v0,id:Af,nodeDragThreshold:x0,..._0},b0)=>{const Al=Af||"1";return ie.createElement("div",{..._0,style:{...v0,...RA},ref:b0,className:pt(["react-flow",r]),"data-testid":"rf__wrapper",id:Af},ie.createElement(Ov,null,ie.createElement(NA,{onInit:u,onMove:d,onMoveStart:f,onMoveEnd:p,onNodeClick:a,onEdgeClick:c,onNodeMouseEnter:y,onNodeMouseMove:_,onNodeMouseLeave:b,onNodeContextMenu:N,onNodeDoubleClick:T,nodeTypes:s,edgeTypes:o,connectionLineType:U,connectionLineStyle:O,connectionLineComponent:A,connectionLineContainerStyle:Y,selectionKeyCode:Z,selectionOnDrag:se,selectionMode:le,deleteKeyCode:G,multiSelectionKeyCode:oe,panActivationKeyCode:ae,zoomActivationKeyCode:ue,onlyRenderVisibleElements:ke,selectNodesOnDrag:E,defaultViewport:z,translateExtent:X,minZoom:V,maxZoom:Q,preventScrolling:ee,zoomOnScroll:me,zoomOnPinch:Se,zoomOnDoubleClick:Et,panOnScroll:Ne,panOnScrollSpeed:_e,panOnScrollMode:Ie,panOnDrag:re,onPaneClick:ge,onPaneMouseEnter:pe,onPaneMouseMove:be,onPaneMouseLeave:Ee,onPaneScroll:Ae,onPaneContextMenu:Ke,onSelectionContextMenu:H,onSelectionStart:W,onSelectionEnd:R,onEdgeContextMenu:Ge,onEdgeDoubleClick:ze,onEdgeMouseEnter:qt,onEdgeMouseMove:Sl,onEdgeMouseLeave:Il,onReconnect:Pr??$e,onReconnectStart:Qx??lo,onReconnectEnd:Jx??co,reconnectRadius:e0??t0,defaultMarkerColor:fe,noDragClassName:r0,noWheelClassName:s0,noPanClassName:Sf,elevateEdgesOnSelect:p0,rfId:Al,disableKeyboardA11y:If,nodeOrigin:M,nodeExtent:ce}),ie.createElement(b3,{nodes:e,edges:t,defaultNodes:n,defaultEdges:i,onConnect:m,onConnectStart:v,onConnectEnd:g,onClickConnectStart:x,onClickConnectEnd:h,nodesDraggable:J,nodesConnectable:te,nodesFocusable:L,edgesFocusable:q,edgesUpdatable:K,elementsSelectable:ne,elevateNodesOnSelect:f0,minZoom:V,maxZoom:Q,nodeExtent:ce,onNodesChange:n0,onEdgesChange:i0,snapToGrid:we,snapGrid:ve,connectionMode:D,translateExtent:X,connectOnClick:l0,defaultEdgeOptions:d0,fitView:o0,fitViewOptions:a0,onNodesDelete:I,onEdgesDelete:$,onNodeDragStart:C,onNodeDrag:P,onNodeDragStop:j,onSelectionDrag:w,onSelectionDragStart:F,onSelectionDragStop:B,noPanClassName:Sf,nodeOrigin:M,rfId:Al,autoPanOnConnect:m0,autoPanOnNodeDrag:h0,onError:w0,connectionRadius:g0,isValidConnection:y0,nodeDragThreshold:x0}),ie.createElement(x3,{onSelectionChange:S}),Ve,ie.createElement(qI,{proOptions:u0,position:c0}),ie.createElement(I3,{rfId:Al,disableKeyboardA11y:If})))});Bv.displayName="ReactFlow";function Lv(e){return t=>{const[n,i]=k.useState(t),r=k.useCallback(s=>i(o=>e(s,o)),[]);return[n,i,r]}}const DA=Lv(Nv),MA=Lv(U3),Uv=({id:e,x:t,y:n,width:i,height:r,style:s,color:o,strokeColor:a,strokeWidth:c,className:u,borderRadius:d,shapeRendering:f,onClick:p,selected:m})=>{const{background:v,backgroundColor:g}=s||{},x=o||v||g;return ie.createElement("rect",{className:pt(["react-flow__minimap-node",{selected:m},u]),x:t,y:n,rx:d,ry:d,width:i,height:r,fill:x,stroke:a,strokeWidth:c,shapeRendering:f,onClick:p?h=>p(h,e):void 0})};Uv.displayName="MiniMapNode";var zA=k.memo(Uv);const FA=e=>e.nodeOrigin,PA=e=>e.getNodes().filter(t=>!t.hidden&&t.width&&t.height),wc=e=>e instanceof Function?e:()=>e;function OA({nodeStrokeColor:e="transparent",nodeColor:t="#e2e2e2",nodeClassName:n="",nodeBorderRadius:i=5,nodeStrokeWidth:r=2,nodeComponent:s=zA,onClick:o}){const a=Le(PA,lt),c=Le(FA),u=wc(t),d=wc(e),f=wc(n),p=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return ie.createElement(ie.Fragment,null,a.map(m=>{const{x:v,y:g}=Si(m,c).positionAbsolute;return ie.createElement(s,{key:m.id,x:v,y:g,width:m.width,height:m.height,style:m.style,selected:m.selected,className:f(m),color:u(m),borderRadius:i,strokeColor:d(m),strokeWidth:r,shapeRendering:p,onClick:o,id:m.id})}))}var BA=k.memo(OA);const LA=200,UA=150,HA=e=>{const t=e.getNodes(),n={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:n,boundingRect:t.length>0?ZI(El(t,e.nodeOrigin),n):n,rfId:e.rfId}},$A="react-flow__minimap-desc";function Hv({style:e,className:t,nodeStrokeColor:n="transparent",nodeColor:i="#e2e2e2",nodeClassName:r="",nodeBorderRadius:s=5,nodeStrokeWidth:o=2,nodeComponent:a,maskColor:c="rgb(240, 240, 240, 0.6)",maskStrokeColor:u="none",maskStrokeWidth:d=1,position:f="bottom-right",onClick:p,onNodeClick:m,pannable:v=!1,zoomable:g=!1,ariaLabel:x="React Flow mini map",inversePan:h=!1,zoomStep:y=10,offsetScale:_=5}){const b=st(),N=k.useRef(null),{boundingRect:T,viewBB:C,rfId:P}=Le(HA,lt),j=(e==null?void 0:e.width)??LA,I=(e==null?void 0:e.height)??UA,$=T.width/j,S=T.height/I,F=Math.max($,S),w=F*j,B=F*I,H=_*F,W=T.x-(w-T.width)/2-H,R=T.y-(B-T.height)/2-H,D=w+H*2,U=B+H*2,O=`${$A}-${P}`,A=k.useRef(0);A.current=F,k.useEffect(()=>{if(N.current){const Z=Ht(N.current),se=oe=>{const{transform:ue,d3Selection:we,d3Zoom:ve}=b.getState();if(oe.sourceEvent.type!=="wheel"||!we||!ve)return;const ke=-oe.sourceEvent.deltaY*(oe.sourceEvent.deltaMode===1?.05:oe.sourceEvent.deltaMode?1:.002)*y,E=ue[2]*Math.pow(2,ke);ve.scaleTo(we,E)},le=oe=>{const{transform:ue,d3Selection:we,d3Zoom:ve,translateExtent:ke,width:E,height:J}=b.getState();if(oe.sourceEvent.type!=="mousemove"||!we||!ve)return;const te=A.current*Math.max(1,ue[2])*(h?-1:1),L={x:ue[0]-oe.sourceEvent.movementX*te,y:ue[1]-oe.sourceEvent.movementY*te},M=[[0,0],[E,J]],q=An.translate(L.x,L.y).scale(ue[2]),K=ve.constrain()(q,M,ke);ve.transform(we,K)},ae=Gw().on("zoom",v?le:null).on("zoom.wheel",g?se:null);return Z.call(ae),()=>{Z.on("zoom",null)}}},[v,g,h,y]);const Y=p?Z=>{const se=Qt(Z);p(Z,{x:se[0],y:se[1]})}:void 0,G=m?(Z,se)=>{const le=b.getState().nodeInternals.get(se);m(Z,le)}:void 0;return ie.createElement(lf,{position:f,style:e,className:pt(["react-flow__minimap",t]),"data-testid":"rf__minimap"},ie.createElement("svg",{width:j,height:I,viewBox:`${W} ${R} ${D} ${U}`,role:"img","aria-labelledby":O,ref:N,onClick:Y},x&&ie.createElement("title",{id:O},x),ie.createElement(BA,{onClick:G,nodeColor:i,nodeStrokeColor:n,nodeBorderRadius:s,nodeClassName:r,nodeStrokeWidth:o,nodeComponent:a}),ie.createElement("path",{className:"react-flow__minimap-mask",d:`M${W-H},${R-H}h${D+H*2}v${U+H*2}h${-D-H*2}z
        M${C.x},${C.y}h${C.width}v${C.height}h${-C.width}z`,fill:c,fillRule:"evenodd",stroke:u,strokeWidth:d,pointerEvents:"none"})))}Hv.displayName="MiniMap";var WA=k.memo(Hv);function KA(){return ie.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},ie.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function VA(){return ie.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},ie.createElement("path",{d:"M0 0h32v4.2H0z"}))}function GA(){return ie.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},ie.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function qA(){return ie.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},ie.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function YA(){return ie.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},ie.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const os=({children:e,className:t,...n})=>ie.createElement("button",{type:"button",className:pt(["react-flow__controls-button",t]),...n},e);os.displayName="ControlButton";const XA=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),$v=({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:i=!0,fitViewOptions:r,onZoomIn:s,onZoomOut:o,onFitView:a,onInteractiveChange:c,className:u,children:d,position:f="bottom-left"})=>{const p=st(),[m,v]=k.useState(!1),{isInteractive:g,minZoomReached:x,maxZoomReached:h}=Le(XA,lt),{zoomIn:y,zoomOut:_,fitView:b}=yf();if(k.useEffect(()=>{v(!0)},[]),!m)return null;const N=()=>{y(),s==null||s()},T=()=>{_(),o==null||o()},C=()=>{b(r),a==null||a()},P=()=>{p.setState({nodesDraggable:!g,nodesConnectable:!g,elementsSelectable:!g}),c==null||c(!g)};return ie.createElement(lf,{className:pt(["react-flow__controls",u]),position:f,style:e,"data-testid":"rf__controls"},t&&ie.createElement(ie.Fragment,null,ie.createElement(os,{onClick:N,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:h},ie.createElement(KA,null)),ie.createElement(os,{onClick:T,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:x},ie.createElement(VA,null))),n&&ie.createElement(os,{className:"react-flow__controls-fitview",onClick:C,title:"fit view","aria-label":"fit view"},ie.createElement(GA,null)),i&&ie.createElement(os,{className:"react-flow__controls-interactive",onClick:P,title:"toggle interactivity","aria-label":"toggle interactivity"},g?ie.createElement(YA,null):ie.createElement(qA,null)),d)};$v.displayName="Controls";var ZA=k.memo($v),sn;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(sn||(sn={}));function QA({color:e,dimensions:t,lineWidth:n}){return ie.createElement("path",{stroke:e,strokeWidth:n,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function JA({color:e,radius:t}){return ie.createElement("circle",{cx:t,cy:t,r:t,fill:e})}const eC={[sn.Dots]:"#91919a",[sn.Lines]:"#eee",[sn.Cross]:"#e2e2e2"},tC={[sn.Dots]:1,[sn.Lines]:1,[sn.Cross]:6},nC=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function Wv({id:e,variant:t=sn.Dots,gap:n=20,size:i,lineWidth:r=1,offset:s=2,color:o,style:a,className:c}){const u=k.useRef(null),{transform:d,patternId:f}=Le(nC,lt),p=o||eC[t],m=i||tC[t],v=t===sn.Dots,g=t===sn.Cross,x=Array.isArray(n)?n:[n,n],h=[x[0]*d[2]||1,x[1]*d[2]||1],y=m*d[2],_=g?[y,y]:h,b=v?[y/s,y/s]:[_[0]/s,_[1]/s];return ie.createElement("svg",{className:pt(["react-flow__background",c]),style:{...a,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:u,"data-testid":"rf__background"},ie.createElement("pattern",{id:f+e,x:d[0]%h[0],y:d[1]%h[1],width:h[0],height:h[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${b[0]},-${b[1]})`},v?ie.createElement(JA,{color:p,radius:y/s}):ie.createElement(QA,{dimensions:_,color:p,lineWidth:r})),ie.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${f+e})`}))}Wv.displayName="Background";var iC=k.memo(Wv);/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */function Kv(e){return typeof e>"u"||e===null}function rC(e){return typeof e=="object"&&e!==null}function sC(e){return Array.isArray(e)?e:Kv(e)?[]:[e]}function oC(e,t){var n,i,r,s;if(t)for(s=Object.keys(t),n=0,i=s.length;n<i;n+=1)r=s[n],e[r]=t[r];return e}function aC(e,t){var n="",i;for(i=0;i<t;i+=1)n+=e;return n}function lC(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}var cC=Kv,uC=rC,dC=sC,fC=aC,pC=lC,mC=oC,it={isNothing:cC,isObject:uC,toArray:dC,repeat:fC,isNegativeZero:pC,extend:mC};function Vv(e,t){var n="",i=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(n+='in "'+e.mark.name+'" '),n+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(n+=`

`+e.mark.snippet),i+" "+n):i}function Vs(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=Vv(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}Vs.prototype=Object.create(Error.prototype);Vs.prototype.constructor=Vs;Vs.prototype.toString=function(t){return this.name+": "+Vv(this,t)};var xt=Vs;function vc(e,t,n,i,r){var s="",o="",a=Math.floor(r/2)-1;return i-t>a&&(s=" ... ",t=i-a+s.length),n-i>a&&(o=" ...",n=i+a-o.length),{str:s+e.slice(t,n).replace(/\t/g,"")+o,pos:i-t+s.length}}function xc(e,t){return it.repeat(" ",t-e.length)+e}function hC(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),typeof t.indent!="number"&&(t.indent=1),typeof t.linesBefore!="number"&&(t.linesBefore=3),typeof t.linesAfter!="number"&&(t.linesAfter=2);for(var n=/\r?\n|\r|\0/g,i=[0],r=[],s,o=-1;s=n.exec(e.buffer);)r.push(s.index),i.push(s.index+s[0].length),e.position<=s.index&&o<0&&(o=i.length-2);o<0&&(o=i.length-1);var a="",c,u,d=Math.min(e.line+t.linesAfter,r.length).toString().length,f=t.maxLength-(t.indent+d+3);for(c=1;c<=t.linesBefore&&!(o-c<0);c++)u=vc(e.buffer,i[o-c],r[o-c],e.position-(i[o]-i[o-c]),f),a=it.repeat(" ",t.indent)+xc((e.line-c+1).toString(),d)+" | "+u.str+`
`+a;for(u=vc(e.buffer,i[o],r[o],e.position,f),a+=it.repeat(" ",t.indent)+xc((e.line+1).toString(),d)+" | "+u.str+`
`,a+=it.repeat("-",t.indent+d+3+u.pos)+`^
`,c=1;c<=t.linesAfter&&!(o+c>=r.length);c++)u=vc(e.buffer,i[o+c],r[o+c],e.position-(i[o]-i[o+c]),f),a+=it.repeat(" ",t.indent)+xc((e.line+c+1).toString(),d)+" | "+u.str+`
`;return a.replace(/\n$/,"")}var gC=hC,yC=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],wC=["scalar","sequence","mapping"];function vC(e){var t={};return e!==null&&Object.keys(e).forEach(function(n){e[n].forEach(function(i){t[String(i)]=n})}),t}function xC(e,t){if(t=t||{},Object.keys(t).forEach(function(n){if(yC.indexOf(n)===-1)throw new xt('Unknown option "'+n+'" is met in definition of "'+e+'" YAML type.')}),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(n){return n},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=vC(t.styleAliases||null),wC.indexOf(this.kind)===-1)throw new xt('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}var dt=xC;function Lm(e,t){var n=[];return e[t].forEach(function(i){var r=n.length;n.forEach(function(s,o){s.tag===i.tag&&s.kind===i.kind&&s.multi===i.multi&&(r=o)}),n[r]=i}),n}function _C(){var e={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},t,n;function i(r){r.multi?(e.multi[r.kind].push(r),e.multi.fallback.push(r)):e[r.kind][r.tag]=e.fallback[r.tag]=r}for(t=0,n=arguments.length;t<n;t+=1)arguments[t].forEach(i);return e}function Hu(e){return this.extend(e)}Hu.prototype.extend=function(t){var n=[],i=[];if(t instanceof dt)i.push(t);else if(Array.isArray(t))i=i.concat(t);else if(t&&(Array.isArray(t.implicit)||Array.isArray(t.explicit)))t.implicit&&(n=n.concat(t.implicit)),t.explicit&&(i=i.concat(t.explicit));else throw new xt("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");n.forEach(function(s){if(!(s instanceof dt))throw new xt("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(s.loadKind&&s.loadKind!=="scalar")throw new xt("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(s.multi)throw new xt("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),i.forEach(function(s){if(!(s instanceof dt))throw new xt("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var r=Object.create(Hu.prototype);return r.implicit=(this.implicit||[]).concat(n),r.explicit=(this.explicit||[]).concat(i),r.compiledImplicit=Lm(r,"implicit"),r.compiledExplicit=Lm(r,"explicit"),r.compiledTypeMap=_C(r.compiledImplicit,r.compiledExplicit),r};var Gv=Hu,qv=new dt("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return e!==null?e:""}}),Yv=new dt("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return e!==null?e:[]}}),Xv=new dt("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return e!==null?e:{}}}),Zv=new Gv({explicit:[qv,Yv,Xv]});function bC(e){if(e===null)return!0;var t=e.length;return t===1&&e==="~"||t===4&&(e==="null"||e==="Null"||e==="NULL")}function kC(){return null}function EC(e){return e===null}var Qv=new dt("tag:yaml.org,2002:null",{kind:"scalar",resolve:bC,construct:kC,predicate:EC,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function NC(e){if(e===null)return!1;var t=e.length;return t===4&&(e==="true"||e==="True"||e==="TRUE")||t===5&&(e==="false"||e==="False"||e==="FALSE")}function SC(e){return e==="true"||e==="True"||e==="TRUE"}function IC(e){return Object.prototype.toString.call(e)==="[object Boolean]"}var Jv=new dt("tag:yaml.org,2002:bool",{kind:"scalar",resolve:NC,construct:SC,predicate:IC,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"});function AC(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function CC(e){return 48<=e&&e<=55}function jC(e){return 48<=e&&e<=57}function TC(e){if(e===null)return!1;var t=e.length,n=0,i=!1,r;if(!t)return!1;if(r=e[n],(r==="-"||r==="+")&&(r=e[++n]),r==="0"){if(n+1===t)return!0;if(r=e[++n],r==="b"){for(n++;n<t;n++)if(r=e[n],r!=="_"){if(r!=="0"&&r!=="1")return!1;i=!0}return i&&r!=="_"}if(r==="x"){for(n++;n<t;n++)if(r=e[n],r!=="_"){if(!AC(e.charCodeAt(n)))return!1;i=!0}return i&&r!=="_"}if(r==="o"){for(n++;n<t;n++)if(r=e[n],r!=="_"){if(!CC(e.charCodeAt(n)))return!1;i=!0}return i&&r!=="_"}}if(r==="_")return!1;for(;n<t;n++)if(r=e[n],r!=="_"){if(!jC(e.charCodeAt(n)))return!1;i=!0}return!(!i||r==="_")}function RC(e){var t=e,n=1,i;if(t.indexOf("_")!==-1&&(t=t.replace(/_/g,"")),i=t[0],(i==="-"||i==="+")&&(i==="-"&&(n=-1),t=t.slice(1),i=t[0]),t==="0")return 0;if(i==="0"){if(t[1]==="b")return n*parseInt(t.slice(2),2);if(t[1]==="x")return n*parseInt(t.slice(2),16);if(t[1]==="o")return n*parseInt(t.slice(2),8)}return n*parseInt(t,10)}function DC(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!it.isNegativeZero(e)}var ex=new dt("tag:yaml.org,2002:int",{kind:"scalar",resolve:TC,construct:RC,predicate:DC,represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),MC=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function zC(e){return!(e===null||!MC.test(e)||e[e.length-1]==="_")}function FC(e){var t,n;return t=e.replace(/_/g,"").toLowerCase(),n=t[0]==="-"?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),t===".inf"?n===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:n*parseFloat(t,10)}var PC=/^[-+]?[0-9]+e/;function OC(e,t){var n;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(it.isNegativeZero(e))return"-0.0";return n=e.toString(10),PC.test(n)?n.replace("e",".e"):n}function BC(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||it.isNegativeZero(e))}var tx=new dt("tag:yaml.org,2002:float",{kind:"scalar",resolve:zC,construct:FC,predicate:BC,represent:OC,defaultStyle:"lowercase"}),nx=Zv.extend({implicit:[Qv,Jv,ex,tx]}),ix=nx,rx=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),sx=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function LC(e){return e===null?!1:rx.exec(e)!==null||sx.exec(e)!==null}function UC(e){var t,n,i,r,s,o,a,c=0,u=null,d,f,p;if(t=rx.exec(e),t===null&&(t=sx.exec(e)),t===null)throw new Error("Date resolve error");if(n=+t[1],i=+t[2]-1,r=+t[3],!t[4])return new Date(Date.UTC(n,i,r));if(s=+t[4],o=+t[5],a=+t[6],t[7]){for(c=t[7].slice(0,3);c.length<3;)c+="0";c=+c}return t[9]&&(d=+t[10],f=+(t[11]||0),u=(d*60+f)*6e4,t[9]==="-"&&(u=-u)),p=new Date(Date.UTC(n,i,r,s,o,a,c)),u&&p.setTime(p.getTime()-u),p}function HC(e){return e.toISOString()}var ox=new dt("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:LC,construct:UC,instanceOf:Date,represent:HC});function $C(e){return e==="<<"||e===null}var ax=new dt("tag:yaml.org,2002:merge",{kind:"scalar",resolve:$C}),vf=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function WC(e){if(e===null)return!1;var t,n,i=0,r=e.length,s=vf;for(n=0;n<r;n++)if(t=s.indexOf(e.charAt(n)),!(t>64)){if(t<0)return!1;i+=6}return i%8===0}function KC(e){var t,n,i=e.replace(/[\r\n=]/g,""),r=i.length,s=vf,o=0,a=[];for(t=0;t<r;t++)t%4===0&&t&&(a.push(o>>16&255),a.push(o>>8&255),a.push(o&255)),o=o<<6|s.indexOf(i.charAt(t));return n=r%4*6,n===0?(a.push(o>>16&255),a.push(o>>8&255),a.push(o&255)):n===18?(a.push(o>>10&255),a.push(o>>2&255)):n===12&&a.push(o>>4&255),new Uint8Array(a)}function VC(e){var t="",n=0,i,r,s=e.length,o=vf;for(i=0;i<s;i++)i%3===0&&i&&(t+=o[n>>18&63],t+=o[n>>12&63],t+=o[n>>6&63],t+=o[n&63]),n=(n<<8)+e[i];return r=s%3,r===0?(t+=o[n>>18&63],t+=o[n>>12&63],t+=o[n>>6&63],t+=o[n&63]):r===2?(t+=o[n>>10&63],t+=o[n>>4&63],t+=o[n<<2&63],t+=o[64]):r===1&&(t+=o[n>>2&63],t+=o[n<<4&63],t+=o[64],t+=o[64]),t}function GC(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}var lx=new dt("tag:yaml.org,2002:binary",{kind:"scalar",resolve:WC,construct:KC,predicate:GC,represent:VC}),qC=Object.prototype.hasOwnProperty,YC=Object.prototype.toString;function XC(e){if(e===null)return!0;var t=[],n,i,r,s,o,a=e;for(n=0,i=a.length;n<i;n+=1){if(r=a[n],o=!1,YC.call(r)!=="[object Object]")return!1;for(s in r)if(qC.call(r,s))if(!o)o=!0;else return!1;if(!o)return!1;if(t.indexOf(s)===-1)t.push(s);else return!1}return!0}function ZC(e){return e!==null?e:[]}var cx=new dt("tag:yaml.org,2002:omap",{kind:"sequence",resolve:XC,construct:ZC}),QC=Object.prototype.toString;function JC(e){if(e===null)return!0;var t,n,i,r,s,o=e;for(s=new Array(o.length),t=0,n=o.length;t<n;t+=1){if(i=o[t],QC.call(i)!=="[object Object]"||(r=Object.keys(i),r.length!==1))return!1;s[t]=[r[0],i[r[0]]]}return!0}function e2(e){if(e===null)return[];var t,n,i,r,s,o=e;for(s=new Array(o.length),t=0,n=o.length;t<n;t+=1)i=o[t],r=Object.keys(i),s[t]=[r[0],i[r[0]]];return s}var ux=new dt("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:JC,construct:e2}),t2=Object.prototype.hasOwnProperty;function n2(e){if(e===null)return!0;var t,n=e;for(t in n)if(t2.call(n,t)&&n[t]!==null)return!1;return!0}function i2(e){return e!==null?e:{}}var dx=new dt("tag:yaml.org,2002:set",{kind:"mapping",resolve:n2,construct:i2}),xf=ix.extend({implicit:[ox,ax],explicit:[lx,cx,ux,dx]}),ui=Object.prototype.hasOwnProperty,Ua=1,fx=2,px=3,Ha=4,_c=1,r2=2,Um=3,s2=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,o2=/[\x85\u2028\u2029]/,a2=/[,\[\]\{\}]/,mx=/^(?:!|!!|![a-z\-]+!)$/i,hx=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function Hm(e){return Object.prototype.toString.call(e)}function hn(e){return e===10||e===13}function Ii(e){return e===9||e===32}function At(e){return e===9||e===32||e===10||e===13}function lr(e){return e===44||e===91||e===93||e===123||e===125}function l2(e){var t;return 48<=e&&e<=57?e-48:(t=e|32,97<=t&&t<=102?t-97+10:-1)}function c2(e){return e===120?2:e===117?4:e===85?8:0}function u2(e){return 48<=e&&e<=57?e-48:-1}function $m(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"":e===95?"":e===76?"\u2028":e===80?"\u2029":""}function d2(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}var gx=new Array(256),yx=new Array(256);for(var Vi=0;Vi<256;Vi++)gx[Vi]=$m(Vi)?1:0,yx[Vi]=$m(Vi);function f2(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||xf,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function wx(e,t){var n={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return n.snippet=gC(n),new xt(t,n)}function xe(e,t){throw wx(e,t)}function $a(e,t){e.onWarning&&e.onWarning.call(null,wx(e,t))}var Wm={YAML:function(t,n,i){var r,s,o;t.version!==null&&xe(t,"duplication of %YAML directive"),i.length!==1&&xe(t,"YAML directive accepts exactly one argument"),r=/^([0-9]+)\.([0-9]+)$/.exec(i[0]),r===null&&xe(t,"ill-formed argument of the YAML directive"),s=parseInt(r[1],10),o=parseInt(r[2],10),s!==1&&xe(t,"unacceptable YAML version of the document"),t.version=i[0],t.checkLineBreaks=o<2,o!==1&&o!==2&&$a(t,"unsupported YAML version of the document")},TAG:function(t,n,i){var r,s;i.length!==2&&xe(t,"TAG directive accepts exactly two arguments"),r=i[0],s=i[1],mx.test(r)||xe(t,"ill-formed tag handle (first argument) of the TAG directive"),ui.call(t.tagMap,r)&&xe(t,'there is a previously declared suffix for "'+r+'" tag handle'),hx.test(s)||xe(t,"ill-formed tag prefix (second argument) of the TAG directive");try{s=decodeURIComponent(s)}catch{xe(t,"tag prefix is malformed: "+s)}t.tagMap[r]=s}};function ai(e,t,n,i){var r,s,o,a;if(t<n){if(a=e.input.slice(t,n),i)for(r=0,s=a.length;r<s;r+=1)o=a.charCodeAt(r),o===9||32<=o&&o<=1114111||xe(e,"expected valid JSON character");else s2.test(a)&&xe(e,"the stream contains non-printable characters");e.result+=a}}function Km(e,t,n,i){var r,s,o,a;for(it.isObject(n)||xe(e,"cannot merge mappings; the provided source object is unacceptable"),r=Object.keys(n),o=0,a=r.length;o<a;o+=1)s=r[o],ui.call(t,s)||(t[s]=n[s],i[s]=!0)}function cr(e,t,n,i,r,s,o,a,c){var u,d;if(Array.isArray(r))for(r=Array.prototype.slice.call(r),u=0,d=r.length;u<d;u+=1)Array.isArray(r[u])&&xe(e,"nested arrays are not supported inside keys"),typeof r=="object"&&Hm(r[u])==="[object Object]"&&(r[u]="[object Object]");if(typeof r=="object"&&Hm(r)==="[object Object]"&&(r="[object Object]"),r=String(r),t===null&&(t={}),i==="tag:yaml.org,2002:merge")if(Array.isArray(s))for(u=0,d=s.length;u<d;u+=1)Km(e,t,s[u],n);else Km(e,t,s,n);else!e.json&&!ui.call(n,r)&&ui.call(t,r)&&(e.line=o||e.line,e.lineStart=a||e.lineStart,e.position=c||e.position,xe(e,"duplicated mapping key")),r==="__proto__"?Object.defineProperty(t,r,{configurable:!0,enumerable:!0,writable:!0,value:s}):t[r]=s,delete n[r];return t}function _f(e){var t;t=e.input.charCodeAt(e.position),t===10?e.position++:t===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):xe(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function tt(e,t,n){for(var i=0,r=e.input.charCodeAt(e.position);r!==0;){for(;Ii(r);)r===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),r=e.input.charCodeAt(++e.position);if(t&&r===35)do r=e.input.charCodeAt(++e.position);while(r!==10&&r!==13&&r!==0);if(hn(r))for(_f(e),r=e.input.charCodeAt(e.position),i++,e.lineIndent=0;r===32;)e.lineIndent++,r=e.input.charCodeAt(++e.position);else break}return n!==-1&&i!==0&&e.lineIndent<n&&$a(e,"deficient indentation"),i}function Nl(e){var t=e.position,n;return n=e.input.charCodeAt(t),!!((n===45||n===46)&&n===e.input.charCodeAt(t+1)&&n===e.input.charCodeAt(t+2)&&(t+=3,n=e.input.charCodeAt(t),n===0||At(n)))}function bf(e,t){t===1?e.result+=" ":t>1&&(e.result+=it.repeat(`
`,t-1))}function p2(e,t,n){var i,r,s,o,a,c,u,d,f=e.kind,p=e.result,m;if(m=e.input.charCodeAt(e.position),At(m)||lr(m)||m===35||m===38||m===42||m===33||m===124||m===62||m===39||m===34||m===37||m===64||m===96||(m===63||m===45)&&(r=e.input.charCodeAt(e.position+1),At(r)||n&&lr(r)))return!1;for(e.kind="scalar",e.result="",s=o=e.position,a=!1;m!==0;){if(m===58){if(r=e.input.charCodeAt(e.position+1),At(r)||n&&lr(r))break}else if(m===35){if(i=e.input.charCodeAt(e.position-1),At(i))break}else{if(e.position===e.lineStart&&Nl(e)||n&&lr(m))break;if(hn(m))if(c=e.line,u=e.lineStart,d=e.lineIndent,tt(e,!1,-1),e.lineIndent>=t){a=!0,m=e.input.charCodeAt(e.position);continue}else{e.position=o,e.line=c,e.lineStart=u,e.lineIndent=d;break}}a&&(ai(e,s,o,!1),bf(e,e.line-c),s=o=e.position,a=!1),Ii(m)||(o=e.position+1),m=e.input.charCodeAt(++e.position)}return ai(e,s,o,!1),e.result?!0:(e.kind=f,e.result=p,!1)}function m2(e,t){var n,i,r;if(n=e.input.charCodeAt(e.position),n!==39)return!1;for(e.kind="scalar",e.result="",e.position++,i=r=e.position;(n=e.input.charCodeAt(e.position))!==0;)if(n===39)if(ai(e,i,e.position,!0),n=e.input.charCodeAt(++e.position),n===39)i=e.position,e.position++,r=e.position;else return!0;else hn(n)?(ai(e,i,r,!0),bf(e,tt(e,!1,t)),i=r=e.position):e.position===e.lineStart&&Nl(e)?xe(e,"unexpected end of the document within a single quoted scalar"):(e.position++,r=e.position);xe(e,"unexpected end of the stream within a single quoted scalar")}function h2(e,t){var n,i,r,s,o,a;if(a=e.input.charCodeAt(e.position),a!==34)return!1;for(e.kind="scalar",e.result="",e.position++,n=i=e.position;(a=e.input.charCodeAt(e.position))!==0;){if(a===34)return ai(e,n,e.position,!0),e.position++,!0;if(a===92){if(ai(e,n,e.position,!0),a=e.input.charCodeAt(++e.position),hn(a))tt(e,!1,t);else if(a<256&&gx[a])e.result+=yx[a],e.position++;else if((o=c2(a))>0){for(r=o,s=0;r>0;r--)a=e.input.charCodeAt(++e.position),(o=l2(a))>=0?s=(s<<4)+o:xe(e,"expected hexadecimal character");e.result+=d2(s),e.position++}else xe(e,"unknown escape sequence");n=i=e.position}else hn(a)?(ai(e,n,i,!0),bf(e,tt(e,!1,t)),n=i=e.position):e.position===e.lineStart&&Nl(e)?xe(e,"unexpected end of the document within a double quoted scalar"):(e.position++,i=e.position)}xe(e,"unexpected end of the stream within a double quoted scalar")}function g2(e,t){var n=!0,i,r,s,o=e.tag,a,c=e.anchor,u,d,f,p,m,v=Object.create(null),g,x,h,y;if(y=e.input.charCodeAt(e.position),y===91)d=93,m=!1,a=[];else if(y===123)d=125,m=!0,a={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=a),y=e.input.charCodeAt(++e.position);y!==0;){if(tt(e,!0,t),y=e.input.charCodeAt(e.position),y===d)return e.position++,e.tag=o,e.anchor=c,e.kind=m?"mapping":"sequence",e.result=a,!0;n?y===44&&xe(e,"expected the node content, but found ','"):xe(e,"missed comma between flow collection entries"),x=g=h=null,f=p=!1,y===63&&(u=e.input.charCodeAt(e.position+1),At(u)&&(f=p=!0,e.position++,tt(e,!0,t))),i=e.line,r=e.lineStart,s=e.position,Tr(e,t,Ua,!1,!0),x=e.tag,g=e.result,tt(e,!0,t),y=e.input.charCodeAt(e.position),(p||e.line===i)&&y===58&&(f=!0,y=e.input.charCodeAt(++e.position),tt(e,!0,t),Tr(e,t,Ua,!1,!0),h=e.result),m?cr(e,a,v,x,g,h,i,r,s):f?a.push(cr(e,null,v,x,g,h,i,r,s)):a.push(g),tt(e,!0,t),y=e.input.charCodeAt(e.position),y===44?(n=!0,y=e.input.charCodeAt(++e.position)):n=!1}xe(e,"unexpected end of the stream within a flow collection")}function y2(e,t){var n,i,r=_c,s=!1,o=!1,a=t,c=0,u=!1,d,f;if(f=e.input.charCodeAt(e.position),f===124)i=!1;else if(f===62)i=!0;else return!1;for(e.kind="scalar",e.result="";f!==0;)if(f=e.input.charCodeAt(++e.position),f===43||f===45)_c===r?r=f===43?Um:r2:xe(e,"repeat of a chomping mode identifier");else if((d=u2(f))>=0)d===0?xe(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):o?xe(e,"repeat of an indentation width identifier"):(a=t+d-1,o=!0);else break;if(Ii(f)){do f=e.input.charCodeAt(++e.position);while(Ii(f));if(f===35)do f=e.input.charCodeAt(++e.position);while(!hn(f)&&f!==0)}for(;f!==0;){for(_f(e),e.lineIndent=0,f=e.input.charCodeAt(e.position);(!o||e.lineIndent<a)&&f===32;)e.lineIndent++,f=e.input.charCodeAt(++e.position);if(!o&&e.lineIndent>a&&(a=e.lineIndent),hn(f)){c++;continue}if(e.lineIndent<a){r===Um?e.result+=it.repeat(`
`,s?1+c:c):r===_c&&s&&(e.result+=`
`);break}for(i?Ii(f)?(u=!0,e.result+=it.repeat(`
`,s?1+c:c)):u?(u=!1,e.result+=it.repeat(`
`,c+1)):c===0?s&&(e.result+=" "):e.result+=it.repeat(`
`,c):e.result+=it.repeat(`
`,s?1+c:c),s=!0,o=!0,c=0,n=e.position;!hn(f)&&f!==0;)f=e.input.charCodeAt(++e.position);ai(e,n,e.position,!1)}return!0}function Vm(e,t){var n,i=e.tag,r=e.anchor,s=[],o,a=!1,c;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=s),c=e.input.charCodeAt(e.position);c!==0&&(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,xe(e,"tab characters must not be used in indentation")),!(c!==45||(o=e.input.charCodeAt(e.position+1),!At(o))));){if(a=!0,e.position++,tt(e,!0,-1)&&e.lineIndent<=t){s.push(null),c=e.input.charCodeAt(e.position);continue}if(n=e.line,Tr(e,t,px,!1,!0),s.push(e.result),tt(e,!0,-1),c=e.input.charCodeAt(e.position),(e.line===n||e.lineIndent>t)&&c!==0)xe(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break}return a?(e.tag=i,e.anchor=r,e.kind="sequence",e.result=s,!0):!1}function w2(e,t,n){var i,r,s,o,a,c,u=e.tag,d=e.anchor,f={},p=Object.create(null),m=null,v=null,g=null,x=!1,h=!1,y;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=f),y=e.input.charCodeAt(e.position);y!==0;){if(!x&&e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,xe(e,"tab characters must not be used in indentation")),i=e.input.charCodeAt(e.position+1),s=e.line,(y===63||y===58)&&At(i))y===63?(x&&(cr(e,f,p,m,v,null,o,a,c),m=v=g=null),h=!0,x=!0,r=!0):x?(x=!1,r=!0):xe(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,y=i;else{if(o=e.line,a=e.lineStart,c=e.position,!Tr(e,n,fx,!1,!0))break;if(e.line===s){for(y=e.input.charCodeAt(e.position);Ii(y);)y=e.input.charCodeAt(++e.position);if(y===58)y=e.input.charCodeAt(++e.position),At(y)||xe(e,"a whitespace character is expected after the key-value separator within a block mapping"),x&&(cr(e,f,p,m,v,null,o,a,c),m=v=g=null),h=!0,x=!1,r=!1,m=e.tag,v=e.result;else if(h)xe(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=u,e.anchor=d,!0}else if(h)xe(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=u,e.anchor=d,!0}if((e.line===s||e.lineIndent>t)&&(x&&(o=e.line,a=e.lineStart,c=e.position),Tr(e,t,Ha,!0,r)&&(x?v=e.result:g=e.result),x||(cr(e,f,p,m,v,g,o,a,c),m=v=g=null),tt(e,!0,-1),y=e.input.charCodeAt(e.position)),(e.line===s||e.lineIndent>t)&&y!==0)xe(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return x&&cr(e,f,p,m,v,null,o,a,c),h&&(e.tag=u,e.anchor=d,e.kind="mapping",e.result=f),h}function v2(e){var t,n=!1,i=!1,r,s,o;if(o=e.input.charCodeAt(e.position),o!==33)return!1;if(e.tag!==null&&xe(e,"duplication of a tag property"),o=e.input.charCodeAt(++e.position),o===60?(n=!0,o=e.input.charCodeAt(++e.position)):o===33?(i=!0,r="!!",o=e.input.charCodeAt(++e.position)):r="!",t=e.position,n){do o=e.input.charCodeAt(++e.position);while(o!==0&&o!==62);e.position<e.length?(s=e.input.slice(t,e.position),o=e.input.charCodeAt(++e.position)):xe(e,"unexpected end of the stream within a verbatim tag")}else{for(;o!==0&&!At(o);)o===33&&(i?xe(e,"tag suffix cannot contain exclamation marks"):(r=e.input.slice(t-1,e.position+1),mx.test(r)||xe(e,"named tag handle cannot contain such characters"),i=!0,t=e.position+1)),o=e.input.charCodeAt(++e.position);s=e.input.slice(t,e.position),a2.test(s)&&xe(e,"tag suffix cannot contain flow indicator characters")}s&&!hx.test(s)&&xe(e,"tag name cannot contain such characters: "+s);try{s=decodeURIComponent(s)}catch{xe(e,"tag name is malformed: "+s)}return n?e.tag=s:ui.call(e.tagMap,r)?e.tag=e.tagMap[r]+s:r==="!"?e.tag="!"+s:r==="!!"?e.tag="tag:yaml.org,2002:"+s:xe(e,'undeclared tag handle "'+r+'"'),!0}function x2(e){var t,n;if(n=e.input.charCodeAt(e.position),n!==38)return!1;for(e.anchor!==null&&xe(e,"duplication of an anchor property"),n=e.input.charCodeAt(++e.position),t=e.position;n!==0&&!At(n)&&!lr(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&xe(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function _2(e){var t,n,i;if(i=e.input.charCodeAt(e.position),i!==42)return!1;for(i=e.input.charCodeAt(++e.position),t=e.position;i!==0&&!At(i)&&!lr(i);)i=e.input.charCodeAt(++e.position);return e.position===t&&xe(e,"name of an alias node must contain at least one character"),n=e.input.slice(t,e.position),ui.call(e.anchorMap,n)||xe(e,'unidentified alias "'+n+'"'),e.result=e.anchorMap[n],tt(e,!0,-1),!0}function Tr(e,t,n,i,r){var s,o,a,c=1,u=!1,d=!1,f,p,m,v,g,x;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,s=o=a=Ha===n||px===n,i&&tt(e,!0,-1)&&(u=!0,e.lineIndent>t?c=1:e.lineIndent===t?c=0:e.lineIndent<t&&(c=-1)),c===1)for(;v2(e)||x2(e);)tt(e,!0,-1)?(u=!0,a=s,e.lineIndent>t?c=1:e.lineIndent===t?c=0:e.lineIndent<t&&(c=-1)):a=!1;if(a&&(a=u||r),(c===1||Ha===n)&&(Ua===n||fx===n?g=t:g=t+1,x=e.position-e.lineStart,c===1?a&&(Vm(e,x)||w2(e,x,g))||g2(e,g)?d=!0:(o&&y2(e,g)||m2(e,g)||h2(e,g)?d=!0:_2(e)?(d=!0,(e.tag!==null||e.anchor!==null)&&xe(e,"alias node should not have any properties")):p2(e,g,Ua===n)&&(d=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):c===0&&(d=a&&Vm(e,x))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&xe(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),f=0,p=e.implicitTypes.length;f<p;f+=1)if(v=e.implicitTypes[f],v.resolve(e.result)){e.result=v.construct(e.result),e.tag=v.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else if(e.tag!=="!"){if(ui.call(e.typeMap[e.kind||"fallback"],e.tag))v=e.typeMap[e.kind||"fallback"][e.tag];else for(v=null,m=e.typeMap.multi[e.kind||"fallback"],f=0,p=m.length;f<p;f+=1)if(e.tag.slice(0,m[f].tag.length)===m[f].tag){v=m[f];break}v||xe(e,"unknown tag !<"+e.tag+">"),e.result!==null&&v.kind!==e.kind&&xe(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+v.kind+'", not "'+e.kind+'"'),v.resolve(e.result,e.tag)?(e.result=v.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):xe(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||d}function b2(e){var t=e.position,n,i,r,s=!1,o;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(o=e.input.charCodeAt(e.position))!==0&&(tt(e,!0,-1),o=e.input.charCodeAt(e.position),!(e.lineIndent>0||o!==37));){for(s=!0,o=e.input.charCodeAt(++e.position),n=e.position;o!==0&&!At(o);)o=e.input.charCodeAt(++e.position);for(i=e.input.slice(n,e.position),r=[],i.length<1&&xe(e,"directive name must not be less than one character in length");o!==0;){for(;Ii(o);)o=e.input.charCodeAt(++e.position);if(o===35){do o=e.input.charCodeAt(++e.position);while(o!==0&&!hn(o));break}if(hn(o))break;for(n=e.position;o!==0&&!At(o);)o=e.input.charCodeAt(++e.position);r.push(e.input.slice(n,e.position))}o!==0&&_f(e),ui.call(Wm,i)?Wm[i](e,i,r):$a(e,'unknown document directive "'+i+'"')}if(tt(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,tt(e,!0,-1)):s&&xe(e,"directives end mark is expected"),Tr(e,e.lineIndent-1,Ha,!1,!0),tt(e,!0,-1),e.checkLineBreaks&&o2.test(e.input.slice(t,e.position))&&$a(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&Nl(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,tt(e,!0,-1));return}if(e.position<e.length-1)xe(e,"end of the stream or a document separator is expected");else return}function vx(e,t){e=String(e),t=t||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var n=new f2(e,t),i=e.indexOf("\0");for(i!==-1&&(n.position=i,xe(n,"null byte is not allowed in input")),n.input+="\0";n.input.charCodeAt(n.position)===32;)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)b2(n);return n.documents}function k2(e,t,n){t!==null&&typeof t=="object"&&typeof n>"u"&&(n=t,t=null);var i=vx(e,n);if(typeof t!="function")return i;for(var r=0,s=i.length;r<s;r+=1)t(i[r])}function E2(e,t){var n=vx(e,t);if(n.length!==0){if(n.length===1)return n[0];throw new xt("expected a single document in the stream, but found more")}}var N2=k2,S2=E2,xx={loadAll:N2,load:S2},_x=Object.prototype.toString,bx=Object.prototype.hasOwnProperty,kf=65279,I2=9,Gs=10,A2=13,C2=32,j2=33,T2=34,$u=35,R2=37,D2=38,M2=39,z2=42,kx=44,F2=45,Wa=58,P2=61,O2=62,B2=63,L2=64,Ex=91,Nx=93,U2=96,Sx=123,H2=124,Ix=125,wt={};wt[0]="\\0";wt[7]="\\a";wt[8]="\\b";wt[9]="\\t";wt[10]="\\n";wt[11]="\\v";wt[12]="\\f";wt[13]="\\r";wt[27]="\\e";wt[34]='\\"';wt[92]="\\\\";wt[133]="\\N";wt[160]="\\_";wt[8232]="\\L";wt[8233]="\\P";var $2=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],W2=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function K2(e,t){var n,i,r,s,o,a,c;if(t===null)return{};for(n={},i=Object.keys(t),r=0,s=i.length;r<s;r+=1)o=i[r],a=String(t[o]),o.slice(0,2)==="!!"&&(o="tag:yaml.org,2002:"+o.slice(2)),c=e.compiledTypeMap.fallback[o],c&&bx.call(c.styleAliases,a)&&(a=c.styleAliases[a]),n[o]=a;return n}function V2(e){var t,n,i;if(t=e.toString(16).toUpperCase(),e<=255)n="x",i=2;else if(e<=65535)n="u",i=4;else if(e<=4294967295)n="U",i=8;else throw new xt("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+n+it.repeat("0",i-t.length)+t}var G2=1,qs=2;function q2(e){this.schema=e.schema||xf,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=it.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=K2(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType=e.quotingType==='"'?qs:G2,this.forceQuotes=e.forceQuotes||!1,this.replacer=typeof e.replacer=="function"?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function Gm(e,t){for(var n=it.repeat(" ",t),i=0,r=-1,s="",o,a=e.length;i<a;)r=e.indexOf(`
`,i),r===-1?(o=e.slice(i),i=a):(o=e.slice(i,r+1),i=r+1),o.length&&o!==`
`&&(s+=n),s+=o;return s}function Wu(e,t){return`
`+it.repeat(" ",e.indent*t)}function Y2(e,t){var n,i,r;for(n=0,i=e.implicitTypes.length;n<i;n+=1)if(r=e.implicitTypes[n],r.resolve(t))return!0;return!1}function Ka(e){return e===C2||e===I2}function Ys(e){return 32<=e&&e<=126||161<=e&&e<=55295&&e!==8232&&e!==8233||57344<=e&&e<=65533&&e!==kf||65536<=e&&e<=1114111}function qm(e){return Ys(e)&&e!==kf&&e!==A2&&e!==Gs}function Ym(e,t,n){var i=qm(e),r=i&&!Ka(e);return(n?i:i&&e!==kx&&e!==Ex&&e!==Nx&&e!==Sx&&e!==Ix)&&e!==$u&&!(t===Wa&&!r)||qm(t)&&!Ka(t)&&e===$u||t===Wa&&r}function X2(e){return Ys(e)&&e!==kf&&!Ka(e)&&e!==F2&&e!==B2&&e!==Wa&&e!==kx&&e!==Ex&&e!==Nx&&e!==Sx&&e!==Ix&&e!==$u&&e!==D2&&e!==z2&&e!==j2&&e!==H2&&e!==P2&&e!==O2&&e!==M2&&e!==T2&&e!==R2&&e!==L2&&e!==U2}function Z2(e){return!Ka(e)&&e!==Wa}function as(e,t){var n=e.charCodeAt(t),i;return n>=55296&&n<=56319&&t+1<e.length&&(i=e.charCodeAt(t+1),i>=56320&&i<=57343)?(n-55296)*1024+i-56320+65536:n}function Ax(e){var t=/^\n* /;return t.test(e)}var Cx=1,Ku=2,jx=3,Tx=4,Gi=5;function Q2(e,t,n,i,r,s,o,a){var c,u=0,d=null,f=!1,p=!1,m=i!==-1,v=-1,g=X2(as(e,0))&&Z2(as(e,e.length-1));if(t||o)for(c=0;c<e.length;u>=65536?c+=2:c++){if(u=as(e,c),!Ys(u))return Gi;g=g&&Ym(u,d,a),d=u}else{for(c=0;c<e.length;u>=65536?c+=2:c++){if(u=as(e,c),u===Gs)f=!0,m&&(p=p||c-v-1>i&&e[v+1]!==" ",v=c);else if(!Ys(u))return Gi;g=g&&Ym(u,d,a),d=u}p=p||m&&c-v-1>i&&e[v+1]!==" "}return!f&&!p?g&&!o&&!r(e)?Cx:s===qs?Gi:Ku:n>9&&Ax(e)?Gi:o?s===qs?Gi:Ku:p?Tx:jx}function J2(e,t,n,i,r){e.dump=function(){if(t.length===0)return e.quotingType===qs?'""':"''";if(!e.noCompatMode&&($2.indexOf(t)!==-1||W2.test(t)))return e.quotingType===qs?'"'+t+'"':"'"+t+"'";var s=e.indent*Math.max(1,n),o=e.lineWidth===-1?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-s),a=i||e.flowLevel>-1&&n>=e.flowLevel;function c(u){return Y2(e,u)}switch(Q2(t,a,e.indent,o,c,e.quotingType,e.forceQuotes&&!i,r)){case Cx:return t;case Ku:return"'"+t.replace(/'/g,"''")+"'";case jx:return"|"+Xm(t,e.indent)+Zm(Gm(t,s));case Tx:return">"+Xm(t,e.indent)+Zm(Gm(ej(t,o),s));case Gi:return'"'+tj(t)+'"';default:throw new xt("impossible error: invalid scalar style")}}()}function Xm(e,t){var n=Ax(e)?String(t):"",i=e[e.length-1]===`
`,r=i&&(e[e.length-2]===`
`||e===`
`),s=r?"+":i?"":"-";return n+s+`
`}function Zm(e){return e[e.length-1]===`
`?e.slice(0,-1):e}function ej(e,t){for(var n=/(\n+)([^\n]*)/g,i=function(){var u=e.indexOf(`
`);return u=u!==-1?u:e.length,n.lastIndex=u,Qm(e.slice(0,u),t)}(),r=e[0]===`
`||e[0]===" ",s,o;o=n.exec(e);){var a=o[1],c=o[2];s=c[0]===" ",i+=a+(!r&&!s&&c!==""?`
`:"")+Qm(c,t),r=s}return i}function Qm(e,t){if(e===""||e[0]===" ")return e;for(var n=/ [^ ]/g,i,r=0,s,o=0,a=0,c="";i=n.exec(e);)a=i.index,a-r>t&&(s=o>r?o:a,c+=`
`+e.slice(r,s),r=s+1),o=a;return c+=`
`,e.length-r>t&&o>r?c+=e.slice(r,o)+`
`+e.slice(o+1):c+=e.slice(r),c.slice(1)}function tj(e){for(var t="",n=0,i,r=0;r<e.length;n>=65536?r+=2:r++)n=as(e,r),i=wt[n],!i&&Ys(n)?(t+=e[r],n>=65536&&(t+=e[r+1])):t+=i||V2(n);return t}function nj(e,t,n){var i="",r=e.tag,s,o,a;for(s=0,o=n.length;s<o;s+=1)a=n[s],e.replacer&&(a=e.replacer.call(n,String(s),a)),(Fn(e,t,a,!1,!1)||typeof a>"u"&&Fn(e,t,null,!1,!1))&&(i!==""&&(i+=","+(e.condenseFlow?"":" ")),i+=e.dump);e.tag=r,e.dump="["+i+"]"}function Jm(e,t,n,i){var r="",s=e.tag,o,a,c;for(o=0,a=n.length;o<a;o+=1)c=n[o],e.replacer&&(c=e.replacer.call(n,String(o),c)),(Fn(e,t+1,c,!0,!0,!1,!0)||typeof c>"u"&&Fn(e,t+1,null,!0,!0,!1,!0))&&((!i||r!=="")&&(r+=Wu(e,t)),e.dump&&Gs===e.dump.charCodeAt(0)?r+="-":r+="- ",r+=e.dump);e.tag=s,e.dump=r||"[]"}function ij(e,t,n){var i="",r=e.tag,s=Object.keys(n),o,a,c,u,d;for(o=0,a=s.length;o<a;o+=1)d="",i!==""&&(d+=", "),e.condenseFlow&&(d+='"'),c=s[o],u=n[c],e.replacer&&(u=e.replacer.call(n,c,u)),Fn(e,t,c,!1,!1)&&(e.dump.length>1024&&(d+="? "),d+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),Fn(e,t,u,!1,!1)&&(d+=e.dump,i+=d));e.tag=r,e.dump="{"+i+"}"}function rj(e,t,n,i){var r="",s=e.tag,o=Object.keys(n),a,c,u,d,f,p;if(e.sortKeys===!0)o.sort();else if(typeof e.sortKeys=="function")o.sort(e.sortKeys);else if(e.sortKeys)throw new xt("sortKeys must be a boolean or a function");for(a=0,c=o.length;a<c;a+=1)p="",(!i||r!=="")&&(p+=Wu(e,t)),u=o[a],d=n[u],e.replacer&&(d=e.replacer.call(n,u,d)),Fn(e,t+1,u,!0,!0,!0)&&(f=e.tag!==null&&e.tag!=="?"||e.dump&&e.dump.length>1024,f&&(e.dump&&Gs===e.dump.charCodeAt(0)?p+="?":p+="? "),p+=e.dump,f&&(p+=Wu(e,t)),Fn(e,t+1,d,!0,f)&&(e.dump&&Gs===e.dump.charCodeAt(0)?p+=":":p+=": ",p+=e.dump,r+=p));e.tag=s,e.dump=r||"{}"}function eh(e,t,n){var i,r,s,o,a,c;for(r=n?e.explicitTypes:e.implicitTypes,s=0,o=r.length;s<o;s+=1)if(a=r[s],(a.instanceOf||a.predicate)&&(!a.instanceOf||typeof t=="object"&&t instanceof a.instanceOf)&&(!a.predicate||a.predicate(t))){if(n?a.multi&&a.representName?e.tag=a.representName(t):e.tag=a.tag:e.tag="?",a.represent){if(c=e.styleMap[a.tag]||a.defaultStyle,_x.call(a.represent)==="[object Function]")i=a.represent(t,c);else if(bx.call(a.represent,c))i=a.represent[c](t,c);else throw new xt("!<"+a.tag+'> tag resolver accepts not "'+c+'" style');e.dump=i}return!0}return!1}function Fn(e,t,n,i,r,s,o){e.tag=null,e.dump=n,eh(e,n,!1)||eh(e,n,!0);var a=_x.call(e.dump),c=i,u;i&&(i=e.flowLevel<0||e.flowLevel>t);var d=a==="[object Object]"||a==="[object Array]",f,p;if(d&&(f=e.duplicates.indexOf(n),p=f!==-1),(e.tag!==null&&e.tag!=="?"||p||e.indent!==2&&t>0)&&(r=!1),p&&e.usedDuplicates[f])e.dump="*ref_"+f;else{if(d&&p&&!e.usedDuplicates[f]&&(e.usedDuplicates[f]=!0),a==="[object Object]")i&&Object.keys(e.dump).length!==0?(rj(e,t,e.dump,r),p&&(e.dump="&ref_"+f+e.dump)):(ij(e,t,e.dump),p&&(e.dump="&ref_"+f+" "+e.dump));else if(a==="[object Array]")i&&e.dump.length!==0?(e.noArrayIndent&&!o&&t>0?Jm(e,t-1,e.dump,r):Jm(e,t,e.dump,r),p&&(e.dump="&ref_"+f+e.dump)):(nj(e,t,e.dump),p&&(e.dump="&ref_"+f+" "+e.dump));else if(a==="[object String]")e.tag!=="?"&&J2(e,e.dump,t,s,c);else{if(a==="[object Undefined]")return!1;if(e.skipInvalid)return!1;throw new xt("unacceptable kind of an object to dump "+a)}e.tag!==null&&e.tag!=="?"&&(u=encodeURI(e.tag[0]==="!"?e.tag.slice(1):e.tag).replace(/!/g,"%21"),e.tag[0]==="!"?u="!"+u:u.slice(0,18)==="tag:yaml.org,2002:"?u="!!"+u.slice(18):u="!<"+u+">",e.dump=u+" "+e.dump)}return!0}function sj(e,t){var n=[],i=[],r,s;for(Vu(e,n,i),r=0,s=i.length;r<s;r+=1)t.duplicates.push(n[i[r]]);t.usedDuplicates=new Array(s)}function Vu(e,t,n){var i,r,s;if(e!==null&&typeof e=="object")if(r=t.indexOf(e),r!==-1)n.indexOf(r)===-1&&n.push(r);else if(t.push(e),Array.isArray(e))for(r=0,s=e.length;r<s;r+=1)Vu(e[r],t,n);else for(i=Object.keys(e),r=0,s=i.length;r<s;r+=1)Vu(e[i[r]],t,n)}function oj(e,t){t=t||{};var n=new q2(t);n.noRefs||sj(e,n);var i=e;return n.replacer&&(i=n.replacer.call({"":i},"",i)),Fn(n,0,i,!0,!0)?n.dump+`
`:""}var aj=oj,lj={dump:aj};function Ef(e,t){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}var cj=dt,uj=Gv,dj=Zv,fj=nx,pj=ix,mj=xf,hj=xx.load,gj=xx.loadAll,yj=lj.dump,wj=xt,vj={binary:lx,float:tx,map:Xv,null:Qv,pairs:ux,set:dx,timestamp:ox,bool:Jv,int:ex,merge:ax,omap:cx,seq:Yv,str:qv},xj=Ef("safeLoad","load"),_j=Ef("safeLoadAll","loadAll"),bj=Ef("safeDump","dump"),vr={Type:cj,Schema:uj,FAILSAFE_SCHEMA:dj,JSON_SCHEMA:fj,CORE_SCHEMA:pj,DEFAULT_SCHEMA:mj,load:hj,loadAll:gj,dump:yj,YAMLException:wj,types:vj,safeLoad:xj,safeLoadAll:_j,safeDump:bj};const Rx=new Map;function kj(e){return Rx.get(e)||null}async function Ej(e){return await Promise.allSettled(e.map(async n=>{try{const i=await Nj(n);return Rx.set(n,i),i}catch(i){return console.warn(`[cwlParser] Failed to load ${n}:`,i.message),null}}))}async function Nj(e){const n=`/niBuild/${e}`,i=await fetch(n);if(!i.ok)throw new Error(`HTTP ${i.status} fetching ${n}`);const r=await i.text();let s;try{s=vr.load(r)}catch(o){throw new Error(`YAML parse error in ${e}: ${o.message}`)}return Sj(s)}function Sj(e,t){const n={},i={};if(e.inputs){const s=Array.isArray(e.inputs)?e.inputs.map(o=>[o.id,o]):Object.entries(e.inputs);for(const[o,a]of s)n[o]=Ij(o,a)}if(e.outputs){const s=Array.isArray(e.outputs)?e.outputs.map(o=>[o.id,o]):Object.entries(e.outputs);for(const[o,a]of s)i[o]=Aj(o,a)}const r=Dj(e);return{inputs:n,outputs:i,dockerImage:r,baseCommand:e.baseCommand||null}}function Ij(e,t){const n=Dx(t.type),i=Tj(t),r=t.label||e,s=t.default!==void 0;return{name:e,label:r,flag:i,hasDefault:s,defaultValue:s?t.default:void 0,...n,isScalarEditable:jj(n)}}function Aj(e,t){const n=Dx(t.type),i=Rj(t),r=t.label||e;return{name:e,label:r,glob:i,...n}}function Dx(e){const t={baseType:"unknown",nullable:!1,isArray:!1,isEnum:!1,enumSymbols:[],isRecord:!1,recordVariants:[],arrayItemType:null};return e==null?(t.baseType="Any",t.nullable=!0,t):typeof e=="string"?Mx(e,t):Array.isArray(e)?Cj(e,t):typeof e=="object"?zx(e,t):t}function Mx(e,t){if(e.endsWith("?")){const n=e.slice(0,-1);return t.nullable=!0,n.endsWith("[]")?(t.isArray=!0,t.arrayItemType=n.slice(0,-2),t.baseType=t.arrayItemType):t.baseType=n,t}return e.endsWith("[]")?(t.isArray=!0,t.arrayItemType=e.slice(0,-2),t.baseType=t.arrayItemType,t):e==="null"?(t.baseType="null",t.nullable=!0,t):(t.baseType=e,t)}function Cj(e,t){const n=e.includes("null");t.nullable=n;const i=e.filter(s=>s!=="null");if(i.length===0)return t.baseType="null",t.nullable=!0,t;const r=i.filter(s=>typeof s=="object"&&s!==null&&s.type==="record");if(r.length>0)return t.baseType="record",t.isRecord=!0,t.recordVariants=r,t;if(i.length===1){const s=i[0];if(typeof s=="string"){const o=Mx(s,t);return o.nullable=n,o}if(typeof s=="object"){const o=zx(s,t);return o.nullable=n,o}}return t.baseType="Any",t}function zx(e,t){if(!e||typeof e!="object")return t;if(e.type==="enum")return t.baseType="enum",t.isEnum=!0,t.enumSymbols=e.symbols||[],t;if(e.type==="array"){t.isArray=!0;const n=e.items;return typeof n=="string"?(t.baseType=n,t.arrayItemType=n):(t.baseType="Any",t.arrayItemType="Any"),t}return e.type==="record"?(t.baseType="record",t.isRecord=!0,t.recordVariants=[e],t):(t.baseType="Any",t)}function jj(e){return e.isArray||e.isRecord?!1:["string","int","double","float","long","boolean","enum"].includes(e.baseType)}function Tj(e){return e.inputBinding&&e.inputBinding.prefix||null}function Rj(e){if(!e.outputBinding||!e.outputBinding.glob)return[];const t=e.outputBinding.glob;return Array.isArray(t)?t:[t]}function Dj(e){const t=e.hints||{},i=(e.requirements||{}).DockerRequirement||t.DockerRequirement;if(i)return i.dockerPull||null;if(Array.isArray(e.requirements)){const r=e.requirements.find(s=>s.class==="DockerRequirement");if(r)return r.dockerPull||null}if(Array.isArray(e.hints)){const r=e.hints.find(s=>s.class==="DockerRequirement");if(r)return r.dockerPull||null}return null}const ra=new Map;function tn(e){if(ra.has(e))return ra.get(e);const t=Jd[e];if(!t)return null;const n=t.cwlPath,i=n?kj(n):null,r=i?zj(e,i,t):Fj(e,t);return ra.set(e,r),r}function Mj(){ra.clear()}function zj(e,t,n){var o,a,c,u,d;const i={},r={};for(const[f,p]of Object.entries(t.inputs)){const m=((o=n.inputExtensions)==null?void 0:o[f])||null,v=((a=n.bounds)==null?void 0:a[f])||null,g=((c=n.enumHints)==null?void 0:c[f])||null,h={type:Pj(p),label:p.label,flag:p.flag||null};m&&m.length>0&&(h.acceptedExtensions=m),v&&(h.bounds=v),p.isEnum&&p.enumSymbols.length>0?h.options=p.enumSymbols:g&&(h.options=g),p.nullable?r[f]=h:i[f]=h}const s={};for(const[f,p]of Object.entries(t.outputs)){const m=Oj(p);s[f]={type:m,label:p.label,glob:p.glob},(u=n.requires)!=null&&u[f]&&(s[f].requires=n.requires[f]);const v=((d=n.outputExtensions)==null?void 0:d[f])||null;v&&v.length>0&&(s[f].extensions=v)}return{id:e,cwlPath:n.cwlPath,dockerImage:t.dockerImage||null,requiredInputs:i,optionalInputs:r,outputs:s,fullName:n.fullName,function:n.function,modality:n.modality,keyParameters:n.keyParameters,keyPoints:n.keyPoints,typicalUse:n.typicalUse,docUrl:n.docUrl}}function Fj(e,t){return console.warn(`[toolRegistry] CWL not loaded for "${e}"  using annotation-only fallback with empty inputs/outputs.`),{id:e,cwlPath:t.cwlPath,dockerImage:null,requiredInputs:{},optionalInputs:{},outputs:{},fullName:t.fullName,function:t.function,modality:t.modality,keyParameters:t.keyParameters,keyPoints:t.keyPoints,typicalUse:t.typicalUse,docUrl:t.docUrl}}function Pj(e){return e.isRecord?"record":e.isEnum?"string":e.isArray?`${e.arrayItemType||e.baseType}[]`:e.baseType}function Oj(e){let t=e.baseType;return e.isArray&&(t=`${e.arrayItemType||t}[]`),e.nullable&&(t=`${t}?`),t}const Va=[{label:"Extract filename root",expression:"self.nameroot",description:'Get filename without extension (e.g., "sub-01_T1w")',applicableTypes:["File"]},{label:"Append suffix",expression:'self.nameroot + "_suffix"',description:"Add a custom suffix to the filename root",applicableTypes:["File"]},{label:"Extract BIDS subject ID",expression:'self.nameroot.split("_")[0]',description:"Extract sub-XX from a BIDS filename",applicableTypes:["File"]},{label:"Full filename",expression:"self.basename",description:"Get filename with extension",applicableTypes:["File"]},{label:"Parent directory",expression:"self.dirname",description:"Get the parent directory path",applicableTypes:["File"]},{label:"Uppercase",expression:"self.toUpperCase()",description:"Convert string to uppercase",applicableTypes:["string"]},{label:"Lowercase",expression:"self.toLowerCase()",description:"Convert string to lowercase",applicableTypes:["string"]},{label:"Split by underscore (first)",expression:'self.split("_")[0]',description:"Extract first segment before underscore",applicableTypes:["string"]},{label:"Append suffix",expression:'self + "_suffix"',description:"Append a custom suffix to a string value",applicableTypes:["string"]}],Ga=["==","!=",">=","<=",">","<"],Bj={fsl:"FSL",afni:"AFNI",ants:"ANTs",freesurfer:"FreeSurfer",mrtrix3:"MRtrix3",fmriprep:"fMRIPrep",mriqc:"MRIQC",connectome_workbench:"Connectome Workbench",amico:"AMICO"},Lj=new Map(Object.entries(F1).map(([e,t])=>[t,Bj[e]])),Fx=e=>{const t=e.split(":")[0];return Lj.get(t)||null},Px=({value:e,onChange:t,onBlur:n,tags:i=[],placeholder:r="latest",isValid:s=!0,prefix:o=""})=>{const[a,c]=k.useState(!1),[u,d]=k.useState(e),[f,p]=k.useState(i),[m,v]=k.useState(-1),[g,x]=k.useState({top:0,left:0,width:0}),h=k.useRef(null),y=k.useRef(null);k.useEffect(()=>{d(e)},[e]),k.useEffect(()=>{p(i),v(-1)},[i]),k.useEffect(()=>{const j=I=>{h.current&&!h.current.contains(I.target)&&c(!1)};return document.addEventListener("mousedown",j),()=>document.removeEventListener("mousedown",j)},[]),k.useEffect(()=>{if(a&&h.current){const j=h.current.getBoundingClientRect();x({top:j.bottom+4,left:j.left,width:j.width})}},[a]);const _=j=>{const I=j.target.value;d(I),t(I),a||c(!0)},b=()=>{c(!0)},N=j=>{setTimeout(()=>{n&&n(j)},150)},T=j=>{var I;d(j),t(j),c(!1),(I=y.current)==null||I.focus()},C=j=>{if(!a){(j.key==="ArrowDown"||j.key==="ArrowUp")&&(c(!0),j.preventDefault());return}switch(j.key){case"ArrowDown":j.preventDefault(),v(I=>I<f.length-1?I+1:I);break;case"ArrowUp":j.preventDefault(),v(I=>I>0?I-1:-1);break;case"Enter":j.preventDefault(),m>=0&&f[m]?T(f[m]):c(!1);break;case"Escape":c(!1);break;case"Tab":c(!1);break}},P=a&&f.length>0&&Nn.createPortal(l.jsx("div",{className:"tag-dropdown-list",style:{top:g.top,left:g.left,width:g.width},children:f.map((j,I)=>l.jsxs("div",{className:`tag-dropdown-item ${I===m?"highlighted":""} ${j===u?"selected":""}`,onMouseEnter:()=>v(I),onMouseDown:$=>{$.preventDefault(),T(j)},children:[j,j==="latest"&&l.jsx("span",{className:"tag-badge",children:"default"})]},j))}),document.body);return l.jsxs("div",{ref:h,className:`tag-dropdown-wrapper ${a?"focused":""} ${s?"":"invalid"}`,children:[o&&l.jsx("span",{className:"tag-dropdown-prefix",children:o}),l.jsx("input",{ref:y,type:"text",value:u,onChange:_,onFocus:b,onBlur:N,onKeyDown:C,placeholder:r,className:`tag-dropdown-input ${s?"":"invalid"}`,autoComplete:"off"}),l.jsx("span",{className:`tag-dropdown-chevron ${a?"open":""}`,onClick:()=>{var j;c(!a),(j=y.current)==null||j.focus()},children:""}),P]})},Ox=k.createContext({propagatedIds:new Set,sourceNodeIds:new Set}),Bx=k.createContext(new Map),Uj=({show:e,onClose:t,workflowName:n,internalNodes:i,internalEdges:r,wiredInputs:s})=>{var q;const o=k.useMemo(()=>(i||[]).filter(K=>!K.isDummy),[i]),{firstNodeIndex:a,downstreamIndices:c}=k.useMemo(()=>{if(o.length===0)return{firstNodeIndex:0,downstreamIndices:[]};const K=new Set(o.map(_e=>_e.id)),ne=new Set((i||[]).filter(_e=>_e.isDummy).map(_e=>_e.id)),z=(r||[]).filter(_e=>!ne.has(_e.source)&&!ne.has(_e.target)&&K.has(_e.source)&&K.has(_e.target)),V=Object.fromEntries(o.map(_e=>[_e.id,0])),Q=new Map(o.map(_e=>[_e.id,[]]));z.forEach(_e=>{var Ie;V[_e.target]!==void 0&&V[_e.target]++,(Ie=Q.get(_e.source))==null||Ie.push(_e.target)});const X=o.filter(_e=>V[_e.id]===0).map(_e=>_e.id),ee=[];let ce=0;for(;ce<X.length;){const _e=X[ce++];ee.push(_e);for(const Ie of Q.get(_e)||[])--V[Ie]===0&&X.push(Ie)}const fe=new Map(o.map((_e,Ie)=>[_e.id,Ie])),me=ee.map(_e=>fe.get(_e)).filter(_e=>_e!==void 0),Se=me.length>0?me[0]:0,Ne=me.slice(1);return{firstNodeIndex:Se,downstreamIndices:Ne}},[o,r,i]),[u,d]=k.useState(0),[f,p]=k.useState({}),[m,v]=k.useState("latest"),[g,x]=k.useState(!0),[h,y]=k.useState(""),[_,b]=k.useState(!1),[N,T]=k.useState(""),[C,P]=k.useState(""),[j,I]=k.useState(!1),[$,S]=k.useState({}),[F,w]=k.useState({}),[B,H]=k.useState({}),[W,R]=k.useState([]),D=k.useRef(W);D.current=W;const U=K=>{if(!K)return;const ne=K.parameters;if(ne&&typeof ne=="object"&&!Array.isArray(ne))p({...ne});else if(typeof ne=="string"&&ne.trim())try{p(JSON.parse(ne))}catch{p({})}else p({});v(K.dockerVersion||"latest"),x(!0),y(""),b(K.scatterEnabled||!1),H(K.linkMergeOverrides||{});const V=(K.whenExpression||"").match(/^\$\(inputs\.(\w+)\s+(.*)\)$/);V?(T(V[1]),P(V[2])):(T(""),P("")),I(!1);const Q=K.expressions||{},X={},ee={};Object.entries(Q).forEach(([ce,fe])=>{if(fe){const me=fe.match(/^\$\((.*)\)$/s);X[ce]=me?me[1]:fe,ee[ce]=!0}}),S(X),w(ee)};k.useEffect(()=>{if(e){const K=structuredClone(o);R(K),d(0),U(K[0])}},[e]),k.useEffect(()=>{if(!e)return;const K=D.current[u];K&&U(K)},[u]);const O=()=>{const K=D.current;if(K.length===0)return K;const ne=m.trim()||"latest",z={};Object.entries($).forEach(([X,ee])=>{if(ee&&ee.trim()){const ce=ee.trim();z[X]=ce.startsWith("$(")?ce:`$(${ce})`}});const V=N&&C.trim()&&!oe?`$(inputs.${N} ${C.trim()})`:"",Q=[...K];if(Q[u]={...Q[u],parameters:f,dockerVersion:ne,scatterEnabled:_,linkMergeOverrides:B,whenExpression:V,expressions:z},u===a){const X=Q[a].scatterEnabled;for(const ee of c)Q[ee]={...Q[ee],scatterEnabled:X}}return Q},A=K=>{const ne=O();R(ne),d(K)},Y=()=>{const K=O(),ne=(i||[]).map(z=>z.isDummy?z:K.find(Q=>Q.id===z.id)||z);t(ne)},G=W[u],Z=k.useMemo(()=>{if(!s||!G)return new Map;const K=`${G.id}/`,ne=new Map;for(const[z,V]of s.entries())z.startsWith(K)&&ne.set(z.slice(K.length),V);return ne},[s,G==null?void 0:G.id]),se=G?tn(G.label):null,le=(se==null?void 0:se.dockerImage)||null,ae=k.useMemo(()=>{if(!se)return{required:[],optional:[]};const K=Object.entries(se.requiredInputs||{}).filter(([z,V])=>V.type!=="record").map(([z,V])=>({name:z,...V})),ne=Object.entries(se.optionalInputs||{}).filter(([z,V])=>V.type!=="record").map(([z,V])=>({name:z,...V}));return{required:K,optional:ne}},[se]),oe=k.useMemo(()=>{if(!N)return null;const K=C.trim();return K?Ga.some(V=>K.startsWith(V))?K.replace(/^(==|!=|>=|<=|>|<)\s*/,"")?null:"Missing value after operator":`Condition should start with an operator: ${Ga.join(", ")}`:j?"Enter a condition (e.g., == true)":null},[N,C,j]),ue=k.useMemo(()=>{const K={};return Object.entries($).forEach(([ne,z])=>{if(!(z!=null&&z.trim()))return;const V=z.trim(),Q=(V.match(/\(/g)||[]).length,X=(V.match(/\)/g)||[]).length;Q!==X&&(K[ne]="Unmatched parentheses")}),K},[$]),we=le?Fx(le):null,ve=we?fw[we]||["latest"]:["latest"],ke=K=>{const ne=K.trim();if(!ne||ne==="latest"){x(!0),y("");return}if(ve.includes(ne))x(!0),y("");else{x(!1);const z=ve.length>4?`${ve.slice(0,4).join(", ")}...`:ve.join(", ");y(`Unknown tag. Known: ${z}`)}},E=(K,ne)=>{p(z=>({...z,[K]:ne}))},J=(K,ne)=>{const z=f[K];if(z==null||!ne.bounds)return;const[V,Q]=ne.bounds;z<V?E(K,V):z>Q&&E(K,Q)},te=(K,ne)=>{H(z=>({...z,[K]:ne}))},L=K=>{w(ne=>{const z=ne[K];return z&&S(V=>{const Q={...V};return delete Q[K],Q}),{...ne,[K]:!z}})},M=K=>{if(K.type==="File"||K.type==="Directory")return l.jsx("div",{className:"param-control",children:l.jsx("span",{className:`expression-toggle${F[K.name]?" active":""}`,onClick:()=>L(K.name),title:F[K.name]?"Switch to value mode":"Switch to expression mode",children:"fx"})});if(F[K.name]||!1)return l.jsx("div",{className:"param-control",children:l.jsx("span",{className:"expression-toggle active",onClick:()=>L(K.name),title:"Switch to value mode",children:"fx"})});const V=K.type==="boolean"?l.jsx(je.Check,{type:"switch",id:`cwp-param-${G==null?void 0:G.id}-${K.name}`,checked:f[K.name]===!0,onChange:Q=>E(K.name,Q.target.checked),className:"param-switch"}):K.options?l.jsxs(je.Select,{size:"sm",className:`param-select${f[K.name]!=null&&f[K.name]!==""?" filled":""}`,value:f[K.name]??"",onChange:Q=>E(K.name,Q.target.value||null),children:[l.jsx("option",{value:"",children:"-- default --"}),K.options.map(Q=>l.jsx("option",{value:Q,children:Q},Q))]}):K.type==="int"||K.type==="double"||K.type==="float"||K.type==="long"?l.jsx(je.Control,{type:"number",size:"sm",className:`param-number${f[K.name]!=null&&f[K.name]!==""?" filled":""}`,step:K.type==="int"||K.type==="long"?1:.01,min:K.bounds?K.bounds[0]:void 0,max:K.bounds?K.bounds[1]:void 0,placeholder:K.bounds?`${K.bounds[0]}..${K.bounds[1]}`:"",value:f[K.name]??"",onChange:Q=>{const X=Q.target.value;X===""?E(K.name,null):E(K.name,K.type==="int"||K.type==="long"?parseInt(X,10):parseFloat(X))},onBlur:()=>J(K.name,K)}):l.jsx(je.Control,{type:"text",size:"sm",className:`param-text${f[K.name]!=null&&f[K.name]!==""?" filled":""}`,value:f[K.name]??"",onChange:Q=>E(K.name,Q.target.value||null)});return l.jsx("div",{className:"param-control",children:l.jsxs("div",{className:"expression-row",children:[l.jsx("span",{className:"expression-toggle",onClick:()=>L(K.name),title:"Switch to expression mode",children:"fx"}),V]})})};return G?l.jsxs(Be,{show:e,onHide:Y,centered:!0,className:"custom-modal",size:"lg",children:[l.jsx(Be.Header,{children:l.jsxs(Be.Title,{style:{fontFamily:"Roboto Mono, monospace",fontSize:"1rem",width:"100%"},children:[l.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:l.jsxs("span",{children:[n," - Parameters"]})}),l.jsxs("div",{className:"custom-workflow-nav",children:[l.jsx(Di,{variant:"outline-light",size:"sm",disabled:u===0,onClick:()=>A(u-1),className:"custom-workflow-nav-btn",children:""}),l.jsxs("span",{className:"custom-workflow-nav-label",children:[G.label," (",u+1," of ",o.length,")"]}),l.jsx(Di,{variant:"outline-light",size:"sm",disabled:u===o.length-1,onClick:()=>A(u+1),className:"custom-workflow-nav-btn",children:""})]})]})}),l.jsx(Be.Body,{onClick:K=>K.stopPropagation(),children:l.jsxs(je,{children:[le&&l.jsxs(je.Group,{className:"docker-version-group",children:[l.jsx(je.Label,{className:"modal-label",children:"Docker Image"}),l.jsx(Px,{value:m,onChange:v,onBlur:()=>ke(m),tags:ve,placeholder:"latest",isValid:g,prefix:`${le}:`}),h&&l.jsx("div",{className:"docker-warning-text",children:h}),l.jsx("div",{className:"docker-help-text",children:"Select a tag or enter a custom version"})]}),l.jsxs(je.Group,{className:"scatter-toggle-group",children:[l.jsxs("div",{className:"scatter-toggle-row",children:[l.jsx(je.Label,{className:"modal-label",style:{marginBottom:0},children:"Scatter (Batch Processing)"}),l.jsx(je.Check,{type:"switch",id:`cwp-scatter-${G.id}`,checked:_,onChange:K=>b(K.target.checked),className:"scatter-switch",disabled:u!==a})]}),u===a?l.jsx("div",{className:"scatter-help-text",children:"Enabling scatter propagates to all downstream nodes"}):l.jsxs("div",{className:"scatter-help-text",children:["Inherited from first node (",((q=o[a])==null?void 0:q.label)||"root",")"]})]}),l.jsxs(je.Group,{className:"when-expression-group",children:[l.jsx(je.Label,{className:"modal-label",style:{marginBottom:6},children:"Conditional (when)"}),l.jsxs("div",{className:"when-builder-row",children:[l.jsxs(je.Select,{size:"sm",className:"when-param-select",value:N,onChange:K=>{T(K.target.value),K.target.value||P("")},children:[l.jsx("option",{value:"",children:"None"}),[...ae.required,...ae.optional].map(K=>l.jsx("option",{value:K.name,children:K.name},K.name))]}),N&&l.jsx(je.Control,{type:"text",size:"sm",className:`when-condition-input${C.trim()?" filled":""}${oe?" invalid":""}`,placeholder:"== true",value:C,onChange:K=>{P(K.target.value),I(!0)},onBlur:()=>I(!0)})]}),N&&C.trim()&&!oe&&l.jsxs("div",{className:"when-preview",children:["$(inputs.",N," ",C.trim(),")"]}),oe&&l.jsx("div",{className:"when-warning-text",children:oe})]}),l.jsxs("div",{className:"params-scroll scrollbar-thin",children:[[{params:ae.required,label:"Required"},{params:ae.optional,label:"Optional"}].map(({params:K,label:ne})=>K.length>0&&l.jsxs("div",{className:"param-section",children:[l.jsx("div",{className:"param-section-header",children:ne}),K.map(z=>{const V=z.type==="File"||z.type==="Directory",Q=Z.get(z.name)||[];return l.jsxs("div",{className:`param-card ${V&&Q.length>0?"input-wired":""} ${$[z.name]?"has-expression":""}`,children:[l.jsxs("div",{className:"param-card-header",children:[l.jsx("span",{className:"param-name",children:z.name}),l.jsx("span",{className:"param-type-badge",children:z.type}),M(z)]}),V&&Q.length===1&&l.jsx("div",{className:"input-source-single",children:l.jsxs("span",{className:"input-source",children:["from ",Q[0].sourceNodeLabel," / ",Q[0].sourceOutput]})}),V&&Q.length>1&&l.jsxs("div",{className:"input-source-multi-details",children:[l.jsxs("div",{className:"input-source-multi-row",children:[l.jsx("div",{className:"input-source-multi-sources",children:Q.map((X,ee)=>l.jsxs("span",{className:"input-source input-source-detail",children:[X.sourceNodeLabel," / ",X.sourceOutput]},ee))}),l.jsxs(je.Select,{size:"sm",className:"link-merge-select",value:B[z.name]||"merge_flattened",onChange:X=>te(z.name,X.target.value),children:[l.jsx("option",{value:"merge_flattened",children:"merge_flattened"}),l.jsx("option",{value:"merge_nested",children:"merge_nested"})]})]}),l.jsx("div",{className:"merge-help-text",children:"flattened combines all into one list [x1, x2]  nested preserves grouping per source [[x1], [x2]]"})]}),V&&F[z.name]&&(()=>{var fe;const X=$[z.name]||"",ee=ue[z.name],ce=Va.filter(me=>me.applicableTypes.includes(z.type));return l.jsxs("div",{className:"expression-file-details",children:[l.jsxs("div",{className:"expression-input-row",children:[l.jsx(je.Control,{type:"text",size:"sm",className:`expression-input${X?" filled":""}${ee?" invalid":""}`,placeholder:"self.nameroot",value:X,onChange:me=>S(Se=>({...Se,[z.name]:me.target.value}))}),ce.length>0&&l.jsxs(je.Select,{size:"sm",className:"expression-template-select",value:((fe=ce.find(me=>me.expression===X))==null?void 0:fe.expression)||"",onChange:me=>{me.target.value&&S(Se=>({...Se,[z.name]:me.target.value}))},children:[l.jsx("option",{value:"",children:"Templates"}),ce.map(me=>l.jsx("option",{value:me.expression,title:me.description,children:me.label},me.label))]})]}),X.trim()&&!ee&&l.jsxs("div",{className:"expression-preview",children:["valueFrom: $(",X.trim(),")"]}),ee&&l.jsx("div",{className:"expression-warning-text",children:ee})]})})(),!V&&F[z.name]&&(()=>{var fe;const X=$[z.name]||"",ee=ue[z.name],ce=Va.filter(me=>me.applicableTypes.includes(z.type));return l.jsxs("div",{className:"expression-scalar-details",children:[l.jsxs("div",{className:"expression-input-row",children:[l.jsx(je.Control,{type:"text",size:"sm",className:`expression-input${X?" filled":""}${ee?" invalid":""}`,placeholder:z.type==="string"?"self.toUpperCase()":"self + 1",value:X,onChange:me=>S(Se=>({...Se,[z.name]:me.target.value}))}),ce.length>0&&l.jsxs(je.Select,{size:"sm",className:"expression-template-select",value:((fe=ce.find(me=>me.expression===X))==null?void 0:fe.expression)||"",onChange:me=>{me.target.value&&S(Se=>({...Se,[z.name]:me.target.value}))},children:[l.jsx("option",{value:"",children:"Templates"}),ce.map(me=>l.jsx("option",{value:me.expression,title:me.description,children:me.label},me.label))]})]}),X.trim()&&!ee&&l.jsxs("div",{className:"expression-preview",children:["valueFrom: $(",X.trim(),")"]}),ee&&l.jsx("div",{className:"expression-warning-text",children:ee})]})})(),z.label&&l.jsx("div",{className:"param-description",children:z.label}),z.bounds&&l.jsxs("div",{className:"param-bounds",children:["bounds: ",z.bounds[0],"  ",z.bounds[1]]})]},z.name)})]},ne)),!se&&l.jsxs("div",{className:"param-section",children:[l.jsx("div",{className:"param-section-header",children:"Parameters"}),l.jsx("div",{className:"param-description",style:{padding:"8px 0"},children:"Tool not fully defined  parameters unavailable."})]})]})]})})]}):null},Hj=({data:e,id:t})=>{const n=e.isDummy===!0,{propagatedIds:i,sourceNodeIds:r}=k.useContext(Ox),s=i.has(t),o=r.has(t),a=k.useContext(Bx),c=(a==null?void 0:a.get(t))||new Map,[u,d]=k.useState(!1),[f,p]=k.useState({}),[m,v]=k.useState(e.dockerVersion||"latest"),[g,x]=k.useState(!0),[h,y]=k.useState(""),[_,b]=k.useState(e.scatterEnabled||!1),[N,T]=k.useState(e.linkMergeOverrides||{}),[C,P]=k.useState(""),[j,I]=k.useState(""),[$,S]=k.useState(!1),[F,w]=k.useState(e.expressions||{}),[B,H]=k.useState({}),[W,R]=k.useState(!1),[D,U]=k.useState(!1),[O,A]=k.useState({top:0,left:0}),Y=k.useRef(null),[G,Z]=k.useState(!1),[se,le]=k.useState(!1),[ae,oe]=k.useState(!1),[ue,we]=k.useState({top:0,left:0}),ve=k.useRef(null),ke=k.useRef(null),E=tn(e.label),J=(E==null?void 0:E.dockerImage)||null,te=k.useMemo(()=>{if(!E)return{required:[],optional:[]};const re=Object.entries(E.requiredInputs||{}).filter(([pe,be])=>be.type!=="record").map(([pe,be])=>({name:pe,...be})),ge=Object.entries(E.optionalInputs||{}).filter(([pe,be])=>be.type!=="record").map(([pe,be])=>({name:pe,...be}));return{required:re,optional:ge}},[E]),L=k.useMemo(()=>{if(!C)return null;const re=j.trim();return re?Ga.some(be=>re.startsWith(be))?re.replace(/^(==|!=|>=|<=|>|<)\s*/,"")?null:"Missing value after operator":`Condition should start with an operator: ${Ga.join(", ")}`:$?"Enter a condition (e.g., == true)":null},[C,j,$]),M=k.useMemo(()=>{const re={};return Object.entries(F).forEach(([ge,pe])=>{if(!(pe!=null&&pe.trim()))return;const be=pe.trim(),Ee=(be.match(/\(/g)||[]).length,Ae=(be.match(/\)/g)||[]).length;Ee!==Ae&&(re[ge]="Unmatched parentheses")}),re},[F]),q=J?Fx(J):null,K=q?fw[q]||["latest"]:["latest"],ne=re=>{const ge=re.trim();if(!ge||ge==="latest"){x(!0),y("");return}if(K.includes(ge))x(!0),y("");else{x(!1);const pe=K.length>4?`${K.slice(0,4).join(", ")}...`:K.join(", ");y(`Unknown tag. Known: ${pe}`)}},z=k.useMemo(()=>gl.get(e.label)||null,[e.label]),V=(re,ge)=>{p(pe=>({...pe,[re]:ge}))},Q=(re,ge)=>{const pe=f[re];if(pe==null||!ge.bounds)return;const[be,Ee]=ge.bounds;pe<be?V(re,be):pe>Ee&&V(re,Ee)},X=(re,ge)=>{T(pe=>({...pe,[re]:ge}))},ee=re=>{H(ge=>{const pe=ge[re];return pe&&w(be=>{const Ee={...be};return delete Ee[re],Ee}),{...ge,[re]:!pe}})},ce=re=>{if(re.type==="File"||re.type==="Directory")return l.jsx("div",{className:"param-control",children:l.jsx("span",{className:`expression-toggle${B[re.name]?" active":""}`,onClick:()=>ee(re.name),title:B[re.name]?"Switch to value mode":"Switch to expression mode",children:"fx"})});if(B[re.name]||!1)return l.jsx("div",{className:"param-control",children:l.jsx("span",{className:"expression-toggle active",onClick:()=>ee(re.name),title:"Switch to value mode",children:"fx"})});const be=re.type==="boolean"?l.jsx(je.Check,{type:"switch",id:`param-${t}-${re.name}`,checked:f[re.name]===!0,onChange:Ee=>V(re.name,Ee.target.checked),className:"param-switch"}):re.options?l.jsxs(je.Select,{size:"sm",className:`param-select${f[re.name]!=null&&f[re.name]!==""?" filled":""}`,value:f[re.name]??"",onChange:Ee=>V(re.name,Ee.target.value||null),children:[l.jsx("option",{value:"",children:"-- default --"}),re.options.map(Ee=>l.jsx("option",{value:Ee,children:Ee},Ee))]}):re.type==="int"||re.type==="double"||re.type==="float"||re.type==="long"?l.jsx(je.Control,{type:"number",size:"sm",className:`param-number${f[re.name]!=null&&f[re.name]!==""?" filled":""}`,step:re.type==="int"||re.type==="long"?1:.01,min:re.bounds?re.bounds[0]:void 0,max:re.bounds?re.bounds[1]:void 0,placeholder:re.bounds?`${re.bounds[0]}..${re.bounds[1]}`:"",value:f[re.name]??"",onChange:Ee=>{const Ae=Ee.target.value;Ae===""?V(re.name,null):V(re.name,re.type==="int"||re.type==="long"?parseInt(Ae,10):parseFloat(Ae))},onBlur:()=>Q(re.name,re)}):l.jsx(je.Control,{type:"text",size:"sm",className:`param-text${f[re.name]!=null&&f[re.name]!==""?" filled":""}`,value:f[re.name]??"",onChange:Ee=>V(re.name,Ee.target.value||null)});return l.jsx("div",{className:"param-control",children:l.jsxs("div",{className:"expression-row",children:[l.jsx("span",{className:"expression-toggle",onClick:()=>ee(re.name),title:"Switch to expression mode",children:"fx"}),be]})})},fe=()=>{!o&&s&&!_&&b(!0),T(e.linkMergeOverrides||{});const ge=(e.whenExpression||"").match(/^\$\(inputs\.(\w+)\s+(.*)\)$/);ge?(P(ge[1]),I(ge[2])):(P(""),I("")),S(!1);const pe=e.expressions||{},be={},Ee={};Object.entries(pe).forEach(([Ke,Ve])=>{if(Ve){const Ge=Ve.match(/^\$\((.*)\)$/s);be[Ke]=Ge?Ge[1]:Ve,Ee[Ke]=!0}}),w(be),H(Ee);const Ae=e.parameters;if(Ae&&typeof Ae=="object"&&!Array.isArray(Ae))p({...Ae});else if(typeof Ae=="string"&&Ae.trim())try{p(JSON.parse(Ae))}catch{p({})}else p({});d(!0)},me=()=>{const re=m.trim()||"latest";if(re!==m&&v(re),typeof e.onSaveParameters=="function"){const ge={};Object.entries(F).forEach(([pe,be])=>{if(be&&be.trim()){const Ee=be.trim();ge[pe]=Ee.startsWith("$(")?Ee:`$(${Ee})`}}),e.onSaveParameters({params:f,dockerVersion:re,scatterEnabled:_,linkMergeOverrides:N,whenExpression:C&&j.trim()&&!L?`$(inputs.${C} ${j.trim()})`:"",expressions:ge})}d(!1)},Se=k.useRef(null),Ne=()=>{if(Y.current){const re=Y.current.getBoundingClientRect();A({top:re.top+re.height/2,left:re.right+10})}},_e=()=>{z&&(Ne(),R(!0))},Ie=()=>{D||R(!1)},Et=k.useCallback(re=>{re.stopPropagation(),D?(U(!1),R(!1)):(Ne(),R(!0),U(!0))},[D]);if(k.useEffect(()=>{if(!D)return;const re=ge=>{var pe,be;(pe=Y.current)!=null&&pe.contains(ge.target)||(be=Se.current)!=null&&be.contains(ge.target)||(U(!1),R(!1))};return document.addEventListener("mousedown",re,!0),()=>document.removeEventListener("mousedown",re,!0)},[D]),k.useEffect(()=>{if(!ae)return;const re=ge=>{var pe,be;(pe=ve.current)!=null&&pe.contains(ge.target)||(be=ke.current)!=null&&be.contains(ge.target)||(oe(!1),le(!1))};return document.addEventListener("mousedown",re,!0),()=>document.removeEventListener("mousedown",re,!0)},[ae]),n&&!e.isBIDS)return l.jsxs("div",{className:"node-wrapper node-io",children:[l.jsxs("div",{className:"node-top-row",children:[l.jsx("span",{className:"node-io-badge",children:l.jsx("span",{className:"node-io-badge-text",children:"I/O"})}),l.jsx("span",{className:"handle-label",children:"IN"}),l.jsx("span",{className:"node-info-spacer"})]}),l.jsxs("div",{className:"node-content",children:[l.jsx(Bt,{type:"target",position:ye.Top}),l.jsx("span",{className:"node-label",children:e.label}),l.jsx(Bt,{type:"source",position:ye.Bottom})]}),l.jsxs("div",{className:"node-bottom-row",children:[l.jsx("span",{className:"node-bottom-left"}),l.jsx("span",{className:"handle-label",children:"OUT"}),l.jsx("span",{className:"node-info-spacer"})]})]});if(n&&e.isBIDS){const re=e.bidsSelections?Object.keys(e.bidsSelections.selections).length:0,ge=e.bidsStructure!=null;return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"node-wrapper node-io node-bids",children:[l.jsxs("div",{className:"node-top-row",children:[l.jsx("span",{className:"node-io-badge",children:ge&&re>0?l.jsxs("span",{className:"node-io-badge-text",children:[re," output",re!==1?"s":""]}):l.jsx("span",{className:"node-io-badge-text",children:"BIDS"})}),l.jsx("span",{className:"handle-label",children:"IN"}),l.jsx("span",{className:"node-params-btn",onClick:pe=>{var be,Ee;pe.stopPropagation(),ge?(be=e.onUpdateBIDS)==null||be.call(e,{_openModal:!0}):(Ee=e.onUpdateBIDS)==null||Ee.call(e,{_pickDirectory:!0})},children:"Data"})]}),l.jsxs("div",{className:"node-content",children:[l.jsx(Bt,{type:"target",position:ye.Top}),l.jsx("span",{className:"node-label",children:e.label}),l.jsx(Bt,{type:"source",position:ye.Bottom})]}),l.jsxs("div",{className:"node-bottom-row",children:[l.jsxs("span",{className:"node-bottom-left",children:[!ge&&l.jsx("span",{className:"node-warning-badge",children:"!"}),s&&l.jsx("span",{className:"node-scatter-badge",children:""})]}),l.jsx("span",{className:"handle-label",children:"OUT"}),l.jsx("span",{ref:Y,className:"node-info-btn",onMouseEnter:()=>{Ne(),R(!0)},onMouseLeave:()=>{D||R(!1)},onClick:pe=>{pe.stopPropagation(),D?(U(!1),R(!1)):(Ne(),R(!0),U(!0))},children:"Info"})]})]}),W&&Nn.createPortal(l.jsxs("div",{ref:Se,className:"workflow-tooltip",style:{top:O.top,left:O.left,transform:"translateY(-50%)"},children:[l.jsx("div",{className:"tooltip-section tooltip-fullname",children:l.jsx("span",{className:"tooltip-text",children:"BIDS Dataset Input"})}),l.jsxs("div",{className:"tooltip-section",children:[l.jsx("span",{className:"tooltip-label",children:"BIDS:"}),l.jsx("span",{className:"tooltip-text",children:"Brain Imaging Data Structure  a standard for organizing neuroimaging datasets"})]}),l.jsxs("div",{className:"tooltip-section",children:[l.jsx("span",{className:"tooltip-label",children:"Function:"}),l.jsx("span",{className:"tooltip-text",children:"Loads a BIDS-formatted dataset and exposes selected data streams as output ports"})]}),e.bidsStructure&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"tooltip-section",children:[l.jsx("span",{className:"tooltip-label",children:"Dataset:"}),l.jsx("span",{className:"tooltip-text",children:e.bidsStructure.datasetName||"Unknown"})]}),l.jsxs("div",{className:"tooltip-section",children:[l.jsx("span",{className:"tooltip-label",children:"Subjects:"}),l.jsx("span",{className:"tooltip-text",children:Object.keys(e.bidsStructure.subjects).length})]})]}),e.bidsSelections&&l.jsxs("div",{className:"tooltip-section",children:[l.jsx("span",{className:"tooltip-label",children:"Outputs:"}),l.jsx("span",{className:"tooltip-text",children:Object.keys(e.bidsSelections.selections).join(", ")})]}),!e.bidsStructure&&l.jsxs("div",{className:"tooltip-section",children:[l.jsx("span",{className:"tooltip-label",style:{color:"#f0ad4e"},children:"Status:"}),l.jsx("span",{className:"tooltip-text",children:'No dataset loaded. Click "Data" to select a BIDS directory.'})]})]}),document.body)]})}if(e.isCustomWorkflow){const re=(e.internalNodes||[]).filter($e=>!$e.isDummy),ge=re.length,pe=re.some($e=>$e.whenExpression),be=re.some($e=>$e.expressions&&Object.keys($e.expressions).length>0),Ee=re.some($e=>$e.scatterEnabled),Ae=()=>Z(!0),Ke=$e=>{$e&&typeof e.onSaveParameters=="function"&&e.onSaveParameters({internalNodes:$e}),Z(!1)},Ve=()=>{if(ve.current){const $e=ve.current.getBoundingClientRect();we({top:$e.top+$e.height/2,left:$e.right+10})}},Ge=()=>{Ve(),le(!0)},ze=()=>{ae||le(!1)},qt=$e=>{$e.stopPropagation(),ae?(oe(!1),le(!1)):(Ve(),le(!0),oe(!0))},Sl=re.map($e=>$e.label),Il=(e.internalEdges||[]).filter($e=>{const lo=(e.internalNodes||[]).find(Pr=>Pr.id===$e.source),co=(e.internalNodes||[]).find(Pr=>Pr.id===$e.target);return lo&&co&&!lo.isDummy&&!co.isDummy}).length;return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"node-wrapper node-custom-workflow",onDoubleClick:Ae,children:[l.jsxs("div",{className:"node-top-row",children:[l.jsx("span",{className:"node-custom-badge",children:l.jsxs("span",{className:"node-custom-badge-text",children:[ge," tools"]})}),l.jsx("span",{className:"handle-label",children:"IN"}),l.jsx("span",{className:"node-params-btn",onClick:Ae,children:"Params"})]}),l.jsxs("div",{className:"node-content",children:[l.jsx(Bt,{type:"target",position:ye.Top}),l.jsx("span",{className:"node-label",children:e.label}),l.jsx(Bt,{type:"source",position:ye.Bottom})]}),l.jsxs("div",{className:"node-bottom-row",children:[l.jsxs("span",{className:"node-bottom-left",children:[(s||Ee)&&l.jsx("span",{className:"node-scatter-badge",children:""}),pe&&l.jsx("span",{className:"node-when-badge",children:"?"}),be&&l.jsx("span",{className:"node-fx-badge",children:"fx"}),e.hasValidationWarnings&&l.jsx("span",{className:"node-warning-badge",children:"!"})]}),l.jsx("span",{className:"handle-label",children:"OUT"}),l.jsx("span",{ref:ve,className:"node-info-btn",onMouseEnter:Ge,onMouseLeave:ze,onClick:qt,children:"Info"})]})]}),se&&Nn.createPortal(l.jsxs("div",{ref:ke,className:"workflow-tooltip",style:{top:ue.top,left:ue.left,transform:"translateY(-50%)"},children:[l.jsx("div",{className:"tooltip-section tooltip-fullname",children:l.jsx("span",{className:"tooltip-text",children:e.label})}),l.jsxs("div",{className:"tooltip-section",children:[l.jsxs("span",{className:"tooltip-label",children:["Tools (",ge,"):"]}),l.jsx("span",{className:"tooltip-text",children:Sl.join("  ")})]}),l.jsxs("div",{className:"tooltip-section",children:[l.jsx("span",{className:"tooltip-label",children:"Internal Edges:"}),l.jsx("span",{className:"tooltip-text",children:Il})]}),(Ee||pe||be)&&l.jsxs("div",{className:"tooltip-section",children:[l.jsx("span",{className:"tooltip-label",children:"Features:"}),l.jsx("span",{className:"tooltip-text",children:[Ee&&"Scatter",pe&&"Conditional",be&&"Expressions"].filter(Boolean).join(", ")})]}),e.hasValidationWarnings&&l.jsxs("div",{className:"tooltip-section",children:[l.jsx("span",{className:"tooltip-label",style:{color:"#f0ad4e"},children:"Warning:"}),l.jsx("span",{className:"tooltip-text",children:"Contains invalid edges or parameter mappings"})]})]}),document.body),l.jsx(Uj,{show:G,onClose:Ke,workflowName:e.label,internalNodes:e.internalNodes||[],internalEdges:e.internalEdges||[],wiredInputs:c})]})}return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"node-wrapper",onDoubleClick:fe,children:[l.jsxs("div",{className:"node-top-row",children:[J?l.jsx("span",{className:"node-version",children:m}):l.jsx("span",{className:"node-version-spacer"}),l.jsx("span",{className:"handle-label",children:"IN"}),l.jsx("span",{className:"node-params-btn",onClick:fe,children:"Params"})]}),l.jsxs("div",{onDoubleClick:fe,className:"node-content",children:[l.jsx(Bt,{type:"target",position:ye.Top}),l.jsx("span",{className:"node-label",children:e.label}),l.jsx(Bt,{type:"source",position:ye.Bottom})]}),l.jsxs("div",{className:"node-bottom-row",children:[l.jsxs("span",{className:"node-bottom-left",children:[s&&l.jsx("span",{className:"node-scatter-badge",children:""}),e.whenExpression&&l.jsx("span",{className:"node-when-badge",children:"?"}),e.expressions&&Object.keys(e.expressions).length>0&&l.jsx("span",{className:"node-fx-badge",children:"fx"})]}),l.jsx("span",{className:"handle-label",children:"OUT"}),z?l.jsx("span",{ref:Y,className:"node-info-btn",onMouseEnter:_e,onMouseLeave:Ie,onClick:Et,children:"Info"}):l.jsx("span",{className:"node-info-spacer"})]})]}),W&&z&&Nn.createPortal(l.jsxs("div",{ref:Se,className:"workflow-tooltip",style:{top:O.top,left:O.left,transform:"translateY(-50%)"},children:[z.fullName&&l.jsx("div",{className:"tooltip-section tooltip-fullname",children:l.jsx("span",{className:"tooltip-text",children:z.fullName})}),l.jsxs("div",{className:"tooltip-section",children:[l.jsx("span",{className:"tooltip-label",children:"Function:"}),l.jsx("span",{className:"tooltip-text",children:z.function})]}),z.modality&&l.jsxs("div",{className:"tooltip-section",children:[l.jsx("span",{className:"tooltip-label",children:"Expected Input:"}),l.jsx("span",{className:"tooltip-text",children:z.modality})]}),z.keyParameters&&l.jsxs("div",{className:"tooltip-section",children:[l.jsx("span",{className:"tooltip-label",children:"Key Parameters:"}),l.jsx("span",{className:"tooltip-text",children:z.keyParameters})]}),z.keyPoints&&l.jsxs("div",{className:"tooltip-section",children:[l.jsx("span",{className:"tooltip-label",children:"Key Points:"}),l.jsx("span",{className:"tooltip-text",children:z.keyPoints})]}),l.jsxs("div",{className:"tooltip-section",children:[l.jsx("span",{className:"tooltip-label",children:"Typical Use:"}),l.jsx("span",{className:"tooltip-text",children:z.typicalUse})]})]}),document.body),l.jsxs(Be,{show:u,onHide:me,centered:!0,className:"custom-modal",size:"lg",children:[l.jsx(Be.Header,{children:l.jsxs(Be.Title,{style:{fontFamily:"Roboto Mono, monospace",fontSize:"1rem"},children:[e.label," - Parameters"]})}),l.jsx(Be.Body,{onClick:re=>re.stopPropagation(),children:l.jsxs(je,{children:[J&&l.jsxs(je.Group,{className:"docker-version-group",children:[l.jsx(je.Label,{className:"modal-label",children:"Docker Image"}),l.jsx(Px,{value:m,onChange:v,onBlur:()=>ne(m),tags:K,placeholder:"latest",isValid:g,prefix:`${J}:`}),h&&l.jsx("div",{className:"docker-warning-text",children:h}),l.jsx("div",{className:"docker-help-text",children:"Select a tag or enter a custom version"})]}),l.jsxs(je.Group,{className:"scatter-toggle-group",children:[l.jsxs("div",{className:"scatter-toggle-row",children:[l.jsx(je.Label,{className:"modal-label",style:{marginBottom:0},children:"Scatter (Batch Processing)"}),l.jsx(je.Check,{type:"switch",id:`scatter-toggle-${t}`,checked:_,onChange:re=>b(re.target.checked),disabled:!o,className:"scatter-switch"})]}),l.jsx("div",{className:"scatter-help-text",children:o?"Run this step once per input file instead of once total. Enable on the first node to batch-process multiple subjects  the exported CWL will loop over every file in the input array. Downstream nodes inherit scatter automatically.":"Scatter can only be enabled on source nodes (nodes with no incoming connections). Downstream nodes inherit scatter automatically from upstream."})]}),l.jsxs(je.Group,{className:"when-expression-group",children:[l.jsx(je.Label,{className:"modal-label",style:{marginBottom:6},children:"Conditional (when)"}),l.jsxs("div",{className:"when-builder-row",children:[l.jsxs(je.Select,{size:"sm",className:"when-param-select",value:C,onChange:re=>{P(re.target.value),re.target.value||I("")},children:[l.jsx("option",{value:"",children:"None"}),[...te.required,...te.optional].map(re=>l.jsx("option",{value:re.name,children:re.name},re.name))]}),C&&l.jsx(je.Control,{type:"text",size:"sm",className:`when-condition-input${j.trim()?" filled":""}${L?" invalid":""}`,placeholder:"== true",value:j,onChange:re=>{I(re.target.value),S(!0)},onBlur:()=>S(!0)})]}),C&&j.trim()&&!L&&l.jsxs("div",{className:"when-preview",children:["$(inputs.",C," ",j.trim(),")"]}),L&&l.jsx("div",{className:"when-warning-text",children:L}),l.jsx("div",{className:"when-help-text",children:"Select an input parameter, then write a condition (e.g., == true, > 0.5, != null). Step only runs when the condition is true. Skipped steps produce null outputs."})]}),l.jsxs("div",{className:"params-scroll scrollbar-thin",children:[[{params:te.required,label:"Required"},{params:te.optional,label:"Optional"}].map(({params:re,label:ge})=>re.length>0&&l.jsxs("div",{className:"param-section",children:[l.jsx("div",{className:"param-section-header",children:ge}),re.map(pe=>{const be=c.get(pe.name)||[],Ee=pe.type==="File"||pe.type==="Directory";return l.jsxs("div",{className:`param-card ${Ee&&be.length>0?"input-wired":""} ${F[pe.name]?"has-expression":""}`,children:[l.jsxs("div",{className:"param-card-header",children:[l.jsx("span",{className:"param-name",children:pe.name}),l.jsx("span",{className:"param-type-badge",children:pe.type}),ce(pe)]}),Ee&&be.length===1&&l.jsx("div",{className:"input-source-single",children:l.jsxs("span",{className:"input-source",children:["from ",be[0].sourceNodeLabel," / ",be[0].sourceOutput]})}),Ee&&be.length>1&&l.jsxs("div",{className:"input-source-multi-details",children:[l.jsxs("div",{className:"input-source-multi-row",children:[l.jsx("div",{className:"input-source-multi-sources",children:be.map((Ae,Ke)=>l.jsxs("span",{className:"input-source input-source-detail",children:[Ae.sourceNodeLabel," / ",Ae.sourceOutput]},Ke))}),l.jsxs(je.Select,{size:"sm",className:"link-merge-select",value:N[pe.name]||"merge_flattened",onChange:Ae=>X(pe.name,Ae.target.value),children:[l.jsx("option",{value:"merge_flattened",children:"merge_flattened"}),l.jsx("option",{value:"merge_nested",children:"merge_nested"})]})]}),l.jsx("div",{className:"merge-help-text",children:"flattened combines all into one list [x1, x2]  nested preserves grouping per source [[x1], [x2]]"})]}),Ee&&B[pe.name]&&(()=>{var Ge;const Ae=F[pe.name]||"",Ke=M[pe.name],Ve=Va.filter(ze=>ze.applicableTypes.includes(pe.type));return l.jsxs("div",{className:"expression-file-details",children:[l.jsxs("div",{className:"expression-input-row",children:[l.jsx(je.Control,{type:"text",size:"sm",className:`expression-input${Ae?" filled":""}${Ke?" invalid":""}`,placeholder:"self.nameroot",value:Ae,onChange:ze=>w(qt=>({...qt,[pe.name]:ze.target.value}))}),Ve.length>0&&l.jsxs(je.Select,{size:"sm",className:"expression-template-select",value:((Ge=Ve.find(ze=>ze.expression===Ae))==null?void 0:Ge.expression)||"",onChange:ze=>{ze.target.value&&w(qt=>({...qt,[pe.name]:ze.target.value}))},children:[l.jsx("option",{value:"",children:"Templates"}),Ve.map(ze=>l.jsx("option",{value:ze.expression,title:ze.description,children:ze.label},ze.label))]})]}),Ae.trim()&&!Ke&&l.jsxs("div",{className:"expression-preview",children:["valueFrom: $(",Ae.trim(),")"]}),Ke&&l.jsx("div",{className:"expression-warning-text",children:Ke}),l.jsxs("div",{className:"expression-help-text",children:["self is a ",pe.type," object  use self.nameroot, self.basename, self.dirname, self.path"]})]})})(),!Ee&&B[pe.name]&&(()=>{var Ge;const Ae=F[pe.name]||"",Ke=M[pe.name],Ve=Va.filter(ze=>ze.applicableTypes.includes(pe.type));return l.jsxs("div",{className:"expression-scalar-details",children:[l.jsxs("div",{className:"expression-input-row",children:[l.jsx(je.Control,{type:"text",size:"sm",className:`expression-input${Ae?" filled":""}${Ke?" invalid":""}`,placeholder:pe.type==="string"?"self.toUpperCase()":"self + 1",value:Ae,onChange:ze=>w(qt=>({...qt,[pe.name]:ze.target.value}))}),Ve.length>0&&l.jsxs(je.Select,{size:"sm",className:"expression-template-select",value:((Ge=Ve.find(ze=>ze.expression===Ae))==null?void 0:Ge.expression)||"",onChange:ze=>{ze.target.value&&w(qt=>({...qt,[pe.name]:ze.target.value}))},children:[l.jsx("option",{value:"",children:"Templates"}),Ve.map(ze=>l.jsx("option",{value:ze.expression,title:ze.description,children:ze.label},ze.label))]})]}),Ae.trim()&&!Ke&&l.jsxs("div",{className:"expression-preview",children:["valueFrom: $(",Ae.trim(),")"]}),Ke&&l.jsx("div",{className:"expression-warning-text",children:Ke}),s&&l.jsxs("div",{className:"expression-scatter-note",children:["In scatter mode, ",l.jsx("code",{children:"self"})," receives one element per iteration."]}),l.jsxs("div",{className:"expression-help-text",children:["self is the parameter value (",pe.type,")"]})]})})(),pe.label&&l.jsx("div",{className:"param-description",children:pe.label}),pe.bounds&&l.jsxs("div",{className:"param-bounds",children:["bounds: ",pe.bounds[0],"  ",pe.bounds[1]]})]},pe.name)})]},ge)),!E&&l.jsxs("div",{className:"param-section",children:[l.jsx("div",{className:"param-section-header",children:"Parameters"}),l.jsx("div",{className:"param-description",style:{padding:"8px 0"},children:"Tool not fully defined  parameters unavailable."})]})]})]})})]})]})},$j={nifti:[".nii",".nii.gz"],afni:["+orig.HEAD","+orig.BRIK","+tlrc.HEAD","+tlrc.BRIK","+orig.BRIK.gz","+tlrc.BRIK.gz"],freesurfer:[".mgz",".mgh"],surface:[".vtk",".stl",".gii",".pial",".white",".inflated",".sphere",".sulc"],transform_fsl:[".mat"],transform_ants:[".mat","Warp.nii.gz","InverseWarp.nii.gz","GenericAffine.mat"],transform_fs:[".lta",".xfm",".dat"],text:[".txt",".csv",".1D",".par",".tsv"],log:[".log"]},Wj={nifti:["nifti","afni","freesurfer"],afni:["nifti","afni"],freesurfer:["nifti","freesurfer"],surface:["surface"],transform_fsl:["transform_fsl","transform_ants"],transform_ants:["transform_fsl","transform_ants"],transform_fs:["transform_fs"],text:["text"],log:["log"]};function th(e){if(!e||e.length===0)return null;for(const[t,n]of Object.entries($j))for(const i of e)if(n.includes(i)||t==="afni"&&(i.startsWith("+orig")||i.startsWith("+tlrc")))return t;return null}function Kj(e,t){if(!e||e.length===0)return{compatible:!0,warning:!0,reason:"Output extension unknown"};if(!t||t.length===0)return{compatible:!0,warning:!0,reason:"Input accepts any file type"};if(e.some(s=>t.some(o=>{if(s===o)return!0;if(o.includes("*")){const a=o.replace("*","");return s.startsWith(a)}if(s.includes("*")){const a=s.replace("*","");return o.startsWith(a)}return!1})))return{compatible:!0};const i=th(e),r=th(t);return i&&r&&(Wj[i]||[]).includes(r)?{compatible:!0,warning:!0,reason:`Cross-format: ${i}  ${r}`}:{compatible:!1,reason:`Extension mismatch: ${e.join(", ")}  ${t.join(", ")}`}}const Lx=k.createContext(null);function Vj({children:e}){const[t,n]=k.useState([]),i=k.useRef(new Map),r=k.useCallback(p=>{n(m=>m.filter(v=>v.id!==p))},[]),s=k.useCallback((p,m)=>{n(v=>v.map(g=>g.id===p?{...g,show:!1}:g)),i.current.delete(m)},[]),o=k.useCallback((p,m="danger",v=5e3)=>{const g=i.current.get(p);if(g){clearTimeout(g.timerId);const y=setTimeout(()=>s(g.id,p),v);i.current.set(p,{id:g.id,timerId:y});return}const x=Date.now(),h=setTimeout(()=>s(x,p),v);i.current.set(p,{id:x,timerId:h}),n(y=>[...y,{id:x,message:p,variant:m,show:!0}])},[s]),a=k.useCallback((p,m=2e3)=>{o(p,"danger",m)},[o]),c=k.useCallback((p,m=1800)=>{o(p,"warning",m)},[o]),u=k.useCallback(p=>{o(p,"success",1500)},[o]),d=k.useCallback(p=>{o(p,"info",1500)},[o]),f=k.useCallback(p=>{const m=i.current.get(p);m&&(clearTimeout(m.timerId),i.current.delete(p),n(v=>v.map(g=>g.id===m.id?{...g,show:!1}:g)))},[]);return l.jsxs(Lx.Provider,{value:{showError:a,showWarning:c,showSuccess:u,showInfo:d,dismissMessage:f},children:[e,l.jsx(dw,{position:"top-end",className:"p-3 custom-toast-container",style:{zIndex:9999},children:t.map(p=>l.jsx(Yp,{show:p.show,onExited:()=>r(p.id),animation:!0,className:`custom-toast toast-${p.variant}`,children:l.jsxs(Yp.Body,{className:"custom-toast-body",children:[l.jsx("span",{className:"toast-label",children:p.variant==="danger"?"Error":p.variant==="warning"?"Warning":p.variant==="success"?"Success":"Info"}),p.message]})},p.id))})]})}function ao(){const e=k.useContext(Lx);return e||{showError:t=>alert(t),showWarning:t=>alert(t),showSuccess:t=>alert(t),showInfo:t=>alert(t),dismissMessage:()=>{}}}const nh=e=>(e==null?void 0:e.replace(/[\?\[\]]/g,""))||"File",ih=e=>(e==null?void 0:e.includes("[]"))||!1,Gj=(e,t,n=null,i=null)=>{if(!e||!t)return{compatible:!0,warning:!0,reason:"Type information unavailable"};const r=nh(e),s=nh(t);if(r==="any"||s==="any")return{compatible:!0};const o=ih(e),a=ih(t);if(o&&!a)return{compatible:!0,warning:!0,reason:`${e} will be scattered across ${t} inputs`};if(!o&&a)return{compatible:!1,reason:`Type mismatch: ${e} cannot satisfy ${t}`};if(r!==s)return{compatible:!1,reason:`Type mismatch: ${e}  ${t}`};if(r==="File"&&(n||i)){const c=Kj(n,i);if(!c.compatible)return{compatible:!1,reason:c.reason,isExtensionMismatch:!0};if(c.warning)return{compatible:!0,warning:!0,reason:c.reason,isExtensionWarning:!0}}return{compatible:!0}},rh=e=>{var o,a;const{label:t,isDummy:n,isCustomWorkflow:i,internalNodes:r}=e;if(n&&e.isBIDS){const c=((o=e.bidsSelections)==null?void 0:o.selections)||{};return{outputs:Object.keys(c).length>0?Object.entries(c).map(([d])=>({name:d,type:"File[]",label:d,extensions:[]})):[{name:"data",type:"File[]",label:"data (no selections yet)",extensions:[]}],inputs:[],isGeneric:!1,isBIDS:!0}}if(n)return{outputs:[{name:"data",type:"any",label:"data",extensions:[]}],inputs:[{name:"data",type:"any",label:"data",acceptedExtensions:null}],isGeneric:!0,isDummy:!0};if(i&&r){const{internalEdges:c}=e,u=r.filter(m=>!m.isDummy),d=[],f=[],p=new Set;if(c)for(const m of c){const v=r.find(x=>x.id===m.source),g=r.find(x=>x.id===m.target);if(v&&g&&!v.isDummy&&!g.isDummy)for(const x of((a=m.data)==null?void 0:a.mappings)||[])p.add(`${m.source}/${x.sourceOutput}`)}return u.forEach((m,v)=>{const g=tn(m.label);g&&(Object.entries(g.outputs).forEach(([x,h])=>{const y=`${m.id}/${x}`;p.has(y)||d.push({name:y,type:h.type,label:h.label||x,extensions:h.extensions||[],group:m.label,groupIndex:v})}),Object.entries(g.requiredInputs).forEach(([x,h])=>{f.push({name:`${m.id}/${x}`,type:h.type,label:h.label||x,acceptedExtensions:h.acceptedExtensions||null,required:!0,group:m.label,groupIndex:v})}),Object.entries(g.optionalInputs||{}).filter(([x,h])=>h.type!=="record").forEach(([x,h])=>{f.push({name:`${m.id}/${x}`,type:h.type,label:h.label||x,acceptedExtensions:null,required:!1,group:m.label,groupIndex:v})}))}),{outputs:d,inputs:f,isGeneric:!1,isCustomWorkflow:!0}}const s=tn(t);return s?{outputs:Object.entries(s.outputs).map(([c,u])=>({name:c,type:u.type,label:u.label||c,extensions:u.extensions||[]})),inputs:[...Object.entries(s.requiredInputs).map(([c,u])=>({name:c,type:u.type,label:u.label||c,acceptedExtensions:u.acceptedExtensions||null,required:!0})),...Object.entries(s.optionalInputs||{}).filter(([c,u])=>u.type!=="record").map(([c,u])=>({name:c,type:u.type,label:u.label||c,acceptedExtensions:null,required:!1}))],isGeneric:!1}:{outputs:[{name:"output",type:"File",label:"Output",extensions:[]}],inputs:[{name:"input",type:"File",label:"Input",acceptedExtensions:null}],isGeneric:!0}},qj=({show:e,onClose:t,onSave:n,sourceNode:i,targetNode:r,existingMappings:s=[],adjacencyWarning:o=null})=>{const{showWarning:a}=ao(),[c,u]=k.useState([]),[d,f]=k.useState(null),p=k.useRef({}),m=k.useRef({}),v=k.useRef(null),g=k.useRef(null),x=k.useRef(null),[h,y]=k.useState([]),_=rh(i||{}),b=rh(r||{});k.useEffect(()=>{if(e){if(s.length>0){const R=s.map(A=>({sourceOutput:_.isDummy&&A.sourceOutput==="output"?"data":A.sourceOutput,targetInput:b.isDummy&&A.targetInput==="input"?"data":A.targetInput})),D=new Set(_.outputs.map(A=>A.name)),U=new Set(b.inputs.map(A=>A.name)),O=R.filter(A=>D.has(A.sourceOutput)&&U.has(A.targetInput));u(O)}else{const R=[];_.outputs.length>0&&b.inputs.length>0&&R.push({sourceOutput:_.outputs[0].name,targetInput:b.inputs[0].name}),u(R)}f(null)}},[e,i==null?void 0:i.label,r==null?void 0:r.label]),k.useEffect(()=>{if(!e||!v.current)return;const R=setTimeout(N,50),D=new ResizeObserver(N);D.observe(v.current);const U=g.current,O=x.current;return U&&U.addEventListener("scroll",N),O&&O.addEventListener("scroll",N),()=>{clearTimeout(R),D.disconnect(),U&&U.removeEventListener("scroll",N),O&&O.removeEventListener("scroll",N)}},[e,c]);const N=()=>{var G,Z;if(!v.current)return;const R=v.current.getBoundingClientRect(),D=(G=g.current)==null?void 0:G.getBoundingClientRect(),U=(Z=x.current)==null?void 0:Z.getBoundingClientRect(),O=c.map(se=>{var K,ne;const le=p.current[se.sourceOutput],ae=m.current[se.targetInput];if(!le||!ae)return null;const oe=le.getBoundingClientRect(),ue=ae.getBoundingClientRect(),we=D&&oe.bottom>D.top&&oe.top<D.bottom,ve=U&&ue.bottom>U.top&&ue.top<U.bottom;if(!we&&!ve)return null;const ke=oe.right-R.left,E=oe.top+oe.height/2-R.top,J=ue.left-R.left,te=ue.top+ue.height/2-R.top,L=D&&U?(D.right-R.left+U.left-R.left)/2:(ke+J)/2,M=((K=_.outputs.find(z=>z.name===se.sourceOutput))==null?void 0:K.label)||se.sourceOutput,q=((ne=b.inputs.find(z=>z.name===se.targetInput))==null?void 0:ne.label)||se.targetInput;return{x1:ke,y1:E,x2:J,y2:te,key:`${se.sourceOutput}-${se.targetInput}`,outputOffScreen:!we,inputOffScreen:!ve,outputLabel:M,inputLabel:q,gapMidX:L,outputClampY:we?E:oe.top<D.top?D.top-R.top+20:D.bottom-R.top-20,inputClampY:ve?te:ue.top<U.top?U.top-R.top+20:U.bottom-R.top-20}}).filter(Boolean),A=16,Y=(se,le)=>{const ae=se.filter(oe=>oe[le]!==void 0&&(le==="outputClampY"?oe.outputOffScreen:oe.inputOffScreen));if(!(ae.length<2)){ae.sort((oe,ue)=>oe[le]-ue[le]);for(let oe=1;oe<ae.length;oe++){const ue=ae[oe][le]-ae[oe-1][le];Math.abs(ue)<A&&(ae[oe][le]=ae[oe-1][le]+A)}}};Y(O,"outputClampY"),Y(O,"inputClampY"),y(O)},T=(R,D,U,O)=>{const A=Math.abs(U-R),Y=Math.max(A*.4,30);return`M ${R} ${D} C ${R+Y} ${D}, ${U-Y} ${O}, ${U} ${O}`},C=R=>{f(R)},P=R=>{if(d){const D=c.findIndex(U=>U.sourceOutput===d&&U.targetInput===R);D>=0?u(U=>U.filter((O,A)=>A!==D)):u(U=>[...U.filter(O=>O.targetInput!==R),{sourceOutput:d,targetInput:R}]),f(null)}},j=R=>{u(D=>D.filter(U=>!(U.sourceOutput===R.sourceOutput&&U.targetInput===R.targetInput)))},I=()=>{if(c.length===0){a("Please create at least one mapping before saving.");return}if(W){a("Cannot save: one or more mappings have incompatible types.");return}n(c)},$=()=>{u([]),f(null),t()},S=k.useMemo(()=>new Map(c.map(R=>[R.sourceOutput,R])),[c]),F=k.useMemo(()=>new Map(c.map(R=>[R.targetInput,R])),[c]),w=R=>S.has(R),B=R=>F.has(R),H=(R,D)=>{const U=_.outputs.find(A=>A.name===R),O=b.inputs.find(A=>A.name===D);return Gj(U==null?void 0:U.type,O==null?void 0:O.type,U==null?void 0:U.extensions,O==null?void 0:O.acceptedExtensions)},W=c.some(R=>{const{compatible:D}=H(R.sourceOutput,R.targetInput);return!D});return!i||!r?null:l.jsxs(Be,{show:e,onHide:$,centered:!0,size:"lg",className:"edge-mapping-modal",children:[l.jsx(Be.Header,{children:l.jsxs(Be.Title,{children:["Connect: ",i.label,"  ",r.label]})}),l.jsxs(Be.Body,{children:[o&&l.jsxs("div",{className:"type-warning-banner",children:[l.jsx("span",{className:"warning-icon",children:""}),l.jsx("span",{children:o})]}),W&&l.jsxs("div",{className:"type-warning-banner",children:[l.jsx("span",{className:"warning-icon",children:""}),l.jsx("span",{children:"Type mismatch detected. The output and input types may not be compatible."})]}),l.jsxs("div",{className:"mapping-container",ref:v,children:[l.jsxs("div",{className:"io-column outputs-column",children:[l.jsxs("div",{className:"column-header",children:[_.isDummy?"Provides":"Outputs"," (",i.label,")",_.isGeneric&&l.jsx("span",{className:"generic-badge",children:"generic"})]}),l.jsx("div",{className:"io-items-scroll scrollbar-thin",ref:g,children:_.outputs.map((R,D)=>{var Y,G;const U=c.find(Z=>Z.sourceOutput===R.name),O=U?H(R.name,U.targetInput):{compatible:!0},A=_.isCustomWorkflow&&(D===0||R.group!==((Y=_.outputs[D-1])==null?void 0:Y.group));return l.jsxs(ie.Fragment,{children:[A&&l.jsx("div",{className:"io-group-header",children:R.group}),l.jsxs("div",{ref:Z=>p.current[R.name]=Z,className:`io-item output-item ${d===R.name?"selected":""} ${w(R.name)?"mapped":""} ${O.compatible?"":"mismatch-warning"}`,onClick:()=>C(R.name),children:[l.jsxs("div",{className:"io-item-main",children:[l.jsx("span",{className:"io-name",children:R.label}),l.jsx("span",{className:"io-type",children:R.type}),!O.compatible&&l.jsx("span",{className:"warning-icon",title:O.reason,children:""})]}),((G=R.extensions)==null?void 0:G.length)>0&&l.jsx("span",{className:"io-extensions",title:R.extensions.join(", "),children:R.extensions.join(", ")})]})]},R.name)})})]}),l.jsx("svg",{className:"connection-lines",children:h.map(R=>{const D=c.find(Y=>`${Y.sourceOutput}-${Y.targetInput}`===R.key),U=D?H(D.sourceOutput,D.targetInput):{compatible:!0};if(R.outputOffScreen||R.inputOffScreen){const Y=R.outputOffScreen?R.x2:R.x1,G=R.outputOffScreen?R.y2:R.y1,Z=R.outputOffScreen?R.outputClampY:R.inputClampY,se=R.outputOffScreen?R.outputLabel:R.inputLabel,ae=` ${se.length>12?se.slice(0,12)+"":se}`,oe=R.outputOffScreen?"end":"start",ue=!U.compatible;return l.jsxs("g",{className:"offscreen-group",onClick:()=>{D&&j(D)},children:[l.jsx("line",{x1:Y,y1:G,x2:R.gapMidX,y2:Z,className:`connection-line-offscreen ${ue?"warning-line-offscreen":""}`}),l.jsx("line",{x1:Y,y1:G,x2:R.gapMidX,y2:Z,className:"connection-line-hitarea"}),l.jsx("circle",{cx:Y,cy:G,r:"3.5",className:`connection-dot ${ue?"warning-dot":""}`}),l.jsx("text",{x:R.gapMidX,y:Z,textAnchor:oe,className:`connection-label-offscreen ${ue?"warning-label-offscreen":""}`,children:ae})]},R.key)}const A=T(R.x1,R.y1,R.x2,R.y2);return l.jsxs("g",{onClick:()=>{D&&j(D)},children:[l.jsx("path",{d:A,className:`connection-line ${U.compatible?"":"warning-line"}`}),l.jsx("path",{d:A,className:"connection-line-hitarea"}),l.jsx("circle",{cx:R.x1,cy:R.y1,r:"3.5",className:`connection-dot ${U.compatible?"":"warning-dot"}`}),l.jsx("circle",{cx:R.x2,cy:R.y2,r:"3.5",className:`connection-dot ${U.compatible?"":"warning-dot"}`})]},R.key)})}),l.jsxs("div",{className:"io-column inputs-column",children:[l.jsxs("div",{className:"column-header",children:[b.isDummy?"Receives":"Inputs"," (",r.label,")",b.isGeneric&&l.jsx("span",{className:"generic-badge",children:"generic"})]}),l.jsx("div",{className:"io-items-scroll scrollbar-thin",ref:x,children:b.inputs.map((R,D,U)=>{var le,ae,oe,ue;const O=c.find(we=>we.targetInput===R.name),A=O?H(O.sourceOutput,R.name):{compatible:!0},Y=d?H(d,R.name):{compatible:!0},G=b.isCustomWorkflow&&(D===0||R.group!==((le=U[D-1])==null?void 0:le.group)),se=(!b.isCustomWorkflow||D>0&&R.group===((ae=U[D-1])==null?void 0:ae.group))&&!R.required&&D>0&&((oe=U[D-1])==null?void 0:oe.required);return l.jsxs(ie.Fragment,{children:[G&&l.jsx("div",{className:"io-group-header",children:R.group}),se&&l.jsx("div",{className:"io-section-separator",children:"optional"}),l.jsxs("div",{ref:we=>m.current[R.name]=we,className:`io-item input-item ${B(R.name)?"mapped":""} ${d?"clickable":""} ${A.compatible?"":"mismatch-warning"} ${d&&!Y.compatible?"mismatch-warning-preview":""}`,onClick:()=>P(R.name),title:Y.compatible?"":Y.reason,children:[l.jsxs("div",{className:"io-item-main",children:[l.jsx("span",{className:"io-name",children:R.label}),l.jsx("span",{className:"io-type",children:R.type}),!A.compatible&&l.jsx("span",{className:"warning-icon",title:A.reason,children:""})]}),((ue=R.acceptedExtensions)==null?void 0:ue.length)>0&&l.jsx("span",{className:"io-extensions",title:R.acceptedExtensions.join(", "),children:R.acceptedExtensions.join(", ")})]})]},R.name)})})]})]}),l.jsx("div",{className:"mapping-instructions",children:"Click an output, then click an input to create a connection. Click on a line to remove it."})]}),l.jsxs(Be.Footer,{children:[l.jsx(Di,{variant:"secondary",onClick:$,children:"Cancel"}),l.jsx(Di,{variant:"primary",onClick:I,disabled:W,children:"Save"})]})]})},bc={func:"Task-based and resting state functional MRI",dwi:"Diffusion weighted imaging",fmap:"Field inhomogeneity mapping data (field maps)",anat:"Structural imaging (T1, T2, PD, etc.)",perf:"Perfusion imaging",meg:"Magnetoencephalography",eeg:"Electroencephalography",ieeg:"Intracranial electroencephalography",beh:"Behavioral data",pet:"Positron emission tomography",micr:"Microscopy",nirs:"Near infrared spectroscopy",emg:"Electromyography",motion:"Motion capture"},kc={T1w:"T1-weighted image",T2w:"T2-weighted image",T1map:"T1 relaxation time map",T2map:"T2 relaxation time map",T2starw:"T2*-weighted image",T2starmap:"T2* relaxation time map",FLAIR:"Fluid-attenuated inversion recovery",PDw:"Proton density weighted image",PDmap:"Proton density map",defacemask:"Defacing mask",bold:"Blood oxygen level dependent (fMRI)",boldref:"BOLD reference image",sbref:"Single-band reference image",dwi:"Diffusion weighted image",magnitude:"Magnitude image",magnitude1:"First magnitude image",magnitude2:"Second magnitude image",phasediff:"Phase difference map",fieldmap:"Field map",epi:"EPI field map",asl:"Arterial spin labeling",m0scan:"M0 calibration scan",pet:"PET image",eeg:"EEG recording",meg:"MEG recording",ieeg:"Intracranial EEG recording",SEM:"Scanning electron microscopy",SPIM:"Selective plane illumination microscopy",nirs:"NIRS recording",MP2RAGE:"Magnetization prepared 2 rapid gradient echoes",UNIT1:"Unified T1 image",VFA:"Variable flip angle",MTsat:"Magnetization transfer saturation",MTS:"Magnetization transfer saturation",TB1TFL:"B1 map (TurboFLASH)",MEGRE:"Multi-echo gradient echo",MESE:"Multi-echo spin echo",IRT1:"Inversion recovery T1 mapping"};function Ec(e){const t=[e.suffix||e.datatype];return e.task&&e.task!=="all"&&t.push(e.task),t.join("_").toLowerCase()}function sh(){return crypto.randomUUID()}const Yj=({show:e,onClose:t,bidsStructure:n})=>{const[i,r]=k.useState(new Set),[s,o]=k.useState(""),[a,c]=k.useState(new Set),[u,d]=k.useState([]),f=k.useMemo(()=>n!=null&&n.subjects?Object.keys(n.subjects).sort():[],[n]),p=k.useMemo(()=>(n==null?void 0:n.participants)||{},[n]);k.useEffect(()=>{if(e&&n){r(new Set(f)),o("");const I=new Set;for(const S of Object.values(n.subjects))for(const F of Object.values(S.sessions))for(const w of Object.keys(F))I.add(w);c(new Set(I));const $=[];for(const S of[...I].sort()){const F=new Set,w=new Set;for(const B of Object.values(n.subjects))for(const H of Object.values(B.sessions))if(H[S])for(const W of H[S])F.add(W.suffix),W.entities.task&&w.add(W.entities.task);for(const B of[...F].sort()){const H={id:sh(),datatype:S,suffix:B,task:"all",run:"all",includeEvents:S==="func"&&B==="bold",extractSidecarParams:[],label:""};H.label=Ec(H),$.push(H)}}d($)}},[e,n,f]);const m=k.useMemo(()=>{if(!(n!=null&&n.subjects))return new Map;const I=new Map;for(const $ of i){const S=n.subjects[$];if(!S)continue;const F=new Set;for(const w of Object.values(S.sessions))for(const B of Object.keys(w))F.add(B);for(const w of F)I.set(w,(I.get(w)||0)+1)}return I},[n,i]),v=k.useMemo(()=>{if(!(n!=null&&n.subjects))return[];const I=new Set;for(const $ of Object.values(n.subjects))for(const S of Object.values($.sessions))for(const F of Object.keys(S))I.add(F);return[...I].sort()},[n]),g=k.useMemo(()=>{if(!(n!=null&&n.subjects))return{};const I={};for(const $ of a){const S=new Set,F=new Set,w=new Set;for(const B of i){const H=n.subjects[B];if(H){for(const W of Object.values(H.sessions))if(W[$])for(const R of W[$])S.add(R.suffix),R.entities.task&&F.add(R.entities.task),R.entities.run&&w.add(R.entities.run)}}I[$]={suffixes:[...S].sort(),tasks:[...F].sort(),runs:[...w].sort()}}return I},[n,i,a]),x=k.useMemo(()=>{if(!(n!=null&&n.subjects))return[];const I=[];for(const $ of u)for(const S of i){const F=n.subjects[S];if(F){for(const w of Object.values(F.sessions))if(w[$.datatype])for(const B of w[$.datatype])B.suffix===$.suffix&&($.task&&$.task!=="all"&&B.entities.task!==$.task||$.run&&$.run!=="all"&&B.entities.run!==$.run||I.push({group:$.label,path:B.relativePath}))}}return I},[n,i,u]),h=k.useMemo(()=>{const I={};for(const $ of x)I[$.group]=(I[$.group]||0)+1;return I},[x]),y=k.useCallback(I=>{r($=>{const S=new Set($);return S.has(I)?S.delete(I):S.add(I),S})},[]),_=k.useCallback(()=>{r(I=>I.size===f.length?new Set:new Set(f))},[f]),b=k.useCallback(I=>{c($=>{const S=new Set($);return S.has(I)?(S.delete(I),d(F=>F.filter(w=>w.datatype!==I))):S.add(I),S})},[]),N=k.useCallback((I,$)=>{d(S=>S.map(F=>{if(F.id!==I)return F;const w={...F,...$};return!$.label&&$.suffix!==void 0&&(w.label=Ec(w)),w}))},[]),T=k.useCallback(I=>{d($=>$.filter(S=>S.id!==I))},[]),C=k.useCallback(()=>{const I=[...a][0]||"anat",S=((g[I]||{}).suffixes||[])[0]||"T1w",F={id:sh(),datatype:I,suffix:S,task:"all",run:"all",includeEvents:!1,extractSidecarParams:[],label:""};F.label=Ec(F),d(w=>[...w,F])},[a,g]),P=k.useCallback(()=>{if(u.length===0){t(null);return}const I=i.size===f.length,$={};for(const S of u){const F={datatype:S.datatype,suffix:S.suffix,subjects:I?"all":[...i].sort(),sessions:"all"};S.task&&S.task!=="all"&&(F.task=S.task),S.run&&S.run!=="all"&&(F.run=S.run),S.includeEvents&&(F.include_events=!0),S.extractSidecarParams.length>0&&(F.extract_sidecar_params=S.extractSidecarParams),$[S.label]=F}t({selections:$,datasetName:(n==null?void 0:n.datasetName)||"",bidsVersion:(n==null?void 0:n.bidsVersion)||""})},[u,i,f,n,t]),j=k.useMemo(()=>{if(!s.trim())return f;const I=s.toLowerCase();return f.filter($=>{if($.toLowerCase().includes(I))return!0;const S=p[$];return S?Object.values(S).some(F=>String(F).toLowerCase().includes(I)):!1})},[f,s,p]);return n?l.jsxs(Be,{show:e,onHide:()=>t(null),centered:!0,size:"lg",className:"bids-modal",children:[l.jsx(Be.Header,{closeButton:!0,children:l.jsxs("div",{children:[l.jsx(Be.Title,{children:n.datasetName||"BIDS Dataset"}),n.bidsVersion&&l.jsxs("div",{className:"modal-subtitle",children:["BIDS v",n.bidsVersion]})]})}),l.jsxs(Be.Body,{children:[l.jsxs("div",{className:"bids-panels",children:[l.jsxs("div",{className:"bids-subject-panel",children:[l.jsxs("div",{className:"bids-subject-header",children:[l.jsx("button",{className:"bids-select-all-btn",onClick:_,children:i.size===f.length?"Deselect all":"Select all"}),l.jsxs("span",{className:"bids-subject-count",children:[i.size,"/",f.length]})]}),l.jsx("input",{className:"bids-search-input",type:"text",placeholder:"Search subjects...",value:s,onChange:I=>o(I.target.value)}),l.jsx("div",{className:"bids-subject-list scrollbar-thin",children:j.map(I=>{const $=p[I],S=$?Object.entries($).map(([F,w])=>`${F}: ${w}`).join(", "):"";return l.jsxs("div",{className:"bids-subject-row",onClick:()=>y(I),children:[l.jsx("input",{type:"checkbox",checked:i.has(I),onChange:()=>{}}),l.jsx("span",{className:"bids-subject-id",children:I}),S&&l.jsx("span",{className:"bids-subject-demo",title:S,children:S})]},I)})})]}),l.jsxs("div",{className:"bids-right-panel",children:[l.jsxs("div",{className:"bids-datatype-section",children:[l.jsx("div",{className:"bids-section-label",children:"Data Types"}),l.jsx("div",{className:"bids-datatype-grid",children:v.map(I=>{const $=m.get(I)||0,S=a.has(I),F=$>0;return l.jsxs("div",{className:`bids-datatype-chip${S?" selected":""}${F?"":" unavailable"}`,onClick:()=>F&&b(I),title:bc[I]||I,children:[l.jsxs("div",{className:"bids-datatype-chip-top",children:[l.jsx("input",{type:"checkbox",checked:S,disabled:!F,onChange:()=>{}}),l.jsx("span",{children:I}),l.jsxs("span",{className:"bids-availability-badge",children:["(",$,"/",i.size,")"]})]}),bc[I]&&l.jsx("span",{className:"bids-datatype-desc",children:bc[I]})]},I)})})]}),l.jsxs("div",{className:"bids-outputs-section",children:[l.jsx("div",{className:"bids-section-label",children:"Output Ports"}),l.jsx("div",{className:"bids-outputs-subtitle",children:"Each group becomes an output on the BIDS node. Connect outputs to downstream tools."}),u.length===0&&l.jsx("div",{className:"bids-empty-state",children:"Select a data type to create output groups"}),u.map(I=>{const $=g[I.datatype]||{},S=I.datatype==="func";return l.jsxs("div",{className:"bids-output-group",children:[l.jsxs("div",{className:"bids-output-header",children:[l.jsx("input",{className:"bids-output-label-input",value:I.label,onChange:F=>N(I.id,{label:F.target.value}),placeholder:"output label"}),l.jsx("span",{className:"bids-output-type-badge",children:"File[]"}),l.jsxs("span",{className:"bids-output-count-badge",children:[h[I.label]||0," file",(h[I.label]||0)!==1?"s":""]}),l.jsx("button",{className:"bids-remove-group-btn",onClick:()=>T(I.id),children:"Remove"})]}),l.jsxs("div",{className:"bids-output-filters",children:[l.jsx("span",{className:"bids-filter-label",children:"Type:"}),l.jsx("select",{className:"bids-filter-select",value:I.datatype,onChange:F=>{const w=F.target.value,H=((g[w]||{}).suffixes||[])[0]||"";N(I.id,{datatype:w,suffix:H,task:"all",run:"all"})},children:[...a].sort().map(F=>l.jsx("option",{value:F,children:F},F))}),l.jsx("span",{className:"bids-filter-label",children:"Suffix:"}),l.jsx("select",{className:"bids-filter-select",value:I.suffix,onChange:F=>N(I.id,{suffix:F.target.value}),children:($.suffixes||[]).map(F=>l.jsx("option",{value:F,title:kc[F]||F,children:F},F))}),kc[I.suffix]&&l.jsx("span",{className:"bids-suffix-desc",children:kc[I.suffix]}),S&&($.tasks||[]).length>0&&l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"bids-filter-label",children:"Task:"}),l.jsxs("select",{className:"bids-filter-select",value:I.task,onChange:F=>N(I.id,{task:F.target.value}),children:[l.jsx("option",{value:"all",children:"all"}),$.tasks.map(F=>l.jsx("option",{value:F,children:F},F))]})]}),($.runs||[]).length>1&&l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"bids-filter-label",children:"Run:"}),l.jsxs("select",{className:"bids-filter-select",value:I.run,onChange:F=>N(I.id,{run:F.target.value}),children:[l.jsx("option",{value:"all",children:"all"}),$.runs.map(F=>l.jsx("option",{value:F,children:F},F))]})]}),S&&I.suffix==="bold"&&l.jsxs("label",{className:"bids-filter-check",children:[l.jsx("input",{type:"checkbox",checked:I.includeEvents,onChange:F=>N(I.id,{includeEvents:F.target.checked})}),"events.tsv"]})]})]},I.id)}),a.size>0&&l.jsx("button",{className:"bids-add-group-btn",onClick:C,children:"+ Add output group"})]})]})]}),l.jsxs("div",{className:"bids-path-preview",children:[l.jsxs("div",{className:"bids-preview-header",children:["Resolved paths (",x.length," files)"]}),l.jsxs("div",{className:"bids-preview-list",children:[x.slice(0,50).map((I,$)=>l.jsxs("div",{className:"bids-preview-path",children:[l.jsxs("span",{style:{color:"var(--color-cyan)"},children:["[",I.group,"]"]})," ",I.path]},$)),x.length>50&&l.jsxs("div",{className:"bids-preview-more",children:["...and ",x.length-50," more"]}),x.length===0&&l.jsx("div",{className:"bids-preview-path",style:{fontStyle:"italic"},children:"No files match current selections"})]})]})]}),l.jsxs(Be.Footer,{children:[l.jsx(Di,{className:"btn-cancel",onClick:()=>t(null),children:"Cancel"}),l.jsxs(Di,{className:"btn-save",onClick:P,disabled:u.length===0,children:["Save (",u.length," output",u.length!==1?"s":"",")"]})]})]}):null};function Xj(e){return k.useMemo(()=>{const t=new Map;for(const n of e)t.set(n.id,n);return t},[e])}function Ux(e,t){var a,c,u,d,f;const n=new Set(t.map(p=>p.target)),i=new Set(e.filter(p=>!n.has(p.id)).map(p=>p.id)),r=new Map;for(const p of e)r.set(p.id,[]);for(const p of t)(a=r.get(p.source))==null||a.push(p.target);const s=new Set,o=[];for(const p of e){const m=i.has(p.id),v=(c=p.data)==null?void 0:c.scatterEnabled,g=((u=p.data)==null?void 0:u.isCustomWorkflow)&&((f=(d=p.data)==null?void 0:d.internalNodes)==null?void 0:f.some(x=>x.scatterEnabled));(v&&m||g)&&(s.add(p.id),o.push(p.id))}for(;o.length;){const p=o.shift();for(const m of r.get(p)||[])s.has(m)||(s.add(m),o.push(m))}return{scatteredNodeIds:s,sourceNodeIds:i}}const Zj={"3dANOVA":["3dANOVA","3dANOVA2","3dANOVA3","3dClustSim","3dDeconvolve","3dFWHMx","3dLME","3dLMEr","3dMEMA","3dMVM","3dNetCorr","3dREMLfit","3dROIstats","3dRSFC","3dTcorr1D","3dTcorrMap","3dmaskave","3dttest++","ImageMath","ThresholdImage","cluster","film_gls","flameo","fslmaths","fslmeants","fslroi","fslstats","randomise"],"3dANOVA2":["3dANOVA","3dANOVA2","3dANOVA3","3dClustSim","3dDeconvolve","3dFWHMx","3dLME","3dLMEr","3dMEMA","3dMVM","3dNetCorr","3dREMLfit","3dROIstats","3dRSFC","3dTcorr1D","3dTcorrMap","3dmaskave","3dttest++","ImageMath","ThresholdImage","cluster","film_gls","flameo","fslmaths","fslmeants","fslroi","fslstats","randomise"],"3dANOVA3":["3dANOVA","3dANOVA2","3dANOVA3","3dClustSim","3dDeconvolve","3dFWHMx","3dLME","3dLMEr","3dMEMA","3dMVM","3dNetCorr","3dREMLfit","3dROIstats","3dRSFC","3dTcorr1D","3dTcorrMap","3dmaskave","3dttest++","ImageMath","ThresholdImage","cluster","film_gls","flameo","fslmaths","fslmeants","fslroi","fslstats","randomise"],"3dAllineate":["3dAllineate","3dQwarp","@auto_tlrc"],"3dAutomask":["3dANOVA","3dANOVA2","3dANOVA3","3dBandpass","3dDeconvolve","3dLME","3dLMEr","3dMEMA","3dMVM","3dNetCorr","3dREMLfit","3dRSFC","3dTcorr1D","3dTcorrMap","3dttest++"],"3dBandpass":["3dANOVA","3dANOVA2","3dANOVA3","3dAutomask","3dBlurToFWHM","3dClustSim","3dDeconvolve","3dFWHMx","3dLME","3dLMEr","3dMEMA","3dMVM","3dNetCorr","3dREMLfit","3dROIstats","3dRSFC","3dTcorr1D","3dTcorrMap","3dmaskave","3dmerge","3dttest++"],"3dBlurToFWHM":["3dANOVA","3dANOVA2","3dANOVA3","3dAutomask","3dBandpass","3dBlurToFWHM","3dDeconvolve","3dLME","3dLMEr","3dMEMA","3dMVM","3dREMLfit","3dmerge","3dttest++"],"3dClustSim":["3dClustSim","3dFWHMx","cluster"],"3dDeconvolve":["3dANOVA","3dANOVA2","3dANOVA3","3dClustSim","3dDeconvolve","3dFWHMx","3dLME","3dLMEr","3dMEMA","3dMVM","3dNetCorr","3dREMLfit","3dROIstats","3dRSFC","3dTcorr1D","3dTcorrMap","3dmaskave","3dttest++","ImageMath","ThresholdImage","cluster","film_gls","flameo","fslmaths","fslmeants","fslroi","fslstats","randomise"],"3dDespike":["3dTshift","3dvolreg"],"3dFWHMx":["3dClustSim","3dFWHMx","cluster"],"3dLME":["3dANOVA","3dANOVA2","3dANOVA3","3dClustSim","3dDeconvolve","3dFWHMx","3dLME","3dLMEr","3dMEMA","3dMVM","3dNetCorr","3dREMLfit","3dROIstats","3dRSFC","3dTcorr1D","3dTcorrMap","3dmaskave","3dttest++","ImageMath","ThresholdImage","cluster","film_gls","flameo","fslmaths","fslmeants","fslroi","fslstats","randomise"],"3dLMEr":["3dANOVA","3dANOVA2","3dANOVA3","3dClustSim","3dDeconvolve","3dFWHMx","3dLME","3dLMEr","3dMEMA","3dMVM","3dNetCorr","3dREMLfit","3dROIstats","3dRSFC","3dTcorr1D","3dTcorrMap","3dmaskave","3dttest++","ImageMath","ThresholdImage","cluster","film_gls","flameo","fslmaths","fslmeants","fslroi","fslstats","randomise"],"3dMEMA":["3dANOVA","3dANOVA2","3dANOVA3","3dClustSim","3dDeconvolve","3dFWHMx","3dLME","3dLMEr","3dMEMA","3dMVM","3dNetCorr","3dREMLfit","3dROIstats","3dRSFC","3dTcorr1D","3dTcorrMap","3dmaskave","3dttest++","ImageMath","ThresholdImage","cluster","film_gls","flameo","fslmaths","fslmeants","fslroi","fslstats","randomise"],"3dMVM":["3dANOVA","3dANOVA2","3dANOVA3","3dClustSim","3dDeconvolve","3dFWHMx","3dLME","3dLMEr","3dMEMA","3dMVM","3dNetCorr","3dREMLfit","3dROIstats","3dRSFC","3dTcorr1D","3dTcorrMap","3dmaskave","3dttest++","ImageMath","ThresholdImage","cluster","film_gls","flameo","fslmaths","fslmeants","fslroi","fslstats","randomise"],"3dNetCorr":["3dClustSim","3dFWHMx","3dNetCorr","3dROIstats","3dRSFC","3dTcorr1D","3dTcorrMap","3dmaskave","fslmaths","fslmeants","fslroi","fslstats"],"3dNwarpApply":["3dNwarpApply","3dNwarpCat","3dTstat","3dUndump","3dcalc","3dfractionize","3dresample","LabelGeometryMeasures","antsJointLabelFusion.sh","cluster","whereami"],"3dNwarpCat":["3dNwarpApply","3dNwarpCat","3dTstat","3dUndump","3dcalc","3dfractionize","3dresample","LabelGeometryMeasures","antsJointLabelFusion.sh","cluster","whereami"],"3dQwarp":["3dAllineate","3dQwarp","@auto_tlrc"],"3dREMLfit":["3dANOVA","3dANOVA2","3dANOVA3","3dClustSim","3dDeconvolve","3dFWHMx","3dLME","3dLMEr","3dMEMA","3dMVM","3dNetCorr","3dREMLfit","3dROIstats","3dRSFC","3dTcorr1D","3dTcorrMap","3dmaskave","3dttest++","ImageMath","ThresholdImage","cluster","film_gls","flameo","fslmaths","fslmeants","fslroi","fslstats","randomise"],"3dROIstats":["3dANOVA","3dANOVA2","3dANOVA3","3dDeconvolve","3dLME","3dLMEr","3dMEMA","3dMVM","3dNetCorr","3dREMLfit","3dROIstats","3dRSFC","3dTcorr1D","3dTcorrMap","3dmaskave","3dttest++"],"3dRSFC":["3dClustSim","3dFWHMx","3dNetCorr","3dROIstats","3dRSFC","3dTcorr1D","3dTcorrMap","3dmaskave","fslmaths","fslmeants","fslroi","fslstats"],"3dSkullStrip":["3dAllineate","3dQwarp","3dSkullStrip","3dUnifize","@SSwarper","@auto_tlrc","Atropos","antsAtroposN4.sh","antsRegistration","antsRegistrationSyN.sh","antsRegistrationSyNQuick.sh","fast","fmriprep","run_first_all"],"3dTcat":["3dNwarpApply","3dNwarpCat","3dTcat","3dTstat","3dUndump","3dZeropad","3dcalc","3dcopy","3dfractionize","3dinfo","3dresample","ImageMath","ThresholdImage","antsApplyTransforms","applywarp","cluster","convertwarp","fslmaths","fslmeants","fslroi","fslstats","invwarp","whereami"],"3dTcorr1D":["3dClustSim","3dFWHMx","3dNetCorr","3dROIstats","3dRSFC","3dTcorr1D","3dTcorrMap","3dmaskave","fslmaths","fslmeants","fslroi","fslstats"],"3dTcorrMap":["3dClustSim","3dFWHMx","3dNetCorr","3dROIstats","3dRSFC","3dTcorr1D","3dTcorrMap","3dmaskave","fslmaths","fslmeants","fslroi","fslstats"],"3dTshift":["align_epi_anat"],"3dTstat":["3dNwarpApply","3dNwarpCat","3dTstat","3dUndump","3dcalc","3dfractionize","3dresample","LabelGeometryMeasures","antsApplyTransforms","antsJointLabelFusion.sh","applywarp","cluster","convertwarp","invwarp","whereami"],"3dUndump":["3dNwarpApply","3dNwarpCat","3dTstat","3dUndump","3dcalc","3dfractionize","3dresample","ImageMath","ThresholdImage","antsApplyTransforms","applywarp","cluster","convertwarp","fslmaths","fslmeants","fslroi","fslstats","invwarp","whereami"],"3dUnifize":["3dAllineate","3dQwarp","3dSkullStrip","@SSwarper","@auto_tlrc"],"3dZeropad":["3dNwarpApply","3dNwarpCat","3dTcat","3dTstat","3dUndump","3dZeropad","3dcalc","3dcopy","3dfractionize","3dinfo","3dresample","ImageMath","ThresholdImage","antsApplyTransforms","applywarp","cluster","convertwarp","fslmaths","fslmeants","fslroi","fslstats","invwarp","whereami"],"3dcalc":["3dNwarpApply","3dNwarpCat","3dTstat","3dUndump","3dcalc","3dfractionize","3dresample","LabelGeometryMeasures","antsApplyTransforms","antsJointLabelFusion.sh","applywarp","cluster","convertwarp","invwarp","whereami"],"3dcopy":["3dNwarpApply","3dNwarpCat","3dTcat","3dTstat","3dUndump","3dZeropad","3dcalc","3dcopy","3dfractionize","3dinfo","3dresample","ImageMath","ThresholdImage","antsApplyTransforms","applywarp","cluster","convertwarp","fslmaths","fslmeants","fslroi","fslstats","invwarp","whereami"],"3dfractionize":["3dNwarpApply","3dNwarpCat","3dTstat","3dUndump","3dcalc","3dfractionize","3dresample","ImageMath","ThresholdImage","antsApplyTransforms","applywarp","cluster","convertwarp","fslmaths","fslmeants","fslroi","fslstats","invwarp","whereami"],"3dinfo":["3dNwarpApply","3dNwarpCat","3dTcat","3dTstat","3dUndump","3dZeropad","3dcalc","3dcopy","3dfractionize","3dinfo","3dresample","ImageMath","ThresholdImage","antsApplyTransforms","applywarp","cluster","convertwarp","fslmaths","fslmeants","fslroi","fslstats","invwarp","whereami"],"3dmaskave":["3dANOVA","3dANOVA2","3dANOVA3","3dDeconvolve","3dLME","3dLMEr","3dMEMA","3dMVM","3dNetCorr","3dREMLfit","3dROIstats","3dRSFC","3dTcorr1D","3dTcorrMap","3dmaskave","3dttest++"],"3dmerge":["3dANOVA","3dANOVA2","3dANOVA3","3dAutomask","3dBandpass","3dBlurToFWHM","3dDeconvolve","3dLME","3dLMEr","3dMEMA","3dMVM","3dREMLfit","3dmerge","3dttest++"],"3dresample":["3dNwarpApply","3dNwarpCat","3dTstat","3dUndump","3dcalc","3dfractionize","3dresample","ImageMath","ThresholdImage","antsApplyTransforms","applywarp","cluster","convertwarp","fslmaths","fslmeants","fslroi","fslstats","invwarp","whereami"],"3dttest++":["3dANOVA","3dANOVA2","3dANOVA3","3dClustSim","3dDeconvolve","3dFWHMx","3dLME","3dLMEr","3dMEMA","3dMVM","3dNetCorr","3dREMLfit","3dROIstats","3dRSFC","3dTcorr1D","3dTcorrMap","3dmaskave","3dttest++","ImageMath","ThresholdImage","cluster","film_gls","flameo","fslmaths","fslmeants","fslroi","fslstats","randomise"],"3dvolreg":["3dAutomask","3dBandpass","3dBlurToFWHM","3dmerge"],"@SSwarper":["3dAllineate","3dQwarp","3dSkullStrip","3dUnifize","@SSwarper","@auto_tlrc","Atropos","antsAtroposN4.sh","antsRegistration","antsRegistrationSyN.sh","antsRegistrationSyNQuick.sh","fast","fmriprep","run_first_all"],"@auto_tlrc":["3dAllineate","3dQwarp","@auto_tlrc"],Atropos:["Atropos","KellyKapowski","antsAtroposN4.sh","antsCorticalThickness.sh","antsRegistration","antsRegistrationSyN.sh","antsRegistrationSyNQuick.sh","fmriprep"],DenoiseImage:["3dNwarpApply","3dNwarpCat","3dSkullStrip","3dTcat","3dTstat","3dZeropad","3dcalc","3dcopy","3dinfo","@SSwarper","DenoiseImage","ImageMath","N4BiasFieldCorrection","ThresholdImage","antsApplyTransforms","antsBrainExtraction.sh","applywarp","bet","convertwarp","eddy","fslmaths","fslmeants","fslmerge","fslreorient2std","fslroi","fslsplit","fslstats","invwarp","mri_convert","robustfov","topup"],ImageMath:["3dNwarpApply","3dNwarpCat","3dUndump","3dfractionize","3dresample","ImageMath","LabelGeometryMeasures","ThresholdImage","antsApplyTransforms","antsJointLabelFusion.sh","applywarp","cluster","convertwarp","invwarp","whereami"],KellyKapowski:["KellyKapowski","antsCorticalThickness.sh"],LabelGeometryMeasures:["3dNwarpApply","3dNwarpCat","3dTstat","3dUndump","3dcalc","3dfractionize","3dresample","ImageMath","LabelGeometryMeasures","ThresholdImage","antsApplyTransforms","antsJointLabelFusion.sh","applywarp","cluster","convertwarp","fslmaths","fslmeants","fslroi","fslstats","invwarp","whereami"],N4BiasFieldCorrection:["3dNwarpApply","3dNwarpCat","3dSkullStrip","3dTcat","3dTstat","3dZeropad","3dcalc","3dcopy","3dinfo","@SSwarper","DenoiseImage","ImageMath","N4BiasFieldCorrection","ThresholdImage","antsApplyTransforms","antsBrainExtraction.sh","applywarp","bet","convertwarp","eddy","fslmaths","fslmeants","fslmerge","fslreorient2std","fslroi","fslsplit","fslstats","invwarp","mri_convert","robustfov","topup"],ThresholdImage:["3dNwarpApply","3dNwarpCat","3dUndump","3dfractionize","3dresample","ImageMath","LabelGeometryMeasures","ThresholdImage","antsApplyTransforms","antsJointLabelFusion.sh","applywarp","cluster","convertwarp","invwarp","whereami"],align_epi_anat:["3dAutomask","3dBlurToFWHM","3dmerge","3dvolreg"],amico_noddi:["amico_noddi"],antsApplyTransforms:["3dUndump","3dfractionize","3dresample","ImageMath","LabelGeometryMeasures","ThresholdImage","antsJointLabelFusion.sh","cluster","whereami"],"antsAtroposN4.sh":["Atropos","KellyKapowski","antsAtroposN4.sh","antsCorticalThickness.sh","antsRegistration","antsRegistrationSyN.sh","antsRegistrationSyNQuick.sh","fmriprep"],"antsBrainExtraction.sh":["Atropos","KellyKapowski","antsAtroposN4.sh","antsCorticalThickness.sh","antsIntermodalityIntrasubject.sh","antsRegistration","antsRegistrationSyN.sh","antsRegistrationSyNQuick.sh","eddy","fast","flirt","fmriprep","fnirt","run_first_all","topup"],"antsCorticalThickness.sh":["KellyKapowski","antsCorticalThickness.sh"],"antsIntermodalityIntrasubject.sh":["antsIntermodalityIntrasubject.sh"],"antsJointLabelFusion.sh":["3dNwarpApply","3dNwarpCat","3dTstat","3dUndump","3dcalc","3dfractionize","3dresample","ImageMath","LabelGeometryMeasures","ThresholdImage","antsApplyTransforms","antsJointLabelFusion.sh","applywarp","cluster","convertwarp","fslmaths","fslmeants","fslroi","fslstats","invwarp","whereami"],antsMotionCorr:["3dAutomask","3dBlurToFWHM","3dDespike","3dmerge","dual_regression","film_gls","flameo","melodic","randomise","susan"],antsRegistration:["Atropos","KellyKapowski","antsApplyTransforms","antsAtroposN4.sh","antsCorticalThickness.sh","antsRegistration","antsRegistrationSyN.sh","antsRegistrationSyNQuick.sh","applywarp","convertwarp","invwarp"],"antsRegistrationSyN.sh":["Atropos","KellyKapowski","antsApplyTransforms","antsAtroposN4.sh","antsCorticalThickness.sh","antsRegistration","antsRegistrationSyN.sh","antsRegistrationSyNQuick.sh","applywarp","convertwarp","invwarp"],"antsRegistrationSyNQuick.sh":["Atropos","KellyKapowski","antsApplyTransforms","antsAtroposN4.sh","antsCorticalThickness.sh","antsRegistration","antsRegistrationSyN.sh","antsRegistrationSyNQuick.sh","applywarp","convertwarp","invwarp"],aparcstats2table:["aparcstats2table","asegstats2table","mri_segstats","mris_anatomical_stats"],applytopup:["3dBlurToFWHM","3dDespike","3dTshift","3dmerge","3dvolreg","align_epi_anat","antsMotionCorr","applytopup","fsl_prepare_fieldmap","fugue","mcflirt","prelude","topup"],applywarp:["3dUndump","3dfractionize","3dresample","LabelGeometryMeasures","antsJointLabelFusion.sh","applywarp","cluster","convertwarp","fslmaths","fslmeants","fslroi","fslstats","invwarp","whereami"],asegstats2table:["aparcstats2table","asegstats2table","mri_segstats","mris_anatomical_stats"],asl_calib:["antsIntermodalityIntrasubject.sh","asl_calib","basil","oxford_asl"],basil:["antsIntermodalityIntrasubject.sh","asl_calib","basil","oxford_asl"],bbregister:["bbregister","mri_glmfit","mri_surf2vol","mri_vol2surf","mris_preproc","wb_command_cifti_create_dense_timeseries","wb_command_cifti_separate"],bedpostx:["probtrackx2"],bet:["Atropos","ImageMath","ThresholdImage","antsAtroposN4.sh","antsIntermodalityIntrasubject.sh","antsRegistration","antsRegistrationSyN.sh","antsRegistrationSyNQuick.sh","asl_calib","basil","bianca","eddy","fast","flirt","fmriprep","fnirt","fsl_anat","fslmaths","fslmeants","fslroi","fslstats","oxford_asl","run_first_all","siena","sienax","topup"],cluster:["3dNwarpApply","3dNwarpCat","3dTstat","3dcalc","ImageMath","ThresholdImage","antsApplyTransforms","applywarp","convertwarp","fslmaths","fslmeants","fslroi","fslstats","invwarp"],convertwarp:["3dUndump","3dfractionize","3dresample","LabelGeometryMeasures","antsJointLabelFusion.sh","applywarp","cluster","convertwarp","fslmaths","fslmeants","fslroi","fslstats","invwarp","whereami"],dtifit:["ImageMath","ThresholdImage","fslmaths","fslmeants","fslroi","fslstats","probtrackx2","tbss_1_preproc","tbss_2_reg","tbss_3_postreg","tbss_4_prestats","tbss_non_FA","tck2connectome","tckgen","tcksift"],dual_regression:["3dANOVA","3dANOVA2","3dANOVA3","3dBlurToFWHM","3dDeconvolve","3dLME","3dLMEr","3dMEMA","3dMVM","3dREMLfit","3dmerge","3dttest++","dual_regression","film_gls","flameo","melodic","randomise","susan"],dwi2fod:["dwi2fod","dwi2tensor","tck2connectome","tckgen","tcksift","tensor2metric"],dwi2tensor:["dwi2fod","dwi2tensor","tck2connectome","tckgen","tcksift","tensor2metric"],dwidenoise:["amico_noddi","bedpostx","dmri_postreg","dtifit","dwi2fod","dwi2tensor","dwidenoise","eddy","mrdegibbs","tensor2metric","topup"],eddy:["amico_noddi","antsIntermodalityIntrasubject.sh","bedpostx","dmri_postreg","dtifit","dwi2fod","dwi2tensor","eddy","tck2connectome","tckgen","tcksift","tensor2metric","topup"],fast:["ImageMath","ThresholdImage","asl_calib","basil","bianca","fast","flirt","fmriprep","fnirt","fslmaths","fslmeants","fslroi","fslstats","oxford_asl","run_first_all"],film_gls:["3dClustSim","3dFWHMx","cluster","film_gls","flameo","fslmaths","fslmeants","fslroi","fslstats","randomise"],flameo:["3dClustSim","3dFWHMx","cluster","film_gls","flameo","fslmaths","fslmeants","fslroi","fslstats","randomise"],flirt:["antsApplyTransforms","antsRegistration","antsRegistrationSyN.sh","antsRegistrationSyNQuick.sh","applywarp","bianca","convertwarp","fast","flirt","fnirt","invwarp","run_first_all"],fmriprep:["3dANOVA","3dANOVA2","3dANOVA3","3dAutomask","3dBandpass","3dBlurToFWHM","3dClustSim","3dDeconvolve","3dFWHMx","3dLME","3dLMEr","3dMEMA","3dMVM","3dNetCorr","3dREMLfit","3dROIstats","3dRSFC","3dTcorr1D","3dTcorrMap","3dmaskave","3dmerge","3dttest++","antsIntermodalityIntrasubject.sh","bbregister","dual_regression","film_gls","flameo","melodic","mri_glmfit","mri_surf2vol","mri_vol2surf","mris_preproc","randomise","susan","wb_command_cifti_create_dense_timeseries","wb_command_cifti_separate","wb_command_cifti_smoothing","wb_command_metric_smoothing"],fnirt:["antsApplyTransforms","antsRegistration","antsRegistrationSyN.sh","antsRegistrationSyNQuick.sh","applywarp","bianca","convertwarp","fast","flirt","fnirt","invwarp","run_first_all"],fsl_anat:["bianca","fast","flirt","fmriprep","fnirt","fsl_anat","run_first_all","siena","sienax"],fsl_prepare_fieldmap:["3dBlurToFWHM","3dDespike","3dTshift","3dmerge","3dvolreg","align_epi_anat","antsMotionCorr","applytopup","fsl_prepare_fieldmap","fugue","mcflirt","prelude","topup"],fslmaths:["3dNwarpApply","3dNwarpCat","3dUndump","3dfractionize","3dresample","LabelGeometryMeasures","antsApplyTransforms","antsJointLabelFusion.sh","applywarp","cluster","convertwarp","fslmaths","fslmeants","fslmerge","fslreorient2std","fslroi","fslsplit","fslstats","invwarp","robustfov","whereami"],fslmeants:["3dNwarpApply","3dNwarpCat","3dUndump","3dfractionize","3dresample","LabelGeometryMeasures","antsApplyTransforms","antsJointLabelFusion.sh","applywarp","cluster","convertwarp","fslmaths","fslmeants","fslmerge","fslreorient2std","fslroi","fslsplit","fslstats","invwarp","robustfov","whereami"],fslmerge:["3dNwarpApply","3dNwarpCat","3dTstat","3dcalc","ImageMath","ThresholdImage","antsApplyTransforms","applywarp","bet","cluster","convertwarp","eddy","fmriprep","fslmaths","fslmeants","fslmerge","fslreorient2std","fslroi","fslsplit","fslstats","invwarp","robustfov","topup"],fslreorient2std:["3dNwarpApply","3dNwarpCat","3dTstat","3dcalc","ImageMath","ThresholdImage","antsApplyTransforms","applywarp","bet","cluster","convertwarp","eddy","fmriprep","fslmaths","fslmeants","fslmerge","fslreorient2std","fslroi","fslsplit","fslstats","invwarp","robustfov","topup"],fslroi:["3dNwarpApply","3dNwarpCat","3dUndump","3dfractionize","3dresample","LabelGeometryMeasures","antsApplyTransforms","antsJointLabelFusion.sh","applywarp","cluster","convertwarp","fslmaths","fslmeants","fslmerge","fslreorient2std","fslroi","fslsplit","fslstats","invwarp","robustfov","whereami"],fslsplit:["3dNwarpApply","3dNwarpCat","3dTstat","3dcalc","ImageMath","ThresholdImage","antsApplyTransforms","applywarp","bet","cluster","convertwarp","eddy","fmriprep","fslmaths","fslmeants","fslmerge","fslreorient2std","fslroi","fslsplit","fslstats","invwarp","robustfov","topup"],fslstats:["3dNwarpApply","3dNwarpCat","3dUndump","3dfractionize","3dresample","LabelGeometryMeasures","antsApplyTransforms","antsJointLabelFusion.sh","applywarp","cluster","convertwarp","fslmaths","fslmeants","fslmerge","fslreorient2std","fslroi","fslsplit","fslstats","invwarp","robustfov","whereami"],fugue:["3dBlurToFWHM","3dDespike","3dTshift","3dmerge","3dvolreg","align_epi_anat","antsMotionCorr","applytopup","fsl_prepare_fieldmap","fugue","mcflirt","prelude","topup"],invwarp:["3dUndump","3dfractionize","3dresample","LabelGeometryMeasures","antsJointLabelFusion.sh","applywarp","cluster","convertwarp","fslmaths","fslmeants","fslroi","fslstats","invwarp","whereami"],mcflirt:["3dANOVA","3dANOVA2","3dANOVA3","3dAutomask","3dBlurToFWHM","3dDeconvolve","3dLME","3dLMEr","3dMEMA","3dMVM","3dREMLfit","3dmerge","3dttest++","dual_regression","film_gls","flameo","melodic","randomise","slicetimer","susan"],melodic:["3dANOVA","3dANOVA2","3dANOVA3","3dBlurToFWHM","3dDeconvolve","3dLME","3dLMEr","3dMEMA","3dMVM","3dREMLfit","3dmerge","3dttest++","dual_regression","film_gls","flameo","melodic","randomise","susan"],mrdegibbs:["amico_noddi","bedpostx","dmri_postreg","dtifit","dwi2fod","dwi2tensor","dwidenoise","eddy","mrdegibbs","tensor2metric","topup"],mri_annotation2label:["3dNetCorr","3dROIstats","3dRSFC","3dTcorr1D","3dTcorrMap","3dUndump","3dfractionize","3dmaskave","3dresample","LabelGeometryMeasures","antsJointLabelFusion.sh","aparcstats2table","asegstats2table","mri_annotation2label","mri_aparc2aseg","mri_gtmpvc","mri_label2vol","mri_segstats","mris_anatomical_stats","mris_ca_label","tck2connectome","tckgen","tcksift","whereami"],mri_aparc2aseg:["3dNetCorr","3dROIstats","3dRSFC","3dTcorr1D","3dTcorrMap","3dUndump","3dfractionize","3dmaskave","3dresample","LabelGeometryMeasures","antsJointLabelFusion.sh","aparcstats2table","asegstats2table","mri_annotation2label","mri_aparc2aseg","mri_gtmpvc","mri_label2vol","mri_segstats","mris_anatomical_stats","mris_ca_label","tck2connectome","tckgen","tcksift","whereami"],mri_convert:["3dNwarpApply","3dNwarpCat","3dTcat","3dTstat","3dUndump","3dZeropad","3dcalc","3dcopy","3dfractionize","3dinfo","3dresample","ImageMath","LabelGeometryMeasures","ThresholdImage","antsApplyTransforms","antsJointLabelFusion.sh","applywarp","bet","cluster","convertwarp","eddy","fmriprep","fslmaths","fslmeants","fslmerge","fslreorient2std","fslroi","fslsplit","fslstats","invwarp","robustfov","topup","whereami"],mri_glmfit:["bbregister","mri_glmfit","mri_surf2vol","mri_vol2surf","mris_preproc","wb_command_cifti_create_dense_timeseries","wb_command_cifti_separate"],mri_gtmpvc:["mri_gtmpvc"],mri_label2vol:["3dNetCorr","3dROIstats","3dRSFC","3dTcorr1D","3dTcorrMap","3dUndump","3dfractionize","3dmaskave","3dresample","LabelGeometryMeasures","antsJointLabelFusion.sh","aparcstats2table","asegstats2table","mri_annotation2label","mri_aparc2aseg","mri_gtmpvc","mri_label2vol","mri_segstats","mris_anatomical_stats","mris_ca_label","tck2connectome","tckgen","tcksift","whereami"],mri_normalize:["aparcstats2table","asegstats2table","bbregister","dmri_postreg","mri_annotation2label","mri_aparc2aseg","mri_glmfit","mri_gtmpvc","mri_label2vol","mri_normalize","mri_segment","mri_segstats","mri_surf2vol","mri_vol2surf","mri_watershed","mris_anatomical_stats","mris_ca_label","mris_inflate","mris_preproc","mris_sphere","recon-all","wb_command_surface_sphere_project_unproject"],mri_segment:["aparcstats2table","asegstats2table","bbregister","dmri_postreg","mri_annotation2label","mri_aparc2aseg","mri_glmfit","mri_gtmpvc","mri_label2vol","mri_normalize","mri_segment","mri_segstats","mri_surf2vol","mri_vol2surf","mri_watershed","mris_anatomical_stats","mris_ca_label","mris_inflate","mris_preproc","mris_sphere","recon-all","wb_command_surface_sphere_project_unproject"],mri_segstats:["aparcstats2table","asegstats2table","mri_segstats","mris_anatomical_stats"],mri_surf2vol:["bbregister","mri_glmfit","mri_surf2vol","mri_vol2surf","mris_preproc","wb_command_cifti_create_dense_timeseries","wb_command_cifti_separate"],mri_vol2surf:["bbregister","mri_glmfit","mri_surf2vol","mri_vol2surf","mris_preproc","wb_command_cifti_create_dense_timeseries","wb_command_cifti_separate"],mri_watershed:["aparcstats2table","asegstats2table","bbregister","dmri_postreg","mri_annotation2label","mri_aparc2aseg","mri_glmfit","mri_gtmpvc","mri_label2vol","mri_normalize","mri_segment","mri_segstats","mri_surf2vol","mri_vol2surf","mri_watershed","mris_anatomical_stats","mris_ca_label","mris_inflate","mris_preproc","mris_sphere","recon-all","wb_command_surface_sphere_project_unproject"],mris_anatomical_stats:["aparcstats2table","asegstats2table","mri_segstats","mris_anatomical_stats"],mris_ca_label:["3dNetCorr","3dROIstats","3dRSFC","3dTcorr1D","3dTcorrMap","3dUndump","3dfractionize","3dmaskave","3dresample","LabelGeometryMeasures","antsJointLabelFusion.sh","aparcstats2table","asegstats2table","mri_annotation2label","mri_aparc2aseg","mri_gtmpvc","mri_label2vol","mri_segstats","mris_anatomical_stats","mris_ca_label","tck2connectome","tckgen","tcksift","whereami"],mris_inflate:["aparcstats2table","asegstats2table","bbregister","dmri_postreg","mri_annotation2label","mri_aparc2aseg","mri_glmfit","mri_gtmpvc","mri_label2vol","mri_normalize","mri_segment","mri_segstats","mri_surf2vol","mri_vol2surf","mri_watershed","mris_anatomical_stats","mris_ca_label","mris_inflate","mris_preproc","mris_sphere","recon-all","wb_command_surface_sphere_project_unproject"],mris_preproc:["bbregister","mri_glmfit","mri_surf2vol","mri_vol2surf","mris_preproc","wb_command_cifti_create_dense_timeseries","wb_command_cifti_separate"],mris_sphere:["aparcstats2table","asegstats2table","bbregister","dmri_postreg","mri_annotation2label","mri_aparc2aseg","mri_glmfit","mri_gtmpvc","mri_label2vol","mri_normalize","mri_segment","mri_segstats","mri_surf2vol","mri_vol2surf","mri_watershed","mris_anatomical_stats","mris_ca_label","mris_inflate","mris_preproc","mris_sphere","recon-all","wb_command_surface_sphere_project_unproject"],oxford_asl:["antsIntermodalityIntrasubject.sh","asl_calib","basil","oxford_asl"],prelude:["3dBlurToFWHM","3dDespike","3dTshift","3dmerge","3dvolreg","align_epi_anat","antsMotionCorr","applytopup","fsl_prepare_fieldmap","fugue","mcflirt","prelude","topup"],randomise:["3dClustSim","3dFWHMx","cluster","film_gls","flameo","fslmaths","fslmeants","fslroi","fslstats","randomise"],"recon-all":["aparcstats2table","asegstats2table","bbregister","dmri_postreg","mri_annotation2label","mri_aparc2aseg","mri_glmfit","mri_gtmpvc","mri_label2vol","mri_normalize","mri_segment","mri_segstats","mri_surf2vol","mri_vol2surf","mri_watershed","mris_anatomical_stats","mris_ca_label","mris_inflate","mris_preproc","mris_sphere","recon-all","wb_command_surface_sphere_project_unproject"],robustfov:["3dNwarpApply","3dNwarpCat","3dTstat","3dcalc","ImageMath","ThresholdImage","antsApplyTransforms","applywarp","bet","cluster","convertwarp","eddy","fmriprep","fslmaths","fslmeants","fslmerge","fslreorient2std","fslroi","fslsplit","fslstats","invwarp","robustfov","topup"],run_first_all:["ImageMath","ThresholdImage","asl_calib","basil","bianca","fast","flirt","fmriprep","fnirt","fslmaths","fslmeants","fslroi","fslstats","oxford_asl","run_first_all"],siena:["bianca","fast","flirt","fmriprep","fnirt","fsl_anat","run_first_all","siena","sienax"],sienax:["bianca","fast","flirt","fmriprep","fnirt","fsl_anat","run_first_all","siena","sienax"],slicetimer:["film_gls","flameo","randomise","susan"],susan:["dual_regression","film_gls","flameo","melodic","randomise"],tbss_1_preproc:["fslmaths","fslmeants","fslroi","fslstats","tbss_1_preproc","tbss_2_reg","tbss_3_postreg","tbss_4_prestats","tbss_non_FA"],tbss_2_reg:["fslmaths","fslmeants","fslroi","fslstats","tbss_1_preproc","tbss_2_reg","tbss_3_postreg","tbss_4_prestats","tbss_non_FA"],tbss_3_postreg:["fslmaths","fslmeants","fslroi","fslstats","tbss_1_preproc","tbss_2_reg","tbss_3_postreg","tbss_4_prestats","tbss_non_FA"],tbss_4_prestats:["fslmaths","fslmeants","fslroi","fslstats","tbss_1_preproc","tbss_2_reg","tbss_3_postreg","tbss_4_prestats","tbss_non_FA"],tbss_non_FA:["fslmaths","fslmeants","fslroi","fslstats","tbss_1_preproc","tbss_2_reg","tbss_3_postreg","tbss_4_prestats","tbss_non_FA"],tck2connectome:["tck2connectome","tckgen","tcksift"],tckgen:["tck2connectome","tckgen","tcksift"],tcksift:["tck2connectome","tckgen","tcksift"],tensor2metric:["dwi2fod","dwi2tensor","tck2connectome","tckgen","tcksift","tensor2metric"],topup:["3dBlurToFWHM","3dDespike","3dTshift","3dmerge","3dvolreg","align_epi_anat","amico_noddi","antsIntermodalityIntrasubject.sh","antsMotionCorr","applytopup","bedpostx","dmri_postreg","dtifit","dwi2fod","dwi2tensor","eddy","fsl_prepare_fieldmap","fugue","mcflirt","prelude","tck2connectome","tckgen","tcksift","tensor2metric","topup"],wb_command_cifti_create_dense_timeseries:["wb_command_cifti_create_dense_timeseries","wb_command_cifti_separate","wb_command_cifti_smoothing","wb_command_metric_smoothing"],wb_command_cifti_separate:["wb_command_cifti_create_dense_timeseries","wb_command_cifti_separate","wb_command_cifti_smoothing","wb_command_metric_smoothing"],wb_command_cifti_smoothing:["wb_command_cifti_smoothing","wb_command_metric_smoothing"],wb_command_metric_smoothing:["wb_command_cifti_smoothing","wb_command_metric_smoothing"],whereami:["3dNwarpApply","3dNwarpCat","3dTstat","3dUndump","3dcalc","3dfractionize","3dresample","ImageMath","ThresholdImage","antsApplyTransforms","applywarp","cluster","convertwarp","fslmaths","fslmeants","fslroi","fslstats","invwarp","whereami"]},qa={"3dANOVA":["Functional MRI","Statistical Analysis"],"3dANOVA2":["Functional MRI","Statistical Analysis"],"3dANOVA3":["Functional MRI","Statistical Analysis"],"3dAllineate":["Structural MRI","Registration"],"3dAutomask":["Functional MRI","Masking"],"3dBandpass":["Functional MRI","Temporal Filtering"],"3dBlurToFWHM":["Functional MRI","Smoothing"],"3dClustSim":["Functional MRI","Multiple Comparisons"],"3dDeconvolve":["Functional MRI","Statistical Analysis"],"3dDespike":["Functional MRI","Despiking"],"3dFWHMx":["Functional MRI","Multiple Comparisons"],"3dLME":["Functional MRI","Statistical Analysis"],"3dLMEr":["Functional MRI","Statistical Analysis"],"3dMEMA":["Functional MRI","Statistical Analysis"],"3dMVM":["Functional MRI","Statistical Analysis"],"3dNetCorr":["Functional MRI","Connectivity"],"3dNwarpApply":["Utilities","Warp Utilities"],"3dNwarpCat":["Utilities","Warp Utilities"],"3dQwarp":["Structural MRI","Registration"],"3dREMLfit":["Functional MRI","Statistical Analysis"],"3dROIstats":["Functional MRI","ROI Analysis"],"3dRSFC":["Functional MRI","Connectivity"],"3dSkullStrip":["Structural MRI","Brain Extraction"],"3dTcat":["Utilities","Dataset Operations"],"3dTcorr1D":["Functional MRI","Connectivity"],"3dTcorrMap":["Functional MRI","Connectivity"],"3dTshift":["Functional MRI","Slice Timing"],"3dTstat":["Utilities","Image Math"],"3dUndump":["Utilities","ROI Utilities"],"3dUnifize":["Structural MRI","Bias Correction"],"3dZeropad":["Utilities","Dataset Operations"],"3dcalc":["Utilities","Image Math"],"3dcopy":["Utilities","Dataset Operations"],"3dfractionize":["Utilities","ROI Utilities"],"3dinfo":["Utilities","Dataset Operations"],"3dmaskave":["Functional MRI","ROI Analysis"],"3dmerge":["Functional MRI","Smoothing"],"3dresample":["Utilities","ROI Utilities"],"3dttest++":["Functional MRI","Statistical Analysis"],"3dvolreg":["Functional MRI","Motion Correction"],"@SSwarper":["Structural MRI","Brain Extraction"],"@auto_tlrc":["Structural MRI","Registration"],Atropos:["Structural MRI","Segmentation"],DenoiseImage:["Utilities","Preprocessing Utilities"],ImageMath:["Utilities","Image Operations"],KellyKapowski:["Structural MRI","Cortical Thickness"],LabelGeometryMeasures:["Utilities","Label Analysis"],N4BiasFieldCorrection:["Utilities","Preprocessing Utilities"],ThresholdImage:["Utilities","Image Operations"],align_epi_anat:["Functional MRI","Registration"],amico_noddi:["Accelerated Microstructure Imaging via Convex Optimization/Diffusion Magnetic Resonance Imaging","Microstructure Modeling"],antsApplyTransforms:["Utilities","Transform Utilities"],"antsAtroposN4.sh":["Structural MRI","Segmentation"],"antsBrainExtraction.sh":["Structural MRI","Brain Extraction"],"antsCorticalThickness.sh":["Structural MRI","Cortical Thickness"],"antsIntermodalityIntrasubject.sh":["Multimodal","Intermodal Registration"],"antsJointLabelFusion.sh":["Utilities","Label Analysis"],antsMotionCorr:["Functional MRI","Motion Correction"],antsRegistration:["Structural MRI","Registration"],"antsRegistrationSyN.sh":["Structural MRI","Registration"],"antsRegistrationSyNQuick.sh":["Structural MRI","Registration"],aparcstats2table:["Structural MRI","Morphometry"],applytopup:["Functional MRI","Distortion Correction"],applywarp:["Utilities","Warp Utilities"],asegstats2table:["Structural MRI","Morphometry"],asl_calib:["Arterial Spin Labeling","ASL Processing"],basil:["Arterial Spin Labeling","ASL Processing"],bbregister:["Functional MRI","Functional Analysis"],bedpostx:["Diffusion Magnetic Resonance Imaging","Fiber Modeling"],bet:["Structural MRI","Brain Extraction"],bianca:["Structural MRI","Lesion Segmentation"],cluster:["Utilities","Clustering"],convertwarp:["Utilities","Warp Utilities"],dmri_postreg:["Diffusion Magnetic Resonance Imaging","Diffusion"],dtifit:["Diffusion Magnetic Resonance Imaging","Tensor Fitting"],dual_regression:["Functional MRI","ICA/Denoising"],dwi2fod:["Diffusion Magnetic Resonance Imaging","Tensor/FOD"],dwi2tensor:["Diffusion Magnetic Resonance Imaging","Tensor/FOD"],dwidenoise:["Diffusion Magnetic Resonance Imaging","Preprocessing"],eddy:["Diffusion Magnetic Resonance Imaging","Preprocessing"],fast:["Structural MRI","Tissue Segmentation"],film_gls:["Functional MRI","Statistical Analysis"],flameo:["Functional MRI","Statistical Analysis"],flirt:["Structural MRI","Registration"],fmriprep:["Functional MRI","Pipeline"],fnirt:["Structural MRI","Registration"],fsl_anat:["Structural MRI","Pipelines"],fsl_prepare_fieldmap:["Functional MRI","Distortion Correction"],fslmaths:["Utilities","Image Math"],fslmeants:["Utilities","Image Math"],fslmerge:["Utilities","Volume Operations"],fslreorient2std:["Utilities","Volume Operations"],fslroi:["Utilities","Image Math"],fslsplit:["Utilities","Volume Operations"],fslstats:["Utilities","Image Math"],fugue:["Functional MRI","Distortion Correction"],invwarp:["Utilities","Warp Utilities"],mcflirt:["Functional MRI","Motion Correction"],melodic:["Functional MRI","ICA/Denoising"],mrdegibbs:["Diffusion Magnetic Resonance Imaging","Preprocessing"],mri_annotation2label:["Structural MRI","Parcellation"],mri_aparc2aseg:["Structural MRI","Parcellation"],mri_convert:["Utilities","Format Conversion"],mri_glmfit:["Functional MRI","Functional Analysis"],mri_gtmpvc:["Positron Emission Tomography","PET Processing"],mri_label2vol:["Structural MRI","Parcellation"],mri_normalize:["Structural MRI","Surface Reconstruction"],mri_segment:["Structural MRI","Surface Reconstruction"],mri_segstats:["Structural MRI","Morphometry"],mri_surf2vol:["Functional MRI","Functional Analysis"],mri_vol2surf:["Functional MRI","Functional Analysis"],mri_watershed:["Structural MRI","Surface Reconstruction"],mriqc:["Functional MRI","Pipeline"],mris_anatomical_stats:["Structural MRI","Morphometry"],mris_ca_label:["Structural MRI","Parcellation"],mris_inflate:["Structural MRI","Surface Reconstruction"],mris_preproc:["Functional MRI","Functional Analysis"],mris_sphere:["Structural MRI","Surface Reconstruction"],oxford_asl:["Arterial Spin Labeling","ASL Processing"],prelude:["Functional MRI","Distortion Correction"],probtrackx2:["Diffusion Magnetic Resonance Imaging","Tractography"],randomise:["Functional MRI","Statistical Analysis"],"recon-all":["Structural MRI","Surface Reconstruction"],robustfov:["Utilities","Volume Operations"],run_first_all:["Structural MRI","Tissue Segmentation"],siena:["Structural MRI","Pipelines"],sienax:["Structural MRI","Pipelines"],slicetimer:["Functional MRI","Slice Timing"],susan:["Functional MRI","Smoothing"],tbss_1_preproc:["Diffusion Magnetic Resonance Imaging","TBSS"],tbss_2_reg:["Diffusion Magnetic Resonance Imaging","TBSS"],tbss_3_postreg:["Diffusion Magnetic Resonance Imaging","TBSS"],tbss_4_prestats:["Diffusion Magnetic Resonance Imaging","TBSS"],tbss_non_FA:["Diffusion Magnetic Resonance Imaging","TBSS"],tck2connectome:["Diffusion Magnetic Resonance Imaging","Tractography"],tckgen:["Diffusion Magnetic Resonance Imaging","Tractography"],tcksift:["Diffusion Magnetic Resonance Imaging","Tractography"],tensor2metric:["Diffusion Magnetic Resonance Imaging","Tensor/FOD"],topup:["Diffusion Magnetic Resonance Imaging/Functional MRI","Preprocessing"],wb_command_cifti_create_dense_timeseries:["Functional MRI","CIFTI Operations"],wb_command_cifti_separate:["Functional MRI","CIFTI Operations"],wb_command_cifti_smoothing:["Functional MRI","Surface Smoothing"],wb_command_metric_smoothing:["Functional MRI","Surface Smoothing"],wb_command_surface_sphere_project_unproject:["Structural MRI","Surface Registration"],whereami:["Utilities","ROI Utilities"]},Nf=new Map;for(const[e,t]of Object.entries(Zj))Nf.set(e,new Set(t));function Qj(e,t){if(!e||!t||!qa[e]||!qa[t])return!0;const n=Nf.get(e);return n?n.has(t):!1}function Hx(e,t){if(Qj(e,t))return null;const n=qa[e],i=qa[t];if(!n||!i)return null;const[r,s]=n,[o,a]=i,c=r.split("/"),u=o.split("/");return c.some(f=>u.includes(f))?Nf.has(e)?`No standard pipeline connection from ${s}  ${a}.`:`${e} (${s}) is a terminal tool with no standard downstream connections.`:`Cross-modality: ${c[0]}  ${u[0]} is not a standard connection.`}const Jj=["sub","ses","task","acq","ce","rec","dir","run","mod","echo","flip","inv","mt","part","proc","space","split","recording","chunk"],oh=new RegExp(`(?:^|_)(${Jj.join("|")})-([a-zA-Z0-9]+)`,"g"),Gu=/\.(nii\.gz|nii)$/,$x="_nosession",eT=new Set(["anat","func","dwi","fmap","perf","meg","eeg","ieeg","beh","pet","micr","nirs","emg","motion"]);function tT(e){const t=e.match(Gu);if(!t)return null;const n="."+t[1],i=e.slice(0,-t[0].length),r={};let s=0,o;for(oh.lastIndex=0;(o=oh.exec(i))!==null;)r[o[1]]=o[2],s=o.index+o[0].length;const c=i.slice(s).match(/(?:^|_)([a-zA-Z0-9]+)$/),u=c?c[1]:null;return u?{entities:r,suffix:u,extension:n}:null}function nT(e){const t=new Map,n=e.trim().split(/\r?\n/);if(n.length<2)return t;const i=n[0].split("	").map(s=>s.trim()),r=i.indexOf("participant_id");if(r===-1)return t;for(let s=1;s<n.length;s++){const o=n[s].split("	").map(u=>u.trim()),a=o[r];if(!a)continue;const c={};for(let u=0;u<i.length;u++)u!==r&&o[u]!==void 0&&o[u]!=="n/a"&&(c[i[u]]=o[u]);t.set(a,c)}return t}function iT(e){if(e.length===0)return"";const t=e[0].webkitRelativePath,n=t.indexOf("/");return n===-1?"":t.slice(0,n+1)}function rT(e,t){const n=[],i=[],r=[];t||n.push("This does not appear to be a BIDS-formatted directory (missing dataset_description.json).");const s=Object.keys(e.subjects);if(s.length===0&&n.push("No sub-* directories found in the selected directory."),n.length>0)return{errors:n,warnings:i,info:r};const o=new Map;for(const f of s){const p=e.subjects[f].sessions,m=new Set;for(const v of Object.keys(p))for(const g of Object.keys(p[v]))m.add(g);for(const v of m)o.set(v,(o.get(v)||0)+1)}for(const[f,p]of o)p<s.length&&i.push(`${f} data found in only ${p} of ${s.length} subjects.`);let a=0;for(const f of s){const p=e.subjects[f].sessions;for(const m of Object.keys(p))for(const v of Object.values(p[m]))for(const g of v)(!g.sidecar||Object.keys(g.sidecar).length===0)&&a++}a>0&&i.push(`${a} imaging file(s) missing JSON sidecar metadata.`);const c=new Set;for(const f of s)for(const p of Object.keys(e.subjects[f].sessions))p!==$x&&c.add(p);const u=[...o.keys()].sort(),d=c.size;return r.push(`Found ${s.length} subject${s.length!==1?"s":""}`+(d>0?`, ${d} session${d!==1?"s":""}`:"")+`, ${u.length} data type${u.length!==1?"s":""} (${u.join(", ")}).`),{errors:n,warnings:i,info:r}}async function sT(e){const t=iT(e),n=[],i=new Map,r=new Set;let s=null,o=null;for(let x=0;x<e.length;x++){const h=e[x],y=h.webkitRelativePath,_=t?y.slice(t.length):y;if(_==="dataset_description.json"){s=h;continue}if(_==="participants.tsv"){o=h;continue}const b=_.split("/");if(b.length<3)continue;const N=b[0];if(!N.startsWith("sub-"))continue;let T=null,C,P;if(b[1].startsWith("ses-")?(T=b[1],C=b[2],P=3):(C=b[1],P=2),!eT.has(C))continue;const j=b[P];if(j){if(j.endsWith(".json")){const I=_.replace(/\.json$/,"");i.set(I,h);continue}if(j.endsWith("_events.tsv")){r.add(_);continue}Gu.test(j)&&n.push({relativePath:_,filename:j,subDir:N,sesDir:T,datatype:C})}}let a="",c="";const u=s!=null;if(s)try{const x=JSON.parse(await s.text());a=x.Name||"",c=x.BIDSVersion||""}catch{}let d=new Map;if(o)try{d=nT(await o.text())}catch{}const f={};for(const x of n){const h=tT(x.filename);if(!h)continue;const y=x.subDir,_=x.sesDir||$x;f[y]||(f[y]={sessions:{}}),f[y].sessions[_]||(f[y].sessions[_]={}),f[y].sessions[_][x.datatype]||(f[y].sessions[_][x.datatype]=[]);const b=x.relativePath.replace(Gu,""),N=i.get(b);let T={};if(N)try{T=JSON.parse(await N.text())}catch{}let C=null;if(x.datatype==="func"&&h.suffix==="bold"){const j=x.relativePath.replace(/_bold\.(nii\.gz|nii)$/,"_events.tsv");r.has(j)&&(C=j)}const P={suffix:h.suffix,entities:h.entities,extension:h.extension,relativePath:x.relativePath,sidecar:T};C&&(P.eventsPath=C),f[y].sessions[_][x.datatype].push(P)}const p={datasetName:a,bidsVersion:c,participants:Object.fromEntries(d),subjects:f},{errors:m,warnings:v,info:g}=rT(p,u);return{bidsStructure:m.length>0?null:p,errors:m,warnings:v,info:g}}const oT={default:Hj},ah={type:Ws.ArrowClosed,width:10,height:10};function aT({workflowItems:e,updateCurrentWorkspaceItems:t,onSetWorkflowData:n,currentWorkspaceIndex:i}){var K,ne;const{customWorkflows:r}=ef(),s=k.useRef(null),o=k.useRef(i),[a,c,u]=DA([]),[d,f,p]=MA([]),[m,v]=k.useState(null),g=Xj(a),x=k.useRef(a);k.useEffect(()=>{x.current=a},[a]);const h=k.useRef(d);k.useEffect(()=>{h.current=d},[d]);const y=k.useRef(!1),_=k.useCallback(()=>{y.current=!0},[]);k.useEffect(()=>{y.current&&(y.current=!1,t&&t({nodes:a,edges:d}))},[a,d,t]);const b=k.useMemo(()=>{const z=new Set(a.filter(ce=>{var fe,me;return((fe=ce.data)==null?void 0:fe.isDummy)&&!((me=ce.data)!=null&&me.isBIDS)}).map(ce=>ce.id)),V=a.filter(ce=>{var fe,me;return!((fe=ce.data)!=null&&fe.isDummy)||((me=ce.data)==null?void 0:me.isBIDS)}),Q=d.filter(ce=>!z.has(ce.source)&&!z.has(ce.target)),{scatteredNodeIds:X,sourceNodeIds:ee}=Ux(V,Q);return{propagatedIds:X,sourceNodeIds:ee}},[a,d]),N=k.useMemo(()=>{const z=new Map;return d.forEach(V=>{var Q;(Q=V.data)!=null&&Q.mappings&&V.data.mappings.forEach(X=>{var me;z.has(V.target)||z.set(V.target,new Map);const ee=z.get(V.target),ce=g.get(V.source),fe={sourceNodeId:V.source,sourceNodeLabel:((me=ce==null?void 0:ce.data)==null?void 0:me.label)||"Unknown",sourceOutput:X.sourceOutput};ee.has(X.targetInput)?ee.get(X.targetInput).push(fe):ee.set(X.targetInput,[fe])})}),z},[d,g]);k.useEffect(()=>{if(!r)return;let z=!1;const V=new Set,Q=a.map(X=>{var me,Se;if(!((me=X.data)!=null&&me.isCustomWorkflow)||!((Se=X.data)!=null&&Se.customWorkflowId))return X;const ee=r.find(Ne=>Ne.id===X.data.customWorkflowId);if(!ee)return z=!0,V.add(X.id),null;const ce=JSON.stringify(X.data.internalNodes),fe=JSON.stringify(ee.nodes);return ce===fe&&X.data.label===ee.name&&X.data.hasValidationWarnings===ee.hasValidationWarnings?X:(z=!0,{...X,data:{...X.data,label:ee.name,internalNodes:structuredClone(ee.nodes),internalEdges:structuredClone(ee.edges),boundaryNodes:{...ee.boundaryNodes},hasValidationWarnings:ee.hasValidationWarnings}})}).filter(Boolean);z&&(V.size>0&&f(X=>X.filter(ee=>!V.has(ee.source)&&!V.has(ee.target))),c(Q),_())},[r]);const[T,C]=k.useState(!1),[P,j]=k.useState(null),[I,$]=k.useState(null),[S,F]=k.useState(null),[w,B]=k.useState(!1),[H,W]=k.useState(null),R=k.useRef(null),D=k.useRef(null),{showError:U,showWarning:O,showInfo:A}=ao();k.useEffect(()=>{if(e&&typeof e.nodes<"u"){const z=o.current!==i;if(o.current=i,z||e.nodes.length!==a.length){let V=!1;const Q=(e.nodes||[]).map(ee=>{const ce={...ee.data,onSaveParameters:ee.data.isDummy?null:ee.data.isCustomWorkflow?fe=>G(ee.id,fe):fe=>Y(ee.id,fe),...ee.data.isBIDS?{onUpdateBIDS:fe=>Z(ee.id,fe)}:{}};if(ce.isCustomWorkflow&&ce.customWorkflowId&&r){const fe=r.find(me=>me.id===ce.customWorkflowId);if(fe){const me=JSON.stringify(ce.internalNodes),Se=JSON.stringify(fe.nodes);(me!==Se||ce.label!==fe.name||ce.hasValidationWarnings!==fe.hasValidationWarnings)&&(V=!0,Object.assign(ce,{label:fe.name,internalNodes:structuredClone(fe.nodes),internalEdges:structuredClone(fe.edges),boundaryNodes:{...fe.boundaryNodes},hasValidationWarnings:fe.hasValidationWarnings}))}}return{...ee,data:ce}}),X=(e.edges||[]).map((ee,ce)=>({...ee,id:ee.id||`${ee.source}-${ee.target}-${ce}`,animated:!0,markerEnd:ah,style:{strokeWidth:2}}));c(Q),f(X),V&&_()}}},[e,a.length,i]);const Y=(z,V)=>{c(Q=>Q.map(X=>X.id===z?{...X,data:{...X.data,parameters:V.params||V,dockerVersion:V.dockerVersion||X.data.dockerVersion||"latest",scatterEnabled:V.scatterEnabled!==void 0?V.scatterEnabled:X.data.scatterEnabled||!1,linkMergeOverrides:V.linkMergeOverrides||X.data.linkMergeOverrides||{},whenExpression:V.whenExpression!==void 0?V.whenExpression:X.data.whenExpression||"",expressions:V.expressions||X.data.expressions||{}}}:X)),_()},G=(z,V)=>{c(Q=>Q.map(X=>X.id===z?{...X,data:{...X.data,internalNodes:V.internalNodes||X.data.internalNodes}}:X)),_()},Z=(z,V)=>{var Q;if(V._openModal){W(z),B(!0);return}if(V._pickDirectory){D.current=z,(Q=R.current)==null||Q.click();return}c(X=>X.map(ee=>ee.id===z?{...ee,data:{...ee.data,...V}}:ee)),_()},se=z=>{var V;D.current=z,(V=R.current)==null||V.click()},le=async z=>{const V=z.target.files;if(!V||V.length===0)return;const Q=D.current;if(!Q)return;const X=await sT(V);if(X.errors.length>0){X.errors.forEach(ee=>U(ee,6e3)),z.target.value="";return}X.warnings.length>0&&X.warnings.forEach(ee=>O(ee,5e3)),X.info.length>0&&A(X.info.join(" ")),Z(Q,{bidsStructure:X.bidsStructure}),W(Q),B(!0),z.target.value=""},ae=z=>{z&&H&&Z(H,{bidsSelections:z,scatterEnabled:!0}),B(!1),W(null)},oe=z=>({id:z.id,label:z.data.label,isDummy:z.data.isDummy||!1,isBIDS:z.data.isBIDS||!1,bidsSelections:z.data.bidsSelections||null,isCustomWorkflow:z.data.isCustomWorkflow||!1,internalNodes:z.data.internalNodes||[],internalEdges:z.data.internalEdges||[]}),ue=(z,V)=>{var ee,ce;if(z.data.isDummy||V.data.isDummy)return null;const Q=z.data.isCustomWorkflow?(ee=z.data.boundaryNodes)==null?void 0:ee.lastNonDummy:z.data.label,X=V.data.isCustomWorkflow?(ce=V.data.boundaryNodes)==null?void 0:ce.firstNonDummy:V.data.label;return Q&&X?Hx(Q,X):null},we=k.useCallback(z=>{j(z),$(null);const V=g.get(z.source),Q=g.get(z.target);V&&Q&&(F({sourceNode:oe(V),targetNode:oe(Q),existingMappings:[],adjacencyWarning:ue(V,Q)}),C(!0))},[g]),ve=k.useCallback((z,V)=>{var ee;z.stopPropagation();const Q=g.get(V.source),X=g.get(V.target);Q&&X&&($(V),j(null),F({sourceNode:oe(Q),targetNode:oe(X),existingMappings:((ee=V.data)==null?void 0:ee.mappings)||[],adjacencyWarning:ue(Q,X)}),C(!0))},[g]),ke=k.useCallback(z=>{if(I)f(V=>V.map(Q=>Q.id===I.id?{...Q,data:{...Q.data,mappings:z}}:Q));else if(P){const V={id:`${P.source}-${P.target}-${crypto.randomUUID()}`,source:P.source,target:P.target,animated:!0,markerEnd:ah,style:{strokeWidth:2},data:{mappings:z}};f(Q=>[...Q,V])}_(),C(!1),j(null),$(null),F(null)},[P,I]),E=k.useCallback(()=>{C(!1),j(null),$(null),F(null)},[]),J=k.useCallback(z=>{p(z),z.filter(Q=>Q.type==="remove").length>0&&_()},[p,_]),te=k.useCallback(z=>{z.preventDefault(),z.dataTransfer.dropEffect="move"},[]),L=z=>{z.preventDefault();const V=z.dataTransfer.getData("node/name")||"Unnamed Node",Q=z.dataTransfer.getData("node/isDummy")==="true",X=z.dataTransfer.getData("node/isBIDS")==="true",ee=z.dataTransfer.getData("node/customWorkflowId");if(!m)return;const ce=m.screenToFlowPosition({x:z.clientX,y:z.clientY}),fe=(me,Se)=>{const Ne=crypto.randomUUID(),_e={id:Ne,type:"default",position:ce,data:{label:V,isDummy:!1,parameters:"",dockerVersion:"latest",scatterEnabled:!1,linkMergeOverrides:{},whenExpression:"",expressions:{},...me(Ne)}};c(Ie=>[...Ie,_e]),_(),Se&&Se(Ne)};if(X)fe(me=>({isDummy:!0,isBIDS:!0,bidsStructure:null,bidsSelections:null,onSaveParameters:null,onUpdateBIDS:Se=>Z(me,Se)}),me=>se(me));else if(ee){const me=r.find(Se=>Se.id===ee);if(!me)return;fe(Se=>({label:me.name,isCustomWorkflow:!0,customWorkflowId:me.id,internalNodes:structuredClone(me.nodes),internalEdges:structuredClone(me.edges),boundaryNodes:{...me.boundaryNodes},hasValidationWarnings:me.hasValidationWarnings,parameters:{},onSaveParameters:Ne=>G(Se,Ne)}))}else fe(me=>({isDummy:Q,onSaveParameters:Q?null:Se=>Y(me,Se)}))},M=k.useCallback(z=>{const V=new Set(z.map(Q=>Q.id));c(Q=>Q.filter(X=>!V.has(X.id))),f(Q=>Q.filter(X=>!V.has(X.source)&&!V.has(X.target))),_()},[_]);k.useEffect(()=>{const z=V=>{if(V.key==="Delete"&&m){const Q=m.getNodes().filter(X=>X.selected);Q.length>0&&M(Q)}};return window.addEventListener("keydown",z),()=>window.removeEventListener("keydown",z)},[m,M]);const q=()=>({nodes:a.map(z=>({id:z.id,data:z.data,position:z.position})),edges:d.map(z=>({id:z.id,source:z.source,target:z.target,data:z.data}))});return k.useEffect(()=>{n&&n(()=>q)},[a,d,n]),l.jsxs("div",{className:"workflow-canvas",children:[l.jsx("div",{ref:s,onDrop:L,onDragOver:te,className:"workflow-canvas-container",children:l.jsx(Ox.Provider,{value:b,children:l.jsx(Bx.Provider,{value:N,children:l.jsxs(Bv,{nodes:a,edges:d,onNodesChange:u,onEdgesChange:J,onConnect:we,onNodesDelete:M,onEdgeDoubleClick:ve,fitView:!0,fitViewOptions:{maxZoom:1,padding:.2},nodeTypes:oT,onInit:z=>v(z),children:[l.jsx(WA,{nodeColor:"var(--color-primary)",maskColor:"var(--minimap-mask)",style:{backgroundColor:"var(--minimap-bg)"}}),l.jsx(iC,{variant:"dots",gap:12,size:1}),l.jsx(ZA,{})]})})})}),l.jsx(qj,{show:T,onClose:E,onSave:ke,sourceNode:S==null?void 0:S.sourceNode,targetNode:S==null?void 0:S.targetNode,existingMappings:(S==null?void 0:S.existingMappings)||[],adjacencyWarning:(S==null?void 0:S.adjacencyWarning)||null}),l.jsx("input",{ref:R,type:"file",webkitdirectory:"",style:{display:"none"},onChange:le}),l.jsx(Yj,{show:w,onClose:ae,bidsStructure:H?(ne=(K=g.get(H))==null?void 0:K.data)==null?void 0:ne.bidsStructure:null})]})}function lT({name:e,onNameChange:t}){const[n,i]=k.useState(e||"");k.useEffect(()=>{i(e||"")},[e]);const r=o=>{const a=o.target.value;i(a),t(a)},s=()=>{const o=n.trim();i(o),t(o)};return l.jsxs("div",{className:"name-input-row",children:[l.jsx("span",{className:"name-input-label",children:"Output"}),l.jsxs("div",{className:"name-input-wrapper",children:[l.jsx("input",{type:"text",className:"name-input-field",value:n,onChange:r,onBlur:s,placeholder:"main",maxLength:50}),l.jsx("span",{className:"name-input-suffix",children:".cwl"})]})]})}function cT({name:e,onNameChange:t,placeholder:n}){const[i,r]=k.useState(e||"");k.useEffect(()=>{r(e||"")},[e]);const s=a=>{const c=a.target.value;r(c),t(c)},o=()=>{const a=i.trim();r(a),t(a)};return l.jsxs("div",{className:"name-input-row",children:[l.jsx("span",{className:"name-input-label",children:"Name"}),l.jsx("div",{className:"name-input-wrapper",children:l.jsx("input",{type:"text",className:"name-input-field",value:i,onChange:s,onBlur:o,placeholder:n||"Custom Workflow 1",maxLength:50})})]})}const uT=()=>l.jsx("footer",{className:"footer",children:l.jsxs("div",{className:"footer-content",children:[l.jsx("img",{src:"/niBuild/images/SDS Monogram Logo Color-Screen.png",alt:"SDS Logo",className:"footer-logo"}),l.jsxs("span",{className:"footer-span",children:["[Authors = Agarwal K.",l.jsx("a",{href:"https://www.linkedin.com/in/kunaal-agarwal/",target:"_blank",rel:"noopener noreferrer",className:"footer-links footer-span",children:" [Info]"}),", Dawood A.",l.jsx("a",{href:"https://www.linkedin.com/in/adamadawood/",target:"_blank",rel:"noopener noreferrer",className:"footer-links footer-span",children:" [Info]"}),", Rasero J.",l.jsx("a",{href:"https://datascience.virginia.edu/people/javier-rasero",target:"_blank",rel:"noopener noreferrer",className:"footer-links footer-span",children:" [Info]"}),"]"]})]})});function dT(e){var u;const{nodes:t,edges:n}=e,i=t.filter(d=>{var f;return(f=d.data)==null?void 0:f.isCustomWorkflow});if(i.length===0)return e;const r=new Set(i.map(d=>d.id)),s=[],o=[];for(const d of i){const{internalNodes:f=[],internalEdges:p=[]}=d.data;for(const m of f)s.push({id:`${d.id}__${m.id}`,type:"default",data:{label:m.label,isDummy:m.isDummy||!1,parameters:m.parameters||{},dockerVersion:m.dockerVersion||"latest",scatterEnabled:m.scatterEnabled||!1,linkMergeOverrides:m.linkMergeOverrides||{},whenExpression:m.whenExpression||"",expressions:m.expressions||{}},position:m.position||{x:0,y:0}});for(const m of p)o.push({id:`${d.id}__${m.id}`,source:`${d.id}__${m.source}`,target:`${d.id}__${m.target}`,data:m.data?structuredClone(m.data):{}})}const a=t.filter(d=>!r.has(d.id)),c=[];for(const d of n){const f=r.has(d.source),p=r.has(d.target);if(!f&&!p){c.push(d);continue}const m=((u=d.data)==null?void 0:u.mappings)||[],v=new Map;for(const g of m){let x=d.source,h=g.sourceOutput,y=d.target,_=g.targetInput;if(f){const N=g.sourceOutput.indexOf("/");if(N>-1){const T=g.sourceOutput.substring(0,N);h=g.sourceOutput.substring(N+1),x=`${d.source}__${T}`}}if(p){const N=g.targetInput.indexOf("/");if(N>-1){const T=g.targetInput.substring(0,N);_=g.targetInput.substring(N+1),y=`${d.target}__${T}`}}const b=`${x}::${y}`;v.has(b)||v.set(b,{source:x,target:y,mappings:[]}),v.get(b).mappings.push({sourceOutput:h,targetInput:_})}for(const[g,x]of v)c.push({id:`${d.id}__${g}`,source:x.source,target:x.target,data:{mappings:x.mappings}})}return{nodes:[...a,...s],edges:[...c,...o]}}function ls(e,t=!1){if(!e)return t?["null","File"]:"File";if(e==="record")return null;if(e.endsWith("[]")){const i={type:"array",items:e.slice(0,-2)};return t?["null",i]:i}return e.endsWith("?")?["null",e.slice(0,-1)]:t?["null",e]:e}function Wx(e){return{type:"array",items:(e||"File").replace(/\?$/,"")}}function ws(e){if(e==null)return!1;const t=typeof e;return t==="string"||t==="number"||t==="boolean"?!0:t==="function"?!1:Array.isArray(e)?e.every(ws):t==="object"?Object.values(e).every(ws):!1}function Nc(e){const t=e.parameters;return t&&typeof t=="object"&&!Array.isArray(t)?t:null}function fT(e,t){switch(e){case"boolean":return!1;case"int":return t!=null&&t.bounds?t.bounds[0]:0;case"double":return t!=null&&t.bounds?t.bounds[0]:0;case"string":return"";default:return null}}function Qr(e,t,n){return n?t:`${e}_${t}`}function pT(e,t,n,i,r,s){const o=n.id,a=n.data.expressions||{};Object.entries(i.requiredInputs).forEach(([c,u])=>{var m,v,g;const{type:d}=u,f=a[c],p=((m=e.wiredInputsMap.get(o))==null?void 0:m.get(c))||[];if(f)if(e.needsStepInputExpression=!0,e.needsInlineJavascript=!0,p.length===0){const x=Qr(r,c,s);e.wf.inputs[x]={type:ls(d)},t.in[c]={source:x,valueFrom:f}}else if(p.length===1)t.in[c]={source:e.resolveWiredSource(p[0]),valueFrom:f};else{const x=((v=n.data.linkMergeOverrides)==null?void 0:v[c])||"merge_flattened";t.in[c]={source:p.map(h=>e.resolveWiredSource(h)),linkMerge:x,valueFrom:f},e.needsMultipleInputFeature=!0}else if(p.length===1)t.in[c]=e.resolveWiredSource(p[0]);else if(p.length>1){const x=((g=n.data.linkMergeOverrides)==null?void 0:g[c])||"merge_flattened";t.in[c]={source:p.map(h=>e.resolveWiredSource(h)),linkMerge:x},e.needsMultipleInputFeature=!0}else{const x=Qr(r,c,s),h=e.scatteredSteps.has(o)&&(d==="File"||d==="Directory")?Wx(d):ls(d);if(e.wf.inputs[x]={type:h},t.in[c]=x,d!=="File"&&d!=="Directory"){const y=Nc(n.data),_=y==null?void 0:y[c];_!=null&&_!==""&&ws(_)&&(e.jobDefaults[x]=_)}}}),i.optionalInputs&&Object.entries(i.optionalInputs).forEach(([c,u])=>{var m,v,g,x;const{type:d}=u,f=a[c];if(f){e.needsStepInputExpression=!0,e.needsInlineJavascript=!0;const h=((m=e.wiredInputsMap.get(o))==null?void 0:m.get(c))||[];if(h.length===1)t.in[c]={source:e.resolveWiredSource(h[0]),valueFrom:f};else if(h.length>1){const y=((v=n.data.linkMergeOverrides)==null?void 0:v[c])||"merge_flattened";t.in[c]={source:h.map(_=>e.resolveWiredSource(_)),linkMerge:y,valueFrom:f},e.needsMultipleInputFeature=!0}else{const y=Qr(r,c,s);e.wf.inputs[y]={type:ls(d,!0)},t.in[c]={source:y,valueFrom:f}}return}if(d==="record"){const h=Qr(r,c,s),y={type:["null","Any"]},_=Nc(n.data),b=_==null?void 0:_[c];b!=null&&b!==""&&ws(b)&&(y.default=b),e.wf.inputs[h]=y,t.in[c]=h;return}const p=((g=e.wiredInputsMap.get(o))==null?void 0:g.get(c))||[];if(p.length===1)t.in[c]=e.resolveWiredSource(p[0]);else if(p.length>1){const h=((x=n.data.linkMergeOverrides)==null?void 0:x[c])||"merge_flattened";t.in[c]={source:p.map(y=>e.resolveWiredSource(y)),linkMerge:h},e.needsMultipleInputFeature=!0}else{const h=Qr(r,c,s),y={type:ls(d,!0)},_=Nc(n.data),b=_==null?void 0:_[c];let N;b!=null&&b!==""&&ws(b)?N=b:N=fT(d,u),N!=null&&(e.jobDefaults[h]=N),e.wf.inputs[h]=y,t.in[c]=h}})}function mT(e,t,n,i){if(!e.scatteredSteps.has(t))return null;const r=[];if(e.sourceNodeIds.has(t)?Object.entries(n.requiredInputs).forEach(([o,a])=>{var d,f;const c=a.type==="File"||a.type==="Directory",u=(((f=(d=e.wiredInputsMap.get(t))==null?void 0:d.get(o))==null?void 0:f.length)||0)>0;c&&!u&&r.push(o)}):(i.forEach(o=>{var c;if(!e.scatteredSteps.has(o.source))return;(((c=o.data)==null?void 0:c.mappings)||[]).forEach(u=>{r.includes(u.targetInput)||r.push(u.targetInput)})}),e.bidsEdges.filter(o=>o.target===t).forEach(o=>{var c;(((c=o.data)==null?void 0:c.mappings)||[]).forEach(u=>{r.includes(u.targetInput)||r.push(u.targetInput)})})),r.length===0)return null;const s={scatter:r.length===1?r[0]:r};return r.length>1&&(s.scatterMethod="dotproduct"),s}function hT(e,t,n){t.forEach(i=>{const r=tn(i.data.label),s=(r==null?void 0:r.outputs)||{output:{type:"File",label:"Output"}},o=e.getStepId(i.id),a=t.length===1,c=e.scatteredSteps.has(i.id);Object.entries(s).forEach(([u,d])=>{const f=a?u:`${o}_${u}`,p=c?Wx(d.type):ls(d.type),m={type:p,outputSource:`${o}/${u}`};n.has(i.id)&&(m.type=["null",p],m.pickValue="first_non_null"),e.wf.outputs[f]=m})})}function Kx(e){var W,R,D,U,O;e=dT(e);const t=e.nodes.filter(A=>{var Y,G;return((Y=A.data)==null?void 0:Y.isBIDS)&&((G=A.data)==null?void 0:G.bidsSelections)}),n=new Set(t.map(A=>A.id)),i=e.edges.filter(A=>n.has(A.source)),r=new Set(e.nodes.filter(A=>{var Y;return(Y=A.data)==null?void 0:Y.isDummy}).map(A=>A.id)),s=e.nodes.filter(A=>{var Y;return!((Y=A.data)!=null&&Y.isDummy)}),o=e.edges.filter(A=>!r.has(A.source)&&!r.has(A.target)),a=new Map(s.map(A=>[A.id,A])),c=A=>a.get(A),u=new Map,d=new Map;for(const A of s)u.set(A.id,[]),d.set(A.id,[]);for(const A of o)(W=u.get(A.target))==null||W.push(A),(R=d.get(A.source))==null||R.push(A);const f=A=>u.get(A)||[],p=A=>d.get(A)||[],m=Object.fromEntries(s.map(A=>[A.id,0]));o.forEach(A=>m[A.target]++);const v=s.filter(A=>m[A.id]===0).map(A=>A.id),g=[];let x=0;for(;x<v.length;){const A=v[x++];g.push(A),p(A).forEach(Y=>{--m[Y.target]===0&&v.push(Y.target)})}if(g.length!==s.length)throw new Error("Workflow graph has cycles.");const h={},y={};g.forEach(A=>{const Y=c(A),G=tn(Y.data.label),Z=(G==null?void 0:G.id)||Y.data.label.toLowerCase().replace(/[^a-z0-9]/g,"_");Z in h||(h[Z]=0),h[Z]++,y[A]={toolId:Z,count:h[Z]}});const _=A=>{const{toolId:Y,count:G}=y[A];return h[Y]>1?`${Y}_${G}`:Y},b=A=>A.isBIDSInput?A.sourceOutput:`${_(A.sourceNodeId)}/${A.sourceOutput}`,N=[...s,...t],T=[...o,...i],{scatteredNodeIds:C,sourceNodeIds:P}=Ux(N,T),j={cwlVersion:"v1.2",class:"Workflow",inputs:{},outputs:{},steps:{}},I=new Set;for(const A of i)if(!r.has(A.target))for(const Y of((D=A.data)==null?void 0:D.mappings)||[])I.add(Y.sourceOutput);for(const A of I)j.inputs[A]={type:{type:"array",items:"File"}};const $=new Set,S={},F=new Map;for(const A of o){const Y=((U=A.data)==null?void 0:U.mappings)||[];for(const G of Y){F.has(A.target)||F.set(A.target,new Map);const Z=F.get(A.target),se={sourceNodeId:A.source,sourceOutput:G.sourceOutput};Z.has(G.targetInput)?Z.get(G.targetInput).push(se):Z.set(G.targetInput,[se])}}for(const A of i){const Y=((O=A.data)==null?void 0:O.mappings)||[];for(const G of Y){F.has(A.target)||F.set(A.target,new Map);const Z=F.get(A.target),se={sourceNodeId:null,sourceOutput:G.sourceOutput,isBIDSInput:!0};Z.has(G.targetInput)?Z.get(G.targetInput).push(se):Z.set(G.targetInput,[se])}}const w={wf:j,jobDefaults:S,wiredInputsMap:F,scatteredSteps:C,sourceNodeIds:P,bidsEdges:i,resolveWiredSource:b,getStepId:_,needsMultipleInputFeature:!1,needsInlineJavascript:!1,needsStepInputExpression:!1};g.forEach(A=>{const Y=c(A),{label:G}=Y.data,Z=tn(G),se={id:G.toLowerCase().replace(/[^a-z0-9]/g,"_"),cwlPath:`cwl/generic/${G.toLowerCase().replace(/[^a-z0-9]/g,"_")}.cwl`,requiredInputs:{input:{type:"File",label:"Input"}},optionalInputs:{},outputs:{output:{type:"File",label:"Output"}}},le=Z||se,ae=_(A),oe=s.length===1,ue={run:`../${le.cwlPath}`,in:{},out:Object.keys(le.outputs)};pT(w,ue,Y,le,ae,oe);const we=Y.data.dockerVersion||"latest",ve=le.dockerImage;ve&&(ue.hints={DockerRequirement:{dockerPull:`${ve}:${we}`}});const ke=mT(w,A,le,f(A)),E={run:ue.run};ke&&(E.scatter=ke.scatter,ke.scatterMethod&&(E.scatterMethod=ke.scatterMethod)),E.in=ue.in,E.out=ue.out,ue.hints&&(E.hints=ue.hints),Y.data.whenExpression&&Y.data.whenExpression.trim()&&(E.when=Y.data.whenExpression.trim(),$.add(A),w.needsInlineJavascript=!0),j.steps[ae]=E});const B={};w.needsInlineJavascript&&(B.InlineJavascriptRequirement={}),C.size>0&&(B.ScatterFeatureRequirement={}),w.needsMultipleInputFeature&&(B.MultipleInputFeatureRequirement={}),w.needsStepInputExpression&&(B.StepInputExpressionRequirement={}),Object.keys(B).length>0&&(j.requirements=B);const H=s.filter(A=>p(A.id).length===0);return hT(w,H,$),{wf:j,jobDefaults:S}}function Vx(e,t={}){const n=r=>{if(r==null)return null;if(Array.isArray(r)){const s=r.find(o=>o!=="null");return s?n(s):null}if(typeof r=="object"&&r.type==="array")return[n(r.items)];switch(r){case"File":return{class:"File",path:"a/file/path"};case"Directory":return{class:"Directory",path:"a/directory/path"};case"string":return"a_string";case"int":case"long":return 0;case"float":case"double":return .1;case"boolean":return!1;default:return null}},i={};for(const[r,s]of Object.entries(e.inputs))t[r]!==void 0?i[r]=t[r]:s.default!==void 0?i[r]=s.default:i[r]=n(s.type);return vr.dump(i,{noRefs:!0})}const gT=`#!/usr/bin/env cwl-runner

`,lh=e=>e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),yT=e=>e.split(`
`).map(t=>{if(t.trimStart().startsWith("#"))return`<span class="cwl-comment">${lh(t)}</span>`;let n=lh(t);return n=n.replace(/^(\s*)([\w][\w-]*)(:)/,'$1<span class="cwl-key">$2</span>$3'),n=n.replace(/&#39;(.*?)&#39;/g,'<span class="cwl-string">$&</span>'),n=n.replace(/&quot;(.*?)&quot;/g,'<span class="cwl-string">$&</span>'),n=n.replace(/\b(true|false|null)\b/g,'<span class="cwl-bool">$1</span>'),n}).join(`
`);function wT({getWorkflowData:e}){const{showWarning:t}=ao(),[n,i]=k.useState(""),[r,s]=k.useState(""),[o,a]=k.useState(null),[c,u]=k.useState(!0),[d,f]=k.useState("workflow"),[p,m]=k.useState(!1),[v,g]=k.useState(!1),x=k.useRef(null),h=k.useRef(null),[y,_]=k.useState(()=>{try{const P=localStorage.getItem("cwlPanelCollapsed");return P===null?!0:JSON.parse(P)===!0}catch{return!0}}),b=k.useCallback(()=>{_(P=>{const j=!P;try{localStorage.setItem("cwlPanelCollapsed",JSON.stringify(j))}catch{}return j})},[]);k.useEffect(()=>(x.current&&clearTimeout(x.current),x.current=setTimeout(()=>{if(typeof e!="function"){u(!0);return}try{const P=e(),j=new Set(((P==null?void 0:P.nodes)||[]).filter(B=>{var H;return(H=B.data)==null?void 0:H.isDummy}).map(B=>B.id)),I=((P==null?void 0:P.nodes)||[]).filter(B=>{var H;return!((H=B.data)!=null&&H.isDummy)}).length,$=((P==null?void 0:P.edges)||[]).filter(B=>!j.has(B.source)&&!j.has(B.target)).length,S=((P==null?void 0:P.nodes)||[]).some(B=>{var H;return(H=B.data)==null?void 0:H.isCustomWorkflow});if(!P||!P.nodes||!S&&(I<2||!P.edges||$<1)){i(""),s(""),a(null),u(!0);return}u(!1);const{wf:F,jobDefaults:w}=Kx(P);i(gT+vr.dump(F,{noRefs:!0})),s(Vx(F,w)),a(null)}catch(P){u(!1),a(P.message)}},300),()=>{x.current&&clearTimeout(x.current)}),[e]);const N=d==="workflow"?n:r;k.useEffect(()=>()=>{h.current&&clearTimeout(h.current)},[]);const T=k.useCallback(()=>{navigator.clipboard.writeText(N).then(()=>{g(!0),h.current&&clearTimeout(h.current),h.current=setTimeout(()=>g(!1),1500)}).catch(()=>t("Copy to clipboard failed"))},[N]),C=k.useMemo(()=>N?yT(N):"",[N]);return l.jsxs(l.Fragment,{children:[l.jsx("div",{className:`cwl-preview-panel${y?" cwl-collapsed":""}`,children:y?l.jsx("div",{className:"cwl-collapsed-strip",onClick:b,title:"Expand CWL Preview",children:l.jsx("span",{className:"cwl-collapsed-label",children:"CWL Preview"})}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"cwl-preview-header",children:[l.jsxs("div",{className:"cwl-tab-bar",children:[l.jsx("button",{className:`cwl-tab${d==="workflow"?" active":""}`,onClick:()=>f("workflow"),children:".cwl"}),l.jsx("button",{className:`cwl-tab${d==="job"?" active":""}`,onClick:()=>f("job"),children:".yml"})]}),l.jsxs("div",{className:"cwl-preview-actions",children:[l.jsx("button",{className:"cwl-action-btn",onClick:T,disabled:!N,title:"Copy to clipboard",children:v?"Copied!":"Copy"}),l.jsx("button",{className:"cwl-action-btn",onClick:()=>m(!0),disabled:!N,title:"Expand to fullscreen",children:"Expand"}),l.jsx("button",{className:"cwl-action-btn",onClick:b,title:"Collapse panel",children:""})]})]}),l.jsxs("div",{className:"cwl-preview-body",children:[o&&l.jsxs("div",{className:"cwl-error-banner",children:[l.jsx("span",{className:"cwl-error-icon",children:"!"}),l.jsx("span",{children:o})]}),c&&!o&&l.jsx("div",{className:"cwl-empty-message",children:"Connect at least two nodes to preview the generated CWL workflow."}),N&&l.jsx("pre",{className:"cwl-code",dangerouslySetInnerHTML:{__html:C}})]})]})}),l.jsxs(Be,{show:p,onHide:()=>m(!1),centered:!0,size:"xl",className:"cwl-fullscreen-modal",children:[l.jsxs(Be.Header,{children:[l.jsx(Be.Title,{children:d==="workflow"?"CWL Workflow Preview":"Job Template Preview"}),l.jsx("button",{className:"cwl-action-btn",onClick:T,disabled:!N,children:v?"Copied!":"Copy"})]}),l.jsx(Be.Body,{children:l.jsx("pre",{className:"cwl-code cwl-code-fullscreen",dangerouslySetInnerHTML:{__html:C}})})]})]})}const vT=[{id:crypto.randomUUID(),nodes:[],edges:[],name:"",workflowName:""}];function xT(){const[e,t]=k.useState(()=>{try{const p=JSON.parse(localStorage.getItem("workspaces"));if(p)return p.map(m=>({id:m.id||crypto.randomUUID(),nodes:m.nodes||[],edges:m.edges||[],name:m.name||"",workflowName:m.workflowName||""}))}catch{}return vT}),[n,i]=k.useState(()=>{const p=parseInt(localStorage.getItem("currentWorkspace"),10);return isNaN(p)?0:p});return Nu("workspaces",e,300),Nu("currentWorkspace",n,300),{workspaces:e,currentWorkspace:n,setCurrentWorkspace:i,addNewWorkspace:()=>{t(p=>{const m=[...p,{id:crypto.randomUUID(),nodes:[],edges:[],name:"",workflowName:""}];return i(m.length-1),m})},addNewWorkspaceWithData:p=>{t(m=>{const v={id:crypto.randomUUID(),nodes:p.nodes||[],edges:p.edges||[],name:p.name||"",workflowName:p.workflowName||""},g=[...m,v];return i(g.length-1),g})},clearCurrentWorkspace:()=>{t(p=>{const m=[...p],v=m[n];return m[n]={id:(v==null?void 0:v.id)||crypto.randomUUID(),nodes:[],edges:[],name:"",workflowName:""},m})},updateCurrentWorkspaceItems:p=>{t(m=>{const v=[...m],g=v[n];return v[n]={...p,id:(g==null?void 0:g.id)||crypto.randomUUID(),name:(g==null?void 0:g.name)||"",workflowName:(g==null?void 0:g.workflowName)||""},v})},removeCurrentWorkspace:()=>{e.length!==1&&(t(p=>p.filter((m,v)=>v!==n)),i(p=>p>=e.length-1?e.length-2:p))},updateWorkspaceName:p=>{t(m=>{const v=[...m];return v[n]={...v[n],name:p},v})},updateWorkflowName:p=>{t(m=>{const v=[...m];return v[n]={...v[n],workflowName:p},v})},removeWorkflowNodesFromAll:p=>{t(m=>{let v=!1;const g=m.map(x=>{const h=new Set,y=x.nodes.filter(b=>{var N,T;return(N=b.data)!=null&&N.isCustomWorkflow&&((T=b.data)==null?void 0:T.customWorkflowId)===p?(h.add(b.id),!1):!0});if(h.size===0)return x;v=!0;const _=x.edges.filter(b=>!h.has(b.source)&&!h.has(b.target));return{...x,nodes:y,edges:_}});return v?g:m})}}}function Lo(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Gx={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(e,t){(function(n){e.exports=n()})(function(){return function n(i,r,s){function o(u,d){if(!r[u]){if(!i[u]){var f=typeof Lo=="function"&&Lo;if(!d&&f)return f(u,!0);if(a)return a(u,!0);var p=new Error("Cannot find module '"+u+"'");throw p.code="MODULE_NOT_FOUND",p}var m=r[u]={exports:{}};i[u][0].call(m.exports,function(v){var g=i[u][1][v];return o(g||v)},m,m.exports,n,i,r,s)}return r[u].exports}for(var a=typeof Lo=="function"&&Lo,c=0;c<s.length;c++)o(s[c]);return o}({1:[function(n,i,r){var s=n("./utils"),o=n("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.encode=function(c){for(var u,d,f,p,m,v,g,x=[],h=0,y=c.length,_=y,b=s.getTypeOf(c)!=="string";h<c.length;)_=y-h,f=b?(u=c[h++],d=h<y?c[h++]:0,h<y?c[h++]:0):(u=c.charCodeAt(h++),d=h<y?c.charCodeAt(h++):0,h<y?c.charCodeAt(h++):0),p=u>>2,m=(3&u)<<4|d>>4,v=1<_?(15&d)<<2|f>>6:64,g=2<_?63&f:64,x.push(a.charAt(p)+a.charAt(m)+a.charAt(v)+a.charAt(g));return x.join("")},r.decode=function(c){var u,d,f,p,m,v,g=0,x=0,h="data:";if(c.substr(0,h.length)===h)throw new Error("Invalid base64 input, it looks like a data url.");var y,_=3*(c=c.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(c.charAt(c.length-1)===a.charAt(64)&&_--,c.charAt(c.length-2)===a.charAt(64)&&_--,_%1!=0)throw new Error("Invalid base64 input, bad content length.");for(y=o.uint8array?new Uint8Array(0|_):new Array(0|_);g<c.length;)u=a.indexOf(c.charAt(g++))<<2|(p=a.indexOf(c.charAt(g++)))>>4,d=(15&p)<<4|(m=a.indexOf(c.charAt(g++)))>>2,f=(3&m)<<6|(v=a.indexOf(c.charAt(g++))),y[x++]=u,m!==64&&(y[x++]=d),v!==64&&(y[x++]=f);return y}},{"./support":30,"./utils":32}],2:[function(n,i,r){var s=n("./external"),o=n("./stream/DataWorker"),a=n("./stream/Crc32Probe"),c=n("./stream/DataLengthProbe");function u(d,f,p,m,v){this.compressedSize=d,this.uncompressedSize=f,this.crc32=p,this.compression=m,this.compressedContent=v}u.prototype={getContentWorker:function(){var d=new o(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new c("data_length")),f=this;return d.on("end",function(){if(this.streamInfo.data_length!==f.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),d},getCompressedWorker:function(){return new o(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},u.createWorkerFrom=function(d,f,p){return d.pipe(new a).pipe(new c("uncompressedSize")).pipe(f.compressWorker(p)).pipe(new c("compressedSize")).withStreamInfo("compression",f)},i.exports=u},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,i,r){var s=n("./stream/GenericWorker");r.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},r.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,i,r){var s=n("./utils"),o=function(){for(var a,c=[],u=0;u<256;u++){a=u;for(var d=0;d<8;d++)a=1&a?3988292384^a>>>1:a>>>1;c[u]=a}return c}();i.exports=function(a,c){return a!==void 0&&a.length?s.getTypeOf(a)!=="string"?function(u,d,f,p){var m=o,v=p+f;u^=-1;for(var g=p;g<v;g++)u=u>>>8^m[255&(u^d[g])];return-1^u}(0|c,a,a.length,0):function(u,d,f,p){var m=o,v=p+f;u^=-1;for(var g=p;g<v;g++)u=u>>>8^m[255&(u^d.charCodeAt(g))];return-1^u}(0|c,a,a.length,0):0}},{"./utils":32}],5:[function(n,i,r){r.base64=!1,r.binary=!1,r.dir=!1,r.createFolders=!0,r.date=null,r.compression=null,r.compressionOptions=null,r.comment=null,r.unixPermissions=null,r.dosPermissions=null},{}],6:[function(n,i,r){var s=null;s=typeof Promise<"u"?Promise:n("lie"),i.exports={Promise:s}},{lie:37}],7:[function(n,i,r){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=n("pako"),a=n("./utils"),c=n("./stream/GenericWorker"),u=s?"uint8array":"array";function d(f,p){c.call(this,"FlateWorker/"+f),this._pako=null,this._pakoAction=f,this._pakoOptions=p,this.meta={}}r.magic="\b\0",a.inherits(d,c),d.prototype.processChunk=function(f){this.meta=f.meta,this._pako===null&&this._createPako(),this._pako.push(a.transformTo(u,f.data),!1)},d.prototype.flush=function(){c.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},d.prototype.cleanUp=function(){c.prototype.cleanUp.call(this),this._pako=null},d.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var f=this;this._pako.onData=function(p){f.push({data:p,meta:f.meta})}},r.compressWorker=function(f){return new d("Deflate",f)},r.uncompressWorker=function(){return new d("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,i,r){function s(m,v){var g,x="";for(g=0;g<v;g++)x+=String.fromCharCode(255&m),m>>>=8;return x}function o(m,v,g,x,h,y){var _,b,N=m.file,T=m.compression,C=y!==u.utf8encode,P=a.transformTo("string",y(N.name)),j=a.transformTo("string",u.utf8encode(N.name)),I=N.comment,$=a.transformTo("string",y(I)),S=a.transformTo("string",u.utf8encode(I)),F=j.length!==N.name.length,w=S.length!==I.length,B="",H="",W="",R=N.dir,D=N.date,U={crc32:0,compressedSize:0,uncompressedSize:0};v&&!g||(U.crc32=m.crc32,U.compressedSize=m.compressedSize,U.uncompressedSize=m.uncompressedSize);var O=0;v&&(O|=8),C||!F&&!w||(O|=2048);var A=0,Y=0;R&&(A|=16),h==="UNIX"?(Y=798,A|=function(Z,se){var le=Z;return Z||(le=se?16893:33204),(65535&le)<<16}(N.unixPermissions,R)):(Y=20,A|=function(Z){return 63&(Z||0)}(N.dosPermissions)),_=D.getUTCHours(),_<<=6,_|=D.getUTCMinutes(),_<<=5,_|=D.getUTCSeconds()/2,b=D.getUTCFullYear()-1980,b<<=4,b|=D.getUTCMonth()+1,b<<=5,b|=D.getUTCDate(),F&&(H=s(1,1)+s(d(P),4)+j,B+="up"+s(H.length,2)+H),w&&(W=s(1,1)+s(d($),4)+S,B+="uc"+s(W.length,2)+W);var G="";return G+=`
\0`,G+=s(O,2),G+=T.magic,G+=s(_,2),G+=s(b,2),G+=s(U.crc32,4),G+=s(U.compressedSize,4),G+=s(U.uncompressedSize,4),G+=s(P.length,2),G+=s(B.length,2),{fileRecord:f.LOCAL_FILE_HEADER+G+P+B,dirRecord:f.CENTRAL_FILE_HEADER+s(Y,2)+G+s($.length,2)+"\0\0\0\0"+s(A,4)+s(x,4)+P+B+$}}var a=n("../utils"),c=n("../stream/GenericWorker"),u=n("../utf8"),d=n("../crc32"),f=n("../signature");function p(m,v,g,x){c.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=v,this.zipPlatform=g,this.encodeFileName=x,this.streamFiles=m,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(p,c),p.prototype.push=function(m){var v=m.meta.percent||0,g=this.entriesCount,x=this._sources.length;this.accumulate?this.contentBuffer.push(m):(this.bytesWritten+=m.data.length,c.prototype.push.call(this,{data:m.data,meta:{currentFile:this.currentFile,percent:g?(v+100*(g-x-1))/g:100}}))},p.prototype.openedSource=function(m){this.currentSourceOffset=this.bytesWritten,this.currentFile=m.file.name;var v=this.streamFiles&&!m.file.dir;if(v){var g=o(m,v,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:g.fileRecord,meta:{percent:0}})}else this.accumulate=!0},p.prototype.closedSource=function(m){this.accumulate=!1;var v=this.streamFiles&&!m.file.dir,g=o(m,v,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(g.dirRecord),v)this.push({data:function(x){return f.DATA_DESCRIPTOR+s(x.crc32,4)+s(x.compressedSize,4)+s(x.uncompressedSize,4)}(m),meta:{percent:100}});else for(this.push({data:g.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},p.prototype.flush=function(){for(var m=this.bytesWritten,v=0;v<this.dirRecords.length;v++)this.push({data:this.dirRecords[v],meta:{percent:100}});var g=this.bytesWritten-m,x=function(h,y,_,b,N){var T=a.transformTo("string",N(b));return f.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(h,2)+s(h,2)+s(y,4)+s(_,4)+s(T.length,2)+T}(this.dirRecords.length,g,m,this.zipComment,this.encodeFileName);this.push({data:x,meta:{percent:100}})},p.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},p.prototype.registerPrevious=function(m){this._sources.push(m);var v=this;return m.on("data",function(g){v.processChunk(g)}),m.on("end",function(){v.closedSource(v.previous.streamInfo),v._sources.length?v.prepareNextSource():v.end()}),m.on("error",function(g){v.error(g)}),this},p.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},p.prototype.error=function(m){var v=this._sources;if(!c.prototype.error.call(this,m))return!1;for(var g=0;g<v.length;g++)try{v[g].error(m)}catch{}return!0},p.prototype.lock=function(){c.prototype.lock.call(this);for(var m=this._sources,v=0;v<m.length;v++)m[v].lock()},i.exports=p},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,i,r){var s=n("../compressions"),o=n("./ZipFileWorker");r.generateWorker=function(a,c,u){var d=new o(c.streamFiles,u,c.platform,c.encodeFileName),f=0;try{a.forEach(function(p,m){f++;var v=function(y,_){var b=y||_,N=s[b];if(!N)throw new Error(b+" is not a valid compression method !");return N}(m.options.compression,c.compression),g=m.options.compressionOptions||c.compressionOptions||{},x=m.dir,h=m.date;m._compressWorker(v,g).withStreamInfo("file",{name:p,dir:x,date:h,comment:m.comment||"",unixPermissions:m.unixPermissions,dosPermissions:m.dosPermissions}).pipe(d)}),d.entriesCount=f}catch(p){d.error(p)}return d}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,i,r){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new s;for(var a in this)typeof this[a]!="function"&&(o[a]=this[a]);return o}}(s.prototype=n("./object")).loadAsync=n("./load"),s.support=n("./support"),s.defaults=n("./defaults"),s.version="3.10.1",s.loadAsync=function(o,a){return new s().loadAsync(o,a)},s.external=n("./external"),i.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,i,r){var s=n("./utils"),o=n("./external"),a=n("./utf8"),c=n("./zipEntries"),u=n("./stream/Crc32Probe"),d=n("./nodejsUtils");function f(p){return new o.Promise(function(m,v){var g=p.decompressed.getContentWorker().pipe(new u);g.on("error",function(x){v(x)}).on("end",function(){g.streamInfo.crc32!==p.decompressed.crc32?v(new Error("Corrupted zip : CRC32 mismatch")):m()}).resume()})}i.exports=function(p,m){var v=this;return m=s.extend(m||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),d.isNode&&d.isStream(p)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",p,!0,m.optimizedBinaryString,m.base64).then(function(g){var x=new c(m);return x.load(g),x}).then(function(g){var x=[o.Promise.resolve(g)],h=g.files;if(m.checkCRC32)for(var y=0;y<h.length;y++)x.push(f(h[y]));return o.Promise.all(x)}).then(function(g){for(var x=g.shift(),h=x.files,y=0;y<h.length;y++){var _=h[y],b=_.fileNameStr,N=s.resolve(_.fileNameStr);v.file(N,_.decompressed,{binary:!0,optimizedBinaryString:!0,date:_.date,dir:_.dir,comment:_.fileCommentStr.length?_.fileCommentStr:null,unixPermissions:_.unixPermissions,dosPermissions:_.dosPermissions,createFolders:m.createFolders}),_.dir||(v.file(N).unsafeOriginalName=b)}return x.zipComment.length&&(v.comment=x.zipComment),v})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,i,r){var s=n("../utils"),o=n("../stream/GenericWorker");function a(c,u){o.call(this,"Nodejs stream input adapter for "+c),this._upstreamEnded=!1,this._bindStream(u)}s.inherits(a,o),a.prototype._bindStream=function(c){var u=this;(this._stream=c).pause(),c.on("data",function(d){u.push({data:d,meta:{percent:0}})}).on("error",function(d){u.isPaused?this.generatedError=d:u.error(d)}).on("end",function(){u.isPaused?u._upstreamEnded=!0:u.end()})},a.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},i.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,i,r){var s=n("readable-stream").Readable;function o(a,c,u){s.call(this,c),this._helper=a;var d=this;a.on("data",function(f,p){d.push(f)||d._helper.pause(),u&&u(p)}).on("error",function(f){d.emit("error",f)}).on("end",function(){d.push(null)})}n("../utils").inherits(o,s),o.prototype._read=function(){this._helper.resume()},i.exports=o},{"../utils":32,"readable-stream":16}],14:[function(n,i,r){i.exports={isNode:typeof Buffer<"u",newBufferFrom:function(s,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(s,o);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new Buffer(s,o)},allocBuffer:function(s){if(Buffer.alloc)return Buffer.alloc(s);var o=new Buffer(s);return o.fill(0),o},isBuffer:function(s){return Buffer.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(n,i,r){function s(N,T,C){var P,j=a.getTypeOf(T),I=a.extend(C||{},d);I.date=I.date||new Date,I.compression!==null&&(I.compression=I.compression.toUpperCase()),typeof I.unixPermissions=="string"&&(I.unixPermissions=parseInt(I.unixPermissions,8)),I.unixPermissions&&16384&I.unixPermissions&&(I.dir=!0),I.dosPermissions&&16&I.dosPermissions&&(I.dir=!0),I.dir&&(N=h(N)),I.createFolders&&(P=x(N))&&y.call(this,P,!0);var $=j==="string"&&I.binary===!1&&I.base64===!1;C&&C.binary!==void 0||(I.binary=!$),(T instanceof f&&T.uncompressedSize===0||I.dir||!T||T.length===0)&&(I.base64=!1,I.binary=!0,T="",I.compression="STORE",j="string");var S=null;S=T instanceof f||T instanceof c?T:v.isNode&&v.isStream(T)?new g(N,T):a.prepareContent(N,T,I.binary,I.optimizedBinaryString,I.base64);var F=new p(N,S,I);this.files[N]=F}var o=n("./utf8"),a=n("./utils"),c=n("./stream/GenericWorker"),u=n("./stream/StreamHelper"),d=n("./defaults"),f=n("./compressedObject"),p=n("./zipObject"),m=n("./generate"),v=n("./nodejsUtils"),g=n("./nodejs/NodejsStreamInputAdapter"),x=function(N){N.slice(-1)==="/"&&(N=N.substring(0,N.length-1));var T=N.lastIndexOf("/");return 0<T?N.substring(0,T):""},h=function(N){return N.slice(-1)!=="/"&&(N+="/"),N},y=function(N,T){return T=T!==void 0?T:d.createFolders,N=h(N),this.files[N]||s.call(this,N,null,{dir:!0,createFolders:T}),this.files[N]};function _(N){return Object.prototype.toString.call(N)==="[object RegExp]"}var b={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(N){var T,C,P;for(T in this.files)P=this.files[T],(C=T.slice(this.root.length,T.length))&&T.slice(0,this.root.length)===this.root&&N(C,P)},filter:function(N){var T=[];return this.forEach(function(C,P){N(C,P)&&T.push(P)}),T},file:function(N,T,C){if(arguments.length!==1)return N=this.root+N,s.call(this,N,T,C),this;if(_(N)){var P=N;return this.filter(function(I,$){return!$.dir&&P.test(I)})}var j=this.files[this.root+N];return j&&!j.dir?j:null},folder:function(N){if(!N)return this;if(_(N))return this.filter(function(j,I){return I.dir&&N.test(j)});var T=this.root+N,C=y.call(this,T),P=this.clone();return P.root=C.name,P},remove:function(N){N=this.root+N;var T=this.files[N];if(T||(N.slice(-1)!=="/"&&(N+="/"),T=this.files[N]),T&&!T.dir)delete this.files[N];else for(var C=this.filter(function(j,I){return I.name.slice(0,N.length)===N}),P=0;P<C.length;P++)delete this.files[C[P].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(N){var T,C={};try{if((C=a.extend(N||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=C.type.toLowerCase(),C.compression=C.compression.toUpperCase(),C.type==="binarystring"&&(C.type="string"),!C.type)throw new Error("No output type specified.");a.checkSupport(C.type),C.platform!=="darwin"&&C.platform!=="freebsd"&&C.platform!=="linux"&&C.platform!=="sunos"||(C.platform="UNIX"),C.platform==="win32"&&(C.platform="DOS");var P=C.comment||this.comment||"";T=m.generateWorker(this,C,P)}catch(j){(T=new c("error")).error(j)}return new u(T,C.type||"string",C.mimeType)},generateAsync:function(N,T){return this.generateInternalStream(N).accumulate(T)},generateNodeStream:function(N,T){return(N=N||{}).type||(N.type="nodebuffer"),this.generateInternalStream(N).toNodejsStream(T)}};i.exports=b},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,i,r){i.exports=n("stream")},{stream:void 0}],17:[function(n,i,r){var s=n("./DataReader");function o(a){s.call(this,a);for(var c=0;c<this.data.length;c++)a[c]=255&a[c]}n("../utils").inherits(o,s),o.prototype.byteAt=function(a){return this.data[this.zero+a]},o.prototype.lastIndexOfSignature=function(a){for(var c=a.charCodeAt(0),u=a.charCodeAt(1),d=a.charCodeAt(2),f=a.charCodeAt(3),p=this.length-4;0<=p;--p)if(this.data[p]===c&&this.data[p+1]===u&&this.data[p+2]===d&&this.data[p+3]===f)return p-this.zero;return-1},o.prototype.readAndCheckSignature=function(a){var c=a.charCodeAt(0),u=a.charCodeAt(1),d=a.charCodeAt(2),f=a.charCodeAt(3),p=this.readData(4);return c===p[0]&&u===p[1]&&d===p[2]&&f===p[3]},o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return[];var c=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,c},i.exports=o},{"../utils":32,"./DataReader":18}],18:[function(n,i,r){var s=n("../utils");function o(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(){},readInt:function(a){var c,u=0;for(this.checkOffset(a),c=this.index+a-1;c>=this.index;c--)u=(u<<8)+this.byteAt(c);return this.index+=a,u},readString:function(a){return s.transformTo("string",this.readData(a))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC(1980+(a>>25&127),(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(31&a)<<1))}},i.exports=o},{"../utils":32}],19:[function(n,i,r){var s=n("./Uint8ArrayReader");function o(a){s.call(this,a)}n("../utils").inherits(o,s),o.prototype.readData=function(a){this.checkOffset(a);var c=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,c},i.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,i,r){var s=n("./DataReader");function o(a){s.call(this,a)}n("../utils").inherits(o,s),o.prototype.byteAt=function(a){return this.data.charCodeAt(this.zero+a)},o.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)-this.zero},o.prototype.readAndCheckSignature=function(a){return a===this.readData(4)},o.prototype.readData=function(a){this.checkOffset(a);var c=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,c},i.exports=o},{"../utils":32,"./DataReader":18}],21:[function(n,i,r){var s=n("./ArrayReader");function o(a){s.call(this,a)}n("../utils").inherits(o,s),o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return new Uint8Array(0);var c=this.data.subarray(this.zero+this.index,this.zero+this.index+a);return this.index+=a,c},i.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(n,i,r){var s=n("../utils"),o=n("../support"),a=n("./ArrayReader"),c=n("./StringReader"),u=n("./NodeBufferReader"),d=n("./Uint8ArrayReader");i.exports=function(f){var p=s.getTypeOf(f);return s.checkSupport(p),p!=="string"||o.uint8array?p==="nodebuffer"?new u(f):o.uint8array?new d(s.transformTo("uint8array",f)):new a(s.transformTo("array",f)):new c(f)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,i,r){r.LOCAL_FILE_HEADER="PK",r.CENTRAL_FILE_HEADER="PK",r.CENTRAL_DIRECTORY_END="PK",r.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",r.ZIP64_CENTRAL_DIRECTORY_END="PK",r.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,i,r){var s=n("./GenericWorker"),o=n("../utils");function a(c){s.call(this,"ConvertWorker to "+c),this.destType=c}o.inherits(a,s),a.prototype.processChunk=function(c){this.push({data:o.transformTo(this.destType,c.data),meta:c.meta})},i.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(n,i,r){var s=n("./GenericWorker"),o=n("../crc32");function a(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(a,s),a.prototype.processChunk=function(c){this.streamInfo.crc32=o(c.data,this.streamInfo.crc32||0),this.push(c)},i.exports=a},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,i,r){var s=n("../utils"),o=n("./GenericWorker");function a(c){o.call(this,"DataLengthProbe for "+c),this.propName=c,this.withStreamInfo(c,0)}s.inherits(a,o),a.prototype.processChunk=function(c){if(c){var u=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=u+c.data.length}o.prototype.processChunk.call(this,c)},i.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(n,i,r){var s=n("../utils"),o=n("./GenericWorker");function a(c){o.call(this,"DataWorker");var u=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,c.then(function(d){u.dataIsReady=!0,u.data=d,u.max=d&&d.length||0,u.type=s.getTypeOf(d),u.isPaused||u._tickAndRepeat()},function(d){u.error(d)})}s.inherits(a,o),a.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var c=null,u=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":c=this.data.substring(this.index,u);break;case"uint8array":c=this.data.subarray(this.index,u);break;case"array":case"nodebuffer":c=this.data.slice(this.index,u)}return this.index=u,this.push({data:c,meta:{percent:this.max?this.index/this.max*100:0}})},i.exports=a},{"../utils":32,"./GenericWorker":28}],28:[function(n,i,r){function s(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,a){return this._listeners[o].push(a),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,a){if(this._listeners[o])for(var c=0;c<this._listeners[o].length;c++)this._listeners[o][c].call(this,a)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var a=this;return o.on("data",function(c){a.processChunk(c)}),o.on("end",function(){a.end()}),o.on("error",function(c){a.error(c)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,a){return this.extraStreamInfo[o]=a,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},i.exports=s},{}],29:[function(n,i,r){var s=n("../utils"),o=n("./ConvertWorker"),a=n("./GenericWorker"),c=n("../base64"),u=n("../support"),d=n("../external"),f=null;if(u.nodestream)try{f=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function p(v,g){return new d.Promise(function(x,h){var y=[],_=v._internalType,b=v._outputType,N=v._mimeType;v.on("data",function(T,C){y.push(T),g&&g(C)}).on("error",function(T){y=[],h(T)}).on("end",function(){try{var T=function(C,P,j){switch(C){case"blob":return s.newBlob(s.transformTo("arraybuffer",P),j);case"base64":return c.encode(P);default:return s.transformTo(C,P)}}(b,function(C,P){var j,I=0,$=null,S=0;for(j=0;j<P.length;j++)S+=P[j].length;switch(C){case"string":return P.join("");case"array":return Array.prototype.concat.apply([],P);case"uint8array":for($=new Uint8Array(S),j=0;j<P.length;j++)$.set(P[j],I),I+=P[j].length;return $;case"nodebuffer":return Buffer.concat(P);default:throw new Error("concat : unsupported type '"+C+"'")}}(_,y),N);x(T)}catch(C){h(C)}y=[]}).resume()})}function m(v,g,x){var h=g;switch(g){case"blob":case"arraybuffer":h="uint8array";break;case"base64":h="string"}try{this._internalType=h,this._outputType=g,this._mimeType=x,s.checkSupport(h),this._worker=v.pipe(new o(h)),v.lock()}catch(y){this._worker=new a("error"),this._worker.error(y)}}m.prototype={accumulate:function(v){return p(this,v)},on:function(v,g){var x=this;return v==="data"?this._worker.on(v,function(h){g.call(x,h.data,h.meta)}):this._worker.on(v,function(){s.delay(g,arguments,x)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(v){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new f(this,{objectMode:this._outputType!=="nodebuffer"},v)}},i.exports=m},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,i,r){if(r.base64=!0,r.array=!0,r.string=!0,r.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",r.nodebuffer=typeof Buffer<"u",r.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")r.blob=!1;else{var s=new ArrayBuffer(0);try{r.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(s),r.blob=o.getBlob("application/zip").size===0}catch{r.blob=!1}}}try{r.nodestream=!!n("readable-stream").Readable}catch{r.nodestream=!1}},{"readable-stream":16}],31:[function(n,i,r){for(var s=n("./utils"),o=n("./support"),a=n("./nodejsUtils"),c=n("./stream/GenericWorker"),u=new Array(256),d=0;d<256;d++)u[d]=252<=d?6:248<=d?5:240<=d?4:224<=d?3:192<=d?2:1;u[254]=u[254]=1;function f(){c.call(this,"utf-8 decode"),this.leftOver=null}function p(){c.call(this,"utf-8 encode")}r.utf8encode=function(m){return o.nodebuffer?a.newBufferFrom(m,"utf-8"):function(v){var g,x,h,y,_,b=v.length,N=0;for(y=0;y<b;y++)(64512&(x=v.charCodeAt(y)))==55296&&y+1<b&&(64512&(h=v.charCodeAt(y+1)))==56320&&(x=65536+(x-55296<<10)+(h-56320),y++),N+=x<128?1:x<2048?2:x<65536?3:4;for(g=o.uint8array?new Uint8Array(N):new Array(N),y=_=0;_<N;y++)(64512&(x=v.charCodeAt(y)))==55296&&y+1<b&&(64512&(h=v.charCodeAt(y+1)))==56320&&(x=65536+(x-55296<<10)+(h-56320),y++),x<128?g[_++]=x:(x<2048?g[_++]=192|x>>>6:(x<65536?g[_++]=224|x>>>12:(g[_++]=240|x>>>18,g[_++]=128|x>>>12&63),g[_++]=128|x>>>6&63),g[_++]=128|63&x);return g}(m)},r.utf8decode=function(m){return o.nodebuffer?s.transformTo("nodebuffer",m).toString("utf-8"):function(v){var g,x,h,y,_=v.length,b=new Array(2*_);for(g=x=0;g<_;)if((h=v[g++])<128)b[x++]=h;else if(4<(y=u[h]))b[x++]=65533,g+=y-1;else{for(h&=y===2?31:y===3?15:7;1<y&&g<_;)h=h<<6|63&v[g++],y--;1<y?b[x++]=65533:h<65536?b[x++]=h:(h-=65536,b[x++]=55296|h>>10&1023,b[x++]=56320|1023&h)}return b.length!==x&&(b.subarray?b=b.subarray(0,x):b.length=x),s.applyFromCharCode(b)}(m=s.transformTo(o.uint8array?"uint8array":"array",m))},s.inherits(f,c),f.prototype.processChunk=function(m){var v=s.transformTo(o.uint8array?"uint8array":"array",m.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var g=v;(v=new Uint8Array(g.length+this.leftOver.length)).set(this.leftOver,0),v.set(g,this.leftOver.length)}else v=this.leftOver.concat(v);this.leftOver=null}var x=function(y,_){var b;for((_=_||y.length)>y.length&&(_=y.length),b=_-1;0<=b&&(192&y[b])==128;)b--;return b<0||b===0?_:b+u[y[b]]>_?b:_}(v),h=v;x!==v.length&&(o.uint8array?(h=v.subarray(0,x),this.leftOver=v.subarray(x,v.length)):(h=v.slice(0,x),this.leftOver=v.slice(x,v.length))),this.push({data:r.utf8decode(h),meta:m.meta})},f.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:r.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},r.Utf8DecodeWorker=f,s.inherits(p,c),p.prototype.processChunk=function(m){this.push({data:r.utf8encode(m.data),meta:m.meta})},r.Utf8EncodeWorker=p},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,i,r){var s=n("./support"),o=n("./base64"),a=n("./nodejsUtils"),c=n("./external");function u(g){return g}function d(g,x){for(var h=0;h<g.length;++h)x[h]=255&g.charCodeAt(h);return x}n("setimmediate"),r.newBlob=function(g,x){r.checkSupport("blob");try{return new Blob([g],{type:x})}catch{try{var h=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return h.append(g),h.getBlob(x)}catch{throw new Error("Bug : can't construct the Blob.")}}};var f={stringifyByChunk:function(g,x,h){var y=[],_=0,b=g.length;if(b<=h)return String.fromCharCode.apply(null,g);for(;_<b;)x==="array"||x==="nodebuffer"?y.push(String.fromCharCode.apply(null,g.slice(_,Math.min(_+h,b)))):y.push(String.fromCharCode.apply(null,g.subarray(_,Math.min(_+h,b)))),_+=h;return y.join("")},stringifyByChar:function(g){for(var x="",h=0;h<g.length;h++)x+=String.fromCharCode(g[h]);return x},applyCanBeUsed:{uint8array:function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,a.allocBuffer(1)).length===1}catch{return!1}}()}};function p(g){var x=65536,h=r.getTypeOf(g),y=!0;if(h==="uint8array"?y=f.applyCanBeUsed.uint8array:h==="nodebuffer"&&(y=f.applyCanBeUsed.nodebuffer),y)for(;1<x;)try{return f.stringifyByChunk(g,h,x)}catch{x=Math.floor(x/2)}return f.stringifyByChar(g)}function m(g,x){for(var h=0;h<g.length;h++)x[h]=g[h];return x}r.applyFromCharCode=p;var v={};v.string={string:u,array:function(g){return d(g,new Array(g.length))},arraybuffer:function(g){return v.string.uint8array(g).buffer},uint8array:function(g){return d(g,new Uint8Array(g.length))},nodebuffer:function(g){return d(g,a.allocBuffer(g.length))}},v.array={string:p,array:u,arraybuffer:function(g){return new Uint8Array(g).buffer},uint8array:function(g){return new Uint8Array(g)},nodebuffer:function(g){return a.newBufferFrom(g)}},v.arraybuffer={string:function(g){return p(new Uint8Array(g))},array:function(g){return m(new Uint8Array(g),new Array(g.byteLength))},arraybuffer:u,uint8array:function(g){return new Uint8Array(g)},nodebuffer:function(g){return a.newBufferFrom(new Uint8Array(g))}},v.uint8array={string:p,array:function(g){return m(g,new Array(g.length))},arraybuffer:function(g){return g.buffer},uint8array:u,nodebuffer:function(g){return a.newBufferFrom(g)}},v.nodebuffer={string:p,array:function(g){return m(g,new Array(g.length))},arraybuffer:function(g){return v.nodebuffer.uint8array(g).buffer},uint8array:function(g){return m(g,new Uint8Array(g.length))},nodebuffer:u},r.transformTo=function(g,x){if(x=x||"",!g)return x;r.checkSupport(g);var h=r.getTypeOf(x);return v[h][g](x)},r.resolve=function(g){for(var x=g.split("/"),h=[],y=0;y<x.length;y++){var _=x[y];_==="."||_===""&&y!==0&&y!==x.length-1||(_===".."?h.pop():h.push(_))}return h.join("/")},r.getTypeOf=function(g){return typeof g=="string"?"string":Object.prototype.toString.call(g)==="[object Array]"?"array":s.nodebuffer&&a.isBuffer(g)?"nodebuffer":s.uint8array&&g instanceof Uint8Array?"uint8array":s.arraybuffer&&g instanceof ArrayBuffer?"arraybuffer":void 0},r.checkSupport=function(g){if(!s[g.toLowerCase()])throw new Error(g+" is not supported by this platform")},r.MAX_VALUE_16BITS=65535,r.MAX_VALUE_32BITS=-1,r.pretty=function(g){var x,h,y="";for(h=0;h<(g||"").length;h++)y+="\\x"+((x=g.charCodeAt(h))<16?"0":"")+x.toString(16).toUpperCase();return y},r.delay=function(g,x,h){setImmediate(function(){g.apply(h||null,x||[])})},r.inherits=function(g,x){function h(){}h.prototype=x.prototype,g.prototype=new h},r.extend=function(){var g,x,h={};for(g=0;g<arguments.length;g++)for(x in arguments[g])Object.prototype.hasOwnProperty.call(arguments[g],x)&&h[x]===void 0&&(h[x]=arguments[g][x]);return h},r.prepareContent=function(g,x,h,y,_){return c.Promise.resolve(x).then(function(b){return s.blob&&(b instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(b))!==-1)&&typeof FileReader<"u"?new c.Promise(function(N,T){var C=new FileReader;C.onload=function(P){N(P.target.result)},C.onerror=function(P){T(P.target.error)},C.readAsArrayBuffer(b)}):b}).then(function(b){var N=r.getTypeOf(b);return N?(N==="arraybuffer"?b=r.transformTo("uint8array",b):N==="string"&&(_?b=o.decode(b):h&&y!==!0&&(b=function(T){return d(T,s.uint8array?new Uint8Array(T.length):new Array(T.length))}(b))),b):c.Promise.reject(new Error("Can't read the data of '"+g+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,i,r){var s=n("./reader/readerFor"),o=n("./utils"),a=n("./signature"),c=n("./zipEntry"),u=n("./support");function d(f){this.files=[],this.loadOptions=f}d.prototype={checkSignature:function(f){if(!this.reader.readAndCheckSignature(f)){this.reader.index-=4;var p=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(p)+", expected "+o.pretty(f)+")")}},isSignature:function(f,p){var m=this.reader.index;this.reader.setIndex(f);var v=this.reader.readString(4)===p;return this.reader.setIndex(m),v},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var f=this.reader.readData(this.zipCommentLength),p=u.uint8array?"uint8array":"array",m=o.transformTo(p,f);this.zipComment=this.loadOptions.decodeFileName(m)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var f,p,m,v=this.zip64EndOfCentralSize-44;0<v;)f=this.reader.readInt(2),p=this.reader.readInt(4),m=this.reader.readData(p),this.zip64ExtensibleData[f]={id:f,length:p,value:m}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var f,p;for(f=0;f<this.files.length;f++)p=this.files[f],this.reader.setIndex(p.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),p.readLocalPart(this.reader),p.handleUTF8(),p.processAttributes()},readCentralDir:function(){var f;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(f=new c({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(f);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var f=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(f<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(f);var p=f;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(f=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(f),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var m=this.centralDirOffset+this.centralDirSize;this.zip64&&(m+=20,m+=12+this.zip64EndOfCentralSize);var v=p-m;if(0<v)this.isSignature(p,a.CENTRAL_FILE_HEADER)||(this.reader.zero=v);else if(v<0)throw new Error("Corrupted zip: missing "+Math.abs(v)+" bytes.")},prepareReader:function(f){this.reader=s(f)},load:function(f){this.prepareReader(f),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},i.exports=d},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,i,r){var s=n("./reader/readerFor"),o=n("./utils"),a=n("./compressedObject"),c=n("./crc32"),u=n("./utf8"),d=n("./compressions"),f=n("./support");function p(m,v){this.options=m,this.loadOptions=v}p.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(m){var v,g;if(m.skip(22),this.fileNameLength=m.readInt(2),g=m.readInt(2),this.fileName=m.readData(this.fileNameLength),m.skip(g),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((v=function(x){for(var h in d)if(Object.prototype.hasOwnProperty.call(d,h)&&d[h].magic===x)return d[h];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,v,m.readData(this.compressedSize))},readCentralPart:function(m){this.versionMadeBy=m.readInt(2),m.skip(2),this.bitFlag=m.readInt(2),this.compressionMethod=m.readString(2),this.date=m.readDate(),this.crc32=m.readInt(4),this.compressedSize=m.readInt(4),this.uncompressedSize=m.readInt(4);var v=m.readInt(2);if(this.extraFieldsLength=m.readInt(2),this.fileCommentLength=m.readInt(2),this.diskNumberStart=m.readInt(2),this.internalFileAttributes=m.readInt(2),this.externalFileAttributes=m.readInt(4),this.localHeaderOffset=m.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");m.skip(v),this.readExtraFields(m),this.parseZIP64ExtraField(m),this.fileComment=m.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var m=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),m==0&&(this.dosPermissions=63&this.externalFileAttributes),m==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var m=s(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=m.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=m.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=m.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=m.readInt(4))}},readExtraFields:function(m){var v,g,x,h=m.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});m.index+4<h;)v=m.readInt(2),g=m.readInt(2),x=m.readData(g),this.extraFields[v]={id:v,length:g,value:x};m.setIndex(h)},handleUTF8:function(){var m=f.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=u.utf8decode(this.fileName),this.fileCommentStr=u.utf8decode(this.fileComment);else{var v=this.findExtraFieldUnicodePath();if(v!==null)this.fileNameStr=v;else{var g=o.transformTo(m,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(g)}var x=this.findExtraFieldUnicodeComment();if(x!==null)this.fileCommentStr=x;else{var h=o.transformTo(m,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(h)}}},findExtraFieldUnicodePath:function(){var m=this.extraFields[28789];if(m){var v=s(m.value);return v.readInt(1)!==1||c(this.fileName)!==v.readInt(4)?null:u.utf8decode(v.readData(m.length-5))}return null},findExtraFieldUnicodeComment:function(){var m=this.extraFields[25461];if(m){var v=s(m.value);return v.readInt(1)!==1||c(this.fileComment)!==v.readInt(4)?null:u.utf8decode(v.readData(m.length-5))}return null}},i.exports=p},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,i,r){function s(v,g,x){this.name=v,this.dir=x.dir,this.date=x.date,this.comment=x.comment,this.unixPermissions=x.unixPermissions,this.dosPermissions=x.dosPermissions,this._data=g,this._dataBinary=x.binary,this.options={compression:x.compression,compressionOptions:x.compressionOptions}}var o=n("./stream/StreamHelper"),a=n("./stream/DataWorker"),c=n("./utf8"),u=n("./compressedObject"),d=n("./stream/GenericWorker");s.prototype={internalStream:function(v){var g=null,x="string";try{if(!v)throw new Error("No output type specified.");var h=(x=v.toLowerCase())==="string"||x==="text";x!=="binarystring"&&x!=="text"||(x="string"),g=this._decompressWorker();var y=!this._dataBinary;y&&!h&&(g=g.pipe(new c.Utf8EncodeWorker)),!y&&h&&(g=g.pipe(new c.Utf8DecodeWorker))}catch(_){(g=new d("error")).error(_)}return new o(g,x,"")},async:function(v,g){return this.internalStream(v).accumulate(g)},nodeStream:function(v,g){return this.internalStream(v||"nodebuffer").toNodejsStream(g)},_compressWorker:function(v,g){if(this._data instanceof u&&this._data.compression.magic===v.magic)return this._data.getCompressedWorker();var x=this._decompressWorker();return this._dataBinary||(x=x.pipe(new c.Utf8EncodeWorker)),u.createWorkerFrom(x,v,g)},_decompressWorker:function(){return this._data instanceof u?this._data.getContentWorker():this._data instanceof d?this._data:new a(this._data)}};for(var f=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],p=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},m=0;m<f.length;m++)s.prototype[f[m]]=p;i.exports=s},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,i,r){(function(s){var o,a,c=s.MutationObserver||s.WebKitMutationObserver;if(c){var u=0,d=new c(v),f=s.document.createTextNode("");d.observe(f,{characterData:!0}),o=function(){f.data=u=++u%2}}else if(s.setImmediate||s.MessageChannel===void 0)o="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(){var g=s.document.createElement("script");g.onreadystatechange=function(){v(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},s.document.documentElement.appendChild(g)}:function(){setTimeout(v,0)};else{var p=new s.MessageChannel;p.port1.onmessage=v,o=function(){p.port2.postMessage(0)}}var m=[];function v(){var g,x;a=!0;for(var h=m.length;h;){for(x=m,m=[],g=-1;++g<h;)x[g]();h=m.length}a=!1}i.exports=function(g){m.push(g)!==1||a||o()}}).call(this,typeof xn<"u"?xn:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,i,r){var s=n("immediate");function o(){}var a={},c=["REJECTED"],u=["FULFILLED"],d=["PENDING"];function f(h){if(typeof h!="function")throw new TypeError("resolver must be a function");this.state=d,this.queue=[],this.outcome=void 0,h!==o&&g(this,h)}function p(h,y,_){this.promise=h,typeof y=="function"&&(this.onFulfilled=y,this.callFulfilled=this.otherCallFulfilled),typeof _=="function"&&(this.onRejected=_,this.callRejected=this.otherCallRejected)}function m(h,y,_){s(function(){var b;try{b=y(_)}catch(N){return a.reject(h,N)}b===h?a.reject(h,new TypeError("Cannot resolve promise with itself")):a.resolve(h,b)})}function v(h){var y=h&&h.then;if(h&&(typeof h=="object"||typeof h=="function")&&typeof y=="function")return function(){y.apply(h,arguments)}}function g(h,y){var _=!1;function b(C){_||(_=!0,a.reject(h,C))}function N(C){_||(_=!0,a.resolve(h,C))}var T=x(function(){y(N,b)});T.status==="error"&&b(T.value)}function x(h,y){var _={};try{_.value=h(y),_.status="success"}catch(b){_.status="error",_.value=b}return _}(i.exports=f).prototype.finally=function(h){if(typeof h!="function")return this;var y=this.constructor;return this.then(function(_){return y.resolve(h()).then(function(){return _})},function(_){return y.resolve(h()).then(function(){throw _})})},f.prototype.catch=function(h){return this.then(null,h)},f.prototype.then=function(h,y){if(typeof h!="function"&&this.state===u||typeof y!="function"&&this.state===c)return this;var _=new this.constructor(o);return this.state!==d?m(_,this.state===u?h:y,this.outcome):this.queue.push(new p(_,h,y)),_},p.prototype.callFulfilled=function(h){a.resolve(this.promise,h)},p.prototype.otherCallFulfilled=function(h){m(this.promise,this.onFulfilled,h)},p.prototype.callRejected=function(h){a.reject(this.promise,h)},p.prototype.otherCallRejected=function(h){m(this.promise,this.onRejected,h)},a.resolve=function(h,y){var _=x(v,y);if(_.status==="error")return a.reject(h,_.value);var b=_.value;if(b)g(h,b);else{h.state=u,h.outcome=y;for(var N=-1,T=h.queue.length;++N<T;)h.queue[N].callFulfilled(y)}return h},a.reject=function(h,y){h.state=c,h.outcome=y;for(var _=-1,b=h.queue.length;++_<b;)h.queue[_].callRejected(y);return h},f.resolve=function(h){return h instanceof this?h:a.resolve(new this(o),h)},f.reject=function(h){var y=new this(o);return a.reject(y,h)},f.all=function(h){var y=this;if(Object.prototype.toString.call(h)!=="[object Array]")return this.reject(new TypeError("must be an array"));var _=h.length,b=!1;if(!_)return this.resolve([]);for(var N=new Array(_),T=0,C=-1,P=new this(o);++C<_;)j(h[C],C);return P;function j(I,$){y.resolve(I).then(function(S){N[$]=S,++T!==_||b||(b=!0,a.resolve(P,N))},function(S){b||(b=!0,a.reject(P,S))})}},f.race=function(h){var y=this;if(Object.prototype.toString.call(h)!=="[object Array]")return this.reject(new TypeError("must be an array"));var _=h.length,b=!1;if(!_)return this.resolve([]);for(var N=-1,T=new this(o);++N<_;)C=h[N],y.resolve(C).then(function(P){b||(b=!0,a.resolve(T,P))},function(P){b||(b=!0,a.reject(T,P))});var C;return T}},{immediate:36}],38:[function(n,i,r){var s={};(0,n("./lib/utils/common").assign)(s,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),i.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,i,r){var s=n("./zlib/deflate"),o=n("./utils/common"),a=n("./utils/strings"),c=n("./zlib/messages"),u=n("./zlib/zstream"),d=Object.prototype.toString,f=0,p=-1,m=0,v=8;function g(h){if(!(this instanceof g))return new g(h);this.options=o.assign({level:p,method:v,chunkSize:16384,windowBits:15,memLevel:8,strategy:m,to:""},h||{});var y=this.options;y.raw&&0<y.windowBits?y.windowBits=-y.windowBits:y.gzip&&0<y.windowBits&&y.windowBits<16&&(y.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var _=s.deflateInit2(this.strm,y.level,y.method,y.windowBits,y.memLevel,y.strategy);if(_!==f)throw new Error(c[_]);if(y.header&&s.deflateSetHeader(this.strm,y.header),y.dictionary){var b;if(b=typeof y.dictionary=="string"?a.string2buf(y.dictionary):d.call(y.dictionary)==="[object ArrayBuffer]"?new Uint8Array(y.dictionary):y.dictionary,(_=s.deflateSetDictionary(this.strm,b))!==f)throw new Error(c[_]);this._dict_set=!0}}function x(h,y){var _=new g(y);if(_.push(h,!0),_.err)throw _.msg||c[_.err];return _.result}g.prototype.push=function(h,y){var _,b,N=this.strm,T=this.options.chunkSize;if(this.ended)return!1;b=y===~~y?y:y===!0?4:0,typeof h=="string"?N.input=a.string2buf(h):d.call(h)==="[object ArrayBuffer]"?N.input=new Uint8Array(h):N.input=h,N.next_in=0,N.avail_in=N.input.length;do{if(N.avail_out===0&&(N.output=new o.Buf8(T),N.next_out=0,N.avail_out=T),(_=s.deflate(N,b))!==1&&_!==f)return this.onEnd(_),!(this.ended=!0);N.avail_out!==0&&(N.avail_in!==0||b!==4&&b!==2)||(this.options.to==="string"?this.onData(a.buf2binstring(o.shrinkBuf(N.output,N.next_out))):this.onData(o.shrinkBuf(N.output,N.next_out)))}while((0<N.avail_in||N.avail_out===0)&&_!==1);return b===4?(_=s.deflateEnd(this.strm),this.onEnd(_),this.ended=!0,_===f):b!==2||(this.onEnd(f),!(N.avail_out=0))},g.prototype.onData=function(h){this.chunks.push(h)},g.prototype.onEnd=function(h){h===f&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=h,this.msg=this.strm.msg},r.Deflate=g,r.deflate=x,r.deflateRaw=function(h,y){return(y=y||{}).raw=!0,x(h,y)},r.gzip=function(h,y){return(y=y||{}).gzip=!0,x(h,y)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,i,r){var s=n("./zlib/inflate"),o=n("./utils/common"),a=n("./utils/strings"),c=n("./zlib/constants"),u=n("./zlib/messages"),d=n("./zlib/zstream"),f=n("./zlib/gzheader"),p=Object.prototype.toString;function m(g){if(!(this instanceof m))return new m(g);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},g||{});var x=this.options;x.raw&&0<=x.windowBits&&x.windowBits<16&&(x.windowBits=-x.windowBits,x.windowBits===0&&(x.windowBits=-15)),!(0<=x.windowBits&&x.windowBits<16)||g&&g.windowBits||(x.windowBits+=32),15<x.windowBits&&x.windowBits<48&&!(15&x.windowBits)&&(x.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var h=s.inflateInit2(this.strm,x.windowBits);if(h!==c.Z_OK)throw new Error(u[h]);this.header=new f,s.inflateGetHeader(this.strm,this.header)}function v(g,x){var h=new m(x);if(h.push(g,!0),h.err)throw h.msg||u[h.err];return h.result}m.prototype.push=function(g,x){var h,y,_,b,N,T,C=this.strm,P=this.options.chunkSize,j=this.options.dictionary,I=!1;if(this.ended)return!1;y=x===~~x?x:x===!0?c.Z_FINISH:c.Z_NO_FLUSH,typeof g=="string"?C.input=a.binstring2buf(g):p.call(g)==="[object ArrayBuffer]"?C.input=new Uint8Array(g):C.input=g,C.next_in=0,C.avail_in=C.input.length;do{if(C.avail_out===0&&(C.output=new o.Buf8(P),C.next_out=0,C.avail_out=P),(h=s.inflate(C,c.Z_NO_FLUSH))===c.Z_NEED_DICT&&j&&(T=typeof j=="string"?a.string2buf(j):p.call(j)==="[object ArrayBuffer]"?new Uint8Array(j):j,h=s.inflateSetDictionary(this.strm,T)),h===c.Z_BUF_ERROR&&I===!0&&(h=c.Z_OK,I=!1),h!==c.Z_STREAM_END&&h!==c.Z_OK)return this.onEnd(h),!(this.ended=!0);C.next_out&&(C.avail_out!==0&&h!==c.Z_STREAM_END&&(C.avail_in!==0||y!==c.Z_FINISH&&y!==c.Z_SYNC_FLUSH)||(this.options.to==="string"?(_=a.utf8border(C.output,C.next_out),b=C.next_out-_,N=a.buf2string(C.output,_),C.next_out=b,C.avail_out=P-b,b&&o.arraySet(C.output,C.output,_,b,0),this.onData(N)):this.onData(o.shrinkBuf(C.output,C.next_out)))),C.avail_in===0&&C.avail_out===0&&(I=!0)}while((0<C.avail_in||C.avail_out===0)&&h!==c.Z_STREAM_END);return h===c.Z_STREAM_END&&(y=c.Z_FINISH),y===c.Z_FINISH?(h=s.inflateEnd(this.strm),this.onEnd(h),this.ended=!0,h===c.Z_OK):y!==c.Z_SYNC_FLUSH||(this.onEnd(c.Z_OK),!(C.avail_out=0))},m.prototype.onData=function(g){this.chunks.push(g)},m.prototype.onEnd=function(g){g===c.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=g,this.msg=this.strm.msg},r.Inflate=m,r.inflate=v,r.inflateRaw=function(g,x){return(x=x||{}).raw=!0,v(g,x)},r.ungzip=v},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,i,r){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";r.assign=function(c){for(var u=Array.prototype.slice.call(arguments,1);u.length;){var d=u.shift();if(d){if(typeof d!="object")throw new TypeError(d+"must be non-object");for(var f in d)d.hasOwnProperty(f)&&(c[f]=d[f])}}return c},r.shrinkBuf=function(c,u){return c.length===u?c:c.subarray?c.subarray(0,u):(c.length=u,c)};var o={arraySet:function(c,u,d,f,p){if(u.subarray&&c.subarray)c.set(u.subarray(d,d+f),p);else for(var m=0;m<f;m++)c[p+m]=u[d+m]},flattenChunks:function(c){var u,d,f,p,m,v;for(u=f=0,d=c.length;u<d;u++)f+=c[u].length;for(v=new Uint8Array(f),u=p=0,d=c.length;u<d;u++)m=c[u],v.set(m,p),p+=m.length;return v}},a={arraySet:function(c,u,d,f,p){for(var m=0;m<f;m++)c[p+m]=u[d+m]},flattenChunks:function(c){return[].concat.apply([],c)}};r.setTyped=function(c){c?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,o)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,a))},r.setTyped(s)},{}],42:[function(n,i,r){var s=n("./common"),o=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{a=!1}for(var c=new s.Buf8(256),u=0;u<256;u++)c[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;function d(f,p){if(p<65537&&(f.subarray&&a||!f.subarray&&o))return String.fromCharCode.apply(null,s.shrinkBuf(f,p));for(var m="",v=0;v<p;v++)m+=String.fromCharCode(f[v]);return m}c[254]=c[254]=1,r.string2buf=function(f){var p,m,v,g,x,h=f.length,y=0;for(g=0;g<h;g++)(64512&(m=f.charCodeAt(g)))==55296&&g+1<h&&(64512&(v=f.charCodeAt(g+1)))==56320&&(m=65536+(m-55296<<10)+(v-56320),g++),y+=m<128?1:m<2048?2:m<65536?3:4;for(p=new s.Buf8(y),g=x=0;x<y;g++)(64512&(m=f.charCodeAt(g)))==55296&&g+1<h&&(64512&(v=f.charCodeAt(g+1)))==56320&&(m=65536+(m-55296<<10)+(v-56320),g++),m<128?p[x++]=m:(m<2048?p[x++]=192|m>>>6:(m<65536?p[x++]=224|m>>>12:(p[x++]=240|m>>>18,p[x++]=128|m>>>12&63),p[x++]=128|m>>>6&63),p[x++]=128|63&m);return p},r.buf2binstring=function(f){return d(f,f.length)},r.binstring2buf=function(f){for(var p=new s.Buf8(f.length),m=0,v=p.length;m<v;m++)p[m]=f.charCodeAt(m);return p},r.buf2string=function(f,p){var m,v,g,x,h=p||f.length,y=new Array(2*h);for(m=v=0;m<h;)if((g=f[m++])<128)y[v++]=g;else if(4<(x=c[g]))y[v++]=65533,m+=x-1;else{for(g&=x===2?31:x===3?15:7;1<x&&m<h;)g=g<<6|63&f[m++],x--;1<x?y[v++]=65533:g<65536?y[v++]=g:(g-=65536,y[v++]=55296|g>>10&1023,y[v++]=56320|1023&g)}return d(y,v)},r.utf8border=function(f,p){var m;for((p=p||f.length)>f.length&&(p=f.length),m=p-1;0<=m&&(192&f[m])==128;)m--;return m<0||m===0?p:m+c[f[m]]>p?m:p}},{"./common":41}],43:[function(n,i,r){i.exports=function(s,o,a,c){for(var u=65535&s|0,d=s>>>16&65535|0,f=0;a!==0;){for(a-=f=2e3<a?2e3:a;d=d+(u=u+o[c++]|0)|0,--f;);u%=65521,d%=65521}return u|d<<16|0}},{}],44:[function(n,i,r){i.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,i,r){var s=function(){for(var o,a=[],c=0;c<256;c++){o=c;for(var u=0;u<8;u++)o=1&o?3988292384^o>>>1:o>>>1;a[c]=o}return a}();i.exports=function(o,a,c,u){var d=s,f=u+c;o^=-1;for(var p=u;p<f;p++)o=o>>>8^d[255&(o^a[p])];return-1^o}},{}],46:[function(n,i,r){var s,o=n("../utils/common"),a=n("./trees"),c=n("./adler32"),u=n("./crc32"),d=n("./messages"),f=0,p=4,m=0,v=-2,g=-1,x=4,h=2,y=8,_=9,b=286,N=30,T=19,C=2*b+1,P=15,j=3,I=258,$=I+j+1,S=42,F=113,w=1,B=2,H=3,W=4;function R(E,J){return E.msg=d[J],J}function D(E){return(E<<1)-(4<E?9:0)}function U(E){for(var J=E.length;0<=--J;)E[J]=0}function O(E){var J=E.state,te=J.pending;te>E.avail_out&&(te=E.avail_out),te!==0&&(o.arraySet(E.output,J.pending_buf,J.pending_out,te,E.next_out),E.next_out+=te,J.pending_out+=te,E.total_out+=te,E.avail_out-=te,J.pending-=te,J.pending===0&&(J.pending_out=0))}function A(E,J){a._tr_flush_block(E,0<=E.block_start?E.block_start:-1,E.strstart-E.block_start,J),E.block_start=E.strstart,O(E.strm)}function Y(E,J){E.pending_buf[E.pending++]=J}function G(E,J){E.pending_buf[E.pending++]=J>>>8&255,E.pending_buf[E.pending++]=255&J}function Z(E,J){var te,L,M=E.max_chain_length,q=E.strstart,K=E.prev_length,ne=E.nice_match,z=E.strstart>E.w_size-$?E.strstart-(E.w_size-$):0,V=E.window,Q=E.w_mask,X=E.prev,ee=E.strstart+I,ce=V[q+K-1],fe=V[q+K];E.prev_length>=E.good_match&&(M>>=2),ne>E.lookahead&&(ne=E.lookahead);do if(V[(te=J)+K]===fe&&V[te+K-1]===ce&&V[te]===V[q]&&V[++te]===V[q+1]){q+=2,te++;do;while(V[++q]===V[++te]&&V[++q]===V[++te]&&V[++q]===V[++te]&&V[++q]===V[++te]&&V[++q]===V[++te]&&V[++q]===V[++te]&&V[++q]===V[++te]&&V[++q]===V[++te]&&q<ee);if(L=I-(ee-q),q=ee-I,K<L){if(E.match_start=J,ne<=(K=L))break;ce=V[q+K-1],fe=V[q+K]}}while((J=X[J&Q])>z&&--M!=0);return K<=E.lookahead?K:E.lookahead}function se(E){var J,te,L,M,q,K,ne,z,V,Q,X=E.w_size;do{if(M=E.window_size-E.lookahead-E.strstart,E.strstart>=X+(X-$)){for(o.arraySet(E.window,E.window,X,X,0),E.match_start-=X,E.strstart-=X,E.block_start-=X,J=te=E.hash_size;L=E.head[--J],E.head[J]=X<=L?L-X:0,--te;);for(J=te=X;L=E.prev[--J],E.prev[J]=X<=L?L-X:0,--te;);M+=X}if(E.strm.avail_in===0)break;if(K=E.strm,ne=E.window,z=E.strstart+E.lookahead,V=M,Q=void 0,Q=K.avail_in,V<Q&&(Q=V),te=Q===0?0:(K.avail_in-=Q,o.arraySet(ne,K.input,K.next_in,Q,z),K.state.wrap===1?K.adler=c(K.adler,ne,Q,z):K.state.wrap===2&&(K.adler=u(K.adler,ne,Q,z)),K.next_in+=Q,K.total_in+=Q,Q),E.lookahead+=te,E.lookahead+E.insert>=j)for(q=E.strstart-E.insert,E.ins_h=E.window[q],E.ins_h=(E.ins_h<<E.hash_shift^E.window[q+1])&E.hash_mask;E.insert&&(E.ins_h=(E.ins_h<<E.hash_shift^E.window[q+j-1])&E.hash_mask,E.prev[q&E.w_mask]=E.head[E.ins_h],E.head[E.ins_h]=q,q++,E.insert--,!(E.lookahead+E.insert<j)););}while(E.lookahead<$&&E.strm.avail_in!==0)}function le(E,J){for(var te,L;;){if(E.lookahead<$){if(se(E),E.lookahead<$&&J===f)return w;if(E.lookahead===0)break}if(te=0,E.lookahead>=j&&(E.ins_h=(E.ins_h<<E.hash_shift^E.window[E.strstart+j-1])&E.hash_mask,te=E.prev[E.strstart&E.w_mask]=E.head[E.ins_h],E.head[E.ins_h]=E.strstart),te!==0&&E.strstart-te<=E.w_size-$&&(E.match_length=Z(E,te)),E.match_length>=j)if(L=a._tr_tally(E,E.strstart-E.match_start,E.match_length-j),E.lookahead-=E.match_length,E.match_length<=E.max_lazy_match&&E.lookahead>=j){for(E.match_length--;E.strstart++,E.ins_h=(E.ins_h<<E.hash_shift^E.window[E.strstart+j-1])&E.hash_mask,te=E.prev[E.strstart&E.w_mask]=E.head[E.ins_h],E.head[E.ins_h]=E.strstart,--E.match_length!=0;);E.strstart++}else E.strstart+=E.match_length,E.match_length=0,E.ins_h=E.window[E.strstart],E.ins_h=(E.ins_h<<E.hash_shift^E.window[E.strstart+1])&E.hash_mask;else L=a._tr_tally(E,0,E.window[E.strstart]),E.lookahead--,E.strstart++;if(L&&(A(E,!1),E.strm.avail_out===0))return w}return E.insert=E.strstart<j-1?E.strstart:j-1,J===p?(A(E,!0),E.strm.avail_out===0?H:W):E.last_lit&&(A(E,!1),E.strm.avail_out===0)?w:B}function ae(E,J){for(var te,L,M;;){if(E.lookahead<$){if(se(E),E.lookahead<$&&J===f)return w;if(E.lookahead===0)break}if(te=0,E.lookahead>=j&&(E.ins_h=(E.ins_h<<E.hash_shift^E.window[E.strstart+j-1])&E.hash_mask,te=E.prev[E.strstart&E.w_mask]=E.head[E.ins_h],E.head[E.ins_h]=E.strstart),E.prev_length=E.match_length,E.prev_match=E.match_start,E.match_length=j-1,te!==0&&E.prev_length<E.max_lazy_match&&E.strstart-te<=E.w_size-$&&(E.match_length=Z(E,te),E.match_length<=5&&(E.strategy===1||E.match_length===j&&4096<E.strstart-E.match_start)&&(E.match_length=j-1)),E.prev_length>=j&&E.match_length<=E.prev_length){for(M=E.strstart+E.lookahead-j,L=a._tr_tally(E,E.strstart-1-E.prev_match,E.prev_length-j),E.lookahead-=E.prev_length-1,E.prev_length-=2;++E.strstart<=M&&(E.ins_h=(E.ins_h<<E.hash_shift^E.window[E.strstart+j-1])&E.hash_mask,te=E.prev[E.strstart&E.w_mask]=E.head[E.ins_h],E.head[E.ins_h]=E.strstart),--E.prev_length!=0;);if(E.match_available=0,E.match_length=j-1,E.strstart++,L&&(A(E,!1),E.strm.avail_out===0))return w}else if(E.match_available){if((L=a._tr_tally(E,0,E.window[E.strstart-1]))&&A(E,!1),E.strstart++,E.lookahead--,E.strm.avail_out===0)return w}else E.match_available=1,E.strstart++,E.lookahead--}return E.match_available&&(L=a._tr_tally(E,0,E.window[E.strstart-1]),E.match_available=0),E.insert=E.strstart<j-1?E.strstart:j-1,J===p?(A(E,!0),E.strm.avail_out===0?H:W):E.last_lit&&(A(E,!1),E.strm.avail_out===0)?w:B}function oe(E,J,te,L,M){this.good_length=E,this.max_lazy=J,this.nice_length=te,this.max_chain=L,this.func=M}function ue(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=y,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*C),this.dyn_dtree=new o.Buf16(2*(2*N+1)),this.bl_tree=new o.Buf16(2*(2*T+1)),U(this.dyn_ltree),U(this.dyn_dtree),U(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(P+1),this.heap=new o.Buf16(2*b+1),U(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*b+1),U(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function we(E){var J;return E&&E.state?(E.total_in=E.total_out=0,E.data_type=h,(J=E.state).pending=0,J.pending_out=0,J.wrap<0&&(J.wrap=-J.wrap),J.status=J.wrap?S:F,E.adler=J.wrap===2?0:1,J.last_flush=f,a._tr_init(J),m):R(E,v)}function ve(E){var J=we(E);return J===m&&function(te){te.window_size=2*te.w_size,U(te.head),te.max_lazy_match=s[te.level].max_lazy,te.good_match=s[te.level].good_length,te.nice_match=s[te.level].nice_length,te.max_chain_length=s[te.level].max_chain,te.strstart=0,te.block_start=0,te.lookahead=0,te.insert=0,te.match_length=te.prev_length=j-1,te.match_available=0,te.ins_h=0}(E.state),J}function ke(E,J,te,L,M,q){if(!E)return v;var K=1;if(J===g&&(J=6),L<0?(K=0,L=-L):15<L&&(K=2,L-=16),M<1||_<M||te!==y||L<8||15<L||J<0||9<J||q<0||x<q)return R(E,v);L===8&&(L=9);var ne=new ue;return(E.state=ne).strm=E,ne.wrap=K,ne.gzhead=null,ne.w_bits=L,ne.w_size=1<<ne.w_bits,ne.w_mask=ne.w_size-1,ne.hash_bits=M+7,ne.hash_size=1<<ne.hash_bits,ne.hash_mask=ne.hash_size-1,ne.hash_shift=~~((ne.hash_bits+j-1)/j),ne.window=new o.Buf8(2*ne.w_size),ne.head=new o.Buf16(ne.hash_size),ne.prev=new o.Buf16(ne.w_size),ne.lit_bufsize=1<<M+6,ne.pending_buf_size=4*ne.lit_bufsize,ne.pending_buf=new o.Buf8(ne.pending_buf_size),ne.d_buf=1*ne.lit_bufsize,ne.l_buf=3*ne.lit_bufsize,ne.level=J,ne.strategy=q,ne.method=te,ve(E)}s=[new oe(0,0,0,0,function(E,J){var te=65535;for(te>E.pending_buf_size-5&&(te=E.pending_buf_size-5);;){if(E.lookahead<=1){if(se(E),E.lookahead===0&&J===f)return w;if(E.lookahead===0)break}E.strstart+=E.lookahead,E.lookahead=0;var L=E.block_start+te;if((E.strstart===0||E.strstart>=L)&&(E.lookahead=E.strstart-L,E.strstart=L,A(E,!1),E.strm.avail_out===0)||E.strstart-E.block_start>=E.w_size-$&&(A(E,!1),E.strm.avail_out===0))return w}return E.insert=0,J===p?(A(E,!0),E.strm.avail_out===0?H:W):(E.strstart>E.block_start&&(A(E,!1),E.strm.avail_out),w)}),new oe(4,4,8,4,le),new oe(4,5,16,8,le),new oe(4,6,32,32,le),new oe(4,4,16,16,ae),new oe(8,16,32,32,ae),new oe(8,16,128,128,ae),new oe(8,32,128,256,ae),new oe(32,128,258,1024,ae),new oe(32,258,258,4096,ae)],r.deflateInit=function(E,J){return ke(E,J,y,15,8,0)},r.deflateInit2=ke,r.deflateReset=ve,r.deflateResetKeep=we,r.deflateSetHeader=function(E,J){return E&&E.state?E.state.wrap!==2?v:(E.state.gzhead=J,m):v},r.deflate=function(E,J){var te,L,M,q;if(!E||!E.state||5<J||J<0)return E?R(E,v):v;if(L=E.state,!E.output||!E.input&&E.avail_in!==0||L.status===666&&J!==p)return R(E,E.avail_out===0?-5:v);if(L.strm=E,te=L.last_flush,L.last_flush=J,L.status===S)if(L.wrap===2)E.adler=0,Y(L,31),Y(L,139),Y(L,8),L.gzhead?(Y(L,(L.gzhead.text?1:0)+(L.gzhead.hcrc?2:0)+(L.gzhead.extra?4:0)+(L.gzhead.name?8:0)+(L.gzhead.comment?16:0)),Y(L,255&L.gzhead.time),Y(L,L.gzhead.time>>8&255),Y(L,L.gzhead.time>>16&255),Y(L,L.gzhead.time>>24&255),Y(L,L.level===9?2:2<=L.strategy||L.level<2?4:0),Y(L,255&L.gzhead.os),L.gzhead.extra&&L.gzhead.extra.length&&(Y(L,255&L.gzhead.extra.length),Y(L,L.gzhead.extra.length>>8&255)),L.gzhead.hcrc&&(E.adler=u(E.adler,L.pending_buf,L.pending,0)),L.gzindex=0,L.status=69):(Y(L,0),Y(L,0),Y(L,0),Y(L,0),Y(L,0),Y(L,L.level===9?2:2<=L.strategy||L.level<2?4:0),Y(L,3),L.status=F);else{var K=y+(L.w_bits-8<<4)<<8;K|=(2<=L.strategy||L.level<2?0:L.level<6?1:L.level===6?2:3)<<6,L.strstart!==0&&(K|=32),K+=31-K%31,L.status=F,G(L,K),L.strstart!==0&&(G(L,E.adler>>>16),G(L,65535&E.adler)),E.adler=1}if(L.status===69)if(L.gzhead.extra){for(M=L.pending;L.gzindex<(65535&L.gzhead.extra.length)&&(L.pending!==L.pending_buf_size||(L.gzhead.hcrc&&L.pending>M&&(E.adler=u(E.adler,L.pending_buf,L.pending-M,M)),O(E),M=L.pending,L.pending!==L.pending_buf_size));)Y(L,255&L.gzhead.extra[L.gzindex]),L.gzindex++;L.gzhead.hcrc&&L.pending>M&&(E.adler=u(E.adler,L.pending_buf,L.pending-M,M)),L.gzindex===L.gzhead.extra.length&&(L.gzindex=0,L.status=73)}else L.status=73;if(L.status===73)if(L.gzhead.name){M=L.pending;do{if(L.pending===L.pending_buf_size&&(L.gzhead.hcrc&&L.pending>M&&(E.adler=u(E.adler,L.pending_buf,L.pending-M,M)),O(E),M=L.pending,L.pending===L.pending_buf_size)){q=1;break}q=L.gzindex<L.gzhead.name.length?255&L.gzhead.name.charCodeAt(L.gzindex++):0,Y(L,q)}while(q!==0);L.gzhead.hcrc&&L.pending>M&&(E.adler=u(E.adler,L.pending_buf,L.pending-M,M)),q===0&&(L.gzindex=0,L.status=91)}else L.status=91;if(L.status===91)if(L.gzhead.comment){M=L.pending;do{if(L.pending===L.pending_buf_size&&(L.gzhead.hcrc&&L.pending>M&&(E.adler=u(E.adler,L.pending_buf,L.pending-M,M)),O(E),M=L.pending,L.pending===L.pending_buf_size)){q=1;break}q=L.gzindex<L.gzhead.comment.length?255&L.gzhead.comment.charCodeAt(L.gzindex++):0,Y(L,q)}while(q!==0);L.gzhead.hcrc&&L.pending>M&&(E.adler=u(E.adler,L.pending_buf,L.pending-M,M)),q===0&&(L.status=103)}else L.status=103;if(L.status===103&&(L.gzhead.hcrc?(L.pending+2>L.pending_buf_size&&O(E),L.pending+2<=L.pending_buf_size&&(Y(L,255&E.adler),Y(L,E.adler>>8&255),E.adler=0,L.status=F)):L.status=F),L.pending!==0){if(O(E),E.avail_out===0)return L.last_flush=-1,m}else if(E.avail_in===0&&D(J)<=D(te)&&J!==p)return R(E,-5);if(L.status===666&&E.avail_in!==0)return R(E,-5);if(E.avail_in!==0||L.lookahead!==0||J!==f&&L.status!==666){var ne=L.strategy===2?function(z,V){for(var Q;;){if(z.lookahead===0&&(se(z),z.lookahead===0)){if(V===f)return w;break}if(z.match_length=0,Q=a._tr_tally(z,0,z.window[z.strstart]),z.lookahead--,z.strstart++,Q&&(A(z,!1),z.strm.avail_out===0))return w}return z.insert=0,V===p?(A(z,!0),z.strm.avail_out===0?H:W):z.last_lit&&(A(z,!1),z.strm.avail_out===0)?w:B}(L,J):L.strategy===3?function(z,V){for(var Q,X,ee,ce,fe=z.window;;){if(z.lookahead<=I){if(se(z),z.lookahead<=I&&V===f)return w;if(z.lookahead===0)break}if(z.match_length=0,z.lookahead>=j&&0<z.strstart&&(X=fe[ee=z.strstart-1])===fe[++ee]&&X===fe[++ee]&&X===fe[++ee]){ce=z.strstart+I;do;while(X===fe[++ee]&&X===fe[++ee]&&X===fe[++ee]&&X===fe[++ee]&&X===fe[++ee]&&X===fe[++ee]&&X===fe[++ee]&&X===fe[++ee]&&ee<ce);z.match_length=I-(ce-ee),z.match_length>z.lookahead&&(z.match_length=z.lookahead)}if(z.match_length>=j?(Q=a._tr_tally(z,1,z.match_length-j),z.lookahead-=z.match_length,z.strstart+=z.match_length,z.match_length=0):(Q=a._tr_tally(z,0,z.window[z.strstart]),z.lookahead--,z.strstart++),Q&&(A(z,!1),z.strm.avail_out===0))return w}return z.insert=0,V===p?(A(z,!0),z.strm.avail_out===0?H:W):z.last_lit&&(A(z,!1),z.strm.avail_out===0)?w:B}(L,J):s[L.level].func(L,J);if(ne!==H&&ne!==W||(L.status=666),ne===w||ne===H)return E.avail_out===0&&(L.last_flush=-1),m;if(ne===B&&(J===1?a._tr_align(L):J!==5&&(a._tr_stored_block(L,0,0,!1),J===3&&(U(L.head),L.lookahead===0&&(L.strstart=0,L.block_start=0,L.insert=0))),O(E),E.avail_out===0))return L.last_flush=-1,m}return J!==p?m:L.wrap<=0?1:(L.wrap===2?(Y(L,255&E.adler),Y(L,E.adler>>8&255),Y(L,E.adler>>16&255),Y(L,E.adler>>24&255),Y(L,255&E.total_in),Y(L,E.total_in>>8&255),Y(L,E.total_in>>16&255),Y(L,E.total_in>>24&255)):(G(L,E.adler>>>16),G(L,65535&E.adler)),O(E),0<L.wrap&&(L.wrap=-L.wrap),L.pending!==0?m:1)},r.deflateEnd=function(E){var J;return E&&E.state?(J=E.state.status)!==S&&J!==69&&J!==73&&J!==91&&J!==103&&J!==F&&J!==666?R(E,v):(E.state=null,J===F?R(E,-3):m):v},r.deflateSetDictionary=function(E,J){var te,L,M,q,K,ne,z,V,Q=J.length;if(!E||!E.state||(q=(te=E.state).wrap)===2||q===1&&te.status!==S||te.lookahead)return v;for(q===1&&(E.adler=c(E.adler,J,Q,0)),te.wrap=0,Q>=te.w_size&&(q===0&&(U(te.head),te.strstart=0,te.block_start=0,te.insert=0),V=new o.Buf8(te.w_size),o.arraySet(V,J,Q-te.w_size,te.w_size,0),J=V,Q=te.w_size),K=E.avail_in,ne=E.next_in,z=E.input,E.avail_in=Q,E.next_in=0,E.input=J,se(te);te.lookahead>=j;){for(L=te.strstart,M=te.lookahead-(j-1);te.ins_h=(te.ins_h<<te.hash_shift^te.window[L+j-1])&te.hash_mask,te.prev[L&te.w_mask]=te.head[te.ins_h],te.head[te.ins_h]=L,L++,--M;);te.strstart=L,te.lookahead=j-1,se(te)}return te.strstart+=te.lookahead,te.block_start=te.strstart,te.insert=te.lookahead,te.lookahead=0,te.match_length=te.prev_length=j-1,te.match_available=0,E.next_in=ne,E.input=z,E.avail_in=K,te.wrap=q,m},r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,i,r){i.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,i,r){i.exports=function(s,o){var a,c,u,d,f,p,m,v,g,x,h,y,_,b,N,T,C,P,j,I,$,S,F,w,B;a=s.state,c=s.next_in,w=s.input,u=c+(s.avail_in-5),d=s.next_out,B=s.output,f=d-(o-s.avail_out),p=d+(s.avail_out-257),m=a.dmax,v=a.wsize,g=a.whave,x=a.wnext,h=a.window,y=a.hold,_=a.bits,b=a.lencode,N=a.distcode,T=(1<<a.lenbits)-1,C=(1<<a.distbits)-1;e:do{_<15&&(y+=w[c++]<<_,_+=8,y+=w[c++]<<_,_+=8),P=b[y&T];t:for(;;){if(y>>>=j=P>>>24,_-=j,(j=P>>>16&255)===0)B[d++]=65535&P;else{if(!(16&j)){if(!(64&j)){P=b[(65535&P)+(y&(1<<j)-1)];continue t}if(32&j){a.mode=12;break e}s.msg="invalid literal/length code",a.mode=30;break e}I=65535&P,(j&=15)&&(_<j&&(y+=w[c++]<<_,_+=8),I+=y&(1<<j)-1,y>>>=j,_-=j),_<15&&(y+=w[c++]<<_,_+=8,y+=w[c++]<<_,_+=8),P=N[y&C];n:for(;;){if(y>>>=j=P>>>24,_-=j,!(16&(j=P>>>16&255))){if(!(64&j)){P=N[(65535&P)+(y&(1<<j)-1)];continue n}s.msg="invalid distance code",a.mode=30;break e}if($=65535&P,_<(j&=15)&&(y+=w[c++]<<_,(_+=8)<j&&(y+=w[c++]<<_,_+=8)),m<($+=y&(1<<j)-1)){s.msg="invalid distance too far back",a.mode=30;break e}if(y>>>=j,_-=j,(j=d-f)<$){if(g<(j=$-j)&&a.sane){s.msg="invalid distance too far back",a.mode=30;break e}if(F=h,(S=0)===x){if(S+=v-j,j<I){for(I-=j;B[d++]=h[S++],--j;);S=d-$,F=B}}else if(x<j){if(S+=v+x-j,(j-=x)<I){for(I-=j;B[d++]=h[S++],--j;);if(S=0,x<I){for(I-=j=x;B[d++]=h[S++],--j;);S=d-$,F=B}}}else if(S+=x-j,j<I){for(I-=j;B[d++]=h[S++],--j;);S=d-$,F=B}for(;2<I;)B[d++]=F[S++],B[d++]=F[S++],B[d++]=F[S++],I-=3;I&&(B[d++]=F[S++],1<I&&(B[d++]=F[S++]))}else{for(S=d-$;B[d++]=B[S++],B[d++]=B[S++],B[d++]=B[S++],2<(I-=3););I&&(B[d++]=B[S++],1<I&&(B[d++]=B[S++]))}break}}break}}while(c<u&&d<p);c-=I=_>>3,y&=(1<<(_-=I<<3))-1,s.next_in=c,s.next_out=d,s.avail_in=c<u?u-c+5:5-(c-u),s.avail_out=d<p?p-d+257:257-(d-p),a.hold=y,a.bits=_}},{}],49:[function(n,i,r){var s=n("../utils/common"),o=n("./adler32"),a=n("./crc32"),c=n("./inffast"),u=n("./inftrees"),d=1,f=2,p=0,m=-2,v=1,g=852,x=592;function h(S){return(S>>>24&255)+(S>>>8&65280)+((65280&S)<<8)+((255&S)<<24)}function y(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function _(S){var F;return S&&S.state?(F=S.state,S.total_in=S.total_out=F.total=0,S.msg="",F.wrap&&(S.adler=1&F.wrap),F.mode=v,F.last=0,F.havedict=0,F.dmax=32768,F.head=null,F.hold=0,F.bits=0,F.lencode=F.lendyn=new s.Buf32(g),F.distcode=F.distdyn=new s.Buf32(x),F.sane=1,F.back=-1,p):m}function b(S){var F;return S&&S.state?((F=S.state).wsize=0,F.whave=0,F.wnext=0,_(S)):m}function N(S,F){var w,B;return S&&S.state?(B=S.state,F<0?(w=0,F=-F):(w=1+(F>>4),F<48&&(F&=15)),F&&(F<8||15<F)?m:(B.window!==null&&B.wbits!==F&&(B.window=null),B.wrap=w,B.wbits=F,b(S))):m}function T(S,F){var w,B;return S?(B=new y,(S.state=B).window=null,(w=N(S,F))!==p&&(S.state=null),w):m}var C,P,j=!0;function I(S){if(j){var F;for(C=new s.Buf32(512),P=new s.Buf32(32),F=0;F<144;)S.lens[F++]=8;for(;F<256;)S.lens[F++]=9;for(;F<280;)S.lens[F++]=7;for(;F<288;)S.lens[F++]=8;for(u(d,S.lens,0,288,C,0,S.work,{bits:9}),F=0;F<32;)S.lens[F++]=5;u(f,S.lens,0,32,P,0,S.work,{bits:5}),j=!1}S.lencode=C,S.lenbits=9,S.distcode=P,S.distbits=5}function $(S,F,w,B){var H,W=S.state;return W.window===null&&(W.wsize=1<<W.wbits,W.wnext=0,W.whave=0,W.window=new s.Buf8(W.wsize)),B>=W.wsize?(s.arraySet(W.window,F,w-W.wsize,W.wsize,0),W.wnext=0,W.whave=W.wsize):(B<(H=W.wsize-W.wnext)&&(H=B),s.arraySet(W.window,F,w-B,H,W.wnext),(B-=H)?(s.arraySet(W.window,F,w-B,B,0),W.wnext=B,W.whave=W.wsize):(W.wnext+=H,W.wnext===W.wsize&&(W.wnext=0),W.whave<W.wsize&&(W.whave+=H))),0}r.inflateReset=b,r.inflateReset2=N,r.inflateResetKeep=_,r.inflateInit=function(S){return T(S,15)},r.inflateInit2=T,r.inflate=function(S,F){var w,B,H,W,R,D,U,O,A,Y,G,Z,se,le,ae,oe,ue,we,ve,ke,E,J,te,L,M=0,q=new s.Buf8(4),K=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!S||!S.state||!S.output||!S.input&&S.avail_in!==0)return m;(w=S.state).mode===12&&(w.mode=13),R=S.next_out,H=S.output,U=S.avail_out,W=S.next_in,B=S.input,D=S.avail_in,O=w.hold,A=w.bits,Y=D,G=U,J=p;e:for(;;)switch(w.mode){case v:if(w.wrap===0){w.mode=13;break}for(;A<16;){if(D===0)break e;D--,O+=B[W++]<<A,A+=8}if(2&w.wrap&&O===35615){q[w.check=0]=255&O,q[1]=O>>>8&255,w.check=a(w.check,q,2,0),A=O=0,w.mode=2;break}if(w.flags=0,w.head&&(w.head.done=!1),!(1&w.wrap)||(((255&O)<<8)+(O>>8))%31){S.msg="incorrect header check",w.mode=30;break}if((15&O)!=8){S.msg="unknown compression method",w.mode=30;break}if(A-=4,E=8+(15&(O>>>=4)),w.wbits===0)w.wbits=E;else if(E>w.wbits){S.msg="invalid window size",w.mode=30;break}w.dmax=1<<E,S.adler=w.check=1,w.mode=512&O?10:12,A=O=0;break;case 2:for(;A<16;){if(D===0)break e;D--,O+=B[W++]<<A,A+=8}if(w.flags=O,(255&w.flags)!=8){S.msg="unknown compression method",w.mode=30;break}if(57344&w.flags){S.msg="unknown header flags set",w.mode=30;break}w.head&&(w.head.text=O>>8&1),512&w.flags&&(q[0]=255&O,q[1]=O>>>8&255,w.check=a(w.check,q,2,0)),A=O=0,w.mode=3;case 3:for(;A<32;){if(D===0)break e;D--,O+=B[W++]<<A,A+=8}w.head&&(w.head.time=O),512&w.flags&&(q[0]=255&O,q[1]=O>>>8&255,q[2]=O>>>16&255,q[3]=O>>>24&255,w.check=a(w.check,q,4,0)),A=O=0,w.mode=4;case 4:for(;A<16;){if(D===0)break e;D--,O+=B[W++]<<A,A+=8}w.head&&(w.head.xflags=255&O,w.head.os=O>>8),512&w.flags&&(q[0]=255&O,q[1]=O>>>8&255,w.check=a(w.check,q,2,0)),A=O=0,w.mode=5;case 5:if(1024&w.flags){for(;A<16;){if(D===0)break e;D--,O+=B[W++]<<A,A+=8}w.length=O,w.head&&(w.head.extra_len=O),512&w.flags&&(q[0]=255&O,q[1]=O>>>8&255,w.check=a(w.check,q,2,0)),A=O=0}else w.head&&(w.head.extra=null);w.mode=6;case 6:if(1024&w.flags&&(D<(Z=w.length)&&(Z=D),Z&&(w.head&&(E=w.head.extra_len-w.length,w.head.extra||(w.head.extra=new Array(w.head.extra_len)),s.arraySet(w.head.extra,B,W,Z,E)),512&w.flags&&(w.check=a(w.check,B,Z,W)),D-=Z,W+=Z,w.length-=Z),w.length))break e;w.length=0,w.mode=7;case 7:if(2048&w.flags){if(D===0)break e;for(Z=0;E=B[W+Z++],w.head&&E&&w.length<65536&&(w.head.name+=String.fromCharCode(E)),E&&Z<D;);if(512&w.flags&&(w.check=a(w.check,B,Z,W)),D-=Z,W+=Z,E)break e}else w.head&&(w.head.name=null);w.length=0,w.mode=8;case 8:if(4096&w.flags){if(D===0)break e;for(Z=0;E=B[W+Z++],w.head&&E&&w.length<65536&&(w.head.comment+=String.fromCharCode(E)),E&&Z<D;);if(512&w.flags&&(w.check=a(w.check,B,Z,W)),D-=Z,W+=Z,E)break e}else w.head&&(w.head.comment=null);w.mode=9;case 9:if(512&w.flags){for(;A<16;){if(D===0)break e;D--,O+=B[W++]<<A,A+=8}if(O!==(65535&w.check)){S.msg="header crc mismatch",w.mode=30;break}A=O=0}w.head&&(w.head.hcrc=w.flags>>9&1,w.head.done=!0),S.adler=w.check=0,w.mode=12;break;case 10:for(;A<32;){if(D===0)break e;D--,O+=B[W++]<<A,A+=8}S.adler=w.check=h(O),A=O=0,w.mode=11;case 11:if(w.havedict===0)return S.next_out=R,S.avail_out=U,S.next_in=W,S.avail_in=D,w.hold=O,w.bits=A,2;S.adler=w.check=1,w.mode=12;case 12:if(F===5||F===6)break e;case 13:if(w.last){O>>>=7&A,A-=7&A,w.mode=27;break}for(;A<3;){if(D===0)break e;D--,O+=B[W++]<<A,A+=8}switch(w.last=1&O,A-=1,3&(O>>>=1)){case 0:w.mode=14;break;case 1:if(I(w),w.mode=20,F!==6)break;O>>>=2,A-=2;break e;case 2:w.mode=17;break;case 3:S.msg="invalid block type",w.mode=30}O>>>=2,A-=2;break;case 14:for(O>>>=7&A,A-=7&A;A<32;){if(D===0)break e;D--,O+=B[W++]<<A,A+=8}if((65535&O)!=(O>>>16^65535)){S.msg="invalid stored block lengths",w.mode=30;break}if(w.length=65535&O,A=O=0,w.mode=15,F===6)break e;case 15:w.mode=16;case 16:if(Z=w.length){if(D<Z&&(Z=D),U<Z&&(Z=U),Z===0)break e;s.arraySet(H,B,W,Z,R),D-=Z,W+=Z,U-=Z,R+=Z,w.length-=Z;break}w.mode=12;break;case 17:for(;A<14;){if(D===0)break e;D--,O+=B[W++]<<A,A+=8}if(w.nlen=257+(31&O),O>>>=5,A-=5,w.ndist=1+(31&O),O>>>=5,A-=5,w.ncode=4+(15&O),O>>>=4,A-=4,286<w.nlen||30<w.ndist){S.msg="too many length or distance symbols",w.mode=30;break}w.have=0,w.mode=18;case 18:for(;w.have<w.ncode;){for(;A<3;){if(D===0)break e;D--,O+=B[W++]<<A,A+=8}w.lens[K[w.have++]]=7&O,O>>>=3,A-=3}for(;w.have<19;)w.lens[K[w.have++]]=0;if(w.lencode=w.lendyn,w.lenbits=7,te={bits:w.lenbits},J=u(0,w.lens,0,19,w.lencode,0,w.work,te),w.lenbits=te.bits,J){S.msg="invalid code lengths set",w.mode=30;break}w.have=0,w.mode=19;case 19:for(;w.have<w.nlen+w.ndist;){for(;oe=(M=w.lencode[O&(1<<w.lenbits)-1])>>>16&255,ue=65535&M,!((ae=M>>>24)<=A);){if(D===0)break e;D--,O+=B[W++]<<A,A+=8}if(ue<16)O>>>=ae,A-=ae,w.lens[w.have++]=ue;else{if(ue===16){for(L=ae+2;A<L;){if(D===0)break e;D--,O+=B[W++]<<A,A+=8}if(O>>>=ae,A-=ae,w.have===0){S.msg="invalid bit length repeat",w.mode=30;break}E=w.lens[w.have-1],Z=3+(3&O),O>>>=2,A-=2}else if(ue===17){for(L=ae+3;A<L;){if(D===0)break e;D--,O+=B[W++]<<A,A+=8}A-=ae,E=0,Z=3+(7&(O>>>=ae)),O>>>=3,A-=3}else{for(L=ae+7;A<L;){if(D===0)break e;D--,O+=B[W++]<<A,A+=8}A-=ae,E=0,Z=11+(127&(O>>>=ae)),O>>>=7,A-=7}if(w.have+Z>w.nlen+w.ndist){S.msg="invalid bit length repeat",w.mode=30;break}for(;Z--;)w.lens[w.have++]=E}}if(w.mode===30)break;if(w.lens[256]===0){S.msg="invalid code -- missing end-of-block",w.mode=30;break}if(w.lenbits=9,te={bits:w.lenbits},J=u(d,w.lens,0,w.nlen,w.lencode,0,w.work,te),w.lenbits=te.bits,J){S.msg="invalid literal/lengths set",w.mode=30;break}if(w.distbits=6,w.distcode=w.distdyn,te={bits:w.distbits},J=u(f,w.lens,w.nlen,w.ndist,w.distcode,0,w.work,te),w.distbits=te.bits,J){S.msg="invalid distances set",w.mode=30;break}if(w.mode=20,F===6)break e;case 20:w.mode=21;case 21:if(6<=D&&258<=U){S.next_out=R,S.avail_out=U,S.next_in=W,S.avail_in=D,w.hold=O,w.bits=A,c(S,G),R=S.next_out,H=S.output,U=S.avail_out,W=S.next_in,B=S.input,D=S.avail_in,O=w.hold,A=w.bits,w.mode===12&&(w.back=-1);break}for(w.back=0;oe=(M=w.lencode[O&(1<<w.lenbits)-1])>>>16&255,ue=65535&M,!((ae=M>>>24)<=A);){if(D===0)break e;D--,O+=B[W++]<<A,A+=8}if(oe&&!(240&oe)){for(we=ae,ve=oe,ke=ue;oe=(M=w.lencode[ke+((O&(1<<we+ve)-1)>>we)])>>>16&255,ue=65535&M,!(we+(ae=M>>>24)<=A);){if(D===0)break e;D--,O+=B[W++]<<A,A+=8}O>>>=we,A-=we,w.back+=we}if(O>>>=ae,A-=ae,w.back+=ae,w.length=ue,oe===0){w.mode=26;break}if(32&oe){w.back=-1,w.mode=12;break}if(64&oe){S.msg="invalid literal/length code",w.mode=30;break}w.extra=15&oe,w.mode=22;case 22:if(w.extra){for(L=w.extra;A<L;){if(D===0)break e;D--,O+=B[W++]<<A,A+=8}w.length+=O&(1<<w.extra)-1,O>>>=w.extra,A-=w.extra,w.back+=w.extra}w.was=w.length,w.mode=23;case 23:for(;oe=(M=w.distcode[O&(1<<w.distbits)-1])>>>16&255,ue=65535&M,!((ae=M>>>24)<=A);){if(D===0)break e;D--,O+=B[W++]<<A,A+=8}if(!(240&oe)){for(we=ae,ve=oe,ke=ue;oe=(M=w.distcode[ke+((O&(1<<we+ve)-1)>>we)])>>>16&255,ue=65535&M,!(we+(ae=M>>>24)<=A);){if(D===0)break e;D--,O+=B[W++]<<A,A+=8}O>>>=we,A-=we,w.back+=we}if(O>>>=ae,A-=ae,w.back+=ae,64&oe){S.msg="invalid distance code",w.mode=30;break}w.offset=ue,w.extra=15&oe,w.mode=24;case 24:if(w.extra){for(L=w.extra;A<L;){if(D===0)break e;D--,O+=B[W++]<<A,A+=8}w.offset+=O&(1<<w.extra)-1,O>>>=w.extra,A-=w.extra,w.back+=w.extra}if(w.offset>w.dmax){S.msg="invalid distance too far back",w.mode=30;break}w.mode=25;case 25:if(U===0)break e;if(Z=G-U,w.offset>Z){if((Z=w.offset-Z)>w.whave&&w.sane){S.msg="invalid distance too far back",w.mode=30;break}se=Z>w.wnext?(Z-=w.wnext,w.wsize-Z):w.wnext-Z,Z>w.length&&(Z=w.length),le=w.window}else le=H,se=R-w.offset,Z=w.length;for(U<Z&&(Z=U),U-=Z,w.length-=Z;H[R++]=le[se++],--Z;);w.length===0&&(w.mode=21);break;case 26:if(U===0)break e;H[R++]=w.length,U--,w.mode=21;break;case 27:if(w.wrap){for(;A<32;){if(D===0)break e;D--,O|=B[W++]<<A,A+=8}if(G-=U,S.total_out+=G,w.total+=G,G&&(S.adler=w.check=w.flags?a(w.check,H,G,R-G):o(w.check,H,G,R-G)),G=U,(w.flags?O:h(O))!==w.check){S.msg="incorrect data check",w.mode=30;break}A=O=0}w.mode=28;case 28:if(w.wrap&&w.flags){for(;A<32;){if(D===0)break e;D--,O+=B[W++]<<A,A+=8}if(O!==(4294967295&w.total)){S.msg="incorrect length check",w.mode=30;break}A=O=0}w.mode=29;case 29:J=1;break e;case 30:J=-3;break e;case 31:return-4;case 32:default:return m}return S.next_out=R,S.avail_out=U,S.next_in=W,S.avail_in=D,w.hold=O,w.bits=A,(w.wsize||G!==S.avail_out&&w.mode<30&&(w.mode<27||F!==4))&&$(S,S.output,S.next_out,G-S.avail_out)?(w.mode=31,-4):(Y-=S.avail_in,G-=S.avail_out,S.total_in+=Y,S.total_out+=G,w.total+=G,w.wrap&&G&&(S.adler=w.check=w.flags?a(w.check,H,G,S.next_out-G):o(w.check,H,G,S.next_out-G)),S.data_type=w.bits+(w.last?64:0)+(w.mode===12?128:0)+(w.mode===20||w.mode===15?256:0),(Y==0&&G===0||F===4)&&J===p&&(J=-5),J)},r.inflateEnd=function(S){if(!S||!S.state)return m;var F=S.state;return F.window&&(F.window=null),S.state=null,p},r.inflateGetHeader=function(S,F){var w;return S&&S.state&&2&(w=S.state).wrap?((w.head=F).done=!1,p):m},r.inflateSetDictionary=function(S,F){var w,B=F.length;return S&&S.state?(w=S.state).wrap!==0&&w.mode!==11?m:w.mode===11&&o(1,F,B,0)!==w.check?-3:$(S,F,B,B)?(w.mode=31,-4):(w.havedict=1,p):m},r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,i,r){var s=n("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],c=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],u=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];i.exports=function(d,f,p,m,v,g,x,h){var y,_,b,N,T,C,P,j,I,$=h.bits,S=0,F=0,w=0,B=0,H=0,W=0,R=0,D=0,U=0,O=0,A=null,Y=0,G=new s.Buf16(16),Z=new s.Buf16(16),se=null,le=0;for(S=0;S<=15;S++)G[S]=0;for(F=0;F<m;F++)G[f[p+F]]++;for(H=$,B=15;1<=B&&G[B]===0;B--);if(B<H&&(H=B),B===0)return v[g++]=20971520,v[g++]=20971520,h.bits=1,0;for(w=1;w<B&&G[w]===0;w++);for(H<w&&(H=w),S=D=1;S<=15;S++)if(D<<=1,(D-=G[S])<0)return-1;if(0<D&&(d===0||B!==1))return-1;for(Z[1]=0,S=1;S<15;S++)Z[S+1]=Z[S]+G[S];for(F=0;F<m;F++)f[p+F]!==0&&(x[Z[f[p+F]]++]=F);if(C=d===0?(A=se=x,19):d===1?(A=o,Y-=257,se=a,le-=257,256):(A=c,se=u,-1),S=w,T=g,R=F=O=0,b=-1,N=(U=1<<(W=H))-1,d===1&&852<U||d===2&&592<U)return 1;for(;;){for(P=S-R,I=x[F]<C?(j=0,x[F]):x[F]>C?(j=se[le+x[F]],A[Y+x[F]]):(j=96,0),y=1<<S-R,w=_=1<<W;v[T+(O>>R)+(_-=y)]=P<<24|j<<16|I|0,_!==0;);for(y=1<<S-1;O&y;)y>>=1;if(y!==0?(O&=y-1,O+=y):O=0,F++,--G[S]==0){if(S===B)break;S=f[p+x[F]]}if(H<S&&(O&N)!==b){for(R===0&&(R=H),T+=w,D=1<<(W=S-R);W+R<B&&!((D-=G[W+R])<=0);)W++,D<<=1;if(U+=1<<W,d===1&&852<U||d===2&&592<U)return 1;v[b=O&N]=H<<24|W<<16|T-g|0}}return O!==0&&(v[T+O]=S-R<<24|64<<16|0),h.bits=H,0}},{"../utils/common":41}],51:[function(n,i,r){i.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,i,r){var s=n("../utils/common"),o=0,a=1;function c(M){for(var q=M.length;0<=--q;)M[q]=0}var u=0,d=29,f=256,p=f+1+d,m=30,v=19,g=2*p+1,x=15,h=16,y=7,_=256,b=16,N=17,T=18,C=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],P=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],j=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],I=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],$=new Array(2*(p+2));c($);var S=new Array(2*m);c(S);var F=new Array(512);c(F);var w=new Array(256);c(w);var B=new Array(d);c(B);var H,W,R,D=new Array(m);function U(M,q,K,ne,z){this.static_tree=M,this.extra_bits=q,this.extra_base=K,this.elems=ne,this.max_length=z,this.has_stree=M&&M.length}function O(M,q){this.dyn_tree=M,this.max_code=0,this.stat_desc=q}function A(M){return M<256?F[M]:F[256+(M>>>7)]}function Y(M,q){M.pending_buf[M.pending++]=255&q,M.pending_buf[M.pending++]=q>>>8&255}function G(M,q,K){M.bi_valid>h-K?(M.bi_buf|=q<<M.bi_valid&65535,Y(M,M.bi_buf),M.bi_buf=q>>h-M.bi_valid,M.bi_valid+=K-h):(M.bi_buf|=q<<M.bi_valid&65535,M.bi_valid+=K)}function Z(M,q,K){G(M,K[2*q],K[2*q+1])}function se(M,q){for(var K=0;K|=1&M,M>>>=1,K<<=1,0<--q;);return K>>>1}function le(M,q,K){var ne,z,V=new Array(x+1),Q=0;for(ne=1;ne<=x;ne++)V[ne]=Q=Q+K[ne-1]<<1;for(z=0;z<=q;z++){var X=M[2*z+1];X!==0&&(M[2*z]=se(V[X]++,X))}}function ae(M){var q;for(q=0;q<p;q++)M.dyn_ltree[2*q]=0;for(q=0;q<m;q++)M.dyn_dtree[2*q]=0;for(q=0;q<v;q++)M.bl_tree[2*q]=0;M.dyn_ltree[2*_]=1,M.opt_len=M.static_len=0,M.last_lit=M.matches=0}function oe(M){8<M.bi_valid?Y(M,M.bi_buf):0<M.bi_valid&&(M.pending_buf[M.pending++]=M.bi_buf),M.bi_buf=0,M.bi_valid=0}function ue(M,q,K,ne){var z=2*q,V=2*K;return M[z]<M[V]||M[z]===M[V]&&ne[q]<=ne[K]}function we(M,q,K){for(var ne=M.heap[K],z=K<<1;z<=M.heap_len&&(z<M.heap_len&&ue(q,M.heap[z+1],M.heap[z],M.depth)&&z++,!ue(q,ne,M.heap[z],M.depth));)M.heap[K]=M.heap[z],K=z,z<<=1;M.heap[K]=ne}function ve(M,q,K){var ne,z,V,Q,X=0;if(M.last_lit!==0)for(;ne=M.pending_buf[M.d_buf+2*X]<<8|M.pending_buf[M.d_buf+2*X+1],z=M.pending_buf[M.l_buf+X],X++,ne===0?Z(M,z,q):(Z(M,(V=w[z])+f+1,q),(Q=C[V])!==0&&G(M,z-=B[V],Q),Z(M,V=A(--ne),K),(Q=P[V])!==0&&G(M,ne-=D[V],Q)),X<M.last_lit;);Z(M,_,q)}function ke(M,q){var K,ne,z,V=q.dyn_tree,Q=q.stat_desc.static_tree,X=q.stat_desc.has_stree,ee=q.stat_desc.elems,ce=-1;for(M.heap_len=0,M.heap_max=g,K=0;K<ee;K++)V[2*K]!==0?(M.heap[++M.heap_len]=ce=K,M.depth[K]=0):V[2*K+1]=0;for(;M.heap_len<2;)V[2*(z=M.heap[++M.heap_len]=ce<2?++ce:0)]=1,M.depth[z]=0,M.opt_len--,X&&(M.static_len-=Q[2*z+1]);for(q.max_code=ce,K=M.heap_len>>1;1<=K;K--)we(M,V,K);for(z=ee;K=M.heap[1],M.heap[1]=M.heap[M.heap_len--],we(M,V,1),ne=M.heap[1],M.heap[--M.heap_max]=K,M.heap[--M.heap_max]=ne,V[2*z]=V[2*K]+V[2*ne],M.depth[z]=(M.depth[K]>=M.depth[ne]?M.depth[K]:M.depth[ne])+1,V[2*K+1]=V[2*ne+1]=z,M.heap[1]=z++,we(M,V,1),2<=M.heap_len;);M.heap[--M.heap_max]=M.heap[1],function(fe,me){var Se,Ne,_e,Ie,Et,re,ge=me.dyn_tree,pe=me.max_code,be=me.stat_desc.static_tree,Ee=me.stat_desc.has_stree,Ae=me.stat_desc.extra_bits,Ke=me.stat_desc.extra_base,Ve=me.stat_desc.max_length,Ge=0;for(Ie=0;Ie<=x;Ie++)fe.bl_count[Ie]=0;for(ge[2*fe.heap[fe.heap_max]+1]=0,Se=fe.heap_max+1;Se<g;Se++)Ve<(Ie=ge[2*ge[2*(Ne=fe.heap[Se])+1]+1]+1)&&(Ie=Ve,Ge++),ge[2*Ne+1]=Ie,pe<Ne||(fe.bl_count[Ie]++,Et=0,Ke<=Ne&&(Et=Ae[Ne-Ke]),re=ge[2*Ne],fe.opt_len+=re*(Ie+Et),Ee&&(fe.static_len+=re*(be[2*Ne+1]+Et)));if(Ge!==0){do{for(Ie=Ve-1;fe.bl_count[Ie]===0;)Ie--;fe.bl_count[Ie]--,fe.bl_count[Ie+1]+=2,fe.bl_count[Ve]--,Ge-=2}while(0<Ge);for(Ie=Ve;Ie!==0;Ie--)for(Ne=fe.bl_count[Ie];Ne!==0;)pe<(_e=fe.heap[--Se])||(ge[2*_e+1]!==Ie&&(fe.opt_len+=(Ie-ge[2*_e+1])*ge[2*_e],ge[2*_e+1]=Ie),Ne--)}}(M,q),le(V,ce,M.bl_count)}function E(M,q,K){var ne,z,V=-1,Q=q[1],X=0,ee=7,ce=4;for(Q===0&&(ee=138,ce=3),q[2*(K+1)+1]=65535,ne=0;ne<=K;ne++)z=Q,Q=q[2*(ne+1)+1],++X<ee&&z===Q||(X<ce?M.bl_tree[2*z]+=X:z!==0?(z!==V&&M.bl_tree[2*z]++,M.bl_tree[2*b]++):X<=10?M.bl_tree[2*N]++:M.bl_tree[2*T]++,V=z,ce=(X=0)===Q?(ee=138,3):z===Q?(ee=6,3):(ee=7,4))}function J(M,q,K){var ne,z,V=-1,Q=q[1],X=0,ee=7,ce=4;for(Q===0&&(ee=138,ce=3),ne=0;ne<=K;ne++)if(z=Q,Q=q[2*(ne+1)+1],!(++X<ee&&z===Q)){if(X<ce)for(;Z(M,z,M.bl_tree),--X!=0;);else z!==0?(z!==V&&(Z(M,z,M.bl_tree),X--),Z(M,b,M.bl_tree),G(M,X-3,2)):X<=10?(Z(M,N,M.bl_tree),G(M,X-3,3)):(Z(M,T,M.bl_tree),G(M,X-11,7));V=z,ce=(X=0)===Q?(ee=138,3):z===Q?(ee=6,3):(ee=7,4)}}c(D);var te=!1;function L(M,q,K,ne){G(M,(u<<1)+(ne?1:0),3),function(z,V,Q,X){oe(z),Y(z,Q),Y(z,~Q),s.arraySet(z.pending_buf,z.window,V,Q,z.pending),z.pending+=Q}(M,q,K)}r._tr_init=function(M){te||(function(){var q,K,ne,z,V,Q=new Array(x+1);for(z=ne=0;z<d-1;z++)for(B[z]=ne,q=0;q<1<<C[z];q++)w[ne++]=z;for(w[ne-1]=z,z=V=0;z<16;z++)for(D[z]=V,q=0;q<1<<P[z];q++)F[V++]=z;for(V>>=7;z<m;z++)for(D[z]=V<<7,q=0;q<1<<P[z]-7;q++)F[256+V++]=z;for(K=0;K<=x;K++)Q[K]=0;for(q=0;q<=143;)$[2*q+1]=8,q++,Q[8]++;for(;q<=255;)$[2*q+1]=9,q++,Q[9]++;for(;q<=279;)$[2*q+1]=7,q++,Q[7]++;for(;q<=287;)$[2*q+1]=8,q++,Q[8]++;for(le($,p+1,Q),q=0;q<m;q++)S[2*q+1]=5,S[2*q]=se(q,5);H=new U($,C,f+1,p,x),W=new U(S,P,0,m,x),R=new U(new Array(0),j,0,v,y)}(),te=!0),M.l_desc=new O(M.dyn_ltree,H),M.d_desc=new O(M.dyn_dtree,W),M.bl_desc=new O(M.bl_tree,R),M.bi_buf=0,M.bi_valid=0,ae(M)},r._tr_stored_block=L,r._tr_flush_block=function(M,q,K,ne){var z,V,Q=0;0<M.level?(M.strm.data_type===2&&(M.strm.data_type=function(X){var ee,ce=4093624447;for(ee=0;ee<=31;ee++,ce>>>=1)if(1&ce&&X.dyn_ltree[2*ee]!==0)return o;if(X.dyn_ltree[18]!==0||X.dyn_ltree[20]!==0||X.dyn_ltree[26]!==0)return a;for(ee=32;ee<f;ee++)if(X.dyn_ltree[2*ee]!==0)return a;return o}(M)),ke(M,M.l_desc),ke(M,M.d_desc),Q=function(X){var ee;for(E(X,X.dyn_ltree,X.l_desc.max_code),E(X,X.dyn_dtree,X.d_desc.max_code),ke(X,X.bl_desc),ee=v-1;3<=ee&&X.bl_tree[2*I[ee]+1]===0;ee--);return X.opt_len+=3*(ee+1)+5+5+4,ee}(M),z=M.opt_len+3+7>>>3,(V=M.static_len+3+7>>>3)<=z&&(z=V)):z=V=K+5,K+4<=z&&q!==-1?L(M,q,K,ne):M.strategy===4||V===z?(G(M,2+(ne?1:0),3),ve(M,$,S)):(G(M,4+(ne?1:0),3),function(X,ee,ce,fe){var me;for(G(X,ee-257,5),G(X,ce-1,5),G(X,fe-4,4),me=0;me<fe;me++)G(X,X.bl_tree[2*I[me]+1],3);J(X,X.dyn_ltree,ee-1),J(X,X.dyn_dtree,ce-1)}(M,M.l_desc.max_code+1,M.d_desc.max_code+1,Q+1),ve(M,M.dyn_ltree,M.dyn_dtree)),ae(M),ne&&oe(M)},r._tr_tally=function(M,q,K){return M.pending_buf[M.d_buf+2*M.last_lit]=q>>>8&255,M.pending_buf[M.d_buf+2*M.last_lit+1]=255&q,M.pending_buf[M.l_buf+M.last_lit]=255&K,M.last_lit++,q===0?M.dyn_ltree[2*K]++:(M.matches++,q--,M.dyn_ltree[2*(w[K]+f+1)]++,M.dyn_dtree[2*A(q)]++),M.last_lit===M.lit_bufsize-1},r._tr_align=function(M){G(M,2,3),Z(M,_,$),function(q){q.bi_valid===16?(Y(q,q.bi_buf),q.bi_buf=0,q.bi_valid=0):8<=q.bi_valid&&(q.pending_buf[q.pending++]=255&q.bi_buf,q.bi_buf>>=8,q.bi_valid-=8)}(M)}},{"../utils/common":41}],53:[function(n,i,r){i.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,i,r){(function(s){(function(o,a){if(!o.setImmediate){var c,u,d,f,p=1,m={},v=!1,g=o.document,x=Object.getPrototypeOf&&Object.getPrototypeOf(o);x=x&&x.setTimeout?x:o,c={}.toString.call(o.process)==="[object process]"?function(b){process.nextTick(function(){y(b)})}:function(){if(o.postMessage&&!o.importScripts){var b=!0,N=o.onmessage;return o.onmessage=function(){b=!1},o.postMessage("","*"),o.onmessage=N,b}}()?(f="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",_,!1):o.attachEvent("onmessage",_),function(b){o.postMessage(f+b,"*")}):o.MessageChannel?((d=new MessageChannel).port1.onmessage=function(b){y(b.data)},function(b){d.port2.postMessage(b)}):g&&"onreadystatechange"in g.createElement("script")?(u=g.documentElement,function(b){var N=g.createElement("script");N.onreadystatechange=function(){y(b),N.onreadystatechange=null,u.removeChild(N),N=null},u.appendChild(N)}):function(b){setTimeout(y,0,b)},x.setImmediate=function(b){typeof b!="function"&&(b=new Function(""+b));for(var N=new Array(arguments.length-1),T=0;T<N.length;T++)N[T]=arguments[T+1];var C={callback:b,args:N};return m[p]=C,c(p),p++},x.clearImmediate=h}function h(b){delete m[b]}function y(b){if(v)setTimeout(y,0,b);else{var N=m[b];if(N){v=!0;try{(function(T){var C=T.callback,P=T.args;switch(P.length){case 0:C();break;case 1:C(P[0]);break;case 2:C(P[0],P[1]);break;case 3:C(P[0],P[1],P[2]);break;default:C.apply(a,P)}})(N)}finally{h(b),v=!1}}}}function _(b){b.source===o&&typeof b.data=="string"&&b.data.indexOf(f)===0&&y(+b.data.slice(f.length))}})(typeof self>"u"?s===void 0?this:s:self)}).call(this,typeof xn<"u"?xn:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Gx);var _T=Gx.exports;const bT=Rr(_T);var qx={exports:{}};(function(e,t){(function(n,i){i()})(xn,function(){function n(u,d){return typeof d>"u"?d={autoBom:!1}:typeof d!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),d={autoBom:!d}),d.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(u.type)?new Blob(["\uFEFF",u],{type:u.type}):u}function i(u,d,f){var p=new XMLHttpRequest;p.open("GET",u),p.responseType="blob",p.onload=function(){c(p.response,d,f)},p.onerror=function(){console.error("could not download file")},p.send()}function r(u){var d=new XMLHttpRequest;d.open("HEAD",u,!1);try{d.send()}catch{}return 200<=d.status&&299>=d.status}function s(u){try{u.dispatchEvent(new MouseEvent("click"))}catch{var d=document.createEvent("MouseEvents");d.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),u.dispatchEvent(d)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof xn=="object"&&xn.global===xn?xn:void 0,a=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),c=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(u,d,f){var p=o.URL||o.webkitURL,m=document.createElement("a");d=d||u.name||"download",m.download=d,m.rel="noopener",typeof u=="string"?(m.href=u,m.origin===location.origin?s(m):r(m.href)?i(u,d,f):s(m,m.target="_blank")):(m.href=p.createObjectURL(u),setTimeout(function(){p.revokeObjectURL(m.href)},4e4),setTimeout(function(){s(m)},0))}:"msSaveOrOpenBlob"in navigator?function(u,d,f){if(d=d||u.name||"download",typeof u!="string")navigator.msSaveOrOpenBlob(n(u,f),d);else if(r(u))i(u,d,f);else{var p=document.createElement("a");p.href=u,p.target="_blank",setTimeout(function(){s(p)})}}:function(u,d,f,p){if(p=p||open("","_blank"),p&&(p.document.title=p.document.body.innerText="downloading..."),typeof u=="string")return i(u,d,f);var m=u.type==="application/octet-stream",v=/constructor/i.test(o.HTMLElement)||o.safari,g=/CriOS\/[\d]+/.test(navigator.userAgent);if((g||m&&v||a)&&typeof FileReader<"u"){var x=new FileReader;x.onloadend=function(){var _=x.result;_=g?_:_.replace(/^data:[^;]*;/,"data:attachment/file;"),p?p.location.href=_:location=_,p=null},x.readAsDataURL(u)}else{var h=o.URL||o.webkitURL,y=h.createObjectURL(u);p?p.location=y:location.href=y,p=null,setTimeout(function(){h.revokeObjectURL(y)},4e4)}});o.saveAs=c.saveAs=c,e.exports=c})})(qx);var kT=qx.exports;const Yx="https://w3id.org/ro/crate/1.1",ET=`${Yx}/context`,NT="https://w3id.org/workflowhub/workflow-ro-crate/1.0",ST="https://w3id.org/cwl/v1.2/",IT="https://www.commonwl.org/",AT="https://spdx.org/licenses/MIT",ch="https://hub.docker.com/r",CT="https://www.python.org/";function jT(e,t,n){return[{"@id":"ro-crate-metadata.json","@type":"CreativeWork",about:{"@id":"./"},conformsTo:[{"@id":Yx},{"@id":NT}]},{"@id":"./","@type":"Dataset",name:e,description:`Neuroimaging CWL workflow generated by niBuild containing ${n.length} part(s).`,datePublished:new Date().toISOString().slice(0,10),license:{"@id":AT},mainEntity:{"@id":t},hasPart:n}]}function TT(e,t,n){return[{"@id":t,"@type":["File","SoftwareSourceCode","ComputationalWorkflow"],name:e,programmingLanguage:{"@id":"#cwl"}},{"@id":"#cwl","@type":"ComputerLanguage",name:"Common Workflow Language",alternateName:"CWL",identifier:{"@id":ST},url:{"@id":IT}},{"@id":n,"@type":"File",name:"Job input template",description:"Pre-configured parameter values for running the workflow"}]}function RT(e,t){return e.map(n=>{const i=t[n],r={"@id":n,"@type":["File","SoftwareSourceCode"],name:(i==null?void 0:i.fullName)||n,programmingLanguage:{"@id":"#cwl"}};return i!=null&&i.docUrl&&(r.url={"@id":i.docUrl}),r})}function DT(e){return e.map(t=>{const[n]=t.split(":");return{"@id":`${ch}/${n}`,"@type":"SoftwareApplication",name:t,url:`${ch}/${n}`}})}function MT(e){const t=[{"@id":"README.md","@type":"File",name:"README",encodingFormat:"text/markdown"},{"@id":"Dockerfile","@type":"File",name:"Dockerfile",description:"Orchestration container for Docker-based workflow execution"},{"@id":"run.sh","@type":"File",name:"Run script",description:"Entrypoint script with usage help"},{"@id":"prefetch_images.sh","@type":"File",name:"Image prefetch script",description:"Pre-pull tool Docker images"}];return e.length>0&&t.push({"@id":"Singularity.def","@type":"File",name:"Singularity definition file",description:"Definition file for building a Singularity/Apptainer orchestration container"},{"@id":"run_singularity.sh","@type":"File",name:"Singularity run script",description:"Entrypoint script using cwltool with --singularity flag for HPC execution"},{"@id":"prefetch_images_singularity.sh","@type":"File",name:"Singularity image prefetch script",description:"Convert Docker images to Singularity SIF format for offline/HPC use"}),t}function zT(){return[{"@id":"bids_query.json","@type":"File",name:"BIDS query specification",description:"BIDS input selection parameters for automatic file resolution",encodingFormat:"application/json"},{"@id":"resolve_bids.py","@type":["File","SoftwareSourceCode"],name:"BIDS resolver script",description:"Resolves BIDS directory structure to concrete CWL job inputs",programmingLanguage:{"@id":"#python"}},{"@id":"#python","@type":"ComputerLanguage",name:"Python",url:{"@id":CT}}]}function FT({workflowName:e,mainWorkflowPath:t,jobTemplatePath:n,toolCWLPaths:i,toolMetadata:r,dockerImages:s,singularityFiles:o=[],hasBIDS:a=!1}){const c=[{"@id":t},{"@id":n},{"@id":"README.md"},{"@id":"Dockerfile"},{"@id":"run.sh"},{"@id":"prefetch_images.sh"},...o.map(d=>({"@id":d})),...i.map(d=>({"@id":d})),...a?[{"@id":"bids_query.json"},{"@id":"resolve_bids.py"}]:[]],u=[...jT(e,t,c),...TT(e,t,n),...RT(i,r),...DT(s),...MT(o),...a?zT():[]];return JSON.stringify({"@context":ET,"@graph":u},null,2)}const qu=e=>{if(e==="File")return{type:"File",isArray:!1,nullable:!1};if(e==="Directory")return{type:"Directory",isArray:!1,nullable:!1};if(Array.isArray(e)){const t=e.find(i=>i!=="null");if(!t)return null;const n=qu(t);return n?{...n,nullable:!0}:null}if(typeof e=="object"&&(e==null?void 0:e.type)==="array"){const t=qu(e.items);return t?{...t,isArray:!0}:null}return null},PT=(e,t)=>{const n=[];for(const[i,r]of Object.entries(e.inputs)){if(t[i]!==void 0)continue;const s=qu(r.type);s&&n.push({name:i,...s})}return n},OT=e=>{const t=new Set,n=[];for(const{dockerImage:i,dockerVersion:r}of Object.values(e)){const s=`${i}:${r}`;t.has(s)||(t.add(s),n.push(s))}return n.sort()},BT=(e,t=!1)=>`FROM python:3.11-slim

# Install cwltool (pinned for reproducibility)
RUN pip install --no-cache-dir cwltool==3.1.20240508115724

# Install docker CLI (needed for cwltool to invoke per-tool containers)
RUN apt-get update && \\
    apt-get install -y --no-install-recommends docker.io && \\
    rm -rf /var/lib/apt/lists/*

# Copy workflow files
WORKDIR /workflow
COPY workflows/ ./workflows/
COPY cwl/ ./cwl/
COPY workflows/${e}_job.yml ./job.yml
${t?`COPY bids_query.json .
COPY resolve_bids.py .
`:""}COPY run.sh .
RUN chmod +x run.sh

ENTRYPOINT ["./run.sh"]
`,LT=(e,t,n=!1)=>{const i=t.length>0?['  echo "File inputs (edit job.yml before running):"',...t.map(({name:s,type:o,isArray:a})=>{const c=a?`${o}[]`:o;return`  echo "  ${s}  (${c})"`})].join(`
`):'  echo "All inputs are pre-configured. No file arguments needed."',r=n?`
# BIDS mode: resolve dataset paths automatically
if [ "\${1:-}" = "--bids" ]; then
  BIDS_DIR="$2"
  if [ -z "\${BIDS_DIR:-}" ]; then
    echo "Error: --bids requires a path to a BIDS dataset directory"
    exit 1
  fi
  shift 2
  echo "Resolving BIDS inputs from: $BIDS_DIR"
  python3 resolve_bids.py \\
    --bids-dir "$BIDS_DIR" \\
    --query bids_query.json \\
    --output job.yml
  cwltool --outdir /output "$@" \\
    workflows/${e}.cwl \\
    job.yml
  exit 0
fi
`:"";return`#!/bin/bash
set -euo pipefail

# If --help is passed, show usage
if [ "\${1:-}" = "--help" ] || [ "\${1:-}" = "-h" ]; then
  echo "=== niBuild Workflow Runner ==="
  echo ""
  echo "Usage: docker run -v /path/to/data:/data -v /path/to/output:/output <image>"
  echo ""
${i}
  echo ""
  echo "All scalar parameters are pre-configured in job.yml."
  echo "Edit job.yml to set file paths before running."${n?`
  echo ""
  echo "BIDS mode: ./run.sh --bids /path/to/bids/dataset"`:""}
  echo ""
  echo "Extra arguments are passed to cwltool (e.g. --verbose, --cachedir /cache)."
  exit 0
fi
${r}
cwltool --outdir /output "$@" \\
  workflows/${e}.cwl \\
  job.yml
`},UT=e=>`#!/bin/bash
# Pre-download all tool container images used by this workflow.
# Run this before 'docker build' to speed up the first workflow execution.
echo "Pulling neuroimaging tool images..."
${e.map(n=>`docker pull ${n}`).join(`
`)}
echo "All images pulled successfully."
`,HT=e=>`Bootstrap: docker
From: python:3.11-slim

%labels
    Author niBuild
    Description Orchestration container for Singularity/Apptainer-based CWL workflow execution

%post
    pip install --no-cache-dir cwltool==3.1.20240508115724

%files
    workflows/ /workflow/workflows/
    cwl/ /workflow/cwl/
    workflows/${e}_job.yml /workflow/job.yml
    run_singularity.sh /workflow/run_singularity.sh

%runscript
    cd /workflow
    chmod +x run_singularity.sh
    exec ./run_singularity.sh "$@"
`,$T=(e,t)=>`#!/bin/bash
set -euo pipefail

# If --help is passed, show usage
if [ "\${1:-}" = "--help" ] || [ "\${1:-}" = "-h" ]; then
  echo "=== niBuild Workflow Runner (Singularity) ==="
  echo ""
  echo "Usage:"
  echo "  Direct:    ./run_singularity.sh"
  echo "  Container: singularity run my-pipeline.sif"
  echo ""
${t.length>0?['  echo "File inputs (edit job.yml before running):"',...t.map(({name:i,type:r,isArray:s})=>{const o=s?`${r}[]`:r;return`  echo "  ${i}  (${o})"`})].join(`
`):'  echo "All inputs are pre-configured. No file arguments needed."'}
  echo ""
  echo "All scalar parameters are pre-configured in job.yml."
  echo "Edit job.yml to set file paths before running."
  echo ""
  echo "Extra arguments are passed to cwltool (e.g. --verbose, --cachedir /cache)."
  exit 0
fi

cwltool --singularity --outdir /output "$@" \\
  workflows/${e}.cwl \\
  job.yml
`,WT=e=>`#!/bin/bash
# Pre-download all tool container images as Singularity SIF files.
# Run this before executing the workflow to avoid download delays.
# Recommended on HPC compute nodes with limited internet access.
set -euo pipefail
echo "Pulling and converting Docker images to Singularity SIF format..."
${e.map(n=>`singularity pull --force ${n.replace(/[/:]/g,"_")+".sif"} docker://${n}`).join(`
`)}
echo "All images converted to SIF successfully."
echo ""
echo "Note: cwltool --singularity will also auto-pull images at runtime."
echo "Pre-pulling is recommended on HPC nodes with limited internet access."
`,KT=(e,t,n,i=!1)=>{const r=t.length>0?t.map(({name:o,type:a,isArray:c})=>{const u=c?`${a}[]`:a;return`- \`${o}\`  ${u}`}).join(`
`):"- *(No runtime file inputs  all inputs are scalar parameters)*",s=n.map(o=>`docker pull ${o}`).join(`
`);return`# niBuild Workflow Bundle

This bundle contains a CWL (Common Workflow Language) workflow generated by [niBuild](https://github.com/KunaalAgarwal/niBuild).

## Contents

- \`workflows/${e}.cwl\`  Main workflow file
- \`workflows/${e}_job.yml\`  Job file with pre-configured parameters
- \`cwl/\`  Tool definitions used by the workflow
- \`Dockerfile\`  Recipe for building the Docker orchestration container
- \`run.sh\`  Entrypoint script for the Docker container
- \`prefetch_images.sh\`  Pre-pull tool Docker images (optional)
- \`Singularity.def\`  Recipe for building the Singularity/Apptainer orchestration container
- \`run_singularity.sh\`  Entrypoint script for the Singularity container
- \`prefetch_images_singularity.sh\`  Convert Docker images to Singularity SIF files (optional)
- \`ro-crate-metadata.json\`  [Workflow RO-Crate](https://w3id.org/workflowhub/workflow-ro-crate/1.0) metadata (JSON-LD)

## How It Works

This workflow uses a **two-layer container architecture**:

1. **Tool containers** (e.g. \`brainlife/fsl:6.0.5\`)  Pre-built images hosted on Docker Hub
   containing neuroimaging software (FSL, AFNI, ANTs, FreeSurfer, etc.). Each CWL tool
   definition references its required container image. You do not build these yourself.

2. **Orchestration container** (built from \`Dockerfile\` or \`Singularity.def\`)  Contains
   [cwltool](https://github.com/common-workflow-language/cwltool), the CWL execution engine,
   along with your workflow and job files. When run, cwltool reads the CWL workflow and
   launches the appropriate tool containers to execute each processing step.

You can also skip the orchestration container entirely and run cwltool directly on your
machine (see Option 2 below).

## Runtime File Inputs

These inputs must be supplied by editing the job file before running:

${r}

All scalar parameters (thresholds, flags, etc.) are pre-configured in the job file.

---

## Option 1: Run with Docker

Only Docker is required. No Python or cwltool installation needed  the orchestration
container includes everything.

### Prerequisites

- [Docker](https://docs.docker.com/get-docker/)

### 1. Unzip and (optionally) pre-pull tool images

\`\`\`bash
unzip ${e}.crate.zip -d my_workflow
cd my_workflow

# Optional: pre-download tool container images so the first run doesn't stall.
# Without this, cwltool will pull images on-the-fly as needed.
bash prefetch_images.sh
\`\`\`

### 2. Edit the Job File

Open \`workflows/${e}_job.yml\` and replace file path placeholders with
your actual data paths. Use \`/data/...\` paths (e.g. \`/data/my_brain.nii.gz\`) to match
the volume mount in the run command below.

### 3. Build the Orchestration Container

This builds a container with cwltool and your workflow files inside. It does **not**
include your data or the tool containers  those are handled separately at runtime.

\`\`\`bash
docker build -t my-pipeline .
\`\`\`

### 4. Run the Workflow

\`\`\`bash
docker run --rm \\
  -v /var/run/docker.sock:/var/run/docker.sock \\
  -v /path/to/data:/data \\
  -v /path/to/output:/output \\
  my-pipeline
\`\`\`

**What the volume mounts do:**

| Mount | Purpose |
|-------|---------|
| \`-v /var/run/docker.sock:...\` | Gives the orchestration container access to Docker so cwltool can launch tool containers |
| \`-v /path/to/data:/data\` | Makes your input data available inside the container at \`/data\`  job file paths should use \`/data/...\` |
| \`-v /path/to/output:/output\` | Where cwltool writes workflow results (output directory) |

Pass \`--help\` to see usage info, or add cwltool flags (e.g. \`--verbose\`):

\`\`\`bash
docker run my-pipeline --help
docker run --rm -v ... my-pipeline --verbose
\`\`\`

---

## Option 2: Run with cwltool Directly

Run cwltool on your machine without an orchestration container. cwltool will still use
Docker (or Singularity) to run the individual tool containers.

### Prerequisites

- Python 3 with pip
- [cwltool](https://github.com/common-workflow-language/cwltool): \`pip install cwltool\`
- [Docker](https://docs.docker.com/get-docker/) (for tool containers)

### Windows Users

CWL requires a Unix-like environment. Use WSL (Windows Subsystem for Linux):

1. Install WSL: \`wsl --install\` (then restart)
2. In WSL: \`sudo apt update && sudo apt install python3 python3-pip\`
3. \`pip install cwltool\`

### 1. Unzip

\`\`\`bash
unzip ${e}.crate.zip -d my_workflow
cd my_workflow
chmod +x workflows/${e}.cwl
\`\`\`

### 2. Edit the Job File

Open \`workflows/${e}_job.yml\` and replace file path placeholders with your actual data paths.

### 3. Run

\`\`\`bash
cwltool workflows/${e}.cwl workflows/${e}_job.yml
\`\`\`

With a specific output directory:

\`\`\`bash
cwltool --outdir ./results workflows/${e}.cwl workflows/${e}_job.yml
\`\`\`

---

## Option 3: Run with Singularity/Apptainer (for HPC)

[Singularity](https://sylabs.io/singularity/) (now [Apptainer](https://apptainer.org/))
is the standard container runtime on HPC clusters. Unlike Docker, it does **not require
root access**, making it suitable for shared compute environments.

cwltool natively supports Singularity  when you pass the \`--singularity\` flag, it reads
the same \`DockerRequirement\` from each CWL tool definition but uses Singularity to pull
and run the container instead of Docker.

### Prerequisites

- [Singularity](https://sylabs.io/singularity/) or [Apptainer](https://apptainer.org/) (v3.0+)
- Python 3 with pip
- [cwltool](https://github.com/common-workflow-language/cwltool): \`pip install cwltool\`

### 1. Unzip and (optionally) pre-convert images

\`\`\`bash
unzip ${e}.crate.zip -d my_workflow
cd my_workflow

# Optional: convert Docker images to Singularity SIF files ahead of time.
# This is recommended on HPC compute nodes with limited internet access 
# run this on a login node, then transfer the .sif files.
# Without this, cwltool will auto-pull and convert images at runtime.
bash prefetch_images_singularity.sh
\`\`\`

### 2. Edit the Job File

Open \`workflows/${e}_job.yml\` and replace file path placeholders with your actual data paths.

### 3. Run

\`\`\`bash
cwltool --singularity --outdir ./results \\
  workflows/${e}.cwl \\
  workflows/${e}_job.yml
\`\`\`

Or use the provided run script:

\`\`\`bash
bash run_singularity.sh
\`\`\`

### Alternative: Using the Singularity Orchestration Container

You can also build an orchestration container (similar to the Docker approach):

\`\`\`bash
singularity build my-pipeline.sif Singularity.def
singularity run --bind /path/to/data:/data --bind /path/to/output:/output my-pipeline.sif
\`\`\`

---

## Tool Container Images

This workflow uses the following container images (hosted on Docker Hub).
Both Docker and Singularity can pull these  Singularity uses the \`docker://\` URI prefix.

\`\`\`bash
${s}
\`\`\`

## Key Concepts

| Term | Description |
|------|-------------|
| **Container image** | A packaged filesystem with an OS and software pre-installed  a "frozen environment" you can run anywhere |
| **Dockerfile / Singularity.def** | Text recipes for building container images. \`docker build\` and \`singularity build\` read these to produce images |
| **Volume mount** (\`-v\` / \`--bind\`) | Makes a directory on your host machine accessible inside the container |
| **cwltool** | The CWL execution engine  reads the workflow CWL and launches tool containers for each step |
| **Docker-in-Docker** | The orchestration container uses the Docker socket (\`/var/run/docker.sock\`) to launch tool containers |

## Troubleshooting

### Docker not found
Ensure Docker is running: \`docker --version\`

### Permission denied on Docker
Add your user to the docker group: \`sudo usermod -aG docker $USER\` (log out and back in)

### Validation errors
Validate the workflow: \`cwltool --validate workflows/${e}.cwl\`

### Singularity: FUSE/mount errors
On some HPC systems you may need \`--fakeroot\` or ask your admin to configure user namespaces.

### Singularity: image cache location
Set \`SINGULARITY_CACHEDIR\` to control where SIF files are stored:
\`export SINGULARITY_CACHEDIR=/scratch/$USER/.singularity\`

## RO-Crate Metadata

This bundle conforms to the [Workflow RO-Crate 1.0](https://w3id.org/workflowhub/workflow-ro-crate/1.0) profile.
The \`ro-crate-metadata.json\` file at the bundle root describes all workflow components
in JSON-LD format, enabling discovery and reuse through platforms like [WorkflowHub](https://workflowhub.eu/).

${i?`## Running with a BIDS Dataset

This workflow supports automatic input resolution from BIDS-formatted datasets.

### Prerequisites
- A BIDS-valid dataset (validated with https://bids-validator.readthedocs.io)
- Python 3.6+ (standard library only  no additional packages required)

### Usage

\`\`\`bash
# Docker-based execution:
./run.sh --bids /path/to/your/bids/dataset

# Direct cwltool execution:
python3 resolve_bids.py --bids-dir /path/to/bids --query bids_query.json --output job.yml
cwltool workflows/${e}.cwl job.yml
\`\`\`

### Manual Override
You can edit \`workflows/${e}_job.yml\` directly to specify custom file paths
without using the BIDS resolver.

`:""}## Resources

- [CWL User Guide](https://www.commonwl.org/user_guide/)
- [cwltool Documentation](https://github.com/common-workflow-language/cwltool)
- [niBuild GitHub](https://github.com/KunaalAgarwal/niBuild)
- [RO-Crate Specification](https://www.researchobject.org/ro-crate/)
`};function VT(){const{showError:e,showWarning:t}=ao(),n=r=>!r||typeof r!="string"?"main":r.trim().toLowerCase().replace(/\.\./g,"").replace(/[/\\]/g,"").replace(/[^a-z0-9_-]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,"").slice(0,50)||"main";return{generateWorkflow:async(r,s="",o=null)=>{if(typeof r!="function"){console.error("generateWorkflow expects a function");return}const a=r();if(!a||!a.nodes||a.nodes.length===0){t("Empty workflow  nothing to export.");return}const c=n(s);let u,d,f;try{const j=Kx(a),{wf:I,jobDefaults:$}=j;u=vr.dump(I,{noRefs:!0}),d=Vx(I,$),f=PT(I,$)}catch(j){e(`Workflow build failed: ${j.message}`);return}u=`#!/usr/bin/env cwl-runner

`+u;const m=new bT;m.file(`workflows/${c}.cwl`,u),m.file(`workflows/${c}_job.yml`,d);const v="/niBuild/".replace(/\/?$/,"/"),g=a.nodes.filter(j=>{var I;return!((I=j.data)!=null&&I.isDummy)}),x={},h=[];g.forEach(j=>{const I=tn(j.data.label);if(I!=null&&I.cwlPath&&(I!=null&&I.dockerImage)){const $=j.data.dockerVersion||"latest",S=x[I.cwlPath];S?(S.dockerVersion!==$&&S.dockerVersion!=="latest"&&$!=="latest"&&h.push(`${j.data.label}: "${S.dockerVersion}" vs "${$}"`),S.dockerVersion==="latest"&&$!=="latest"&&(x[I.cwlPath]={dockerImage:I.dockerImage,dockerVersion:$})):x[I.cwlPath]={dockerImage:I.dockerImage,dockerVersion:$}}}),h.length>0&&t(`Docker version conflict (first version used): ${h.join("; ")}`);const y=OT(x),_=o?o.flatMap(j=>(j.nodes||[]).filter(I=>{var $;return!(($=I.data)!=null&&$.isDummy)})):g,b=[...new Set(_.map(j=>{var I;return(I=tn(j.data.label))==null?void 0:I.cwlPath}).filter(Boolean))];try{const j=await Promise.all(b.map(async I=>{const $=await fetch(`${v}${I}`);if(!$.ok)throw new Error(`${I}: ${$.status} ${$.statusText}`);return{path:I,text:await $.text()}}));for(const{path:I,text:$}of j){let S=$;const F=x[I];if(F)try{const w=vr.load(S);w.hints||(w.hints={}),w.hints.DockerRequirement={dockerPull:`${F.dockerImage}:${F.dockerVersion}`},S=(S.startsWith("#!/")?S.split(`
`)[0]+`

`:"")+vr.dump(w,{noRefs:!0,lineWidth:-1})}catch(w){console.warn(`Could not parse CWL file ${I} for Docker injection:`,w.message)}m.file(I,S)}}catch(j){e(`Unable to fetch tool file: ${j.message}`);return}const N=a.nodes.filter(j=>{var I,$;return((I=j.data)==null?void 0:I.isBIDS)&&(($=j.data)==null?void 0:$.bidsSelections)}),T=N.length>0;if(T){const j={bids_version:N[0].data.bidsSelections.bidsVersion||"1.9.0",dataset_name:N[0].data.bidsSelections.datasetName||"",selections:N[0].data.bidsSelections.selections};m.file("bids_query.json",JSON.stringify(j,null,2));try{const I=await fetch(`${v}scripts/resolve_bids.py`);I.ok?m.file("resolve_bids.py",await I.text()):t("Could not fetch resolve_bids.py  BIDS resolver not included in bundle.")}catch(I){t(`Could not fetch resolve_bids.py: ${I.message}`)}}m.file("Dockerfile",BT(c,T)),m.file("run.sh",LT(c,f,T)),m.file("prefetch_images.sh",UT(y)),m.file("Singularity.def",HT(c)),m.file("run_singularity.sh",$T(c,f)),m.file("prefetch_images_singularity.sh",WT(y)),m.file("README.md",KT(c,f,y,T));const C={};for(const j of b){const I=_.find($=>{var S;return((S=tn($.data.label))==null?void 0:S.cwlPath)===j});if(I){const $=tn(I.data.label);C[j]={fullName:($==null?void 0:$.fullName)||I.data.label,docUrl:($==null?void 0:$.docUrl)||null}}}m.file("ro-crate-metadata.json",FT({workflowName:c,mainWorkflowPath:`workflows/${c}.cwl`,jobTemplatePath:`workflows/${c}_job.yml`,toolCWLPaths:b,toolMetadata:C,hasBIDS:T,dockerImages:y,singularityFiles:["Singularity.def","run_singularity.sh","prefetch_images_singularity.sh"]}));const P=await m.generateAsync({type:"blob"});kT.saveAs(P,`${c}.crate.zip`)}}}const Xx=e=>new Set(e.filter(t=>{var n;return t.isDummy||((n=t.data)==null?void 0:n.isDummy)}).map(t=>t.id));function GT(e,t){var m,v;const n=e.filter(g=>{var x;return!g.isDummy&&!((x=g.data)!=null&&x.isDummy)});if(n.length===0)return{firstNonDummy:null,lastNonDummy:null};new Set(n.map(g=>g.id));const i=Xx(e),r=t.filter(g=>!i.has(g.source)&&!i.has(g.target)),s=Object.fromEntries(n.map(g=>[g.id,0])),o=new Map(n.map(g=>[g.id,[]]));r.forEach(g=>{var x;s[g.target]!==void 0&&s[g.target]++,(x=o.get(g.source))==null||x.push(g.target)});const a=n.filter(g=>s[g.id]===0).map(g=>g.id),c=[];let u=0;for(;u<a.length;){const g=a[u++];c.push(g);for(const x of o.get(g)||[])--s[x]===0&&a.push(x)}const d=new Map(n.map(g=>[g.id,g])),f=d.get(c[0]),p=d.get(c[c.length-1]);return{firstNonDummy:(f==null?void 0:f.label)||((m=f==null?void 0:f.data)==null?void 0:m.label)||null,lastNonDummy:(p==null?void 0:p.label)||((v=p==null?void 0:p.data)==null?void 0:v.label)||null}}function Zx(e){return e.map(t=>{var n,i,r,s,o,a,c,u;return{id:t.id,label:((n=t.data)==null?void 0:n.label)||t.label||"",isDummy:((i=t.data)==null?void 0:i.isDummy)||t.isDummy||!1,parameters:((r=t.data)==null?void 0:r.parameters)||{},dockerVersion:((s=t.data)==null?void 0:s.dockerVersion)||"latest",scatterEnabled:((o=t.data)==null?void 0:o.scatterEnabled)||!1,linkMergeOverrides:((a=t.data)==null?void 0:a.linkMergeOverrides)||{},whenExpression:((c=t.data)==null?void 0:c.whenExpression)||"",expressions:((u=t.data)==null?void 0:u.expressions)||{},position:t.position||{x:0,y:0}}})}function Yu(e){return e.map(t=>{var n;return{id:t.id,source:t.source,target:t.target,data:{mappings:((n=t.data)==null?void 0:n.mappings)||[]}}})}function qT(e,t){if(!e||!t)return!1;const n=Zx(e.nodes||[]).map(({position:o,...a})=>a),i=t.nodes.map(({position:o,...a})=>a),r=Yu(e.edges||[]),s=Yu(t.edges||[]);return JSON.stringify(n)!==JSON.stringify(i)||JSON.stringify(r)!==JSON.stringify(s)}function YT(e,t){var r,s;const n=Xx(e),i=new Map(e.map(o=>[o.id,o]));for(const o of t){if(n.has(o.source)||n.has(o.target))continue;const a=i.get(o.source),c=i.get(o.target);if(!a||!c)continue;const u=a.label||((r=a.data)==null?void 0:r.label),d=c.label||((s=c.data)==null?void 0:s.label);if(u&&d&&Hx(u,d))return!0}return!1}function XT(){var w,B;const{workspaces:e,currentWorkspace:t,setCurrentWorkspace:n,addNewWorkspace:i,addNewWorkspaceWithData:r,clearCurrentWorkspace:s,updateCurrentWorkspaceItems:o,removeCurrentWorkspace:a,updateWorkspaceName:c,updateWorkflowName:u,removeWorkflowNodesFromAll:d}=xT(),f=((w=e[t])==null?void 0:w.name)||"",p=((B=e[t])==null?void 0:B.workflowName)||"",[m,v]=k.useState(null),{generateWorkflow:g}=VT(),{showError:x,showSuccess:h,showWarning:y,showInfo:_}=ao(),{saveWorkflow:b,deleteWorkflow:N,getNextDefaultName:T,customWorkflows:C}=ef();k.useEffect(()=>{const H=Object.values(Jd).map(W=>W.cwlPath).filter(Boolean);Ej(H).then(()=>Mj()).catch(W=>{console.error("[App] CWL preload failed:",W),x("Failed to load tool definitions. Some tools may not work correctly.")})},[]);const P=k.useCallback(H=>{N(H),d(H)},[N,d]),j=k.useCallback(()=>{if(!m){x("No workflow data available to save.");return}const H=m();if(!H||!H.nodes||H.nodes.length===0){x("Cannot save an empty workspace as a custom node.");return}if(H.nodes.filter(G=>{var Z;return!((Z=G.data)!=null&&Z.isDummy)}).length===0){x("Cannot save a workspace with only I/O nodes as a custom node.");return}const R=p.trim()||T(),D=Zx(H.nodes),U=Yu(H.edges),O=YT(D,U);O&&y("Workflow has connection warnings but will still be saved.");const A=GT(D,U),Y=b({name:R,nodes:D,edges:U,hasValidationWarnings:O,boundaryNodes:A});h(Y==="updated"?`Updated custom node "${R}"`:`Saved as custom node "${R}"`),p.trim()||u(R)},[m,p,b,T,x,h,y,u]),I=k.useCallback(H=>{var O,A;const W=e[t],R=(O=W==null?void 0:W.workflowName)==null?void 0:O.trim();if(R){const Y=C.find(G=>G.name===R);Y&&qT(W,Y)&&y(`Workflow "${R}" has unsaved changes`)}const D=e[H],U=(A=D==null?void 0:D.workflowName)==null?void 0:A.trim();U&&C.find(G=>G.name===U)&&_(`Editing custom workflow "${U}"`),n(H)},[e,t,C,n,y,_]),$=k.useCallback(H=>{const W=e.findIndex(U=>U.workflowName===H.name);if(W!==-1){I(W);return}const R=H.nodes.map(U=>({id:U.id,type:"default",data:{label:U.label,isDummy:U.isDummy,parameters:U.parameters||{},dockerVersion:U.dockerVersion||"latest",scatterEnabled:U.scatterEnabled||!1,linkMergeOverrides:U.linkMergeOverrides||{},whenExpression:U.whenExpression||"",expressions:U.expressions||{}},position:U.position||{x:0,y:0}})),D=H.edges.map(U=>({id:U.id,source:U.source,target:U.target,data:U.data||{mappings:[]}}));r({nodes:R,edges:D,workflowName:H.name}),_(`Editing "${H.name}" in new workspace`)},[r,_,e,I]),F=p.trim()&&C.some(H=>H.name===p.trim())?"Update Workflow":"Save Workflow";return l.jsxs("div",{className:"app-layout",children:[l.jsx(M1,{}),l.jsxs("div",{className:"toolbar-row",children:[l.jsx(qb,{onNewWorkspace:i,onClearWorkspace:s,onRemoveWorkspace:a,workspaceCount:e.length,onGenerateWorkflow:()=>g(m,f,e),onSaveWorkflow:j,saveButtonLabel:F}),l.jsxs("div",{className:"workflow-names-container",children:[l.jsx(lT,{name:f,onNameChange:c}),l.jsx(cT,{name:p,onNameChange:u,placeholder:T()})]})]}),l.jsxs("div",{className:"workflow-content",children:[l.jsxs("div",{className:"workflow-content-main",children:[l.jsx(U1,{onEditWorkflow:$,onDeleteWorkflow:P}),l.jsx(aT,{workflowItems:e[t],updateCurrentWorkspaceItems:o,onSetWorkflowData:v,currentWorkspaceIndex:t}),l.jsx(wT,{getWorkflowData:m})]}),l.jsx(H1,{current:t,workspaces:e,onChange:I})]}),l.jsx(uT,{})]})}Sc.createRoot(document.getElementById("root")).render(l.jsx(Vj,{children:l.jsx(L1,{children:l.jsx(XT,{})})}));
