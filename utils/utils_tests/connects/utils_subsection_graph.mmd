flowchart LR
  %% Utilities subsection nodes discovered from src/data/toolData.js
  AFNI_DATASET_OPERATIONS["AFNI / Dataset Operations"]
  AFNI_IMAGE_MATH["AFNI / Image Math"]
  AFNI_ROI_UTILITIES["AFNI / ROI Utilities"]
  AFNI_WARP_UTILITIES["AFNI / Warp Utilities"]
  ANTS_IMAGE_OPERATIONS["ANTs / Image Operations"]
  ANTS_LABEL_ANALYSIS["ANTs / Label Analysis"]
  ANTS_PREPROCESSING_UTILITIES["ANTs / Preprocessing Utilities"]
  ANTS_TRANSFORM_UTILITIES["ANTs / Transform Utilities"]
  FSL_CLUSTERING["FSL / Clustering"]
  FSL_IMAGE_MATH["FSL / Image Math"]
  FSL_VOLUME_OPERATIONS["FSL / Volume Operations"]
  FSL_WARP_UTILITIES["FSL / Warp Utilities"]
  FREESURFER_FORMAT_CONVERSION["FreeSurfer / Format Conversion"]

  %% Intra-subsection self-loops (allow chaining within multi-tool subsections)
  AFNI_DATASET_OPERATIONS --> AFNI_DATASET_OPERATIONS
  AFNI_IMAGE_MATH --> AFNI_IMAGE_MATH
  AFNI_ROI_UTILITIES --> AFNI_ROI_UTILITIES
  AFNI_WARP_UTILITIES --> AFNI_WARP_UTILITIES
  ANTS_IMAGE_OPERATIONS --> ANTS_IMAGE_OPERATIONS
  ANTS_LABEL_ANALYSIS --> ANTS_LABEL_ANALYSIS
  ANTS_PREPROCESSING_UTILITIES --> ANTS_PREPROCESSING_UTILITIES
  FSL_IMAGE_MATH --> FSL_IMAGE_MATH
  FSL_VOLUME_OPERATIONS --> FSL_VOLUME_OPERATIONS
  FSL_WARP_UTILITIES --> FSL_WARP_UTILITIES

  %% Directed subsection edges inferred from utility workflow roles

  %% From AFNI / Dataset Operations
  AFNI_DATASET_OPERATIONS --> AFNI_IMAGE_MATH
  AFNI_DATASET_OPERATIONS --> AFNI_WARP_UTILITIES
  AFNI_DATASET_OPERATIONS --> ANTS_IMAGE_OPERATIONS
  AFNI_DATASET_OPERATIONS --> ANTS_TRANSFORM_UTILITIES
  AFNI_DATASET_OPERATIONS --> FSL_IMAGE_MATH
  AFNI_DATASET_OPERATIONS --> FSL_WARP_UTILITIES
  AFNI_DATASET_OPERATIONS --> AFNI_ROI_UTILITIES
  AFNI_DATASET_OPERATIONS --> FSL_CLUSTERING

  %% From AFNI / Image Math
  AFNI_IMAGE_MATH --> AFNI_ROI_UTILITIES
  AFNI_IMAGE_MATH --> AFNI_WARP_UTILITIES
  AFNI_IMAGE_MATH --> ANTS_LABEL_ANALYSIS
  AFNI_IMAGE_MATH --> ANTS_TRANSFORM_UTILITIES
  AFNI_IMAGE_MATH --> FSL_CLUSTERING
  AFNI_IMAGE_MATH --> FSL_WARP_UTILITIES

  %% From AFNI / ROI Utilities (3dUndump, 3dresample, 3dfractionize produce images)
  AFNI_ROI_UTILITIES --> FSL_CLUSTERING
  AFNI_ROI_UTILITIES --> AFNI_IMAGE_MATH
  AFNI_ROI_UTILITIES --> AFNI_WARP_UTILITIES
  AFNI_ROI_UTILITIES --> ANTS_IMAGE_OPERATIONS
  AFNI_ROI_UTILITIES --> ANTS_TRANSFORM_UTILITIES
  AFNI_ROI_UTILITIES --> FSL_IMAGE_MATH
  AFNI_ROI_UTILITIES --> FSL_WARP_UTILITIES

  %% From AFNI / Warp Utilities
  AFNI_WARP_UTILITIES --> AFNI_ROI_UTILITIES
  AFNI_WARP_UTILITIES --> AFNI_IMAGE_MATH
  AFNI_WARP_UTILITIES --> ANTS_LABEL_ANALYSIS
  AFNI_WARP_UTILITIES --> FSL_CLUSTERING

  %% From ANTs / Image Operations
  ANTS_IMAGE_OPERATIONS --> AFNI_ROI_UTILITIES
  ANTS_IMAGE_OPERATIONS --> AFNI_WARP_UTILITIES
  ANTS_IMAGE_OPERATIONS --> ANTS_LABEL_ANALYSIS
  ANTS_IMAGE_OPERATIONS --> ANTS_TRANSFORM_UTILITIES
  ANTS_IMAGE_OPERATIONS --> FSL_CLUSTERING
  ANTS_IMAGE_OPERATIONS --> FSL_WARP_UTILITIES

  %% From ANTs / Label Analysis (antsJointLabelFusion produces labeled NIfTI)
  ANTS_LABEL_ANALYSIS --> FSL_CLUSTERING
  ANTS_LABEL_ANALYSIS --> ANTS_IMAGE_OPERATIONS
  ANTS_LABEL_ANALYSIS --> ANTS_TRANSFORM_UTILITIES
  ANTS_LABEL_ANALYSIS --> FSL_IMAGE_MATH
  ANTS_LABEL_ANALYSIS --> FSL_WARP_UTILITIES
  ANTS_LABEL_ANALYSIS --> AFNI_IMAGE_MATH
  ANTS_LABEL_ANALYSIS --> AFNI_WARP_UTILITIES
  ANTS_LABEL_ANALYSIS --> AFNI_ROI_UTILITIES

  %% From ANTs / Preprocessing Utilities
  ANTS_PREPROCESSING_UTILITIES --> AFNI_DATASET_OPERATIONS
  ANTS_PREPROCESSING_UTILITIES --> AFNI_IMAGE_MATH
  ANTS_PREPROCESSING_UTILITIES --> AFNI_WARP_UTILITIES
  ANTS_PREPROCESSING_UTILITIES --> ANTS_IMAGE_OPERATIONS
  ANTS_PREPROCESSING_UTILITIES --> ANTS_TRANSFORM_UTILITIES
  ANTS_PREPROCESSING_UTILITIES --> FSL_IMAGE_MATH
  ANTS_PREPROCESSING_UTILITIES --> FSL_VOLUME_OPERATIONS
  ANTS_PREPROCESSING_UTILITIES --> FSL_WARP_UTILITIES
  ANTS_PREPROCESSING_UTILITIES --> FREESURFER_FORMAT_CONVERSION

  %% From ANTs / Transform Utilities
  ANTS_TRANSFORM_UTILITIES --> AFNI_ROI_UTILITIES
  ANTS_TRANSFORM_UTILITIES --> ANTS_IMAGE_OPERATIONS
  ANTS_TRANSFORM_UTILITIES --> ANTS_LABEL_ANALYSIS
  ANTS_TRANSFORM_UTILITIES --> FSL_CLUSTERING

  %% From FSL / Image Math
  FSL_IMAGE_MATH --> AFNI_ROI_UTILITIES
  FSL_IMAGE_MATH --> AFNI_WARP_UTILITIES
  FSL_IMAGE_MATH --> ANTS_LABEL_ANALYSIS
  FSL_IMAGE_MATH --> ANTS_TRANSFORM_UTILITIES
  FSL_IMAGE_MATH --> FSL_CLUSTERING
  FSL_IMAGE_MATH --> FSL_VOLUME_OPERATIONS
  FSL_IMAGE_MATH --> FSL_WARP_UTILITIES

  %% From FSL / Volume Operations
  FSL_VOLUME_OPERATIONS --> AFNI_IMAGE_MATH
  FSL_VOLUME_OPERATIONS --> AFNI_WARP_UTILITIES
  FSL_VOLUME_OPERATIONS --> ANTS_IMAGE_OPERATIONS
  FSL_VOLUME_OPERATIONS --> ANTS_TRANSFORM_UTILITIES
  FSL_VOLUME_OPERATIONS --> FSL_CLUSTERING
  FSL_VOLUME_OPERATIONS --> FSL_IMAGE_MATH
  FSL_VOLUME_OPERATIONS --> FSL_WARP_UTILITIES

  %% From FSL / Warp Utilities
  FSL_WARP_UTILITIES --> AFNI_ROI_UTILITIES
  FSL_WARP_UTILITIES --> FSL_IMAGE_MATH
  FSL_WARP_UTILITIES --> ANTS_LABEL_ANALYSIS
  FSL_WARP_UTILITIES --> FSL_CLUSTERING

  %% From FSL / Clustering (cluster --oindex, --othresh, --osize produce NIfTI images)
  FSL_CLUSTERING --> FSL_IMAGE_MATH
  FSL_CLUSTERING --> AFNI_IMAGE_MATH
  FSL_CLUSTERING --> ANTS_IMAGE_OPERATIONS
  FSL_CLUSTERING --> ANTS_TRANSFORM_UTILITIES
  FSL_CLUSTERING --> AFNI_WARP_UTILITIES
  FSL_CLUSTERING --> FSL_WARP_UTILITIES

  %% From FreeSurfer / Format Conversion
  FREESURFER_FORMAT_CONVERSION --> AFNI_IMAGE_MATH
  FREESURFER_FORMAT_CONVERSION --> AFNI_WARP_UTILITIES
  FREESURFER_FORMAT_CONVERSION --> ANTS_IMAGE_OPERATIONS
  FREESURFER_FORMAT_CONVERSION --> ANTS_TRANSFORM_UTILITIES
  FREESURFER_FORMAT_CONVERSION --> FSL_IMAGE_MATH
  FREESURFER_FORMAT_CONVERSION --> FSL_WARP_UTILITIES
  FREESURFER_FORMAT_CONVERSION --> AFNI_DATASET_OPERATIONS
  FREESURFER_FORMAT_CONVERSION --> AFNI_ROI_UTILITIES
  FREESURFER_FORMAT_CONVERSION --> FSL_VOLUME_OPERATIONS
  FREESURFER_FORMAT_CONVERSION --> FSL_CLUSTERING
  FREESURFER_FORMAT_CONVERSION --> ANTS_LABEL_ANALYSIS
